;/*FB_PKG_DELIM*/

__d("EventCometInterestedRootQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="8208013829290541"}),null);
__d("MWChatMediaViewerControls.react",["fbt","ix","CometRow.react","CometRowItem.react","FDSTooltip.react","Int64Hooks","JSResourceForInteraction","LSFactory","LSIntEnum","LSMessagePointQueryStoredProcedure","LSVerifyThreadRowExistsStoredProcedure","MWChatMessageId","MWLSForwardMessage","ODS","ReQL","ReQLSuspense","TetraCircleButton.react","emptyFunction","fbicon","gkx","justknobx","promiseDone","react","useMWChatForward","useMWV2ForwardMessage","useMWXLazyDialog","useReStore"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m,n=m||(m=d("react")),o=m,p=o.useCallback,q=o.useState,r=c("JSResourceForInteraction")("MWChatMediaViewerAttachmentInfoDialog.react").__setRef("MWChatMediaViewerControls.react"),s={iconHovered:{backgroundColor:"x9lwmrp",$$css:!0}},t=h._("__JHASH__yVgFxyhzJWR__JHASH__");h._("__JHASH__ZATDQpNzCxD__JHASH__");var u=h._("__JHASH__GvPr2MwluxY__JHASH__"),v=h._("__JHASH__6SgahmF3MRz__JHASH__");function w(a,b){var e=(j||(j=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){return b!=null?d("ReQL").fromTableAscending(e.tables.threads,["threadType"]).getKeyRange(b).map(function(a){a=a.threadType;return a}):d("ReQL").empty()},[e,b],f.id+":83"),h=d("ReQLSuspense").useFirst(function(){return a!=null?d("ReQL").fromTableAscending(e.tables.messages.index("messageId")).getKeyRange(a):d("ReQL").empty()},[e,a],f.id+":95");d("Int64Hooks").useEffectInt64(function(){if(a==null||b==null)return;if(g==null){c("promiseDone")(e.runInTransaction(function(a){return c("LSVerifyThreadRowExistsStoredProcedure")(c("LSFactory")(a),{syncGroup:(k||(k=d("LSIntEnum"))).ofNumber(1),threadKey:b})},"readwrite"));return}h==null&&c("promiseDone")(e.runInTransaction(function(d){return c("LSMessagePointQueryStoredProcedure")(c("LSFactory")(d),{messageId:a,threadKey:b,threadType:g})},"readwrite"))},[e,h,a,g,b]);return[h,g]}var x=c("justknobx")._("1897")?b:e;function a(a){var b=a.attachmentID,e=a.canForward;e=e===void 0?!0:e;var f=a.downloadLink,g=a.isCrossTransportForwardEnabled;g=g===void 0?!1:g;var h=a.isSecureForwardEnabled;h=h===void 0?!1:h;var j=a.messageID;a=q(!1);var k=a[0],l=a[1];a=q(!1);a[0];a[1];a=q(!1);var m=a[0],o=a[1];a=c("useMWXLazyDialog")(r);var w=a[0],y=p(function(){w({attachmentID:b,messageID:j})},[w,j,b]);return n.jsxs(c("CometRow.react"),{paddingTop:0,spacing:8,children:[f!=null?n.jsx(c("CometRowItem.react"),{children:n.jsx(c("FDSTooltip.react"),{align:"middle",tooltip:t,children:n.jsx(c("TetraCircleButton.react"),{color:"white",icon:k?d("fbicon")._(i("1433212"),20):d("fbicon")._(i("1441392"),20),label:t,linkProps:{download:!0,target:"_blank",url:f},onHoverIn:function(a){return l(!0)},onHoverOut:function(a){return l(!1)},overlayHoveredStyle:s.iconHovered,size:36,type:"deemphasized"})})}):null,e===!0?n.jsx(c("CometRowItem.react"),{children:n.jsx(c("FDSTooltip.react"),{align:"middle",tooltip:u,children:n.jsx(x,{attachmentID:b,isCrossTransportForwardEnabled:g,isSecureForwardEnabled:h,messageID:j})})}):null,null,c("gkx")("24092")?n.jsx(c("CometRowItem.react"),{children:n.jsx(c("FDSTooltip.react"),{align:"middle",tooltip:v,children:n.jsx(c("TetraCircleButton.react"),{color:"white",icon:m?d("fbicon")._(i("479177"),20):d("fbicon")._(i("479180"),20),label:v,onHoverIn:function(a){return o(!0)},onHoverOut:function(a){return o(!1)},onPress:function(a){return y()},overlayHoveredStyle:s.iconHovered,size:36,type:"deemphasized"})})}):null]})}a.displayName=a.name+" [from "+f.id+"]";function y(a){var b=a.isCrossTransportForwardEnabled;b=b===void 0?!1:b;var e=a.isSecureForwardEnabled;e=e===void 0?!1:e;var f=a.messageID;a=a.onForwardSend;e=e?"secure":b?"cross_transport":"open_";var g=c("useMWChatForward")({forwardDialogType:e,messageID:f,onClose:c("emptyFunction"),onSend:a}),h=function(){(l||(l=d("ODS"))).bumpEntityKey(3185,"mwchat_media_viewer","forward"),g&&g.onClick()};return n.jsx(c("TetraCircleButton.react"),{color:"white",icon:d("fbicon")._(i("1433236"),20),label:u,onPress:function(a){return h()},overlayHoveredStyle:s.iconHovered,size:36,testid:void 0,type:"deemphasized"})}y.displayName=y.name+" [from "+f.id+"]";function b(a){var b=a.attachmentID,c=a.isCrossTransportForwardEnabled;c=c===void 0?!1:c;var e=a.isSecureForwardEnabled;e=e===void 0?!1:e;a=a.messageID;var f=d("MWChatMessageId").getMessageId(a),g=d("MWLSForwardMessage").useForwardAttachment(),h=p(function(a){g(a,b,f)},[b,g,f]);return n.jsx(y,{isCrossTransportForwardEnabled:c,isSecureForwardEnabled:e,messageID:a,onForwardSend:h})}b.displayName=b.name+" [from "+f.id+"]";function e(a){var b=a.attachmentID,c=a.isCrossTransportForwardEnabled;c=c===void 0?!1:c;var e=a.isSecureForwardEnabled;e=e===void 0?!1:e;a=a.messageID;var f=d("MWChatMessageId").getMessageId(a),g=d("MWChatMessageId").getThreadId(a);f=w(f,g);g=f[0];f=f[1];return g==null||f==null?null:n.jsx(z,{attachmentID:b,isCrossTransportForwardEnabled:c,isSecureForwardEnabled:e,message:g,messageID:a,messageThreadType:f})}e.displayName=e.name+" [from "+f.id+"]";function z(a){var b=a.attachmentID,e=a.isCrossTransportForwardEnabled;e=e===void 0?!1:e;var f=a.isSecureForwardEnabled;f=f===void 0?!1:f;var g=a.message,h=a.messageID;a=a.messageThreadType;var i=d("useMWV2ForwardMessage").useMWV2ForwardMessage(g,a,b);g=p(function(a){return c("promiseDone")(i(a))},[i]);return n.jsx(y,{isCrossTransportForwardEnabled:e,isSecureForwardEnabled:f,messageID:h,onForwardSend:g})}z.displayName=z.name+" [from "+f.id+"]";g["default"]=a}),226);