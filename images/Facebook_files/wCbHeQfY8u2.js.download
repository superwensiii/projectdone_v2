;/*FB_PKG_DELIM*/

__d("AdsBrowserExtensionErrorUtils",["isFalsey"],(function(a,b,c,d,e,f,g){"use strict";var h="chrome-extension://";function a(a){a=a.split(h);a=a[a.length-1];return a.split("/")[0]}function b(a){return!c("isFalsey")(a)&&a.indexOf(h)>-1}g.CHROME_EXTENSION=h;g.extractExtensionID=a;g.isBrowserExtensionError=b}),98);
__d("LaminarDebugger",["EventEmitter"],(function(a,b,c,d,e,f,g){"use strict";var h="DEBUGGER";a=function(){function a(){this.$1=[],this.$6={},this.$3=100,this.$2=new Array(this.$3),this.$4=new(c("EventEmitter"))(),this.$5=!1}var b=a.prototype;b.getDebuggerActionDispatchQueue=function(){return this.$2};b.addSnapshotToDebuggerActionDispatchQueue=function(a){this.$6=a.newState,this.$4.emit(h,a),this.$2.push(a),this.$2.shift()};b.updateCaptureRate=function(a){a>0&&(this.$2.length+=a-this.$3,this.$3=a)};b.addDebugListener=function(a){return this.$4.addListener(h,a)};b.removeAllDebugListeners=function(){this.$4.removeAllListeners(h)};b.getPauseActionDispatches=function(){return this.$5};b.getAlteredStateSnapshot=function(){return this.$6};b.setPauseActionDispatches=function(a){this.$5=a};b.enqueueActionToDispatch=function(a,b){this.$1.push([a,b])};b.dequeueActionToDispatch=function(){return this.$1.shift()};b.clearActionDispatchQueue=function(){this.$1=[]};b.isActionDispatchQueueEmpty=function(){return this.$1.length===0};return a}();g["default"]=a}),98);
__d("AdsDataAtomLaminarDebugger",["LaminarDebugger"],(function(a,b,c,d,e,f,g){"use strict";a=new(c("LaminarDebugger"))();g["default"]=a}),98);
__d("AdsSpeedConfig",[],(function(a,b,c,d,e,f){"use strict";function a(){return!1}f.isDevToolsTimingEnabled=a}),66);
__d("AdsDataAtomPerformanceUtil",["AdsSpeedConfig","URI","UserTimingUtils","performanceNow","requestAnimationFrameAcrossTransitions","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=new(h||(h=c("URI")))(window.location.href).getQueryData().dispatchereventtimer,k=new h(window.location.href).getQueryData().logdispatchtimes;a=function(){function a(){var a=this;this.$1={};this.$2={};this.$3={};this.startPerformanceMeasurements=function(b,e){if(b==null)return;b=b.type;j&&console.time&&console.time(b);k&&(a.$3[b]=(i||(i=c("performanceNow")))());e&&d("UserTimingUtils").measureStart("AdsDataAtom "+b)};this.endPerformanceMeasurements=function(b,e){if(b==null)return;var f=b.type;j&&console.timeEnd&&console.timeEnd(f);if(k){var g=a.$3[f];delete a.$3[f];a.$1[f]||(a.$1[f]={count:0,totalFluxTime:0,totalTime:0});a.$1[f].count+=1;a.$1[f].totalFluxTime+=(i||(i=c("performanceNow")))()-g;a.$5(f,function(){a.$1[f].totalTime+=(i||(i=c("performanceNow")))()-g})}e&&d("UserTimingUtils").measureEnd("\u221e "+f,"AdsDataAtom "+f)};this.onDispatchStart=function(b){a.startPerformanceMeasurements(b,a.$4)};this.onDispatchEnd=function(b){a.endPerformanceMeasurements(b,a.$4)};this.$4=d("AdsSpeedConfig").isDevToolsTimingEnabled()}var b=a.prototype;b.$5=function(a,b){var d=this;if(this.$2[a])return;this.$2[a]=1;c("requestAnimationFrameAcrossTransitions")(function(){c("setTimeoutAcrossTransitions")(function(){delete d.$2[a],b()})})};b.resetTiming=function(){this.$1={}};b.getTiming=function(){return this.$1};b.outputTimingTable=function(){var a=this;console.table(Object.keys(this.$1).map(function(b){return babelHelpers["extends"]({action:b},a.$1[b])}))};return a}();b=new a();g["default"]=b}),98);
__d("AdsFluxContextInstrumentation",[],(function(a,b,c,d,e,f){"use strict";var g=null;function a(a){g=a}function b(a){}function c(){return g}f.actionStart=a;f.actionEnd=b;f.getLastAction=c}),66);
__d("AdsInterfacesLogger",["invariant"],(function(a,b,c,d,e,f,g,h){"use strict";var i="primary",j="secondary",k="ads_interfaces_logger_primary_app",l="ads_interfaces_logger_secondary_app",m=(a={},a[i]={data:[],isRegistered:!1},a[j]={data:[],isRegistered:!1},a),n=new Map(),o=new Set();b=function(){a.__reset=function(){m[i]={data:[],isRegistered:!1},n.has(k)&&n["delete"](k),m[j]={data:[],isRegistered:!1},n.has(l)&&n["delete"](l),o=new Set()};a.getPath=function(a){return a===i?k:l};a.log=function(b,c){c===void 0&&(c=i);c===j&&!m[c].isRegistered&&m[i].isRegistered&&(c=i);if(!m[c].isRegistered){m[c].data.push(b);return}c=n.get(this.getPath(c));c||h(0,2975);c instanceof a||h(0,2976);c.__log(b)};a.logOnce=function(b,c){c===void 0&&(c=i);var d=JSON.stringify(b);if(o.has(d))return;a.log(b,c);o.add(d)};a.get=function(a){a===void 0&&(a=i);a===j&&!m[a].isRegistered&&m[i].isRegistered&&(a=i);a=n.get(this.getPath(a));return a};function a(a,b){this.__log=a.log,this.__interfaceID=b}var b=a.prototype;b.getInterfaceID=function(){return this.__interfaceID};b.register=function(a){n.set(this.constructor.getPath(a),this),m[a].isRegistered=!0,m[a].data.length>0&&(m[a].data.forEach(this.__log),m[a].data=[]),a===i&&m[j].data.length>0&&(m[j].data.forEach(this.__log),m[j].data=[])};b.unregister=function(a){n["delete"](this.constructor.getPath(a)),m[a].isRegistered=!1};return a}();b.LOG_TYPE_PRIMARY_APP=i;b.LOG_TYPE_SECONDARY_APP=j;g["default"]=b}),98);
__d("PreloadingEvent.flow",["$InternalEnum"],(function(a,b,c,d,e,f){"use strict";a=b("$InternalEnum").Mirrored(["ADS_INTERFACES_PRELOADING_SUCCESS","ADS_INTERFACES_PRELOADING_ISSUE"]);c=b("$InternalEnum").Mirrored(["UNNECESSARY_SERVER_PRELOADING","ERROR_LOADING_PRELOADED_DATA","SERVER_DIDNT_SEND_ALL_NECESSARY_DATA","SERVER_DIDNT_BEAT_JS_EXECUTION","SERVER_DIDNT_BEAT_API_START","SERVER_DIDNT_BEAT_API","SERVER_DISABLED_DIDNT_SEND_DATA","PRELOAD_HIT","UNUSED_PRELOADED_DATA"]);f.PreloadingEventName=a;f.PreloadingEventType=c}),66);
__d("AdsInterfacesLoggerUtils",["AdsBrowserExtensionErrorUtils","AdsFluxContextInstrumentation","AdsInterfacesLogger","ErrorNormalizeUtils","ErrorPubSub","PreloadingEvent.flow","getErrorSafe","requireWeak"],(function(a,b,c,d,e,f,g){"use strict";var h;({defaultJSErrorHandler:function(){}});c("requireWeak")("ErrorLogging",function(a){return a});function i(a,b){var e;e=(e=c("ErrorNormalizeUtils").ifNormalizedError(a))!=null?e:c("ErrorNormalizeUtils").normalizeError(c("getErrorSafe")(a));try{JSON.stringify(b)}catch(a){b=null}a=babelHelpers["extends"]({stack_trace:e.stack,action_type_on_error:d("AdsFluxContextInstrumentation").getLastAction()},b,{normalized_error:e});a.error_name=e.name;a.message=e.message;a.meta_message=e.messageWithParams?e.messageWithParams[0]:"-";a.error_line=e.line;a.error_script=e.script;return a}function j(a,b,e){e=i(a,e);if(d("AdsBrowserExtensionErrorUtils").isBrowserExtensionError(a.stack)||d("AdsBrowserExtensionErrorUtils").isBrowserExtensionError(e.error_script))return;if(a.message!=null&&a.message.includes("ResizeObserver loop limit exceeded"))return;c("AdsInterfacesLogger").log({eventName:b,eventCategory:"errors",data:e},c("AdsInterfacesLogger").LOG_TYPE_PRIMARY_APP)}function a(a,b){c("AdsInterfacesLogger").log({eventName:d("PreloadingEvent.flow").PreloadingEventName.getName(b),eventCategory:"preloading",data:a},c("AdsInterfacesLogger").LOG_TYPE_PRIMARY_APP)}function b(a,b){j(a,"ADS_INTERFACES_ERROR_EXCEPTION",b)}function e(a,b){j(a,"ADS_INTERFACES_CRITICAL_EXCEPTION",b)}function k(a,b){j(a,"ADS_INTERFACES_ERROR_FATAL",b)}function f(a,b){j(a,"ADS_INTERFACES_USER_ERROR",b)}(h||(h=c("ErrorPubSub"))).addListener(function(a,b){b==="ONERROR"&&!a.message.toLowerCase().startsWith("script error")&&k(a)});g.constructLogDataForError=i;g.logPreloading=a;g.logException=b;g.logCriticalException=e;g.logFatal=k;g.logUserError=f}),98);
__d("AdsPageTransitionActionFlux",[],(function(a,b,c,d,e,f){"use strict";e.exports={actionType:"PAGE_TRANSITION"}}),null);
__d("AdsDataAtomInstrumentation",[],(function(a,b,c,d,e,f){"use strict";var g=[];function a(a){g.push(a)}function b(a,b){g.forEach(function(c){return c.actionStart(a,b)})}function c(a,b){g.forEach(function(c){return c.actionEnd&&c.actionEnd(a,b)})}function d(a,b){g.forEach(function(c){return c.dispatchCallbacksStart&&c.dispatchCallbacksStart(a,b)})}function e(a,b){g.forEach(function(c){return c.dispatchCallbacksEnd&&c.dispatchCallbacksEnd(a,b)})}function h(){var a=[];g.forEach(function(b){b=b.measureDispatchCallbacks?b.measureDispatchCallbacks():null;b&&a.push(b)});return a.length?function(b){a.forEach(function(a){return a(b)})}:null}f.addInstrumentation=a;f.onActionStart=b;f.onActionEnd=c;f.onDispatchCallbacksStart=d;f.onDispatchCallbacksEnd=e;f.onMeasureDispatchCallbacks=h}),66);
__d("AdsDataDispatchUtils",[],(function(a,b,c,d,e,f){"use strict";var g=Object.freeze([]);function h(a,b){return b.isDisabled||a.has(b.provider)?a:a.set(b.provider,b)}function a(a,b,c,d,e,f){return babelHelpers["extends"]({},d,{type:a,_dataReducers:b,_dataLoggers:c,_dispatchConvention:e,_dispatchModuleID:f==null?void 0:f.moduleID})}function b(a){return a._dataReducers?a._dataReducers:g}function c(a){return a._dataLoggers?a._dataLoggers:g}function d(a,b){return Array.from(b.reduce(h,a.reduce(h,new Map())).values())}function e(a){return a._dispatchConvention==="laminar"}function i(a){return a.actionType}f.mergeParameters=a;f.getDataReducers=b;f.getDataLoggers=c;f.mergeReducers=d;f.shouldSkipLegacyFluxDispatch=e;f.getActionType=i}),66);
__d("AdsDispatchCycle",["invariant","AdsDataAtomInstrumentation"],(function(a,b,c,d,e,f,g,h){"use strict";var i=((a=window.performance)==null?void 0:a.now)!=null?function(){return window.performance.now()}:function(){return Date.now()},j=Object.freeze({PENDING:"PENDING",STARTED:"STARTED",COMPLETE:"COMPLETE"});b=function(){function a(a,b,c,e){var f=this;this.$8=null;this.$9=[];this.$1=[];this.$2={};this.$5={};this.$3=e;this.$4=c;e=d("AdsDataAtomInstrumentation").onMeasureDispatchCallbacks();e&&(this.$7=e,this.$8=[]);a.forEach(function(a,b){return f.register(b,a)});this.$6=b}var b=a.prototype;b.start=function(){for(var a=this.$1,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;this.$10(d)}this.$8&&this.$7&&this.$7({entries:this.$8,actionType:this.$4})};b.waitFor=function(a){for(var a=a,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;this.$10(d)}};b.register=function(a,b){this.$1.push(a),this.$2[a]=b,this.$5[a]=j.PENDING};b.getPayload=function(){return this.$6};b.$10=function(a){var b=this;switch(this.$5[a]){case j.COMPLETE:break;case j.PENDING:this.$5[a]=j.STARTED;this.$9.push(a);var c=this.$7?i():null;this.$2[a](this.$6);if(this.$8&&c!=null){this.$8.push({start:c,end:i(),name:(c=this.$3[a])!=null?c:"unknown"})}this.$9.pop();this.$5[a]=j.COMPLETE;break;case j.STARTED:h(0,15659,a,this.$3[a],this.$4,this.$9.map(function(a){return b.$3[a]}).join(", "));default:break}};return a}();g["default"]=b}),98);
__d("DataAtomBase",["invariant","AdsDataAtomInstrumentation","AdsDataDispatchUtils","AdsDispatchCycle","EventEmitter","FBLogger"],(function(a,b,c,d,e,f,g,h){"use strict";var i=typeof jest!=="undefined";a=function(){function a(a,b,d){var e=this;this.registerDependency=function(a,b){e.$6[b]==null&&(e.$6[b]=new Set()),e.$6[b].add(a)};this.$1={};this.__callbacksNames={};this.$2={};this.$9={};this.$3={};this.$5={};this.$6={};this.$7={};this.$8={};this.__dispatchTokenActionTypes={};this.$10=1;this.$11=null;this.$12=new Set();this.__dispatchSeqNumber=0;this.__catchErrors=!i;this.$13=[];this.__laminarAlteredState={};this.$14=new(c("EventEmitter"))();this.$15=[];this.__previousLegacyFluxReducerProviderState={};this.$16=b;this.$18=new Set();this.$4={};this.$19=a!=null?a:[];this.$17=d}var b=a.prototype;b.register=function(a,b,c,d){var e=this;this.$19.forEach(function(c){c.wrapCallback!=null&&(a=c.wrapCallback(a,b))});var f=this.$20(b),g=this.__invokeCallback.bind(this,f,a);this.$1[f]=g;this.__callbacksNames[f]=d;if(c==null)this.$4[f]=g;else{d=c.getActionTypes();d!=null&&Array.isArray(d)?(d.forEach(function(a){e.$2[a]||(e.$2[a]={},e.$9[a]={}),e.$2[a][f]=g,c!=null&&c.__setAsUnchanged&&(e.$9[a][f]=c.__setAsUnchanged.bind(c))}),this.__dispatchTokenActionTypes[f]=d):this.$3[f]=g;this.$21(c,f);this.$7[f]=new Set(c.__getActionTypes());this.$7[f].forEach(function(a){e.$8[a]||(e.$8[a]=new Set()),e.$8[a].add(f)})}this.$11&&this.$11.register(f,g);this.$19.forEach(function(a){a.onRegistered!=null&&a.onRegistered(b,f,c)});return f};b.registerContainer=function(a,b){b=this.$20(b);a=this.__invokeCallback.bind(this,b,a);this.$5[b]=a;return b};b.unregister=function(a){var b=this;this.$1[a]||this.$5[a]||h(0,1331,a);delete this.$1[a];delete this.$4[a];delete this.$5[a];var c=this.__dispatchTokenActionTypes[a];c?(c.forEach(function(c){delete b.$2[c][a],delete b.$9[c][a]}),delete this.__dispatchTokenActionTypes[a]):delete this.$3[a];this.$6[a]&&this.$6[a].size;delete this.$6[a];this.$19.forEach(function(b){b.onUnregistered&&b.onUnregistered(a)})};b.$21=function(a,b){if(typeof a.__getDependencyStores!=="function")return;a=a.__getDependencyStores();if(!a)return;for(var c=0;c<a.length;c++){var d=a[c]&&a[c].getDispatchToken&&a[c].getDispatchToken();if(d==null)continue;var e=this.registerDependency;e&&e(b,d)}};b.waitFor=function(a){this.$19.forEach(function(b){b.doWaitFor!=null&&b.doWaitFor(a)});var b=this.$11;b||h(0,1332);b.waitFor(a);this.$19.forEach(function(b){b.didWaitFor!=null&&b.didWaitFor(a)})};b.isDispatching=function(){return!!this.$11};b.__invokeCallback=function(a,b,d){if(this.__catchErrors)try{b(d)}catch(b){var e;e=(e=this.__callbacksNames[a])!=null?e:a;a=d&&d.action&&d.action.type;c("FBLogger")("laminar").catching(b).warn("Error in DataAtom callback (Store: %s, Action: %s)",e,a)}else b(d)};b.$20=function(a){return(a?a+"_":"ID_")+this.$10++};b.$22=function(a){a=a.action;if(a){var b=a.type||a.actionType;a.type=b;a.actionType=b}};b.$23=function(a,b,c){if(b!==c){this.__laminarAlteredState=babelHelpers["extends"]({},this.__laminarAlteredState,(b={},b[a]=c,b));this.$12.add(a);this.$14.emit(a)}};b.$24=function(a,b,c){var d=this;b!==c&&a.forEach(function(a){var b=d.__laminarAlteredState[a.provider],e=a.reduce(c);d.$23(a.provider,b,e)})};b.$25=function(a,b,c){var d=this;this.__invokeCallback(a.provider,function(c){c=c.action;b!=null&&(d.$11!=null||h(0,6393,a.provider),d.$11.waitFor(b));var e=d.__laminarAlteredState[a.provider];c=a.reduce(d.__laminarAlteredState,c);d.$23(a.provider,e,c);d.$24(a.triggerReducers,e,c)},c)};b.$26=function(a,b){var c=this;this.__invokeCallback(a,function(b){b=b.action;b=b.data;if(Object.prototype.hasOwnProperty.call(b,a)){var d;c.__laminarAlteredState=babelHelpers["extends"]({},c.__laminarAlteredState,(d={},d[a]=b[a],d))}else delete c.__laminarAlteredState[a];c.$14.emit(a)},b)};b.$27=function(a,b,c){var e=this,f=[];this.$15.forEach(function(a){e.__laminarAlteredState[a.provider]&&e.__previousLegacyFluxReducerProviderState[a.provider]!==e.__laminarAlteredState[a.provider]&&(f.push(a),e.__previousLegacyFluxReducerProviderState[a.provider]=e.__laminarAlteredState[a.provider])});var g=d("AdsDataDispatchUtils").mergeReducers(d("AdsDataDispatchUtils").getDataReducers(b),f),h=[],i=[],j=[],k={};for(var g=g,l=Array.isArray(g),m=0,g=l?g:g[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var n;if(l){if(m>=g.length)break;n=g[m++]}else{m=g.next();if(m.done)break;n=m.value}n=n;var o=this.__laminarAlteredState[n.provider],p=n.reducerName;h.push({providerName:n.provider,alteredState:o});if(n!=null){n.reducerName&&i.push(n.reducerName);j.push(n.provider);if(p!=null){k[p]={provider:n.provider,triggerReducers:{}};for(var o=n.triggerReducers,n=Array.isArray(o),q=0,o=n?o:o[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var r;if(n){if(q>=o.length)break;r=o[q++]}else{q=o.next();if(q.done)break;r=q.value}r=r;if(r!=null){var s=r.triggerReducer;k[p].triggerReducers[s]={provider:r.provider}}}}}}this.$17!=null&&this.$17.addFluxActionDispatchInfo(a,{actionType:b.actionType,providers:j,reducers:i});r={actionItem:b,alteredStates:h,providers:j,reducers:i,actionDispatchGraph:k,newState:this.__laminarAlteredState,sequenceNumber:a,siblings:[],shouldDisplay:!0,isActive:!0,debugging:{stack:new Error().stack,options:(s=c)!=null?s:{line:"0",module:"No Module",moduleID:null}}};this.$16!=null&&this.$16.addSnapshotToDebuggerActionDispatchQueue(r)};b.revert=function(a,b){var d=this,e=new Map();this.$16!=null&&this.$16.setPauseActionDispatches(!0);b.forEach(function(a){e.set(a,d.$26.bind(d,a))});b={type:"ADS_DATA_ATOM.REVERT",actionType:"ADS_DATA_ATOM.REVERT",data:a};a={action:b};l(e,this.$1);l(e,this.$5);this.$11=new(c("AdsDispatchCycle"))(e,a,j(a),this.__callbacksNames);this.$11.start();this.$11=null};b.commitRevert=function(){var a=this.$16;a!=null&&(a.setPauseActionDispatches(!1),a.clearActionDispatchQueue())};b.undoRevert=function(a){var b=this,c=Object.keys(a).filter(function(c){return a[c]!==b.__laminarAlteredState[c]});this.revert(a,c);this.$16!=null&&this.$16.setPauseActionDispatches(!1);c=this.$16;while(c!=null&&!c.isActionDispatchQueueEmpty()&&!c.getPauseActionDispatches())c.setPauseActionDispatches(!1),this.dispatch.apply(this,c.dequeueActionToDispatch())};b.$28=function(a){var b={},c=function(){var c=a[d];c.triggerReducers.forEach(function(a){a=a.provider;b[a]=Object.prototype.hasOwnProperty.call(b,a)?b[a].push(c.provider):[c.provider]})};for(var d=0;d<a.length;d++)c();return b};b.$29=function(a,b){for(var b=b,c=Array.isArray(b),d=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=b.length)break;e=b[d++]}else{d=b.next();if(d.done)break;e=d.value}e=e;e=this.$6[e];if(e){for(var f=e,g=Array.isArray(f),h=0,f=g?f:f[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var i;if(g){if(h>=f.length)break;i=f[h++]}else{h=f.next();if(h.done)break;i=h.value}i=i;a.has(i)||a.set(i,this.$1[i])}this.$29(a,e)}}};b.__dispatch=function(a){var b=this,e=a.action;this.__dispatchSeqNumber++;var f=e.type;this.$19.forEach(function(a){a.onDispatchStart!=null&&a.onDispatchStart(e)});this.$11&&k(this.$11.getPayload(),a);var g=new Map(),h=d("AdsDataDispatchUtils").mergeReducers(d("AdsDataDispatchUtils").getDataReducers(e),d("AdsDataDispatchUtils").shouldSkipLegacyFluxDispatch(e)?[]:this.$15),i=this.$28(h);for(var h=h,m=Array.isArray(h),n=0,h=m?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var o;if(m){if(n>=h.length)break;o=h[n++]}else{n=h.next();if(n.done)break;o=n.value}o=o;(o.registries.length==0||o.registries.some(function(a){return b.$18.has(a)}))&&(g.set(o.provider,this.$25.bind(this,o,i[o.provider])),this.__callbacksNames[o.provider]=o.provider)}d("AdsDataDispatchUtils").shouldSkipLegacyFluxDispatch(e)?(this.$8[f]&&this.$8[f].forEach(function(a){g.set(a,b.$1[a])}),this.$29(g,g.keys()),l(g,this.$4)):(l(g,this.$3),l(g,this.$2[f]),l(g,this.$4));o=d("AdsDataDispatchUtils").getDataLoggers(e);m=function(){if(q){if(r>=p.length)return"break";n=p[r++]}else{r=p.next();if(r.done)return"break";n=r.value}var a=n;(a.registries.length==0||a.registries.some(function(a){return b.$18.has(a)}))&&(g.set(a.id,b.__invokeCallback.bind(b,a.id,function(b){b=b.action;a(b)})),b.__callbacksNames[a.id]=a.id)};for(var p=o,q=Array.isArray(p),r=0,p=q?p:p[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){h=m();if(h==="break")break}this.$11=new(c("AdsDispatchCycle"))(g,a,j(a),this.__callbacksNames);this.$11.start();this.$11=null;this.$12=new Set();if(this.$9[f])for(i in this.$9[f])this.$9[f][i]();this.$19.forEach(function(a){a.onDispatchEnd!=null&&a.onDispatchEnd(e)})};b.__updateContainers=function(a){var b=this;Object.keys(this.$5).forEach(function(c){return b.$5[c]&&b.$5[c](a)})};b.hasChangedInDispatchCycle=function(a){this.$11!=null||h(0,1335,a);return this.$12.has(a)};b.__genReactBatchCallback=function(a,b){var c=this;return function(){d("AdsDataAtomInstrumentation").onDispatchCallbacksStart(a.action.type,b),c.__dispatch(a),d("AdsDataAtomInstrumentation").onDispatchCallbacksEnd(a.action.type,b),c.__updateContainers(a)}};b.dispatch=function(a,b){if(this.$16!=null&&this.$16.getPauseActionDispatches()){this.$16.enqueueActionToDispatch(a,b);return}this.$22(a);var c=this.__dispatchSeqNumber;d("AdsDataAtomInstrumentation").onActionStart(a.action.type,c);var e=this.__genReactBatchCallback(a,c);e();this.$27(c,a.action,b);this.$30();d("AdsDataAtomInstrumentation").onActionEnd(a.action.type,c)};b.dispatchAction=function(a,b){this.dispatch({action:a},b)};b.$30=function(){var a=this.$13;this.$13=[];a.forEach(function(a){return a()});this.$13.length=0};b.handleUpdateFromServerResponse=function(a){this.dispatch({action:a})};b.handleUpdateFromViewAction=function(a){this.dispatch({action:a})};b.addPostDispatchCallback=function(a){this.isDispatching()?this.$13.push(a):a()};b.setCatchErrors=function(a){this.__catchErrors=a};b.laminarRegisterLegacyFluxReducer=function(a){this.$15.push(a),this.__previousLegacyFluxReducerProviderState[a.provider]=a.providerInitialState()};b.getAlteredState=function(){return this.__laminarAlteredState};b.addListener=function(a,b){return this.$14.addListener(a,b)};b.loadRegistry=function(a){this.$18.add(a)};b.unloadRegistry=function(a){this.$18["delete"](a)};return a}();function j(a){return a&&a.action&&a.action.type||"<unknown>"}function k(a,b){h(0,1336,j(b),j(a))}function l(a,b){if(b!=null){var c=b;Object.keys(c).forEach(function(b){return a.set(b,c[b])})}}g["default"]=a}),98);
__d("AdsDataAtom",["invariant","AdsDataAtomDebugger","AdsDataAtomLaminarDebugger","AdsDataAtomPerformanceUtil","AdsInterfacesLoggerUtils","AdsPageTransitionActionFlux","DataAtomBase","ErrorSerializer","Run","cr:7225"],(function(a,b,c,d,e,f,g,h){"use strict";var i=null;a=function(a){babelHelpers.inheritsLoose(e,a);function e(){var e;e=a.call(this,[c("AdsDataAtomPerformanceUtil")],i,b("cr:7225"))||this;e.$AdsDataAtom$p_1=!1;e.$AdsDataAtom$p_2=null;d("Run").onAfterUnload(function(){e.dispatch({action:{type:d("AdsPageTransitionActionFlux").actionType}})});return e}var f=e.prototype;f.__invokeCallback=function(a,b,e){if(this.__catchErrors)try{b(e)}catch(b){a={action_type_on_error:e&&e.action&&e.action.type,error_type:"FLUX_STORE",payload_on_error:e,store_name:this.__callbacksNames[a]};c("ErrorSerializer").aggregateError(b,{type:"fatal"});d("AdsInterfacesLoggerUtils").logCriticalException(b,a)}else b(e)};f.registerBatchingCallback=function(a){this.$AdsDataAtom$p_2==null||h(0,65726),this.$AdsDataAtom$p_2=a};f.unregisterBatchingCallback_TEST_ONLY_DO_NO_USE=function(){this.$AdsDataAtom$p_2=null};f.__genReactBatchCallback=function(b,c){var d=this,e=a.prototype.__genReactBatchCallback.call(this,b,c);if(this.$AdsDataAtom$p_2!=null&&!this.$AdsDataAtom$p_1){var f=this.$AdsDataAtom$p_2;return function(){d.$AdsDataAtom$p_1=!0,f(e),d.$AdsDataAtom$p_1=!1}}else return e};return e}(c("DataAtomBase"));e=new a();f=e;g["default"]=f}),98);
__d("AdsDataAtomShared",["cr:7267"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:7267")}),98);
__d("AdsDataPluginsInternalUtils",[],(function(a,b,c,d,e,f){"use strict";function a(a){var b=a,c;return function(){b&&(c=b(),b=null);return c}}f.memoize=a}),66);
__d("AdsFluxCurrentContainer",[],(function(a,b,c,d,e,f){"use strict";var g=null;function a(){return g}function b(a){g=a}f.getCurrentContainer=a;f.setCurrentContainer=b}),66);
__d("LRUKeyedCache",[],(function(a,b,c,d,e,f){"use strict";var g=1e3,h=function(a,b,c){this.next=null,this.prev=null,this.key=a,this.cacheVersion=b,this.value=c};a=function(){function a(a,b){b===void 0&&(b=g),this.cache=new Map(),this.cacheVersion=0,this.capacity=b,this.keyFunction=a,this.head=new h("head",this.cacheVersion,null),this.tail=new h("tail",this.cacheVersion,null),this.head.next=this.tail,this.tail.prev=this.head}var b=a.prototype;b.set=function(a,b){a=this.keyFunction(a);var c=this.$1(a);c==null?(c=new h(a,this.cacheVersion,b),this.cache.set(a,c)):c.value=b;this.$2(c);this.$3();return};b.get=function(a){a=this.keyFunction(a);a=this.$1(a);if(a==null)return a;this.$2(a);return a.value};b.clear=function(){this.cacheVersion++};b.$1=function(a){var b=this.cache.get(a);if(b==null)return b;if(b.cacheVersion!=this.cacheVersion){this.$4(a);return void 0}return b};b.$2=function(a){this.$5(a),this.$6(a)};b.$6=function(a){a.prev=this.head,a.next=this.head.next,this.head.next!=null&&(this.head.next.prev=a),this.head.next=a};b.$5=function(a){a.prev!=null&&(a.prev.next=a.next),a.next!=null&&(a.next.prev=a.prev)};b.$4=function(a){var b=this.cache.get(a);if(b===void 0)return;this.$5(b);this.cache["delete"](a)};b.$3=function(){this.cache.size>this.capacity&&this.tail.prev!==null&&this.$4(this.tail.prev.key)};b.getCacheSnapshot_DEBUG=function(){return new Map(this.cache)};return a}();f["default"]=a}),66);
__d("AdsSelectorDebug",["invariant","LRUKeyedCache","areEqual","performanceNow"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=10,l=5,m=new WeakMap(),n=[],o={__trace:!1,__options:null,startTrace:function(){n.length===0||h(0,3997),o.__trace=!0},stopTrace:function(){n.length===0||h(0,3997),o.__trace=!1},withTrace:function(a,b){var c=o.__options,d=o.__trace;o.__trace=!0;o.__options=b;try{return a()}finally{o.__trace=d,o.__options=c}},withTraceSelector:function(a,b){var c=m.get(a);if(c)return c;c=function(c){return o.withTrace(function(){return a(c)},b)};c.getStores=a.getStores;c.rawSelectFn=a.rawSelectFn;c.isGetStoresPure=a.isGetStoresPure;c.isGetStoresStatic=a.isGetStoresStatic;m.set(a,c);return c},__traceEnter:function(a){if(!o.__trace)return;n.push({name:a,children:[],perfStart:(i||(i=c("performanceNow")))()})},__traceInputs:function(a,b,d,e){if(!o.__trace)return;var f=n[n.length-1];f.inputCount=a.length;for(var g=0;g<a.length;g++){var h=f.children[g];h&&(e||(b==null?h.selectorValueChangedAsInput={prev:null,next:d[g],deepEqual:!1}:b[g]!==d[g]&&(h.selectorValueChangedAsInput={prev:b[g],next:d[g],deepEqual:(j||(j=c("areEqual")))(b[g],d[g])})))}},__traceProps:function(a,b,d){if(!o.__trace)return;var e=n[n.length-1];a={props:a,cache:b instanceof c("LRUKeyedCache")?b.getCacheSnapshot_DEBUG():new Map(b)};d?e.propsCacheHit=a:e.propsCacheMiss=a},__traceCacheSelectorPropsCacheMiss:function(a,b,d){if(!o.__trace)return;var e=n[n.length-1];e.cacheSelectorPropsCacheMiss={props:a,cache:b instanceof c("LRUKeyedCache")?b.getCacheSnapshot_DEBUG():new Map(b),cacheClearedByStores:Array.from(d)}},__tracePropsHitAndInputsCacheMiss:function(a,b,d,e,f){if(!o.__trace)return;d=n[n.length-1];d.propsHitAndInputsCacheMiss={props:a,cache:b instanceof c("LRUKeyedCache")?b.getCacheSnapshot_DEBUG():new Map(b)}},__traceResult:function(a){if(!o.__trace)return;var b=n.pop();b.result=a;b.executionTimeMs=(i||(i=c("performanceNow")))()-b.perfStart;z(b)&&(b.shouldHighlight=!0);if(n.length===0)p(b);else{a=n[n.length-1];a.children.push(b);a.shouldHighlight=a.shouldHighlight||b.shouldHighlight}},__traceFailure:function(a){if(!o.__trace)return;var b=n.pop();b.failure=a;b.shouldHighlight=!0;while(n.length>0){a=n.pop();a.inputFailed=!0;a.shouldHighlight=!0;a.children.push(b);b=a}p(b);o.stopTrace()}};function p(a,b){b===void 0&&(b=!0);var c=F(a);if(((a=o.__options)==null?void 0:a.logFailuresOnly)&&b&&!(c.failure||c.inputFailed))return;if(((a=o.__options)==null?void 0:a.logOnlyIfSlowerThanMs)!=null&&b&&c.executionTimeMs!=null){b=(a=o.__options)==null?void 0:a.logOnlyIfSlowerThanMs;if(c.executionTimeMs<b)return}q(c,function(){r(c),s(c),(c.cacheSelectorPropsCacheMiss||c.propsCacheMiss||c.propsCacheHit||c.propsHitAndInputsCacheMiss)&&(t(c),u(c),v(c),w(c)),x(c),y(c)})}function q(a,b){var c=A(a);if(a.shouldHighlight){(a=console).group.apply(a,c)}else{(a=console).groupCollapsed.apply(a,c)}b();console.groupEnd()}function r(a){a.failure}function s(a){a.inputFailed}function t(a){if(a.cacheSelectorPropsCacheMiss){a=a.cacheSelectorPropsCacheMiss.cacheClearedByStores;a.length>0}}function u(a){a.propsCacheMiss}function v(a){if(a.propsHitAndInputsCacheMiss)var a=a.propsHitAndInputsCacheMiss,b=a.props,b=a.cache}function w(a){a.propsCacheHit}function x(a){if(a.children.length)for(var b=0;b<a.children.length;b++)p(a.children[b],!1)}function y(a){var b=a.thunkTrace;b?p(b,!1):(b=a.name)==null?void 0:b.endsWith("-thunk")}function z(a){var b;b=(b=(b=o.__options)==null?void 0:b.highlightSelectors)!=null?b:[];return b.some(function(b){var c;return(c=a.name)==null?void 0:c.includes(b)})?!0:!1}function A(a){var b=["%s"],c=[a.name],d=a.failure||a.inputFailed,e=B(a);e!=null&&(b.unshift("%s "),c.unshift(e));if(d)b.push(" %c[FAILED]"),c.push("color: red");else{if(a.executionTimeMs!=null){e=a.executionTimeMs;b.push(" %c%fms");c.push(E(e),e.toFixed(3))}b.push(" %c(returned "+(typeof a.result==="function"?"%O":"%o")+")");c.push("",D(a.result))}if(a.selectorValueChangedAsInput!=null){d=a.selectorValueChangedAsInput;b.unshift("%c");c.unshift("color: green");b.push(" %c[INPUT CHANGED]%c %o");c.push("color: white; background-color: green","",C(d))}return[b.join("")].concat(c)}function B(a){var b;if(a.thunkTrace)return String.fromCodePoint(128994);if((b=a.name)==null?void 0:b.endsWith("-thunk"))return String.fromCodePoint(9898);if((b=a.name)==null?void 0:b.endsWith("-branch"))return String.fromCodePoint(128256);return a.isBranchConditionSelector?"(?)":null}function C(a){return{prev:D(a.prev),next:D(a.next),deepEqual:a.deepEqual}}function D(a){var b;if((b=o.__options)==null?void 0:b.disableToJSCast)return a;return(a==null?void 0:a.toJS)instanceof Function?a.toJS():a}function E(a){if(a>=k)return"color: red; font-style: italic";return a>=l?"color: orange; font-style: italic":"color: gray; font-style: italic"}function F(a){var b=[G,H];return b.reduce(function(a,b){return b(a)},a)}function G(a){var b;b=(b=a.inputCount)!=null?b:0;if(a.children.length<=b)return a;var c=babelHelpers["extends"]({},a,{children:a.children.slice(0,b).map(function(a){return babelHelpers["extends"]({},a)})}),d=function(b){var d=a.children[b];b=c.children.find(function(a){var b;return(a.name===((b=d.name)!=null?b:"")+"-thunk"||a.name===((b=d.name)!=null?b:"")+"-wrappedSelector-thunk")&&!a.thunkTrace});b&&(b.thunkTrace=d)};for(b=b;b<a.children.length;b++)d(b);return c}function H(a){var b;if(((b=a.name)==null?void 0:b.endsWith("-branch"))&&a.children.length===3){b=a.children;var c=b[0];b=b.slice(1);if(c)return babelHelpers["extends"]({},a,{children:[babelHelpers["extends"]({},c,{isBranchConditionSelector:!0})].concat(b)})}return a}a=o;g["default"]=a}),98);
__d("AdsSelectorInstrumentation",["performanceNow"],(function(a,b,c,d,e,f,g){"use strict";var h,i=[];function a(a){i.push(a)}function b(a){i=i.filter(function(b){return b!==a})}function d(){if(i.length===0)return null;var a=(h||(h=c("performanceNow")))(),b=i.map(function(b){return b.selectorCall(a)});return function(a){var d=(h||(h=c("performanceNow")))();b.forEach(function(b){return b&&b(a,d)})}}g.inject=a;g.removeInstrumentation=b;g.onSelectorCall=d}),98);
__d("adsCacheSelector",["AdsSelectorDebug","LRUKeyedCache","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";var h,i=!Map.__isES5||!Object.isExtensible;function j(a){return a!=null&&(typeof a==="object"||typeof a==="function")}a=function(a,b,d,e,f){var g=new(c("LRUKeyedCache"))((f=e)!=null?f:function(a){return a});e=new Set();f=!1;var h=function(){return g.clear()},l=function(a){a.addListener(h)},m=new Set(),n=a.length>0;d&&(b().forEach(function(a){return m.add(a)}),m.forEach(l));var o=d?c("emptyFunction"):function(a){b(a).forEach(function(a){if(m.has(a))return;m.add(a);l(a)})};e=function(b){var c=n?b:null;if(n&&!i&&j(b)&&!Object.isExtensible(b))return a(c);var d=g.get(c);if(d!=null&&!k())return d;o(b);b=a(c);if(k()&&d!=null)return d;g.set(c,b);return b};return e};function k(){return!1}b=a;g["default"]=b}),98);
__d("AdsSelectorProfilerUtils",["AdsSelectorInstrumentation","adsCacheSelector"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e,f){var g={cacheHit:!0};a=a.bind(void 0,g);var i=c("adsCacheSelector")(a,b,e,void 0,f);a=function(a){g.cacheHit=!0;var b=(h||(h=d("AdsSelectorInstrumentation"))).onSelectorCall();a=i(a);b&&b({name:f,cacheHit:g.cacheHit});return a};return a}function b(a,b){var c={cacheHit:!0};return function(e){c.cacheHit=!0;var f=(h||(h=d("AdsSelectorInstrumentation"))).onSelectorCall();e=a(e,c);f&&f({name:b,cacheHit:c.cacheHit});return e}}g.instrumentSelectorInclusive=a;g.instrumentLaminarSelector=b}),98);
__d("AdsSelectorUtils",["Promise","performanceNow"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=new Set(),k=0;function a(a){j.add(a)}function l(a,b){k+=1;var d=[],e=new Set();try{var f=j.size>0,g=f&&k===1;g=g?(i||(i=c("performanceNow")))():null;for(var a=a,h=Array.isArray(a),l=0,a=h?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var m;if(h){if(l>=a.length)break;m=a[l++]}else{l=a.next();if(l.done)break;m=l.value}m=m;m=m.getStores(b);if(m)for(var m=m,n=Array.isArray(m),o=0,m=n?m:m[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var p;if(n){if(o>=m.length)break;p=m[o++]}else{o=m.next();if(o.done)break;p=o.value}p=p;p!=null&&!e.has(p)&&(e.add(p),d.push(p))}}if(f){p=g!=null?(i||(i=c("performanceNow")))()-g:0;for(o=j,n=Array.isArray(o),m=0,o=n?o:o[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(n){if(m>=o.length)break;l=o[m++]}else{m=o.next();if(m.done)break;l=m.value}h=l;h(p)}}}finally{k-=1}return d}function d(a,b){return l(a,b).map(function(a){return a.getDispatchToken()})}function e(a,b){return l(a,b).some(function(a){return a.hasChanged()})}function f(a,c,d){return new(h||(h=b("Promise")))(function(b,e){var f=a.getStores(d).map(function(a){return a.addListener(i)}),g={loading:function(){return void 0},empty:function(){return void 0},loaded:function(a){h(),b(a)},error:function(a){h(),e(a)}};i();function h(){f.forEach(function(a){return a.remove()})}function i(){a(c).match(g)}})}g.__registerGetStoreDurationListener=a;g.getStores=l;g.getStoreDispatchTokens=d;g.hasAnyStoreChanged=e;g.loadObjectSelectorToPromise=f}),98);
__d("ArrowDownOutline20.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 20 20",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsxs("g",{fillRule:"evenodd",transform:"translate(-90 -248)",children:[i.jsx("path",{fillRule:"nonzero",d:"M95.322 258.928a.75.75 0 0 0-1.06 1.06l5.208 5.209a.75.75 0 0 0 1.06 0l5.209-5.208a.75.75 0 0 0-1.06-1.06L100 263.605l-4.678-4.678z"}),i.jsx("path",{fillRule:"nonzero",d:"M99.25 251.333v12.813a.75.75 0 1 0 1.5 0v-12.813a.75.75 0 1 0-1.5 0z"})]})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("ComponentMountUnmountSubspanLogger.react",["InteractionTracingMetrics","hero-tracing-placeholder","performanceNow","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=i||d("react");var j=b.useContext,k=b.useEffect,l=b.c;function a(a){var b=l(4),e=a.description,f=j(d("hero-tracing-placeholder").HeroInteractionIDContext),g;b[0]!==f||b[1]!==e?(a=function(){var a=(h||(h=c("performanceNow")))();return function(){if(f!=null){var b=(h||(h=c("performanceNow")))();c("InteractionTracingMetrics").addSubspan(f,e,"AppTiming",a,b,{})}}},g=[e,f],b[0]=f,b[1]=e,b[2]=a,b[3]=g):(a=b[2],g=b[3]);k(a,g)}g["default"]=a}),98);
__d("E2EELinkPreviewXMADataStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({LOADED:1,LOADING:2,DISABLED:3});f["default"]=a}),66);
__d("MAWFetchEBDeanonMessagesMetadata",["DateConsts","EBFormatUtils","FBLogger","I64","MAWEBDeanonFetch","Promise","WAResultOrError"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=100,k="timeout",l=10*d("DateConsts").MS_PER_SEC;function a(a){var e=a.chatJid,f=a.direction,g=a.includeReferenceTimestamp,o=a.logger,p=a.range;a=a.sortFn;c("FBLogger")("messenger_web_product").info("EBMessageRangeDataSource: Issuing fetch request to EB Deanon API");o==null?void 0:o.markQPLPoint("eb_fetch_deanon_start");f=m(f);p=(i||(i=d("I64"))).to_float(d("EBFormatUtils").adjustTs(n(f,p),f));return(h||(h=b("Promise"))).race([d("MAWEBDeanonFetch").fetchMessagesMetadataFromEBDeanon({chatJid:e,count:j,direction:f,includeReferenceTimestamp:g,referenceTimestampMs:p,sortFn:a}),new h(function(a){return window.setTimeout(function(){return a(d("WAResultOrError").makeError(k))},l)})]).then(function(a){o==null?void 0:o.markQPLPoint("eb_fetch_deanon_end");return a})}function m(a){switch(a){case"asc":return"after";case"desc":return"before"}}function n(a,b){return a==="after"?b.maxTimestampMs:b.minTimestampMs}function e(a,b){a=m(a);b=n(a,b);return!(a==="after"&&(i||(i=d("I64"))).equal(b,(i||(i=d("I64"))).max_int)||a==="before"&&(i||(i=d("I64"))).equal(b,(i||(i=d("I64"))).min_int))}g.fetchEBDeanonMessagesMetadata=a;g.isRangeValidForEBDeanonFetch=e}),98);
__d("MAWFetchMessagesForMLv2",["MAWSecureLocalDBFetch"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.chatJid,d=a.direction,e=a.includeOriginalMsg,f=a.logger,g=a.pageSize;a=a.range;f==null?void 0:f.markQPLPoint("wait_secure_local_db_fetch_start");return c("MAWSecureLocalDBFetch")({actionType:"user",chatJid:b,config:{admin:!0,editMsgHistory:!0,media:!0,reactions:!0,receiverFetch:!0,xma:!0},count:g,direction:h(d),offsetMsg:{includeOriginalMsg:e,messageId:d==="asc"?a.maxMessageId:a.minMessageId},timestampMs:d==="asc"?a.maxTimestampMs:a.minTimestampMs}).then(function(a){f==null?void 0:f.markQPLPoint("wait_secure_local_db_fetch_end");return a})}function h(a){switch(a){case"asc":return"after";case"desc":return"before"}}g.fetchMessagesFromMAW=a;g.translateDirectionForMaw=h}),98);
__d("MAWMessagesRangesUtils",["I64"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){return{hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:"",maxTimestampMs:(h||(h=d("I64"))).max_int,minMessageId:"",minTimestampMs:h.min_int,threadKey:a}}function b(a){var b=a.direction,c=a.mawFetchResult;a=a.range;var e=[].concat(c.msgs).sort(function(a,b){return a.sortOrderMs-b.sortOrderMs}),f=e.length>0?e[0]:void 0;e=e.length>0?e[e.length-1]:void 0;switch(b){case"asc":return babelHelpers["extends"]({},a,{hasMoreAfter:c.hasMoreAfter,isLoadingAfter:!1,maxMessageId:(b=e==null?void 0:e.msgId)!=null?b:a.maxMessageId,maxTimestampMs:(h||(h=d("I64"))).max(a.maxTimestampMs,(e==null?void 0:e.sortOrderMs)!=null?(h||(h=d("I64"))).of_float(e==null?void 0:e.sortOrderMs):a.maxTimestampMs)});case"desc":return babelHelpers["extends"]({},a,{hasMoreBefore:c.hasMoreBefore,isLoadingBefore:!1,minMessageId:(b=f==null?void 0:f.msgId)!=null?b:a.minMessageId,minTimestampMs:(h||(h=d("I64"))).min(a.minTimestampMs,(f==null?void 0:f.sortOrderMs)!=null?(h||(h=d("I64"))).of_float(f==null?void 0:f.sortOrderMs):a.minTimestampMs)})}}function c(a,b){return b==="asc"?a.maxTimestampMs:a.minTimestampMs}g.getRangeForFailure=a;g.getNewMAWRange=b;g.getTimestampForRange=c}),98);
__d("EBDeanonRangeExtension",["FBLogger","I64","MAWFetchEBDeanonMessagesMetadata","MAWFetchMessagesForMLv2","MAWMessageIntegrityChecker","MAWMessagesRangesUtils","MAWPutMessagesToDB","Promise","WAResultOrError","asyncToGeneratorRuntime","err","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=new Map();function a(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.chatJid,f=a.db,g=a.direction,h=a.dispatch,j=a.includeOriginalMsg,k=a.logger,n=a.pageSize;a=a.range;if(!d("MAWFetchEBDeanonMessagesMetadata").isRangeValidForEBDeanonFetch(g,a))return(i||(i=b("Promise"))).resolve(null);if(!c("gkx")("5390"))return(i||(i=b("Promise"))).resolve(null);var p=j?n:n+1,r=q(g);e=(yield (i||(i=b("Promise"))).all([s({chatJid:e,direction:g,includeReferenceTimestamp:!0,logger:k,pageSize:p,range:a,sortFn:r}),o({chatJid:e,direction:g,includeOriginalMsg:!0,logger:k,pageSize:p,range:a,sortFn:r})]));p=e[0];e=e[1];var t=e.localMsgsMetadata;e=e.mawFetchResult;if(p.success===!1){c("FBLogger")("messenger_web_product").warn("EBMessageRangeDataSource: Deanon messages metadata fetch failed, try to fetch messages from EB");return(i||(i=b("Promise"))).resolve(null)}j=l({includeOriginalMsg:j,mawFetchResult:e,sortedDeanonMsgsMetadata:p.value,sortedLocalMsgsMetadata:t});e=j.filteredDeanonMsgsMetadata;p=j.filteredLocalMsgsMetadata;t=j.filteredMawFetchResult;return m({db:f,deanonMsgsMetadata:e,direction:g,dispatch:h,localMsgsMetadata:p,logger:k,mawFetchResult:t,pageSize:n,range:a,sortFn:r})});return k.apply(this,arguments)}function l(a){var b=a.includeOriginalMsg,c=a.mawFetchResult,d=a.sortedDeanonMsgsMetadata;a=a.sortedLocalMsgsMetadata;if(b===!0||a.length===0)return{filteredDeanonMsgsMetadata:d,filteredLocalMsgsMetadata:a,filteredMawFetchResult:c};var e=a[0].externalId,f=a[0].sortOrderMs;b=a.slice(1);a=d.slice(d.findIndex(function(a){return a.externalId===e})+1);d=c.msgs.filter(function(a){return!(a.externalId===e&&a.sortOrderMs===f)});return{filteredDeanonMsgsMetadata:a,filteredLocalMsgsMetadata:b,filteredMawFetchResult:babelHelpers["extends"]({},c,{msgs:d})}}function m(a){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.db,f=a.deanonMsgsMetadata,g=a.direction,h=a.dispatch,j=a.localMsgsMetadata,k=a.logger,l=a.mawFetchResult,m=a.pageSize,n=a.range;a=a.sortFn;k==null?void 0:k.markQPLPoint("maw_vs_eb_deanon_comparison_start");j=r(j,f,m,a);k==null?void 0:k.markQPLPoint("maw_vs_eb_deanon_comparison_end");k==null?void 0:k.addQPLAnnotations({bool:{is_data_restored_locally_when_extending_range:j}});c("FBLogger")("messenger_web_product").info("EBMessageRangeDataSource: Optimistic range extension using Deanon, isDataPresentLocally: %s",j.toString());if(!j)return(i||(i=b("Promise"))).resolve(null);k==null?void 0:k.markQPLPoint("insert_msgs_to_lsdb_start","begin inserting the messages into LSDB");yield d("MAWPutMessagesToDB").insertMessageResponseIntoDatabase(e,l,h);k==null?void 0:k.markQPLPoint("insert_msgs_to_lsdb_end");return(i||(i=b("Promise"))).resolve(d("MAWMessagesRangesUtils").getNewMAWRange({direction:g,mawFetchResult:l,range:n}))});return n.apply(this,arguments)}function o(a){return p.apply(this,arguments)}function p(){p=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.chatJid,c=a.direction,e=a.includeOriginalMsg,f=a.logger,g=a.pageSize,h=a.range;a=a.sortFn;b=(yield d("MAWFetchMessagesForMLv2").fetchMessagesFromMAW({chatJid:b,direction:c,includeOriginalMsg:e,logger:f,pageSize:g,range:h}));c=w(b.msgs).sort(a);return{localMsgsMetadata:c,mawFetchResult:b}});return p.apply(this,arguments)}function q(a){switch(a){case"asc":return d("MAWMessageIntegrityChecker").compareMessageMetadataForAscOrder;case"desc":return d("MAWMessageIntegrityChecker").compareMessageMetadataForDescOrder;default:throw c("err")("Unhandled direction: "+a)}}function r(a,b,d,e){if(b.length===0){c("FBLogger")("messenger_web_product").warn("EBMessageRangeDataSource: Deanon messages metadata is empty.");return!1}var f=[].concat(b,a).reduce(function(a,b){a[b.externalId]=b;return a},{});b=new Set([].concat(a.map(function(a){return a.externalId}),b.map(function(a){return a.externalId})));b=Array.from(b).map(function(a){return f[a]}).sort(e).slice(0,d);return a.length>=b.length&&b.every(function(b,c){return b.externalId===a[c].externalId})}function s(a){return t.apply(this,arguments)}function t(){t=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.chatJid,e=a.direction,f=a.includeReferenceTimestamp,g=a.logger,h=a.pageSize,i=a.range;a=a.sortFn;var j=u(b,e,g,i);if(j!=null&&j.length>=h){c("FBLogger")("messenger_web_product").info("EBMessageRangeDataSource: Using cached Deanon messages metadata for comparison to local data");return d("WAResultOrError").makeResult(j)}h=(yield d("MAWFetchEBDeanonMessagesMetadata").fetchEBDeanonMessagesMetadata({chatJid:b,direction:e,includeReferenceTimestamp:f,logger:g,range:i,sortFn:a}));h.success===!0&&v(b,e,g,h.value,i);return h});return t.apply(this,arguments)}function u(a,b,e,f){e==null?void 0:e.markQPLPoint("deanon_cache_fetch_start");a=(a=j.get(a))==null?void 0:a.get(b);if(a==null)return null;var g=b==="asc"?f.maxTimestampMs:f.minTimestampMs;f=(h||(h=d("I64"))).ge(g,a.minTimestampMs)&&(h||(h=d("I64"))).le(g,a.maxTimestampMs);if(!f)return null;f=-1;switch(b){case"asc":f=a.msgsMetadata.findIndex(function(a){return(h||(h=d("I64"))).ge(h.of_float(a.sortOrderMs),g)});break;case"desc":f=a.msgsMetadata.findIndex(function(a){return(h||(h=d("I64"))).le(h.of_float(a.sortOrderMs),g)});break;default:throw c("err")("Unhandled direction: "+b)}b=a.msgsMetadata.slice(f);e==null?void 0:e.markQPLPoint("deanon_cache_fetch_end");return b}function v(a,b,e,f,g){if(f.length===0)return;e==null?void 0:e.markQPLPoint("deanon_cache_replace_start");var i=j.get(a),k=(h||(h=d("I64"))).of_float(f[f.length-1].sortOrderMs);i==null&&(i=new Map());switch(b){case"asc":i.set(b,{maxTimestampMs:k,minTimestampMs:g.maxTimestampMs,msgsMetadata:f});break;case"desc":i.set(b,{maxTimestampMs:g.minTimestampMs,minTimestampMs:k,msgsMetadata:f});break;default:throw c("err")("Unhandled direction: "+b)}j.set(a,i);e==null?void 0:e.markQPLPoint("deanon_cache_replace_end")}function w(a){return a.map(function(a){return{externalId:a.externalId,msgType:a.type_,sortOrderMs:a.sortOrderMs}})}g.getRangeFromLocalDataIfConsistent=a;g.excludeOffsetMsgIfNecessary=l;g.isDeanonDataPresentLocally=r}),98);
__d("MAWFetchMessagesFromEBForMLv2",["DateConsts","EBBridgedAPI","I64","MAWEBFetch","MAWFetchMessagesForMLv2","MAWMessagesRangesUtils","MAWTraceUtils","Promise","WAResultOrError","WATagsLogger","asyncToGeneratorRuntime","gkx","recoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["EBMessageRangeDataSource: Failed to fetch messages from EB. Message: "," TraceId: "," Request: ",""]);j=function(){return a};return a}var k="timeout",l=c("gkx")("6581")?15*d("DateConsts").MS_PER_SEC:10*d("DateConsts").MS_PER_SEC;function a(a){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var e=a.chatJid,f=a.db,g=a.direction,m=a.logger,o=a.pageSize;a=a.range;m==null?void 0:m.markQPLPoint("wait_eb_fetch_start");var p=d("MAWMessagesRangesUtils").getTimestampForRange(a,g),q=e+":"+(i||(i=d("I64"))).to_string(p)+":"+g+":"+o,r=d("MAWTraceUtils").createTraceId();e=(yield (h||(h=b("Promise"))).race([c("gkx")("5444")?c("EBBridgedAPI").messageRangeQuery({chatJid:e,direction:d("MAWFetchMessagesForMLv2").translateDirectionForMaw(g),timestampMs:p,traceId:r}):c("MAWEBFetch")({chatJid:e,count:o,db:f,direction:d("MAWFetchMessagesForMLv2").translateDirectionForMaw(g),timestampMs:p,traceId:r}),new h(function(a){return window.setTimeout(function(){return a(d("WAResultOrError").makeError(k))},l)})]));if(e.success===!1){d("WATagsLogger").TAGS(["maw_message_core","EBMessageRangeDataSource",r]).ERROR(j(),e.error,r,q);m==null?void 0:m.markQPLPoint("eb_fetch_response_fail");m==null?void 0:m.addQPLAnnotations({string:{eb_failure_reason:e.error}});return e}o=n({direction:g,fetchResult:e.value,range:a});m==null?void 0:m.markQPLPoint("wait_eb_fetch_end");return d("WAResultOrError").makeResult({raw:e.value,recovered:o})});return m.apply(this,arguments)}function n(a){var b=a.direction,e=a.fetchResult,f=a.range;a=b==="asc"?e.messages.filter(function(a){return a.sortOrderMs!=null&&(i||(i=d("I64"))).ge((i||(i=d("I64"))).of_float(a.sortOrderMs),f.maxTimestampMs)}):e.messages.filter(function(a){return a.sortOrderMs!=null&&(i||(i=d("I64"))).le((i||(i=d("I64"))).of_float(a.sortOrderMs),f.minTimestampMs)});var g=babelHelpers["extends"]({},e,{messages:a});a.length!==e.messages.length&&c("recoverableViolation")("EBMessageRangeDataSource: EB fetch API returned invalid messages outside requested timerange","messenger_web_product");a.length===0&&(b==="asc"&&e.hasMoreAfter&&(g.hasMoreAfter=!1,c("recoverableViolation")("EBMessageRangeDataSource: Unexpected null messages after","messenger_web_product")),b==="desc"&&e.hasMoreBefore&&(g.hasMoreBefore=!1,c("recoverableViolation")("EBMessageRangeDataSource: Unexpected null messages before","messenger_web_product")));return g}g["default"]=a}),98);
__d("MessageRangeSet",["I64","ReplayLastSubject","err"],(function(a,b,c,d,e,f,g){"use strict";var h,i=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this,a)||this;c.value=a;return c}var c=a.prototype;c.next=function(a){this.value=a,b.prototype.next.call(this,a)};return a}(d("ReplayLastSubject").ReplayLastSubject),j=function(b){babelHelpers.inheritsLoose(a,b);function a(a){var c;c=b.call(this,a)||this;for(var d=arguments.length,e=new Array(d>1?d-1:0),f=1;f<d;f++)e[f-1]=arguments[f];e.forEach(function(a){c.subscribe({complete:function(){return a.complete()},error:function(b){return a.error(b)},next:function(b){return a.next(b)}})});c.next(a);return c}return a}(i);a=function(){function a(){this.$1=new Set()}var b=a.prototype;b.$2=function(a){for(var b=this.$1,c=Array.isArray(b),e=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(c){if(e>=b.length)break;f=b[e++]}else{e=b.next();if(e.done)break;f=e.value}f=f;var g=f.value;if((h||(h=d("I64"))).le(g.minTimestampMs,a)&&((h||(h=d("I64"))).ge(g.maxTimestampMs,a)||!g.hasMoreAfter))return f}return null};b.getRangeForTimestamp=function(a){return this.$2(a)};b.upsertRange=function(a){var b=Array.from(this.$1.values()).filter(function(b){return l(b.value,a)});if(b.length===0){var c=new i(a);this.$1.add(c);return c}c=k.apply(void 0,b.map(function(a){return a.value}).concat([a]));if(b.length===1){var d=b[0];d.next(c);return d}for(var d=b,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;this.$1["delete"](g)}g=babelHelpers.construct(j,[c].concat(b));this.$1.add(g);return g};return a}();function k(){for(var a=arguments.length,b=new Array(a),e=0;e<a;e++)b[e]=arguments[e];if(b.length===0)throw c("err")("Cannot merge 0 ranges");var f=b[0].threadKey,g=b[0].minTimestampMs,i=b[0].hasMoreAfter,j=b[0].hasMoreBefore,k=b[0].maxMessageId,l=b[0].minMessageId,m=b[0].maxTimestampMs;for(var n=1;n<b.length;n++){var o=b[n];(h||(h=d("I64"))).le(o.minTimestampMs,g)&&((h||(h=d("I64"))).equal(o.minTimestampMs,g)?j=j&&o.hasMoreBefore:j=o.hasMoreBefore,g=o.minTimestampMs,l=o.minMessageId);(h||(h=d("I64"))).ge(o.maxTimestampMs,m)&&((h||(h=d("I64"))).equal(o.maxTimestampMs,m)?i=i&&o.hasMoreAfter:i=o.hasMoreAfter,m=o.maxTimestampMs,k=o.maxMessageId)}return{hasMoreAfter:i,hasMoreBefore:j,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:k,maxTimestampMs:m,minMessageId:l,minTimestampMs:g,threadKey:f}}function l(a,b){var c=(h||(h=d("I64"))).le(b.minTimestampMs,a.minTimestampMs),e=c?b:a;c=c?a:b;return m(e,c.minTimestampMs)?!0:!1}function m(a,b){return(h||(h=d("I64"))).ge(b,a.minTimestampMs)&&(h||(h=d("I64"))).le(b,a.maxTimestampMs)}g["default"]=a}),98);
__d("ReQLObservable",["SortedAsyncIterable","applyChangesToBPlusTree","asyncToGeneratorRuntime","createBPlusTreeFromSorted","isPromise","promiseDone","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){return d("relay-runtime").Observable.create(function(f){var g=e(a),i=function(a){if(f.closed)return;f.next(a)},j,k=[],l=g.subscribe(function(a,b){k.push([a,b])}),m=a.subscribeToCommit(function(){if(f.closed)return;if(j!=null&&k.length>0){var a=j;c("applyChangesToBPlusTree")(a,k)&&i(Array.from(a.entries()))}}),n=g.iterator(d("SortedAsyncIterable").getOrCreateContext(g)),o=[];c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){while(!f.closed){var a=n.next();(h||(h=c("isPromise")))(a)&&(a=(yield a));if(a.done)break;o.push(a.value)}if(f.closed)return;a=j=c("createBPlusTreeFromSorted")(o,g.direction);i(c("applyChangesToBPlusTree")(a,k)?Array.from(a.entries()):o)})());return function(){l(),m()}})}g.create=a}),98);
__d("findMsgsWithMinAndMaxTimestamp",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.filter(function(a){return a.sortOrderMs!=null});var b=null,c=null;for(var a=a,d=Array.isArray(a),e=0,a=d?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f,g;if(d){if(e>=a.length)break;g=a[e++]}else{e=a.next();if(e.done)break;g=e.value}g=g;if(g.sortOrderMs==null)continue;(((f=b)==null?void 0:f.sortOrderMs)==null||b.sortOrderMs<g.sortOrderMs)&&(b=g);(((f=c)==null?void 0:f.sortOrderMs)==null||c.sortOrderMs>g.sortOrderMs)&&(c=g)}return[c,b]}f["default"]=a}),66);
__d("switchMap",["relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("relay-runtime").Observable.create(function(c){var d,e=a.subscribe({complete:c.complete,error:c.error,next:function(a){var e;(e=d)==null?void 0:e.unsubscribe();d=b(a).subscribe(c)}});return function(){var a;(a=d)==null?void 0:a.unsubscribe();e.unsubscribe()}})}g["default"]=a}),98);
__d("EBMessageRangeDataSource",["EBDeanonRangeExtension","FBLogger","I64","LSDatabaseSingleton","LSEncryptedBackupsBackupTenancy","LSIntEnum","MAWEncryptedBackupUtils","MAWFetchMessagesForMLv2","MAWFetchMessagesFromEBForMLv2","MAWMessagesRangesUtils","MAWMiActOnActThreadReady","MAWPutMessagesToDB","MLV2DataSourceLogger","MessageRangeSet","Promise","ReQL","ReQLObservable","ReplayLastSubject","asyncToGeneratorRuntime","findMsgsWithMinAndMaxTimestamp","gkx","nullthrows","recoverableViolation","relay-runtime","switchMap"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=20,m=function(){function a(a){var e=this;this.$2=new(c("MessageRangeSet"))();this.getOrCreateMessageRangeCoveringCursor=function(a,b,c){c=e.$2.getRangeForTimestamp(a.timestampMs);b==null?void 0:b.annotateMessageRangesDataSource("EBMessageRangeDataSource");if(c!=null)return c;b=(k||(k=d("I64"))).equal(a.timestampMs,k.max_int);c={hasMoreAfter:!b,hasMoreBefore:!0,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:(c=a.messageId)!=null?c:"",maxTimestampMs:a.timestampMs,minMessageId:(b=a.messageId)!=null?b:"",minTimestampMs:a.timestampMs,threadKey:e.$1};b=e.$2.upsertRange(c);return b};this.extendRange=function(a,f,g){var i=d("MLV2DataSourceLogger").getMLV2LoggerForThread(e.$1,f);a=e.$2.getRangeForTimestamp(a.minTimestampMs);if(a==null){c("recoverableViolation")("EBDataSource: Requested to extend a nonexisting range","maw_message_core");i==null?void 0:i.markQPLPoint("extend_range_invalid");return(h||(h=b("Promise"))).resolve()}var j=a.value;if(f==="asc"&&(!j.hasMoreAfter||j.isLoadingAfter)){i==null?void 0:i.markQPLPoint("extend_range_skipped");return(h||(h=b("Promise"))).resolve()}if(f==="desc"&&(!j.hasMoreBefore||j.isLoadingBefore)){i==null?void 0:i.markQPLPoint("extend_range_skipped");return(h||(h=b("Promise"))).resolve()}a.next(babelHelpers["extends"]({},j,{isLoadingAfter:j.isLoadingAfter||f==="asc",isLoadingBefore:j.isLoadingBefore||f==="desc"}));return e.$3(a.value,f,void 0,g)};this.$3=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,f,g){f===void 0&&(f=l);var h=!1,j=d("MLV2DataSourceLogger").getMLV2LoggerForThread(e.$1,b),k=(yield (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton);j==null?void 0:j.markQPLPoint("eb_wait_act_thread_start");var m=(yield d("MAWMiActOnActThreadReady").waitForACTThreadReady(k.tables,e.$1,"MAWMessageRangeDataSourceForThread"));m=m.chatJid;j==null?void 0:j.markQPLPoint("eb_wait_act_thread_end");var n=(yield d("EBDeanonRangeExtension").getRangeFromLocalDataIfConsistent({chatJid:m,db:k,direction:b,dispatch:g,includeOriginalMsg:h,logger:j,pageSize:f,range:a}));if(n!=null){j==null?void 0:j.markQPLPoint("maw_upsert_range_start");e.$2.upsertRange(babelHelpers["extends"]({},n,{threadKey:e.$1}));j==null?void 0:j.markQPLPoint("maw_upsert_range_end");return}n=(yield c("MAWFetchMessagesFromEBForMLv2")({chatJid:m,db:k,direction:b,logger:j,pageSize:f,range:a}));if(n.success===!1){e.$2.upsertRange(d("MAWMessagesRangesUtils").getRangeForFailure(e.$1));return}m=(yield d("MAWFetchMessagesForMLv2").fetchMessagesFromMAW({chatJid:m,direction:b,includeOriginalMsg:h,logger:j,pageSize:f,range:a}));j==null?void 0:j.markQPLPoint("insert_msgs_to_lsdb_start","begin inserting the messages into LSDB");yield d("MAWPutMessagesToDB").insertMessageResponseIntoDatabase(k,m,g);j==null?void 0:j.markQPLPoint("insert_msgs_to_lsdb_end");e.$4({direction:b,ebFetchResult:n.value,logger:j,mawFetchResult:m,range:a})});return function(b,c,d,e){return a.apply(this,arguments)}}();this.$1=a}var e=a.prototype;e.$4=function(a){var b=a.direction,e=a.ebFetchResult,f=a.logger,g=a.mawFetchResult,h=a.range;f==null?void 0:f.markQPLPoint("maw_upsert_range_start");var i=e.raw;a=e.recovered.messages;var j=a.map(function(a){return a.sortOrderMs}).filter(Boolean);j=[Math.min.apply(Math,j),Math.max.apply(Math,j)];var l=j[0];j=j[1];var m=d("MAWMessagesRangesUtils").getTimestampForRange(h,b),n=b==="desc"?[(k||(k=d("I64"))).of_float(l),m]:[m,(k||(k=d("I64"))).of_float(j)];l=g.msgs.filter(function(a){return(k||(k=d("I64"))).ge((k||(k=d("I64"))).of_float(a.sortOrderMs),n[0])&&(k||(k=d("I64"))).le((k||(k=d("I64"))).of_float(a.sortOrderMs),n[1])});var o,p;if(l.length===0){m=c("gkx")("842")||c("gkx")("4767");if(!m){c("recoverableViolation")("EBMessageRangeDataSource: No local messages found within EB response range","messenger_web_product");f==null?void 0:f.markQPLPoint("eb_fetch_has_no_local_msg_overlap");this.$2.upsertRange(d("MAWMessagesRangesUtils").getRangeForFailure(this.$1));return}c("FBLogger")("messenger_web_product").mustfix("EBMessageRangeDataSource: No local messages found within EB response range for protobuf. Filtered EB payload size: %s, original EB payload size: %s, original EB hasMoreBefore: %s, original EB hasMoreAfter: %s",a.length,i.messages.length,i.hasMoreBefore,i.hasMoreAfter);a.sort(function(a,b){return((a=a.sortOrderMs)!=null?a:0)-((a=b.sortOrderMs)!=null?a:0)});o=a.length>0?a[0]:void 0;p=a.length>0?a[a.length-1]:void 0}else{j=c("findMsgsWithMinAndMaxTimestamp")(l);o=j[0];p=j[1]}g=babelHelpers["extends"]({},h,function(){switch(b){case"asc":var a,f;a=(a=(a=p)==null?void 0:a.msgId)!=null?a:h.maxMessageId;f=(k||(k=d("I64"))).max(h.maxTimestampMs,((f=p)==null?void 0:f.sortOrderMs)!=null?(k||(k=d("I64"))).of_float((f=p)==null?void 0:f.sortOrderMs):h.maxTimestampMs);(k||(k=d("I64"))).equal(h.maxTimestampMs,f)&&h.maxMessageId===a&&c("FBLogger")("messenger_web_product").mustfix("EBMessageRangeDataSource: stuck in the same max timestamp: %s, hasMoreAfter: %s",(k||(k=d("I64"))).to_string(f),i.hasMoreAfter);return{hasMoreAfter:e.recovered.hasMoreAfter,isLoadingAfter:!1,maxMessageId:a,maxTimestampMs:f};case"desc":a=(f=(a=o)==null?void 0:a.msgId)!=null?f:h.minMessageId;f=(k||(k=d("I64"))).min(h.minTimestampMs,((f=o)==null?void 0:f.sortOrderMs)!=null?(k||(k=d("I64"))).of_float((f=o)==null?void 0:f.sortOrderMs):h.minTimestampMs);(k||(k=d("I64"))).equal(h.minTimestampMs,f)&&h.minMessageId===a&&c("FBLogger")("messenger_web_product").mustfix("EBMessageRangeDataSource: stuck in the same min timestamp: %s, hasMoreAfter: %s",(k||(k=d("I64"))).to_string(f),i.hasMoreAfter);return{hasMoreBefore:e.recovered.hasMoreBefore,isLoadingBefore:!1,minMessageId:a,minTimestampMs:f}}}());this.$2.upsertRange(g);f==null?void 0:f.markQPLPoint("maw_upsert_range_end")};return a}(),n=function(){function a(a){var e=this;this.$1=new Map();this.$3=!1;this.getOrCreateMessageRangeCoveringCursor=function(a,b,f){var g=a.threadKey;return c("switchMap")(e.$2,function(c){return!c?d("relay-runtime").Observable.from(new(d("ReplayLastSubject").ReplayLastSubject)({hasMoreAfter:!1,hasMoreBefore:!1,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:"",maxTimestampMs:(k||(k=d("I64"))).max_int,minMessageId:"",minTimestampMs:k.min_int,threadKey:g})):d("relay-runtime").Observable.from(e.$4(g).getOrCreateMessageRangeCoveringCursor(a,b,f))})};this.extendRange=function(a,c,f){var g=a.threadKey,i=d("MLV2DataSourceLogger").getMLV2LoggerForThread(g,c);if(!e.$3){i==null?void 0:i.markQPLPoint("eb_extend_range_skipped_due_to_disabled");return(h||(h=b("Promise"))).resolve()}return e.$4(g).extendRange(a,c,f)};this.$2=d("ReQLObservable").create(a,function(){return d("ReQL").fromTableAscending(a.tables.secure_encrypted_backups_client_state).take(1).map(function(a){var b=d("MAWEncryptedBackupUtils").getBackupTenancyFromClientStateRow(a);b!=null&&a.backupTenancy==null&&c("FBLogger")("messenger_web_product").warn("Previously broken state of invalid backup tenancy is caught");return b!=null&&(k||(k=d("I64"))).equal(b,(j||(j=d("LSIntEnum"))).ofNumber(c("LSEncryptedBackupsBackupTenancy").PRODUCTION))})}).map(function(a){return Boolean(a==null?void 0:(a=a[0])==null?void 0:a[1])})["do"]({next:function(a){e.$3=a}})}var e=a.prototype;e.$4=function(a){var b=(k||(k=d("I64"))).to_string(a);if(!this.$1.has(b)){a=new m(a);this.$1.set(b,a)}return c("nullthrows")(this.$1.get(b))};return a}(),o,p;function a(a){(o==null||p!==a)&&(p=a,o=new n(a));return o}g["default"]=a}),98);
__d("FaceHappyFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsx("path",{d:"M458.508 1078.5a1 1 0 1 1-.015-2.002 1 1 0 0 1 .015 2.002m-.037 1.668c-.324.91-1.273 1.832-2.46 1.832h-.002c-1.2 0-2.157-.922-2.48-1.832a.5.5 0 1 1 .942-.335c.204.573.835 1.167 1.538 1.167h.001c.692 0 1.315-.593 1.519-1.168a.5.5 0 0 1 .942.335m-5.971-2.667a1 1 0 1 1 2 0 1 1 0 0 1-2 0m3.5-3.5a5.506 5.506 0 0 0-5.5 5.5c0 3.033 2.467 5.5 5.5 5.5s5.5-2.467 5.5-5.5-2.467-5.5-5.5-5.5"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("GroupsCometChatEditChatDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6517941274957526"}),null);
__d("GroupsCometChatEditChatDialogQuery$Parameters",["GroupsCometChatEditChatDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("GroupsCometChatEditChatDialogQuery_facebookRelayOperation"),metadata:{},name:"GroupsCometChatEditChatDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("GroupsCometChatEditChatDialog.entrypoint",["GroupsCometChatEditChatDialogQuery$Parameters","JSResourceForInteraction"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){a=a.threadID;return{queries:{queryReference:{options:{fetchPolicy:"network-only"},parameters:c("GroupsCometChatEditChatDialogQuery$Parameters"),variables:{threadID:a}}}}},root:c("JSResourceForInteraction")("GroupsCometChatEditChatDialog.react").__setRef("GroupsCometChatEditChatDialog.entrypoint")};g["default"]=a}),98);
__d("IIGDAPI",["MAWBridge"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return function(){for(var b=arguments.length,c=new Array(b),e=0;e<b;e++)c[e]=arguments[e];return d("MAWBridge").getBridge().sendAndReceive("backend","igdapi",{args:c,type:a})}}g.makeBridgedApi=a}),98);
__d("IGDBridgedAPI",["IIGDAPI"],(function(a,b,c,d,e,f,g){"use strict";b={33:(a=d("IIGDAPI")).makeBridgedApi("33"),46:a.makeBridgedApi("46"),sendEditMessage:a.makeBridgedApi("sendEditMessage"),sendMediaMessage:a.makeBridgedApi("sendMediaMessage"),sendOrRemoveReaction:a.makeBridgedApi("sendOrRemoveReaction"),sendXmaReceiverFetch:a.makeBridgedApi("sendXmaReceiverFetch")};c=b;g["default"]=c}),98);
__d("IGDGetMessagePluginInfo",["IGDInstamadilloUtils","LSIntEnum","LSPendingTasksPluginType","asyncToGeneratorRuntime","isInstamadillo"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c){return b?i(a,b):c()}function i(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){if(!c("isInstamadillo")())return{openEb:!1,pluginType:void 0};var e=(yield a.messages.index("messageId").get(b.messageId));if(!d("IGDInstamadilloUtils").isInstamadilloMessage(e))return{openEb:!1,pluginType:void 0};e=(yield a.e2ee_igMessageAuxiliaryInfo.get(b.messageId));a=Boolean(e==null?void 0:e.openEb);return{openEb:a,pluginType:(h||(h=d("LSIntEnum"))).ofNumber(c("LSPendingTasksPluginType").IGD_INSTAMADILLO)}});return j.apply(this,arguments)}g.IGDGetMessagePluginInfo=a}),98);
__d("LSClearReactionsV2DetailsAndRange",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(a){return b.sequence([function(a){return b.forEach(b.db.table(239).fetch(),function(a){return a["delete"]()})},function(a){return b.forEach(b.db.table(243).fetch(),function(a){return a["delete"]()})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxClearReactionsV2DetailsAndRangeStoredProcedure";e.exports=a}),null);
__d("LSClearReactionsV2DetailsAndRangeStoredProcedure",["LSClearReactionsV2DetailsAndRange","cr:8709"],(function(a,b,c,d,e,f,g){function a(a){return c("LSClearReactionsV2DetailsAndRange")(a)}g["default"]=a}),98);
__d("LSCommunityPublicGroupParticipationApprovalStatus",[],(function(a,b,c,d,e,f){a=Object.freeze({CAN_PARTICIPATE:1,PARTICIPATION_REQUEST_REQUIRED:2,PARTICIPATION_REQUEST_PENDING:3});f["default"]=a}),66);
__d("LSContactCapabilityBitOffset",[],(function(a,b,c,d,e,f){a=Object.freeze({MESSAGE:0,REPLY_MESSAGE:1,JOIN_GROUP:2,BLOCK:3,SEE:4,SEE_FACEBOOK_PROFILE:5,PAYMENT:6,CAMERA:7,MEDIA_PICKER:8,STICKER:9,GIF:10,AUDIO_CLIPS:11,SHARED_MEDIA:12,REACTIONS:13,SEEN_HEADS:14,THREAD_DETAILS:15,RTC_VIDEO_CALL:16,RTC_VOICE_CALL:17,THREAD_FEEDBACK_AND_REPORT:18,GO_TO_SECRET_CONVERSATION:19,MAKE_ADMIN:20,REMOVE_FROM_GROUP:21,REMOVE_AS_ADMIN:22,VERIFIED:23,DISAPPEARING_MODE:24,SEE_MESSAGE:25,PSEUDO_BLOCK:26,PUSHABLE:27,MESSAGE_BLOCK_PLACED:28,FACEBOOK_BLOCK_PLACED:29,VIEWER_IS_UNCONNECTED:64,PAGE_PLATFORM_BOT:65,RESTRICT_PLACED:66,IS_XAC_ELIGIBLE:67,IS_GROUPS_XAC_ELIGIBLE:68,IS_GROUPS_XAC_CALLING_ELIGIBLE:69,IS_E2EE_ONLY:70,IS_ELIGIBLE_FOR_SAFETY_NOTICE:71,NOVI:72,IS_CONTACT_SHAREABLE:73,IS_HIDDEN:74,IS_THREAD_CUTOVER_USER:75,HAS_CUTOVER_THREAD:76,IS_COMMUNITY_BOT_PAGE:77,IS_NOT_SEARCHABLE:78,CAN_UPSELL_VOICEMAIL:79,DEFAULT_E2EE_THREADS:80,INCALL_CAPTIONS:81,IS_INTERNAL:82,DEFAULT_E2EE_THREAD_ONE_TO_ONE:83,IS_GROUP_UPDATES_BOT:84,LINK_TO_IG_PROFILE:85,IS_MARKETPLACE_NOT_CONSENTED:86,IS_GAMING_NOT_CONSENTED:87,DISABLE_MP_DMA_THREAD_COMPOSER:88,IS_GAMING_CONSENT_UNDECIDED:89,IS_GAMING_CONSENTED:90,IS_MSPLIT_NOT_CONSENTED:91,IS_MSPLIT_CONSENT_UNDECIDED:92,WORK_CHAT_GOVERNANCE_BLOCKED:93,HAS_P2P_DISAPPEARING_MESSAGES_THREAD:94,HAS_INSTAMADILLO_CUTOVER_THREAD:95,HAS_TTLC_CLIP_ENABLED:96,HAS_TTLC_GENERIC_XMA_SHARE_ENABLED:97,HAS_TTLC_MEDIA_SHARE_ENABLED:98,HAS_TTLC_STORY_SHARE_ENABLED:99,ELIGIBLE_FOR_META_VERIFIED_LABEL:100,HAS_JENGA_WORKCHAT_DEFLECTION_ENABLED:101,RESTRICT_CREATING_GROUP_THREAD:102,IS_USER_GENERATED_CHARACTER_BOT:103,IS_FRIENDING_RESTRICTED:104});f["default"]=a}),66);
__d("LS_Contact",[],(function(a,b,c,d,e,f){function a(a){return a.context}function b(a){return a.value}function c(a){return a.value.phoneNumber}function d(a){return a.value.normalizedNameForSearch}function e(a){return a.value.profilePictureFallbackUrl}function g(a){return a.value.profilePictureUrlExpirationTimestampMs}function h(a){return a.value.profilePictureLargeUrl}function i(a){return a.value.profilePictureLargeFallbackUrl}function j(a){return a.value.profilePictureLargeUrlExpirationTimestampMs}function k(a){return a.value.contactReachabilityStatusType}function l(a){return a.value.capabilities2}function m(a){return a.value.id}function n(a){return a.value.profilePictureUrl}function o(a){return a.value.name}function p(a){return a.value.normalizedSearchTerms}function q(a){return a.value.isMessengerUser}function r(a){return a.value.isMemorialized}function s(a){return a.value.isManagedByViewer}function t(a){return a.value.blockedByViewerStatus}function u(a){return a.value.optimisticBlockedByViewerStatus}function v(a){return a.value.optimisticBlockedByViewerStatusTimestampMs}function w(a){return a.value.pendingMnUserBlockAction}function x(a){return a.value.pendingMnUserBlockActionTimestampMs}function y(a){return a.value.pendingFbUserBlockAction}function z(a){return a.value.pendingFbUserBlockActionTimestampMs}function A(a){return a.value.rank}function B(a){return a.value.firstName}function C(a){return a.value.contactType}function D(a){return a.value.pendingMessengerRestrictAction}function E(a){return a.value.contactTypeExact}function F(a){return a.value.messengerCallLogThirdPartyId}function G(a){return a.value.profileRingColor}function H(a){return a.value.requiresMultiway}function I(a){return a.value.blockedSinceTimestampMs}function J(a){return a.value.fbUnblockedSinceTimestampMs}function K(a){return a.value.canViewerMessage}function L(a){return a.value.emailAddress}function M(a){return a.value.profileRingColorExpirationTimestampMs}function N(a){return a.value.workCompanyId}function O(a){return a.value.workCompanyName}function P(a){return a.value.workJobTitle}function Q(a){return a.value.profileRingState}function R(a){return a.value.deviceContactId}function S(a){return a.value.workForeignEntityType}function T(a){return a.value.capabilities}function U(a){return a.value.contactViewerRelationship}function V(a){return a.value.gender}function W(a){return a.value.secondaryName}function X(a){return a.value.username}function Y(a){return a.value.restrictionType}function Z(a){return a.value.waConnectStatus}function $(a){return a.value.isEmployee}function aa(a){return a.value.pageType}function ba(a){return a.value.authorityLevel}f.__context=a;f.__lightspeed_table_row=b;f.phone_number=c;f.normalized_name_for_search=d;f.profile_picture_fallback_url=e;f.profile_picture_url_expiration_timestamp_ms=g;f.profile_picture_large_url=h;f.profile_picture_large_fallback_url=i;f.profile_picture_large_url_expiration_timestamp_ms=j;f.contact_reachability_status_type=k;f.capabilities_2=l;f.id_=m;f.profile_picture_url=n;f.name=o;f.normalized_search_terms=p;f.is_messenger_user=q;f.is_memorialized=r;f.is_managed_by_viewer=s;f.blocked_by_viewer_status=t;f.optimistic_blocked_by_viewer_status=u;f.optimistic_blocked_by_viewer_status_timestamp_ms=v;f.pending_mn_user_block_action=w;f.pending_mn_user_block_action_timestamp_ms=x;f.pending_fb_user_block_action=y;f.pending_fb_user_block_action_timestamp_ms=z;f.rank=A;f.first_name=B;f.contact_type=C;f.pending_messenger_restrict_action=D;f.contact_type_exact=E;f.messenger_call_log_third_party_id=F;f.profile_ring_color=G;f.requires_multiway=H;f.blocked_since_timestamp_ms=I;f.fb_unblocked_since_timestamp_ms=J;f.can_viewer_message=K;f.email_address=L;f.profile_ring_color_expiration_timestamp_ms=M;f.work_company_id=N;f.work_company_name=O;f.work_job_title=P;f.profile_ring_state=Q;f.device_contact_id=R;f.work_foreign_entity_type=S;f.capabilities=T;f.contact_viewer_relationship=U;f.gender=V;f.secondary_name=W;f.username=X;f.restriction_type=Y;f.wa_connect_status=Z;f.is_employee=$;f.page_type=aa;f.authority_level=ba}),66);
__d("LSContactHasCapability__has_capability$normalization.graphql",["LS_Contact","LS_Contact"],(function(a,b,c,d,e,f){"use strict";a={kind:"SplitOperation",metadata:{},name:"LSContactHasCapability__has_capability$normalization",selections:[{kind:"ClientExtension",selections:[{name:"capabilities",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Contact").capabilities,rootFragment:null}},{name:"capabilities_2",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Contact").capabilities_2,rootFragment:null}}]}]};e.exports=a}),null);
__d("LSContactHasCapability__has_capability.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LSContactHasCapability__has_capability",selections:[{alias:null,args:null,kind:"ScalarField",name:"capabilities",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"capabilities_2",storageKey:null}],type:"LS_Contact",abstractKey:null};e.exports=a}),null);
__d("LSContactVerificationBadge.react",["CometPageVerificationIcon.react","LSContactBitOffset","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.contact,e=a.icon;a=a.size;b=d("LSContactBitOffset").has(23,b);if(!b)return null;if(e!=null)return i.jsx("span",{className:"xurb0ha",children:e});return a!=null?i.jsx("span",{className:"xurb0ha",children:i.jsx(c("CometPageVerificationIcon.react"),{size:a,verificationBadge:"BLUE_VERIFIED"})}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LSInsertAnonymousTaskContext",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(311).add({taskId:a[0],projectName:a[1]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSAnonymousCredentialsInsertAnonymousTaskContextStoredProcedure";e.exports=a}),null);
__d("LSIssueNewTaskUsingSyncChannel",["LSIssueNewTaskAndGetTaskID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(f){return c.sequence([function(e){return c.storedProcedure(b("LSIssueNewTaskAndGetTaskID"),a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[12]).then(function(a){return a=a,d[0]=a[0],a})},function(b){return c.db.table(306).add({taskId:d[0],syncChannel:a[10],requiresAuthentication:a[11]})},function(a){return e[0]=d[0]}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSCoreIssueNewTaskUsingSyncChannelStoredProcedure";e.exports=a}),null);
__d("LSDispatchMediaReceiverFetchForWeb",["LSInsertAnonymousTaskContext","LSIssueNewTaskUsingSyncChannel","LSMailboxTaskCompletionApiOnTaskInsertion"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[0].set("message_id",a[1]),d[0].set("receiver_fetch_id",a[2]),d[1]=d[0].get("message_id"),d[0],d[4]=["LSMediaReceiverFetchTransportAnonymizedMsgrWebE2EEMediaReceiverFetchSyncAction",".",d[1]].join(""),d[2]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTaskUsingSyncChannel"),d[4],c.i64.cast([0,1018]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,2]),!1,c.i64.cast([0,0])).then(function(a){return a=a,d[3]=a[0],a})},function(a){return c.storedProcedure(b("LSMailboxTaskCompletionApiOnTaskInsertion"),d[3])},function(a){return c.storedProcedure(b("LSInsertAnonymousTaskContext"),d[3],"LS_MediaReceiverFetch")}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMediaReceiverFetchTransportDispatchMediaReceiverFetchForWebStoredProcedure";e.exports=a}),null);
__d("LSDispatchMediaReceiverFetchForWebStoredProcedure",["LSDispatchMediaReceiverFetchForWeb","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;d[1]=b.messageId;d[2]=b.receiverFetchId;return c("LSDispatchMediaReceiverFetchForWeb").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSFetchAdditionalThreadData",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[1]=d[0].get("thread_key"),d[0],d[2]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),["fetch_additional_thread_data","_",c.i64.to_string(d[1])].join(""),c.i64.cast([0,733]),d[2],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxFetchAdditionalThreadDataStoredProcedure";e.exports=a}),null);
__d("LSFetchAdditionalThreadDataStoredProcedure",["LSFetchAdditionalThreadData","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;return c("LSFetchAdditionalThreadData").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSFetchProactiveWarningsIfNeeded",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[5]=b.syncGroup,c.i64.neq(d[5],void 0)?d[4]=d[5]:d[4]=c.i64.cast([0,1]),d[0]=d[4])})},function(e){return c.db.table(183).fetch([[[a[0]]]]).next().then(function(e,f){var g=e.done;e=e.value;return g?c.sequence([function(b){return c.db.table(183).put({threadKey:a[0],suspectId:a[0]})},function(e){return d[4]=new c.Map(),d[4].set("thread_key",a[0]),d[4].set("sync_group",d[0]),d[5]=c.toJSON(d[4]),c.storedProcedure(b("LSIssueNewTask"),"proactive_warnings_fetch_queue",c.i64.cast([0,192]),d[5],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return d[2]=c.i64.cast([0,1])}]):(f=e.item,c.sequence([function(e){return d[5]=f.nextCheckTimestampMs,d[4]=c.i64.of_float(Date.now()),c.i64.neq(d[5],void 0)&&c.i64.ge(d[4],d[5])?c.sequence([function(b){return c.db.table(183).put({threadKey:a[0],suspectId:a[0]})},function(e){return d[7]=new c.Map(),d[7].set("thread_key",a[0]),d[7].set("sync_group",d[0]),d[8]=c.toJSON(d[7]),c.storedProcedure(b("LSIssueNewTask"),"proactive_warnings_fetch_queue",c.i64.cast([0,192]),d[8],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return d[6]=c.i64.cast([0,1])}]):c.resolve((c.i64.neq(d[5],void 0)&&f.tag!==void 0?d[7]=c.i64.cast([0,2]):d[7]=c.i64.cast([0,3]),d[6]=d[7]))},function(a){return d[2]=d[6]}]))})}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSProactiveWarningsFetchProactiveWarningsIfNeededStoredProcedure";e.exports=a}),null);
__d("LSFetchProactiveWarningsIfNeededStoredProcedure",["LSFetchProactiveWarningsIfNeeded","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;return c("LSFetchProactiveWarningsIfNeeded").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSIssuePointQueryForRollCallConversion",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("roll_call_id",a[1]),d[0].set("thread_key",a[0]),d[0].set("query_purpose",c.i64.cast([0,2])),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"roll_call_point_query",c.i64.cast([0,611]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxIssuePointQueryForRollCallConversionStoredProcedure";e.exports=a}),null);
__d("LSIssuePointQueryForRollCallConversionStoredProcedure",["LSIssuePointQueryForRollCallConversion","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;d[1]=b.rollCallId;return c("LSIssuePointQueryForRollCallConversion").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSMarkOptimisticMessageFailedStoredProcedure",["LSMarkOptimisticMessageFailed","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.optimisticMid;d[1]=b.errorMessage;return c("LSMarkOptimisticMessageFailed").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSMessageTakedownState",[],(function(a,b,c,d,e,f){a=Object.freeze({TAKEN_DOWN_BY_META:1,TAKEN_DOWN_BY_ADMIN:2,GEO_BLOCKED:3});f["default"]=a}),66);
__d("LSNullstateCTAType",[],(function(a,b,c,d,e,f){a=Object.freeze({NONE:0,GET_STARTED:1,ICEBREAKER:2,PRIVACY_DISCLOSURE:3,MP_EMPTY_ICEBREAKER:4});f["default"]=a}),66);
__d("LSRelayConnections",["FBLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.end_cursor}function b(a){return a.has_next_page}function d(a){return a.has_previous_page}function e(a){return(a=a.is_loading_next)!=null?a:!1}function f(a){return(a=a.is_loading_previous)!=null?a:!1}function h(a){return a.start_cursor}function i(a){return JSON.stringify(a)}function j(a){return JSON.parse(a)}function k(a,b){if(a.length>b.first+1)throw c("FBLogger")("meteora").mustfixThrow("Got more edges (%s) than expected given the limit (%s).",a.length,b.first);var d=a[0],e=a.length>=b.first+1;b=e?b.first-1:a.length-1;a=a.length>0?a[b]:null;return{end_cursor:a!=null?i(a.value[0]):null,has_next_page:e,has_previous_page:!1,start_cursor:d!=null?i(d.value[0]):null}}function l(a){var b;if(((b=a.first)!=null?b:0)<=0)throw c("FBLogger")("meteora").mustfixThrow("Invalid `first` argument passed to connection: expected > 0 but got %s",String(a.first))}function m(a,b){a=a;b.after!=null&&(a=a.bounds({gt:j(b.after)}));b.before!=null&&(a=a.bounds({lt:j(b.before)}));a=a.take(b.first+1);return a}g.end_cursor=a;g.has_next_page=b;g.has_previous_page=d;g.is_loading_next=e;g.is_loading_previous=f;g.start_cursor=h;g.keyToCursor=i;g.cursorToKey=j;g.pageInfoFromEdges=k;g.validateArgsOrThrow=l;g.applyConnectionArgs=m}),98);
__d("LSRelayContextDB",["LSDatabaseSingleton","cr:8556","err","unrecoverableViolation"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){switch(a){case"PROD":return(h||(h=d("LSDatabaseSingleton"))).getLSDatabaseSingletonPromiseOrValue();case"EXAMPLE":if(b("cr:8556")==null)throw c("err")("Loading test data on prod");return b("cr:8556").getExampleLSDatabasePromise();default:throw c("unrecoverableViolation")("Unsupported dbType: "+a,"lightspeed_resolvers")}}g.getLSDbStoragePromise=a}),98);
__d("LSRelayContext",["LSRelayContextDB","Promise","RelayAPIConfig","isPromise","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){a=a.dbType;a=k(a);return a instanceof(i||(i=b("Promise")))?a.then(function(a){return{actorID:c("RelayAPIConfig").actorID,db:a}}):{actorID:c("RelayAPIConfig").actorID,db:a}}var j={};function k(a){if(j[a]==null){var b=d("LSRelayContextDB").getLSDbStoragePromise(a);j[a]=b;(h||(h=c("isPromise")))(b)&&c("promiseDone")(b,function(b){j[a]=b})}return j[a]}g.getContext=a}),98);
__d("LSRelayLiveResolvers",["LSRelayConnections","ReQLObservable","areEqual","emptyFunction","relay-runtime","relay-runtime/store/experimental-live-resolvers/LiveResolverSuspenseSentinel","transformObservableToLiveState"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return j(k(a,b),function(b){return b.map(function(b){b[0];b=b[1];return{context:a,value:b}})})}function b(a,b,c){d("LSRelayConnections").validateArgsOrThrow(c);return j(k(a,function(a){return d("LSRelayConnections").applyConnectionArgs(b(a),c)}),function(b){b=b.map(function(b){return{context:a,value:b}});return{context:a,value:{edges:b.slice(0,c.first),page_info:d("LSRelayConnections").pageInfoFromEdges(b,c)}}})}function e(a,b){return j(k(a,function(a){return b(a).take(1)}),function(b){return b.length>0?{context:a,value:b[0][1]}:null})}function f(a,b,c){return j(k(a,function(a){return b(a).take(1)}),function(b){return{context:a,value:c(b==null?void 0:(b=b[0])==null?void 0:b[1])}})}var i={read:function(){return null},subscribe:function(){return c("emptyFunction")}};function j(a,b){var c=a.read;a=a.subscribe;return{read:function(){var a=c();if(d("relay-runtime/store/experimental-live-resolvers/LiveResolverSuspenseSentinel").isSuspenseSentinel(a))return d("relay-runtime").suspenseSentinel();else return b(a)},subscribe:a}}function k(a,b){return c("transformObservableToLiveState")(d("relay-runtime").Observable.create(function(e){var f,g=d("ReQLObservable").create(a.db,b).subscribe({complete:e.complete,error:e.error,next:function(a){if((h||(h=c("areEqual")))(a,f))return;f=a;e.next(a)}});return g}))}g.iterableToPluralFieldLiveResolver_MAY_CAUSE_OVERFETCHING=a;g.iterableToConnectionLiveResolver=b;g.iterableToFirstValueLiveResolver=e;g.iterableToMappedValueLiveResolver=f;g.nullValueLiveState=i;g.mapLiveState=j;g.makeLiveState=k}),98);
__d("LSRoot__thread",["LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){a=a.context;return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a,function(a){return d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(b.threadKey).take(1)})}g.thread=a}),98);
__d("LSRoot__viewer",[],(function(a,b,c,d,e,f){"use strict";function a(a){a=a.context;return{context:a,value:{}}}f.viewer=a}),66);
__d("LSSendTypingIndicator",["LSIssueNewFireAndForgetTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,1]):(b=a.item,d[6]=b.syncGroup,c.i64.neq(d[6],void 0)?d[5]=d[6]:d[5]=c.i64.cast([0,1]),d[0]=d[5])})},function(b){return d[4]=["typing","_",c.i64.to_string(a[0])].join(""),c.forEach(c.filter(c.db.table(5).fetch(),function(a){return d[4]===a.queueName}),function(a){return a["delete"]()})},function(e){return d[2]=new c.Map(),d[2].set("thread_key",a[0]),d[2].set("is_group_thread",a[1]),d[2].set("is_typing",a[2]),d[2].set("attribution",c.i64.cast([0,0])),d[2].set("sync_group",d[0]),d[3]=c.toJSON(d[2]),c.storedProcedure(b("LSIssueNewFireAndForgetTask"),d[4],c.i64.cast([0,3]),d[3])}])},function(a){return c.resolve(e)}])}a.__sproc_name__="LSTypingSendTypingIndicatorStoredProcedure";e.exports=a}),null);
__d("LSSendTypingIndicatorStoredProcedure",["LSSendTypingIndicator","cr:8709"],(function(a,b,c,d,e,f,g){function a(a,b){var d=[];d[0]=b.threadKey;d[1]=b.isGroupThread;d[2]=b.isTyping;return c("LSSendTypingIndicator").apply(void 0,d.concat([a]))}g["default"]=a}),98);
__d("LSThreadCapabilityBitOffset",[],(function(a,b,c,d,e,f){a=Object.freeze({PAYMENT:0,CAMERA:1,MEDIA_PICKER:2,STICKER:3,GIF:4,GO_TO_SECRET_CONVERSATION:5,COLOR_CUSTOMIZATION:6,EMOJI_CUSTOMIZATION:7,THREAD_DETAILS_PROFILE_BUTTON:8,NICKNAMES:9,BLOCK:10,CALIBRA:12,MESSENGER_KIDS_MANAGE_KID_ACCOUNT:13,AUDIO_CLIPS:14,SHARED_MEDIA:15,BLOCK_GROUP_MEMBER:16,FEEDBACK_AND_REPORT:17,REACTIONS:18,MUTE_THREAD:19,SEEN_HEADS:20,MESSAGE_REQUEST_COMPOSER_BANNER:21,IN_THREAD_PROFILE_BUTTON:22,THREAD_DETAILS:23,RTC_VIDEO_CALL:24,RTC_VOICE_CALL:25,MEMBER_LIST:26,ADD_MEMBER:27,LEAVE_THREAD:28,BLOCKED_USER_INTERSTITIAL:29,OPTIMISTIC_THREAD_FEEDBACK_AND_REPORT:30,LOCATION_SHARING:31,IGNORE_MESSAGES:32,FOCUS_MODE:33,SEARCH_IN_CONVERSATION:34,CREATE_GROUP:35,POLL_CREATION:36,DISPLAY_ACTOR_TYPE_IN_THREAD_VIEW_HEADER:37,DISAPPEARING_MODE:38,FORCE_ONE_PHASE_SEND:39,SPLIT_MULTI_SEND_PHOTO:40,THREAD_DETAILS_IG_PROFILE_BUTTON:41,MESSAGE_REPLY:42,MENTIONS:43,GAMES_BOT_THREAD:44,DISABLE_LINKS:45,BLUR_MEDIA:46,DISABLE_CONTEXT_BANNER:47,TOP_LEVEL_SELF_REMEDIATION:48,DISABLE_USER_CONTROL:49,THREAD_DETAILS_SHOW_USER_NAME:50,DISABLE_MESSAGE_BUBBLE_SWIPE:51,IGNORED_THREAD:52,PAGE_BAN:53,CUSTOM_THREAD_NOTIFICATION_SOUNDS:54,ROOM_CREATION:55,FILE_PICKER:56,JOIN_ROOM:57,SELFIE_STICKER:58,POWER_UP:59,THREAD_NAME_CUSTOMIZATION:60,THREAD_PHOTO_CUSTOMIZATION:61,STRUCTURED_INPUT:62,SUPPRESS_NULLSTATE_HEADER:63,ARCHIVE_THREAD:64,UNARCHIVE_THREAD:65,MEMBER_REQUEST:66,BUSINESS_INBOX_BAN:67,CTM_AD_THREAD_WITH_AD_WARNING:68,BUSINESS_INBOX_SAVED_REPLIES:69,GARDEN_THREAD_SETTINGS:70,MARKETPLACE_SAVED_REPLIES:71,CARRIER_MESSAGING_ADD_MEMBER:72,PHONE_CALL:73,THREAD_DETAILS_DELETE_THREAD:74,EPHEMERAL_MESSAGE_TIMER:75,MESSAGE_EXPIRATION:76,MESSAGE_SOUND_SETTINGS:77,RINGTONE_SOUND_SETTINGS:78,HIDE_FROM_ACTIVE_NOW:79,MAGIC_WORDS:80,THREAD_DESCRIPTION_CUSTOMIZATION:81,BUSINESS_INBOX_CATALOG:82,ADMIN_RECALL_MESSAGE:83,SHARE_CONTACT:84,RESTRICT_CONTACT:85,SOUND_BITE:86,MOST_LIKELY_TO_POLL_CREATION:87,REPORT_CHAT_TO_ADMIN:88,CAN_MARK_READ_OR_UNREAD:89,BUSINESS_TOOLS:90,REMOVE_MEMBER:91,GROUP_GO_TO_SECRET_CONVERSATION:92,REPORT_MESSAGE_TO_ADMIN:93,MANAGE_MEMBER:94,SHARED_LINKS:95,SHARED_CONTENT:96,ADD_XAC_USERS:97,BUSINESS_ORDER_MANAGEMENT:98,RTC_MARKETPLACE_COMPOSER_BANNER:99,IS_SELLER_RTC_ELIGIBLE:100,IS_BUYER_RTC_ELIGIBLE:101,MESSAGE_LOCAL_DELETE:102,MESSAGE_FORWARD:103,IS_NFB_ELIGIBLE:104,MESSAGE_REQUEST_GROUP_INVITE:105,VIEW_PINNED_MESSAGES_V2:106,BUSINESS_APPOINTMENT_BOOKING:107,THREAD_DETAILS_SHOW_CHAT_INVITE_LINK:108,HOTLIKE_STICKER:109,IS_LEARNING_SPACE_CHAT:110,AUDIO_CAPTIONS:111,COMMAND_SILENT:112,MARKETPLACE_THREAD_COMMERCE_PROFILE_BUTTON:113,EPHEMERAL_MEDIA:114,COMMAND_EVERYONE:115,COMMAND_GIF:116,MARKETPLACE_THREAD_COMMERCE_PRODUCT_BUTTON:117,CAMERA_BACKUP:118,BLOCK_MARKETPLACE_USER:119,COMMUNITY_MESSAGING_CHANNEL_INVITE:120,COMMAND_TEXT_REPLACEMENT:121,MESSAGE_UNSEND:122,IMMERSIVE_MODES_SPACES:123,COMMUNITY_MESSAGING_LINK_SHARING_V2:124,COMMUNITY_MESSAGING_AUDIO_ROOMS:125,BUMP_MESSAGE_ACTION:126,CUTOVER_BLOCK_COMPOSER:128,FAVORITE_THREAD:129,BUMP_THREAD:131,IS_BUSINESS_APPOINTMENT_THREAD_INTENT_ENABLED:132,COMMUNITY_MESSAGING_ICEBREAKERS:133,COMMUNITY_MESSAGING_CHANNEL_EMOJI_CUSTOMIZATION:134,COMMUNITY_MESSAGING_CHANNEL_DESCRIPTION_CUSTOMIZATION:135,IS_MESSENGER_CHAT_ENTITY_THREAD:136,RESHARE_HUB:138,REACTIONS_V2:139,SEEN_COUNTS_V2:140,IS_LARGE_THREAD:141,PUBLIC_CHAT_BAN_USER:143,CONTENT_EXPLORER:144,PRO_MODE:145,CUSTOMER_APPOINTMENT_REQUEST:146,IS_MESSENGER_GUIDE_CHAT_ENTITY_THREAD:147,COMMUNITY_MESSAGING_THREAD_LEAVE_UPSELL:148,GENERATED_STICKERS:149,ROLLCALL:152,BUSINESS_CHAT_PRIVACY_DISCLOSURE:153,PAUSE_CHAT:154,GAMES_DISCOVERY:155,MULTI_REACT:156,STICKER_TRAY_SEARCH:157,POLL_V1_UI:158,POLL_V2_UI:159,DEIDENTIFIED_STICKER_SEARCH:160,PIN_CHANNEL_ON_PROFILE:161,ARMADILLO_TLC_CONTROL_OPEN_THREAD:162,SUGGESTED_TAB:163,GROUP_CHAT_UPGRADE_ELIGIBILITY:164,HAS_GROUP_UPDATES_BOT_ATTACHED:165,HAS_GROUP_UPDATES_SETTING_ENABLED:166,SUB_THREAD_CREATION_ENABLED:167,COMMUNITY_MESSAGING_FIRST_MESSAGE_UPSELL_WITH_ICE_BREAKERS:168,REACTIONS_V2_WRITE:169,POLL_VOTING:170,AUTO_ENDED_CHANNEL_COMPOSER:171,MODIFY_PINNED_MESSAGES_V2:172,CUSTOM_GHOST_TEXT:173,AVATAR_DETAILS:174,COLLAPSIBLE_XMAT:175,ADD_YOURS:176,PAUSE_CHAT_ON_BLUE:177,UPGRADED_COMMUNITY_JOINED:178,IS_UPGRADED_COMMUNITY_OWNER:179,AI_BOT_DATA_USAGE_IN_THREAD_DETAILS:180,AI_BOT_FEEDBACK_IN_THREAD_DETAILS:181,AI_BOT_TIPS_IN_THREAD_DETAILS:182,AI_BOT_SUMMONING:183,VIEW_REACTION_DETAILS:184,BUSINESS_PROFILE_BADGE:185,HINT_CARD_IN_CHANNEL_UPGRADED_FROM_GROUP_CHAT:186,AI_BOT_EMBODIMENT:187,BMOP_IN_THREAD_CATALOG_ENTRY_POINT:188,OPTIMISTIC_THREAD_APPOINTMENT_REQUEST:189,IS_GAME_RECOMMENDATIONS_CHAT_ENTITY_THREAD:190,IS_XAC_READ_ONLY:192,WILL_XAC_BE_READ_ONLY:193,IS_EDIT_MESSAGE_ENABLED:194,SUB_THREAD_LIST:195,TRANSLATE_MESSAGE:196,MANAGE_CHAT_THREAD_DETAILS:197,CUSTOMER_LEAD_FORM_APPOINTMENT_REQUEST:198,ADMOD_ONBOARDING_ACTIONS_V2:199,RTC_OPTIN_REQUEST:200,CUSTOMER_LEAD_FORM_GET_QUOTE:201,PAUSED_BY_SOFT_ACTION_COMPOSER_BLOCK:202,DISABLE_MARKETPLACE_DMA_THREAD_COMPOSER:203,CUSTOMIZE_WELCOME_PROMPT_THREAD_DETAILS:204,IS_COMMUNITY_MESSAGING_FIRST_THREAD_JOIN_PER_COMMUNITY_FOR_MEMBER_ONBOARDING:205,SUB_THREAD_OPTIMISTIC_CREATE_ENABLED:206,ONE_CLICK_MUTE_ENABLED:207,GEOCHATS_CAN_SET_LOCATION:208,GEOCHATS_CAN_VIEW_LOCATION:209,WORK_CHAT_GOVERNANCE_BLOCK:210,INSTAMADILLO_TRANSPORT_ENABLED:211,INSTAMADILLO_DISAPPEARING_MESSAGES_TOGGLE_ENABLED:212,IS_BSG_THREAD:213,IS_INSTAMADILLO_CUTOVER:214,WRITE_WITH_AI_ENABLED:215,SHOW_FOLLOW_PAGE_CTA:216,CAN_VIEWING_PAGE_BE_LIKED:217,DELETE_FROM_THREAD_LIST_VIEW:218,INVITE_MODEL_TEXT_ONLY:219,COMMAND_SUMMARY:220,COMMUNITY_AI:221,BUSINESS_INBOX_FILE_SHARING:222,MESSAGE_AS_PAGE:223,COMPOSER_INLINE_MEDIA:224,INSTAMADILLO_TTLC_TEXT:225,INSTAMADILLO_TTLC_CLIP:226,INSTAMADILLO_TTLC_REEL_SHARE:227,INSTAMADILLO_TTLC_MEDIA_SHARE:228,INSTAMADILLO_TTLC_STORY_SHARE:229,INSTAMADILLO_TTLC_LINK:230,INSTAMADILLO_TTLC_GENERIC_XMA:231,INSTAMADILLO_TTLC_IMAGE:232,INSTAMADILLO_TTLC_VIDEO:233,INSTAMADILLO_TTLC_AUDIO:234,INSTAMADILLO_TTLC_CALLING:235,INSTAMADILLO_TTLC_PROFILE:236,AI_BOT_MEMU_ONBOARDING_IN_THREAD_DETAILS:237,CHANNELS_VOICE_SWITCHING_ENABLED:238,AI_BOT_CREATOR_INFO:239,AI_BOT_HALLUCINATION_DISCLAIMER_IN_THREAD_DETAILS:240,BUSINESS_FORM_MANAGEMENT:241,AI_STUDIO_IN_THREAD:242,AI_UGC_BOT:243,AI_BOT_FBGROUP_INFO:244,MAGIC_MESSENGER:245,AI_BOT_MANAGE_AI_MEMORY_IN_THREAD_DETAILS:246,GROUP_CHAT_AI_IMAGE_ENABLED:247,GROUP_UGC_EDIT_ENABLED:248,RESUME_GROUP_CHAT_UPGRADED_TO_COMMUNITY:249,FRIENDING_ACTION:250});f["default"]=a}),66);
__d("LS_Participant",["LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){function a(a){return a.context}function b(a){return a.value}function c(a){return a.value.readWatermarkTimestampMs}function e(a){return a.value.deliveredWatermarkTimestampMs}function f(a){return a.value.nickname}function h(a){return a.value.authorityLevel}function i(a){return a.value.threadKey}function j(a){return a.value.contactId}function k(a){return a.value.readActionTimestampMs}function l(a){return a.value.isAdmin}function m(a){return a.value.subscribeSource}function n(a){return a.value.normalizedSearchTerms}function o(a){return a.value.participantCapabilities}function p(a){return a.value.groupParticipantJoinState}function q(a){return a.value.isModerator}function r(a){return a.value.isSuperAdmin}function s(a){return a.value.threadRoles}function t(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.contacts).getKeyRange(a.value.contactId)})}g.__context=a;g.__lightspeed_table_row=b;g.read_watermark_timestamp_ms=c;g.delivered_watermark_timestamp_ms=e;g.nickname=f;g.authority_level=h;g.thread_key=i;g.contact_id=j;g.read_action_timestamp_ms=k;g.is_admin=l;g.subscribe_source=m;g.normalized_search_terms=n;g.participant_capabilities=o;g.group_participant_join_state=p;g.is_moderator=q;g.is_super_admin=r;g.thread_roles=s;g.contact=t}),98);
__d("LS_Participant_Connection",["LSRelayConnections"],(function(a,b,c,d,e,f,g){function a(a){return a.value.edges}function b(a){return a.value.page_info}function c(a){return d("LSRelayConnections").keyToCursor(a.value[0])}function e(a){return{context:a.context,value:a.value[1]}}g.edges=a;g.page_info=b;g.cursor=c;g.node=e}),98);
__d("LS_Thread",["LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){function a(a){return a.context}function b(a){return a.value}function c(a){return a.value.lastActivityTimestampMs}function e(a){return a.value.lastReadWatermarkTimestampMs}function f(a){return a.value.snippet}function h(a){return a.value.threadName}function i(a){return a.value.threadPictureUrl}function j(a){return a.value.needsAdminApprovalForNewParticipant}function k(a){return a.value.authorityLevel}function l(a){return a.value.threadKey}function m(a){return a.value.mailboxType}function n(a){return a.value.threadType}function o(a){return a.value.folderName}function p(a){return a.value.threadPictureUrlFallback}function q(a){return a.value.threadPictureUrlExpirationTimestampMs}function r(a){return a.value.removeWatermarkTimestampMs}function s(a){return a.value.muteExpireTimeMs}function t(a){return a.value.muteMentionExpireTimeMs}function u(a){return a.value.muteCallsExpireTimeMs}function v(a){return a.value.groupNotificationSettings}function w(a){return a.value.isAdminSnippet}function x(a){return a.value.snippetSenderContactId}function y(a){return a.value.snippetText}function z(a){return a.value.snippetStringHash}function A(a){return a.value.snippetStringArgument1}function B(a){return a.value.snippetAttribution}function C(a){return a.value.snippetAttributionStringHash}function D(a){return a.value.disappearingSettingTtl}function E(a){return a.value.disappearingSettingUpdatedTs}function F(a){return a.value.disappearingSettingUpdatedBy}function G(a){return a.value.ongoingCallState}function H(a){return a.value.cannotReplyReason}function I(a){return a.value.customEmoji}function J(a){return a.value.customEmojiImageUrl}function K(a){return a.value.avatarStickerInstructionKeyId}function L(a){return a.value.avatarStickerId}function M(a){return a.value.avatarStickerThumbnailImageUrl}function N(a){return a.value.avatarStickerThumbnailImageMimeType}function O(a){return a.value.avatarStickerOriginalImageUrl}function P(a){return a.value.avatarStickerOriginalImageMimeType}function Q(a){return a.value.outgoingBubbleColor}function R(a){return a.value.themeFbid}function S(a){return a.value.parentThreadKey}function T(a){return a.value.nullstateDescriptionText1}function U(a){return a.value.nullstateDescriptionType1}function V(a){return a.value.nullstateDescriptionText2}function W(a){return a.value.nullstateDescriptionType2}function X(a){return a.value.nullstateDescriptionText3}function Y(a){return a.value.nullstateDescriptionType3}function Z(a){return a.value.snippetHasEmoji}function $(a){return a.value.hasPersistentMenu}function aa(a){return a.value.disableComposerInput}function ba(a){return a.value.cannotUnsendReason}function ca(a){return a.value.viewedPluginKey}function da(a){return a.value.viewedPluginContext}function ea(a){return a.value.clientThreadKey}function fa(a){return a.value.capabilities}function ga(a){return a.value.shouldRoundThreadPicture}function ha(a){return a.value.proactiveWarningDismissTime}function ia(a){return a.value.isCustomThreadPicture}function ja(a){return a.value.otidOfFirstMessage}function ka(a){return a.value.normalizedSearchTerms}function la(a){return a.value.additionalThreadContext}function ma(a){return a.value.disappearingThreadKey}function na(a){return a.value.isDisappearingMode}function oa(a){return a.value.disappearingModeInitiator}function pa(a){return a.value.unreadDisappearingMessageCount}function qa(a){return a.value.lastMessageCtaId}function ra(a){return a.value.lastMessageCtaType}function sa(a){return a.value.lastMessageCtaTimestampMs}function ta(a){return a.value.consistentThreadFbid}function ua(a){return a.value.threadDescription}function va(a){return a.value.unsendLimitMs}function wa(a){return a.value.capabilities2}function xa(a){return a.value.capabilities3}function ya(a){return a.value.syncGroup}function za(a){return a.value.threadInvitesEnabled}function Aa(a){return a.value.threadInviteLink}function Ba(a){return a.value.isAllUnreadMessageMissedCallXma}function Ca(a){return a.value.numUnreadSubthreads}function Da(a){return a.value.subthreadCount}function Ea(a){return a.value.lastNonMissedCallXmaMessageTimestampMs}function Fa(a){return a.value.isHidden}function Ga(a){return a.value.threadInvitesEnabledV2}function Ha(a){return a.value.joinRequestApprovalSetting}function Ia(a){return a.value.hasPendingJoinRequest}function Ja(a){return a.value.pendingJoinRequestsCount}function Ka(a){return a.value.hasPendingInvitation}function La(a){return a.value.eventStartTimestampMs}function Ma(a){return a.value.eventEndTimestampMs}function Na(a){return a.value.takedownState}function Oa(a){return a.value.memberCount}function Pa(a){return a.value.admodCount}function Qa(a){return a.value.secondaryParentThreadKey}function Ra(a){return a.value.igFolder}function Sa(a){return a.value.inviterId}function Ta(a){return a.value.threadTags}function Ua(a){return a.value.isReadReceiptsDisabled}function Va(a){return a.value.readReceiptsDisabledV2}function Wa(a){return a.value.threadStatus}function Xa(a){return a.value.ctmAdId}function Ya(a){return a.value.ctmAdgroupId}function Za(a){return a.value.ctmAdCampaignId}function $a(a){return a.value.ctmAdCampaignGroupId}function ab(a){return a.value.ctmAdAccountId}function bb(a){return a.value.threadSubtype}function cb(a){return a.value.pauseThreadTimestamp}function db(a){return a.value.metadata}function eb(a){return a.value.capabilities4}function fb(a){return a.value.syncSource}function gb(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.participants).getKeyRange(a.value.threadKey)},b)}function hb(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableDescending(b.tables.messages.index("messageDisplayOrder")).getKeyRange(a.value.threadKey)},b)}function ib(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.thread_nullstate).getKeyRange(a.value.threadKey)})}function jb(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.community_folders).getKeyRange(a.value.parentThreadKey)})}function kb(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.mi_act_mapping_table).getKeyRange(a.value.threadKey)},b)}function lb(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.rtc_ongoing_calls_on_threads_v2).getKeyRange(a.value.threadKey)})}function mb(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.thread_proactive_warning_settings).getKeyRange(a.value.threadKey)})}function nb(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.in_thread_banner).getKeyRange(a.value.threadKey)},b)}function ob(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.cutover_threads).getKeyRange(a.value.threadKey)})}function pb(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.custom_thread_commands).getKeyRange(a.value.threadKey)},b)}function qb(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.discoverable_chat_participants).getKeyRange(a.value.threadKey)},b)}function rb(a,b){return d("LSRelayLiveResolvers").iterableToConnectionLiveResolver(a.context,function(b){return d("ReQL").fromTableAscending(b.tables.persistent_menu_items).getKeyRange(a.value.threadKey)},b)}function sb(a){return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a.context,function(b){return d("ReQL").fromTableDescending(b.tables.thread_limits).getKeyRange(a.value.threadKey)})}g.__context=a;g.__lightspeed_table_row=b;g.last_activity_timestamp_ms=c;g.last_read_watermark_timestamp_ms=e;g.snippet=f;g.thread_name=h;g.thread_picture_url=i;g.needs_admin_approval_for_new_participant=j;g.authority_level=k;g.thread_key=l;g.mailbox_type=m;g.thread_type=n;g.folder_name=o;g.thread_picture_url_fallback=p;g.thread_picture_url_expiration_timestamp_ms=q;g.remove_watermark_timestamp_ms=r;g.mute_expire_time_ms=s;g.mute_mention_expire_time_ms=t;g.mute_calls_expire_time_ms=u;g.group_notification_settings=v;g.is_admin_snippet=w;g.snippet_sender_contact_id=x;g.snippet_text=y;g.snippet_string_hash=z;g.snippet_string_argument1=A;g.snippet_attribution=B;g.snippet_attribution_string_hash=C;g.disappearing_setting_ttl=D;g.disappearing_setting_updated_ts=E;g.disappearing_setting_updated_by=F;g.ongoing_call_state=G;g.cannot_reply_reason=H;g.custom_emoji=I;g.custom_emoji_image_url=J;g.avatar_sticker_instruction_key_id=K;g.avatar_sticker_id=L;g.avatar_sticker_thumbnail_image_url=M;g.avatar_sticker_thumbnail_image_mime_type=N;g.avatar_sticker_original_image_url=O;g.avatar_sticker_original_image_mime_type=P;g.outgoing_bubble_color=Q;g.theme_fbid=R;g.parent_thread_key=S;g.nullstate_description_text1=T;g.nullstate_description_type1=U;g.nullstate_description_text2=V;g.nullstate_description_type2=W;g.nullstate_description_text3=X;g.nullstate_description_type3=Y;g.snippet_has_emoji=Z;g.has_persistent_menu=$;g.disable_composer_input=aa;g.cannot_unsend_reason=ba;g.viewed_plugin_key=ca;g.viewed_plugin_context=da;g.client_thread_key=ea;g.capabilities=fa;g.should_round_thread_picture=ga;g.proactive_warning_dismiss_time=ha;g.is_custom_thread_picture=ia;g.otid_of_first_message=ja;g.normalized_search_terms=ka;g.additional_thread_context=la;g.disappearing_thread_key=ma;g.is_disappearing_mode=na;g.disappearing_mode_initiator=oa;g.unread_disappearing_message_count=pa;g.last_message_cta_id=qa;g.last_message_cta_type=ra;g.last_message_cta_timestamp_ms=sa;g.consistent_thread_fbid=ta;g.thread_description=ua;g.unsend_limit_ms=va;g.capabilities_2=wa;g.capabilities_3=xa;g.sync_group=ya;g.thread_invites_enabled=za;g.thread_invite_link=Aa;g.is_all_unread_message_missed_call_xma=Ba;g.num_unread_subthreads=Ca;g.subthread_count=Da;g.last_non_missed_call_xma_message_timestamp_ms=Ea;g.is_hidden=Fa;g.thread_invites_enabled_v2=Ga;g.join_request_approval_setting=Ha;g.has_pending_join_request=Ia;g.pending_join_requests_count=Ja;g.has_pending_invitation=Ka;g.event_start_timestamp_ms=La;g.event_end_timestamp_ms=Ma;g.takedown_state=Na;g.member_count=Oa;g.admod_count=Pa;g.secondary_parent_thread_key=Qa;g.ig_folder=Ra;g.inviter_id=Sa;g.thread_tags=Ta;g.is_read_receipts_disabled=Ua;g.read_receipts_disabled_v2=Va;g.thread_status=Wa;g.ctm_ad_id=Xa;g.ctm_adgroup_id=Ya;g.ctm_ad_campaign_id=Za;g.ctm_ad_campaign_group_id=$a;g.ctm_ad_account_id=ab;g.thread_subtype=bb;g.pause_thread_timestamp=cb;g.metadata=db;g.capabilities_4=eb;g.sync_source=fb;g.participants=gb;g.messages=hb;g.nullstate=ib;g.community_folder=jb;g.mi_act_mapping=kb;g.rtc_ongoing_calls=lb;g.thread_proactive_warning_settings=mb;g.in_thread_banner=nb;g.cutover_thread=ob;g.custom_thread_commands=pb;g.discoverable_chat_participants=qb;g.persistent_menu_items=rb;g.thread_limit=sb}),98);
__d("LSThreadComputedThreadTitle__computed_thread_title$normalization.graphql",["LS_Thread","LS_Participant_Connection","LS_Participant_Connection","LS_Participant","LS_Participant","LS_Participant","LS_Contact","LS_Contact","LS_Contact","LS_Thread","LS_Thread","LS_Thread"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"Literal",name:"first",value:8}];return{kind:"SplitOperation",metadata:{},name:"LSThreadComputedThreadTitle__computed_thread_title$normalization",selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"participants",args:a,kind:"RelayLiveResolver",storageKey:"participants(first:8)",isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").participants,rootFragment:null}},linkedField:{alias:null,args:a,concreteType:"LS_Participant_Connection",kind:"LinkedField",name:"participants",plural:!1,selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"edges",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant_Connection").edges,rootFragment:null}},linkedField:{alias:null,args:null,concreteType:"LS_Participant_Connection_Edge",kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"node",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant_Connection").node,rootFragment:null}},linkedField:{alias:null,args:null,concreteType:"LS_Participant",kind:"LinkedField",name:"node",plural:!1,selections:[{name:"contact_id",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant").contact_id,rootFragment:null}},{name:"nickname",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant").nickname,rootFragment:null}},{kind:"ClientEdgeToClientObject",backingField:{name:"contact",args:null,kind:"RelayLiveResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant").contact,rootFragment:null}},linkedField:{alias:null,args:null,concreteType:"LS_Contact",kind:"LinkedField",name:"contact",plural:!1,selections:[{name:"first_name",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Contact").first_name,rootFragment:null}},{name:"name",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Contact").name,rootFragment:null}},{name:"rank",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Contact").rank,rootFragment:null}}],storageKey:null}}],storageKey:null}}],storageKey:null}}],storageKey:"participants(first:8)"}},{kind:"ClientExtension",selections:[{name:"__context",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").__context,rootFragment:null}},{name:"thread_name",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").thread_name,rootFragment:null}},{name:"thread_type",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").thread_type,rootFragment:null}}]}]}}();e.exports=a}),null);
__d("LSThreadComputedThreadTitle__computed_thread_title.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{hasClientEdges:!0},name:"LSThreadComputedThreadTitle__computed_thread_title",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"__context",storageKey:null},action:"THROW",path:"__context"},{alias:null,args:null,kind:"ScalarField",name:"thread_name",storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"thread_type",storageKey:null},action:"THROW",path:"thread_type"},{kind:"RequiredField",field:{alias:null,args:[{kind:"Literal",name:"first",value:8}],concreteType:"LS_Participant_Connection",kind:"LinkedField",name:"participants",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"LS_Participant_Connection_Edge",kind:"LinkedField",name:"edges",plural:!0,selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"LS_Participant",kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"contact_id",storageKey:null},action:"THROW",path:"participants.edges.node.contact_id"},{alias:null,args:null,kind:"ScalarField",name:"nickname",storageKey:null},{alias:null,args:null,concreteType:"LS_Contact",kind:"LinkedField",name:"contact",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"first_name",storageKey:null},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},action:"THROW",path:"participants.edges.node.contact.name"},{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"rank",storageKey:null},action:"THROW",path:"participants.edges.node.contact.rank"}],storageKey:null}],storageKey:null},action:"THROW",path:"participants.edges.node"}],storageKey:null},action:"THROW",path:"participants.edges"}],storageKey:"participants(first:8)"},action:"THROW",path:"participants"}],type:"LS_Thread",abstractKey:null};e.exports=a}),null);
__d("LSThreadHasCapability__has_capability$normalization.graphql",["LS_Thread","LS_Thread","LS_Thread","LS_Thread","LS_Thread"],(function(a,b,c,d,e,f){"use strict";a={kind:"SplitOperation",metadata:{},name:"LSThreadHasCapability__has_capability$normalization",selections:[{kind:"ClientExtension",selections:[{name:"capabilities",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").capabilities,rootFragment:null}},{name:"capabilities_2",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").capabilities_2,rootFragment:null}},{name:"capabilities_3",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").capabilities_3,rootFragment:null}},{name:"capabilities_4",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").capabilities_4,rootFragment:null}},{name:"thread_type",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").thread_type,rootFragment:null}}]}]};e.exports=a}),null);
__d("LSThreadHasCapability__has_capability.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LSThreadHasCapability__has_capability",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"capabilities",storageKey:null},action:"THROW",path:"capabilities"},{kind:"RequiredField",field:{alias:"capabilities2",args:null,kind:"ScalarField",name:"capabilities_2",storageKey:null},action:"THROW",path:"capabilities2"},{kind:"RequiredField",field:{alias:"capabilities3",args:null,kind:"ScalarField",name:"capabilities_3",storageKey:null},action:"THROW",path:"capabilities3"},{kind:"RequiredField",field:{alias:"capabilities4",args:null,kind:"ScalarField",name:"capabilities_4",storageKey:null},action:"THROW",path:"capabilities4"},{kind:"RequiredField",field:{alias:"threadType",args:null,kind:"ScalarField",name:"thread_type",storageKey:null},action:"THROW",path:"threadType"}],type:"LS_Thread",abstractKey:null};e.exports=a}),null);
__d("LS_Thread__other_participant",["I64","LSMessagingThreadTypeUtil","LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.context;a=a.value;var c=a.threadKey;a=a.threadType;return!d("LSMessagingThreadTypeUtil").isOneToOne(a)?d("LSRelayLiveResolvers").nullValueLiveState:d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(b,function(a){return d("ReQL").fromTableAscending(a.tables.participants).getKeyRange(c).take(2).filter(function(a){a=a.contactId;return(h||(h=d("I64"))).to_string(a)!==b.actorID})})}g.other_participant=a}),98);
__d("LSThreadIsPage__is_page$normalization.graphql",["LS_Thread__other_participant","LS_Participant","LS_Contact"],(function(a,b,c,d,e,f){"use strict";a={kind:"SplitOperation",metadata:{},name:"LSThreadIsPage__is_page$normalization",selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"other_participant",args:null,kind:"RelayLiveResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread__other_participant").other_participant,rootFragment:null}},linkedField:{alias:"otherParticipant",args:null,concreteType:"LS_Participant",kind:"LinkedField",name:"other_participant",plural:!1,selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"contact",args:null,kind:"RelayLiveResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant").contact,rootFragment:null}},linkedField:{alias:null,args:null,concreteType:"LS_Contact",kind:"LinkedField",name:"contact",plural:!1,selections:[{name:"contact_type",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Contact").contact_type,rootFragment:null}}],storageKey:null}}],storageKey:null}}]};e.exports=a}),null);
__d("LSThreadIsPage__is_page.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{hasClientEdges:!0},name:"LSThreadIsPage__is_page",selections:[{alias:"otherParticipant",args:null,concreteType:"LS_Participant",kind:"LinkedField",name:"other_participant",plural:!1,selections:[{alias:null,args:null,concreteType:"LS_Contact",kind:"LinkedField",name:"contact",plural:!1,selections:[{alias:"contactType",args:null,kind:"ScalarField",name:"contact_type",storageKey:null}],storageKey:null}],storageKey:null}],type:"LS_Thread",abstractKey:null};e.exports=a}),null);
__d("LSThreadIsSecureThread__is_secure_thread$normalization.graphql",["LS_Thread"],(function(a,b,c,d,e,f){"use strict";a={kind:"SplitOperation",metadata:{},name:"LSThreadIsSecureThread__is_secure_thread$normalization",selections:[{kind:"ClientExtension",selections:[{name:"thread_type",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").thread_type,rootFragment:null}}]}]};e.exports=a}),null);
__d("LSThreadIsSecureThread__is_secure_thread.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"LSThreadIsSecureThread__is_secure_thread",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"thread_type",storageKey:null},action:"THROW",path:"thread_type"}],type:"LS_Thread",abstractKey:null};e.exports=a}),null);
__d("LSThreadOtherParticipantOrSelf__other_participant_or_self$normalization.graphql",["LS_Thread","LS_Participant_Connection","LS_Thread","LS_Thread","LS_Thread"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{kind:"Literal",name:"first",value:2}];return{kind:"SplitOperation",metadata:{},name:"LSThreadOtherParticipantOrSelf__other_participant_or_self$normalization",selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"participants",args:a,kind:"RelayLiveResolver",storageKey:"participants(first:2)",isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").participants,rootFragment:null}},linkedField:{alias:null,args:a,concreteType:"LS_Participant_Connection",kind:"LinkedField",name:"participants",plural:!1,selections:[{kind:"ClientEdgeToClientObject",backingField:{name:"edges",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Participant_Connection").edges,rootFragment:null}},linkedField:{alias:null,args:null,concreteType:"LS_Participant_Connection_Edge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null}}],storageKey:"participants(first:2)"}},{kind:"ClientExtension",selections:[{name:"__context",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").__context,rootFragment:null}},{name:"thread_key",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").thread_key,rootFragment:null}},{name:"thread_type",args:null,kind:"RelayResolver",storageKey:null,isOutputType:!0,resolverInfo:{resolverFunction:b("LS_Thread").thread_type,rootFragment:null}}]}]}}();e.exports=a}),null);
__d("LSThreadOtherParticipantOrSelf__other_participant_or_self.graphql",[],(function(a,b,c,d,e,f){"use strict";a={argumentDefinitions:[],kind:"Fragment",metadata:{hasClientEdges:!0},name:"LSThreadOtherParticipantOrSelf__other_participant_or_self",selections:[{kind:"RequiredField",field:{alias:null,args:null,kind:"ScalarField",name:"__context",storageKey:null},action:"THROW",path:"__context"},{kind:"RequiredField",field:{alias:"threadKey",args:null,kind:"ScalarField",name:"thread_key",storageKey:null},action:"THROW",path:"threadKey"},{kind:"RequiredField",field:{alias:"threadType",args:null,kind:"ScalarField",name:"thread_type",storageKey:null},action:"THROW",path:"threadType"},{kind:"RequiredField",field:{alias:null,args:[{kind:"Literal",name:"first",value:2}],concreteType:"LS_Participant_Connection",kind:"LinkedField",name:"participants",plural:!1,selections:[{kind:"RequiredField",field:{alias:null,args:null,concreteType:"LS_Participant_Connection_Edge",kind:"LinkedField",name:"edges",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null}],storageKey:null},action:"THROW",path:"participants.edges"}],storageKey:"participants(first:2)"},action:"THROW",path:"participants"}],type:"LS_Thread",abstractKey:null};e.exports=a}),null);
__d("LSVerificationBadge.react",["I64","LSContactVerificationBadge.react","MWPActor.react","ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||d("react");function a(a){var b=a.icon,e=a.size,g=a.threadKey,j=(h||(h=c("useReStore")))(),l=d("MWPActor.react").useActor();a=d("ReQLSuspense").useArray(function(){return d("ReQL").leftJoin(d("ReQL").fromTableAscending(j.tables.participants,["contactId"]).getKeyRange(g).filter(function(a){return!(i||(i=d("I64"))).equal(a.contactId,l)}).take(2),d("ReQL").fromTableAscending(j.tables.contacts,["capabilities","capabilities2"])).map(function(a){a[0];a=a[1];return a})},[j,g,l],f.id+":33");var m=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(j.tables.contacts,["capabilities","capabilities2"]).getKeyRange(l)},[j,l],f.id+":47");if(a.length>1)return null;m=a.length===0?m:a[0];return m==null?null:k.jsx(c("LSContactVerificationBadge.react"),{contact:m,icon:(a=b)!=null?a:void 0,size:(m=e)!=null?m:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("LS_CommunityFolder",[],(function(a,b,c,d,e,f){function a(a){return a.context}function b(a){return a.value}function c(a){return a.value.folderId}function d(a){return a.value.fbGroupId}function e(a){return a.value.name}function g(a){return a.value.description}function h(a){return a.value.memberCount}function i(a){return a.value.pictureUrl}function j(a){return a.value.pictureUrlFallback}function k(a){return a.value.pictureUrlExpirationTimestampMs}function l(a){return a.value.joiningChannelTaskId}function m(a){return a.value.afterJoiningOpenChannelId}function n(a){return a.value.capabilities}function o(a){return a.value.capabilities2}function p(a){return a.value.capabilities3}function q(a){return a.value.notificationSetting}function r(a){return a.value.notificationMutedUntil}function s(a){return a.value.sendsBlockedUntil}function t(a){return a.value.isHidden}function u(a){return a.value.hasSeenDisablingAlert}function v(a){return a.value.inviteLink}function w(a){return a.value.communityType}function x(a){return a.value.directInviteLink}function y(a){return a.value.enableState}function z(a){return a.value.takedownState}function A(a){return a.value.fbGroupType}function B(a){return a.value.threadCount}function C(a){return a.value.disableTimestamp}function D(a){return a.value.readTimestampMs}function E(a){return a.value.inviteStatus}function F(a){return a.value.blockedFromCommunityMemberCount}function G(a){return a.value.categoryCount}function H(a){return a.value.snippetText}function I(a){return a.value.coverPicUrl}function J(a){return a.value.coverPicUrlFallback}function K(a){return a.value.coverPicUrlExpirationTimestampMs}function L(a){return a.value.invitedThreadId}function M(a){return a.value.fbGroupUserParticipationApprovalStatus}function N(a){return a.value.ccAdminAssistRegistrationStatus}function O(a){return a.value.pauseStatus}function P(a){return a.value.isMember}f.__context=a;f.__lightspeed_table_row=b;f.folder_id=c;f.fb_group_id=d;f.name=e;f.description=g;f.member_count=h;f.picture_url=i;f.picture_url_fallback=j;f.picture_url_expiration_timestamp_ms=k;f.joining_channel_task_id=l;f.after_joining_open_channel_id=m;f.capabilities=n;f.capabilities_2=o;f.capabilities_3=p;f.notification_setting=q;f.notification_muted_until=r;f.sends_blocked_until=s;f.is_hidden=t;f.has_seen_disabling_alert=u;f.invite_link=v;f.community_type=w;f.direct_invite_link=x;f.enable_state=y;f.takedown_state=z;f.fb_group_type=A;f.thread_count=B;f.disable_timestamp=C;f.read_timestamp_ms=D;f.invite_status=E;f.blocked_from_community_member_count=F;f.category_count=G;f.snippet_text=H;f.cover_pic_url=I;f.cover_pic_url_fallback=J;f.cover_pic_url_expiration_timestamp_ms=K;f.invited_thread_id=L;f.fb_group_user_participation_approval_status=M;f.cc_admin_assist_registration_status=N;f.pause_status=O;f.is_member=P}),66);
__d("LS_Contact__has_capability",["LSContactBitOffset","LSContactCapabilityBitOffset","LSContactHasCapability__has_capability.graphql","ReactiveExecutorResolverFragments"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){e=e.capability;a=d("ReactiveExecutorResolverFragments").readFragment(h!==void 0?h:h=b("LSContactHasCapability__has_capability.graphql"),a);var f=a.capabilities;a=a.capabilities_2;return e!=="%future added value"&&d("LSContactBitOffset").has(c("LSContactCapabilityBitOffset")[e],{capabilities:(e=f)!=null?e:void 0,capabilities2:(f=a)!=null?f:void 0})}g.has_capability=a}),98);
__d("LS_MiActMappingTable",[],(function(a,b,c,d,e,f){function a(a){return a.context}function b(a){return a.value}function c(a){return a.value.serverThreadKey}function d(a){return a.value.clientThreadPk}function e(a){return a.value.jid}f.__context=a;f.__lightspeed_table_row=b;f.server_thread_key=c;f.client_thread_pk=d;f.jid=e}),66);
__d("LS_MiActMappingTable_Connection",["LSRelayConnections"],(function(a,b,c,d,e,f,g){function a(a){return a.value.edges}function b(a){return a.value.page_info}function c(a){return d("LSRelayConnections").keyToCursor(a.value[0])}function e(a){return{context:a.context,value:a.value[1]}}g.edges=a;g.page_info=b;g.cursor=c;g.node=e}),98);
__d("LS_Thread__computed_thread_title",["fbt","CurrentEnvironment","I64","LSMessagingThreadTypeUtil","LSThreadComputedThreadTitle__computed_thread_title.graphql","ReactiveExecutorResolverFragments","intlList","mwCMIsAnyCMThread","recoverableViolation"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j;function a(a){a=d("ReactiveExecutorResolverFragments").readFragment(i!==void 0?i:i=b("LSThreadComputedThreadTitle__computed_thread_title.graphql"),a);var c=a.__context,e=a.participants,f=a.thread_name;a=a.thread_type;return f!=null?f:l(a,e.edges.map(function(a){return a.node}),c.actorID)}function k(a,b){return a.filter(function(a){return(j||(j=d("I64"))).to_string(a.contact_id)!==b}).map(function(a){return a.contact==null?null:{first_name:a.contact.first_name,name:a.contact.name,nickname:a.nickname,rank:a.contact.rank}}).filter(Boolean).sort(function(a,b){return b.rank-a.rank})}function l(a,b,e){if(c("mwCMIsAnyCMThread")(a)){c("recoverableViolation")("community message should not use computed thread title","messenger_comet");return n}if(b.length===0){c("recoverableViolation")("No participants in thread","lightspeed_resolvers");return d("LSMessagingThreadTypeUtil").isGroup(a)?n:m}if(b.length===1){return(a=(a=b[0].contact)==null?void 0:a.name)!=null?a:m}a=k(b,e);var f=a.length>2;b=a.map(function(a){return o(a,f)});a.length>7&&b.push(String(h._("__JHASH__p-5gRHawKL0__JHASH__")));return c("intlList")(b,c("intlList").CONJUNCTIONS.AND,c("intlList").DELIMITERS.COMMA).toString()}var m=(c("CurrentEnvironment").workplacedotcom?h._("__JHASH__WW0S3bu0Fvp__JHASH__"):c("CurrentEnvironment").instagramdotcom?h._("__JHASH__PghB4SzSbNm__JHASH__"):c("CurrentEnvironment").messengerdotcom?h._("__JHASH__I44_DhMSYWP__JHASH__"):h._("__JHASH__AaE4hJExM0x__JHASH__")).toString(),n=(c("CurrentEnvironment").workplacedotcom?h._("__JHASH__2SG6KMU4AFK__JHASH__"):c("CurrentEnvironment").instagramdotcom?h._("__JHASH__wXDLgcJTU51__JHASH__"):c("CurrentEnvironment").messengerdotcom?h._("__JHASH__Kz0QpoJHutZ__JHASH__"):h._("__JHASH__CGopUYR1PJW__JHASH__")).toString();function o(a,b){var c=a.first_name,d=a.name;a=a.nickname;b===void 0&&(b=!1);if(a!=null)return a;if(c!=null&&b)return c;return d!=null?d:m}g.computed_thread_title=a}),226);
__d("LS_Thread__has_capability",["LSThreadBitOffset","LSThreadCapabilityBitOffset","LSThreadHasCapability__has_capability.graphql","ReactiveExecutorResolverFragments"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){e=e.capability;a=d("ReactiveExecutorResolverFragments").readFragment(h!==void 0?h:h=b("LSThreadHasCapability__has_capability.graphql"),a);var f=a.capabilities,g=a.capabilities2,i=a.capabilities3,j=a.capabilities4;a=a.threadType;return e!=="%future added value"&&d("LSThreadBitOffset").has(c("LSThreadCapabilityBitOffset")[e],{capabilities:f,capabilities2:g,capabilities3:i,capabilities4:j,threadType:a})}g.has_capability=a}),98);
__d("LS_Thread__has_messages_ranges_v2",["LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.context;a=a.value;var c=a.threadKey;return d("LSRelayLiveResolvers").mapLiveState(d("LSRelayLiveResolvers").iterableToMappedValueLiveResolver(b,function(a){return d("ReQL").fromTableDescending(a.tables.messages_ranges_v2__generated).getKeyRange(c).take(1)},function(a){return a!=null}),function(a){return a==null?void 0:a.value})}g.computed_has_messages_ranges_v2=a}),98);
__d("LS_Thread__is_cutover_thread",["LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.context;a=a.value;var c=a.threadKey;return d("LSRelayLiveResolvers").mapLiveState(d("LSRelayLiveResolvers").iterableToMappedValueLiveResolver(b,function(a){return d("ReQL").fromTableAscending(a.tables.cutover_threads).getKeyRange(c).take(1)},function(a){return a!=null}),function(a){return a==null?void 0:a.value})}g.is_cutover_thread=a}),98);
__d("LS_Thread__is_page",["I64","LSContactType","LSIntEnum","LSThreadIsPage__is_page.graphql","ReactiveExecutorResolverFragments"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(a){a=d("ReactiveExecutorResolverFragments").readFragment(h!==void 0?h:h=b("LSThreadIsPage__is_page.graphql"),a);a=a.otherParticipant;a=a==null?void 0:(a=a.contact)==null?void 0:a.contactType;return a!=null&&(i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSContactType").PAGE))}g.computed_is_page=a}),98);
__d("LS_Thread__is_secure_thread",["LSMessagingThreadTypeUtil","LSThreadIsSecureThread__is_secure_thread.graphql","ReactiveExecutorResolverFragments"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a=d("ReactiveExecutorResolverFragments").readFragment(h!==void 0?h:h=b("LSThreadIsSecureThread__is_secure_thread.graphql"),a);a=a.thread_type;return d("LSMessagingThreadTypeUtil").isArmadilloSecure(a)}g.is_secure_thread=a}),98);
__d("LS_Thread__other_participant_or_self",["I64","LSMessagingThreadTypeUtil","LSRelayLiveResolvers","LSThreadOtherParticipantOrSelf__other_participant_or_self.graphql","ReQL","ReactiveExecutorResolverFragments"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){a=d("ReactiveExecutorResolverFragments").readFragment(h!==void 0?h:h=b("LSThreadOtherParticipantOrSelf__other_participant_or_self.graphql"),a);var c=a.__context,e=a.participants.edges,f=a.threadKey;a=a.threadType;if(!d("LSMessagingThreadTypeUtil").isOneToOne(a))return d("LSRelayLiveResolvers").nullValueLiveState;var g=c.actorID;return e.length===1?d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(c,function(a){return d("ReQL").fromTableAscending(a.tables.participants).getKeyRange(f)}):d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(c,function(a){return d("ReQL").fromTableAscending(a.tables.participants).getKeyRange(f).filter(function(a){a=a.contactId;return(i||(i=d("I64"))).to_string(a)!==g})})}g.other_participant_or_self=a}),98);
__d("LS_Thread__other_participants_MAY_CAUSE_OVERFETCHING",["I64","LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.context,c=a.value.threadKey;return d("LSRelayLiveResolvers").iterableToPluralFieldLiveResolver_MAY_CAUSE_OVERFETCHING(b,function(a){return d("ReQL").fromTableAscending(a.tables.participants).getKeyRange(c).filter(function(a){a=a.contactId;return(h||(h=d("I64"))).to_string(a)!==b.actorID})})}g.other_participants_MAY_CAUSE_OVERFETCHING=a}),98);
__d("LS_Viewer",["I64","LSFeatureLimitsType","LSIntEnum","LSRelayLiveResolvers","ReQL"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return a.context.actorID}function b(a){a=a.context;var b=(h||(h=d("I64"))).of_float(Date.now()/1e3);return d("LSRelayLiveResolvers").mapLiveState(d("LSRelayLiveResolvers").iterableToMappedValueLiveResolver(a,function(a){return d("ReQL").fromTableAscending(a.tables.feature_limits).filter(function(a){return k(a)&&(h||(h=d("I64"))).gt(a.expirationTimestampSeconds,b)}).take(1)},function(a){return a!=null}),function(a){return a==null?void 0:a.value})}var j=[(i||(i=d("LSIntEnum"))).ofNumber(c("LSFeatureLimitsType").READ_ONLY),i.ofNumber(c("LSFeatureLimitsType").GENERIC_READ_ONLY_BLOCK),i.ofNumber(c("LSFeatureLimitsType").MESSAGE_SEND)],k=function(a){return j.some(function(b){return(h||(h=d("I64"))).equal(b,a.type_)})};function e(a){a=a.context;return d("LSRelayLiveResolvers").iterableToFirstValueLiveResolver(a,function(a){return d("ReQL").fromTableAscending(a.tables.user_visible_errors).filter(function(a){return a.presentationStyle==="banner"})})}g.actor_id=a;g.is_read_only_feature_limited=b;g.user_visible_error_banner=e}),98);
__d("LaminarAction",["AdsDataAtomShared","AdsDataDispatchUtils","QuickPerformanceLogger","Random","filterNulls","gkx","qpl","setInterval"],(function(a,b,c,d,e,f,g){"use strict";var h;b={"adsmanager.facebook.com":10,"business.facebook.com":10};f=(e=b[window.location.hostname])!=null?e:1;b=c("Random").coinflip(f)&&c("gkx")("21048");var i=b?new Set():null,j=b?new Set():null;i!=null&&j!=null&&c("setInterval")(function(){if(i.size>0){for(var a=i,b=Array.isArray(a),d=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(b){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;j.add(e)}(h||(h=c("QuickPerformanceLogger"))).markEvent(c("qpl")._(41486318,"268"),"laminar_actions_dispatched",7,{annotations:{string:{hostname:window.location.hostname,path_prefix:window.location.pathname.split("/")[1]},string_array:{dispatched_actions:Array.from(i)}}});i.clear()}},2*60*1e3);function a(a,b,e,f){var g=function(g,h){var k=c("filterNulls")(a()),l=c("filterNulls")(b());j!=null&&!j.has(e)&&(i==null?void 0:i.add(e));c("AdsDataAtomShared").dispatchAction(d("AdsDataDispatchUtils").mergeParameters(e,k,l,g,f,h),h)};return{dispatch:g,actionType:e}}g.create=a}),98);
__d("LaminarExperimentalSelector",["AdsDataAtomShared","AdsDataPluginsInternalUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b=new Set();for(var c in a)for(var d=a[c].providers,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;b.add(g)}return Array.from(b)}function i(a){var b=new Set();for(var c in a)for(var d=a[c].toFluxSelector().getStores(),e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;b.add(g)}return Array.from(b)}function j(a,b,c){var d={};for(var e in a)d[e]=a[e].select(b,c);return d}function k(a,b){var c=Object.keys(a);if(c.length!==Object.keys(b).length)return!1;for(var d=0;d<c.length;d++){var e=c[d];if(!Object.prototype.hasOwnProperty.call(b,e)||a[e]!==b[e])return!1}return!0}function a(a,b){var e=null,f=null,g=function(c,d){c=j(a,c,d);(!f||!k(c,f))&&(e=b(c),f=c);return e},l=function(a){return g(c("AdsDataAtomShared").getAlteredState(),a)},m=Object.assign(l,{providers:h(a),select:g,toFluxSelector:d("AdsDataPluginsInternalUtils").memoize(function(){return Object.assign(function(){return m(c("AdsDataAtomShared").getAlteredState())},{getStores:function(){return i(a)},isGetStoresStatic:!0,isGetStoresPure:!0,rawSelectFn:function(){return m(c("AdsDataAtomShared").getAlteredState())}})})});return m}g.create=a}),98);
__d("LaminarCurrentContainer",[],(function(a,b,c,d,e,f){"use strict";var g=null;function a(){return g}function b(a){g=a}f.getCurrentContainer=a;f.setCurrentContainer=b}),66);
__d("LaminarReactHooks",["AdsDataAtomShared","AdsFluxCurrentContainer","FluxContainerNameUtils","LaminarCurrentContainer","react","useSubscriptionValue","useUnsafeRef_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||(i=d("react"))).c,k=i,l=k.useCallback,m=k.useEffect,n=k.useMemo,o=k.useRef,p="laminarContainer(unknown)";function a(a){var b=j(9),d=a.provider,e,f;b[0]!==a?(e=function(b){b=a();return b},f=[a],b[0]=a,b[1]=e,b[2]=f):(e=b[1],f=b[2]);e=l(e,f);var g;b[3]!==d?(f=function(a){var b=c("AdsDataAtomShared").addListener(d,a);return function(){return b.remove()}},g=[d],b[3]=d,b[4]=f,b[5]=g):(f=b[4],g=b[5]);f=l(f,g);b[6]!==e||b[7]!==f?(g={getCurrentValue:e,subscribe:f},b[6]=e,b[7]=f,b[8]=g):g=b[8];e=c("useSubscriptionValue")(g);return e}function b(a,b,e){var g,i=(g=(g=(g=e==null?void 0:e.containerName)!=null?g:a.displayName)!=null?g:a.name)!=null?g:p;function j(b){var f=(h||(h=c("useUnsafeRef_DEPRECATED")))(null),g=h(!0),j=o(null);m(function(){g.current&&(j.current=b)});var k=(e==null?void 0:e.isFluxContainer)===!0?d("AdsFluxCurrentContainer"):d("LaminarCurrentContainer");k.setCurrentContainer(i);var l=n(function(){var a=b.forwardedRef,c=babelHelpers.objectWithoutPropertiesLoose(b,["forwardedRef"]);return a===void 0?b:babelHelpers["extends"]({},c,{ref:a})},[b]);l=a(l);k.setCurrentContainer(null);g.current=f.current!==l;f.current=l;return l}j.displayName=j.name+" [from "+f.id+"]";d("FluxContainerNameUtils").nameContainer(j,i);j.displayName=i;g=function(a,b){return k.jsx(j,babelHelpers["extends"]({},a,{forwardedRef:b}))};g.displayName=i;g=k.forwardRef(g);g=k.memo(g,b);g.displayName=i;return g}g.useProvider=a;g.laminarContainer=b}),98);
__d("LaminarReducerWithFluxSelectors",["AdsDataAtomShared","AdsSelectorUtils"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return function(e,f){var g=Object.keys(a),i=g.map(function(b){return a[b]});c("AdsDataAtomShared").waitFor((h||(h=d("AdsSelectorUtils"))).getStoreDispatchTokens(i));i=g.reduce(function(b,c){return Object.assign(b,(b={},b[c]=a[c](),b))},{});return b(e,f,i)}}g["default"]=a}),98);
__d("LaminarSelector",["invariant","AdsSelectorProfilerUtils","LRUKeyedExpiringCache","distinctArray","flattenArray","shallowEqual"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=1e3;function k(a){var b=new Set();for(var c in a){var d=[].concat(a[c].getProviders!=null?a[c].getProviders():[],a[c].providers!=null?a[c].providers:[]);for(var d=d,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;b.add(g)}}return Array.from(b)}function l(a,b){var c=new Set();for(var d in a)for(var e=a[d].toFluxSelector().getStores(),f=Array.isArray(e),g=0,e=f?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var h;if(f){if(g>=e.length)break;h=e[g++]}else{g=e.next();if(g.done)break;h=g.value}h=h;c.add(h)}b!=null&&b.forEach(function(a){return c.add(a)});return Array.from(c)}var m=function(){function a(){this.$1={hasCached:!1,result:null,inputs:null}}var b=a.prototype;b.setCache=function(a,b){this.$1={hasCached:!0,inputs:a,result:b}};b.areInputsEqual=function(a){return this.$1.hasCached&&c("shallowEqual")(this.$1.inputs,a)};b.getCachedResultEnforced=function(){this.$1.hasCached||h(0,14851);return this.$1.result};return a}();function n(a,b){var c={};Object.keys(a).forEach(function(d){c[d]=b(d,a[d])});return c}function o(a){a=n(a,function(a,b){return b()});return a}function a(a,b,e,f,g){e===void 0&&(e=o);f===void 0&&(f="unnamedLaminarSelector");g===void 0&&(g=void 0);var h=(g=g)!=null?g:new(c("LRUKeyedExpiringCache"))(function(a){return a},j);g=function(c,d){var f=h.get(c);if(f!=null)return f();var g=new m();f=function(){var f=e(a,c);if(g.areInputsEqual(f))return g.getCachedResultEnforced();d.cacheHit=!1;var h=b(f,c);g.setCache(f,h);return h};h.set(c,f);return f()};var i=d("AdsSelectorProfilerUtils").instrumentLaminarSelector(g,f),n=k(a),p=l(a,e.attachedStoreDependencies),q=function(a){return i(a)};q.getStores=function(){return p};q.isGetStoresStatic=!0;q.isGetStoresPure=!0;q.rawSelectFn=function(a){return i(a)};return Object.assign(i.bind(void 0),{getProviders:function(){return n},toFluxSelector:function(){return q}})}function b(a,b){var d=function(c,d){var e={};Object.keys(a).forEach(function(b){e[b]=a[b]()});return b(e,c,d)},e=(i||(i=c("distinctArray")))(c("flattenArray")(Object.keys(a).map(function(b){return a[b].getStores()})));d.attachedStoreDependencies=e;return d}function e(a,b){var d=function(c,d){return b(a,c,d)},e=(i||(i=c("distinctArray")))(Object.keys(a).map(function(b){return a[b]}));d.attachedStoreDependencies=e;return d}g.defaultPrepareFn=o;g.create=a;g.prepareWithFluxSelectors=b;g.prepareWithFluxStores=e}),98);
__d("LaminarTriggerReducer",["AdsDataAtomShared"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,d){var e=function(b,c){b=d.select(b);return a.reduce(b,c)},f=function(a){return e(c("AdsDataAtomShared").getAlteredState(),a)};return{provider:d.provider,reduce:f,triggerReducer:b}}g.create=a}),98);
__d("Laminar",["LaminarAction","LaminarExperimentalSelector","LaminarLogger","LaminarProvider","LaminarReactHooks","LaminarReducer","LaminarReducerWithFluxSelectors","LaminarRefetchProvider","LaminarSelector","LaminarTriggerReducer"],(function(a,b,c,d,e,f,g){"use strict";g.__createAction=d("LaminarAction").create;g.__createExperimentalSelector=d("LaminarExperimentalSelector").create;g.__createLogger=d("LaminarLogger").create;g.__createProvider=d("LaminarProvider").create;g.__createReducer=d("LaminarReducer").create;g.__createLegacyReducer=d("LaminarReducer").createLegacy;g.__createRefetchProvider=d("LaminarRefetchProvider").create;g.__createSelector=(a=d("LaminarSelector")).create;g.__createTriggerReducer=d("LaminarTriggerReducer").create;g.__defaultPrepareFn=a.defaultPrepareFn;g.useProvider=d("LaminarReactHooks").useProvider;g.laminarContainer=d("LaminarReactHooks").laminarContainer;g.withFluxSelectors=c("LaminarReducerWithFluxSelectors");g.prepareWithFluxSelectors=a.prepareWithFluxSelectors;g.prepareWithFluxStores=a.prepareWithFluxStores}),98);
__d("LaminarLogger",["AdsDataAtomShared","Laminar"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e,f){var g=d("Laminar").__createExperimentalSelector(e,function(a){return a}),h=function(a,c){a=g.select(a);b.log(c,a)};e=function(a){return h(c("AdsDataAtomShared").getAlteredState(),a)};return Object.assign(e,{id:a,log:h,registries:f==null?[]:f})}g.create=a}),98);
__d("LaminarProvider",["invariant","AdsDataAtomShared","AdsDataPluginsInternalUtils","FluxReduceStore","Laminar","compactArray"],(function(a,b,c,d,e,f,g,h){"use strict";function i(a,b){var d=function(e){babelHelpers.inheritsLoose(d,e);function d(){var a,c;for(var d=arguments.length,f=new Array(d),g=0;g<d;g++)f[g]=arguments[g];return(a=c=e.call.apply(e,[this].concat(f))||this,c.__moduleID=b,a)||babelHelpers.assertThisInitialized(c)}var f=d.prototype;f.addListener=function(b){return c("AdsDataAtomShared").addListener(a.provider,b)};f.__registerDispatcherCallback=function(){return};f.getInitialState=function(){return a.getInitialState()};f.reduce=function(){h(0,5462)};f.hasChanged=function(){return c("AdsDataAtomShared").hasChangedInDispatchCycle(a.provider)};f.getState=function(){return a.select(c("AdsDataAtomShared").getAlteredState())};f.getDispatchToken=function(){return a.provider};f.__setState=function(a){c("AdsDataAtomShared").__laminarAlteredState[b]=a};return d}(c("FluxReduceStore"));d.__moduleID=f.id;return new d(c("AdsDataAtomShared"))}function a(a,b,e,f){f===void 0&&(f=[]);var g=a.initialState,j=a.legacyFluxReduce,k=null,l=function(a){k!=null||h(0,5463),k.dispatch({reducer:a})},m=d("AdsDataPluginsInternalUtils").memoize(function(){return typeof g==="function"?g(l):g}),n=function(a){if(!a)throw new Error("'state' must be present. If 'state' is 'undefined' make sure\n       you passed the altered state to the selector function. Example:\n         AdsExampleSelector(\n           AdsDataAtom.getAlteredState(),\n         );");return Object.prototype.hasOwnProperty.call(a,b)?a[b]:m()},o=function(){return n(c("AdsDataAtomShared").getAlteredState())},p=d("AdsDataPluginsInternalUtils").memoize(function(){return i(o,b)}),q=d("AdsDataPluginsInternalUtils").memoize(function(){return Object.assign(o,{getStores:d("AdsDataPluginsInternalUtils").memoize(function(){return[p()]}),isGetStoresStatic:!0,isGetStoresPure:!0,rawSelectFn:o})});e=e!=null?c("compactArray")(e()):[];var r=Object.assign(o,{providers:[b],provider:b,select:n,getInitialState:m,shouldLegacyFluxReduceOnly:!!a.shouldLegacyFluxReduceOnly,toFluxStore:p,toFluxSelector:q,triggerReducers:e,registries:f==null?[]:f});k=d("Laminar").__createAction(function(){return[d("Laminar").__createReducer({reduce:function(a,b){return b.reducer(a)}},r,{},b+"SetStateReducer")]},function(){return[]},b+"SetStateAction");j&&c("AdsDataAtomShared").laminarRegisterLegacyFluxReducer(d("Laminar").__createLegacyReducer({reduce:j},r,{},b+"LegacyFluxReducer"));return r}g.create=a}),98);
__d("LaminarReducer",["AdsDataAtomShared","Laminar"],(function(a,b,c,d,e,f,g){"use strict";function h(a,b,e,f,g){var h=d("Laminar").__createExperimentalSelector(f,function(a){return a}),i=function(a,c){var d=h.select(a);a=e.select(a);return b.reduce(a,c,d)};f=function(a){return i(c("AdsDataAtomShared").getAlteredState(),a)};f.isDisabled=!a&&e.shouldLegacyFluxReduceOnly;f.provider=e.provider;f.providerInitialState=function(){return e.getInitialState()};f.reduce=i;f.registries=e.registries;f.triggerReducers=e.triggerReducers;f.reducerName=g;return f}function a(a,b,c,d){return h(!1,a,b,c,d)}function b(a,b,c,d){return h(!0,a,b,c,d)}g.create=a;g.createLegacy=b}),98);
__d("LaminarRefetchProvider",["invariant","AdsDataAtomShared","Laminar","LaminarProvider"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a,b,e,f,g){g===void 0&&(g=[]);var i=d("LaminarProvider").create(a,e,f,g),j=null,k=function(a){j!=null||h(0,5463),j.dispatch({reducer:a})};a=function(){return i.select(c("AdsDataAtomShared").getAlteredState())};f=Object.assign(a,babelHelpers["extends"]({},i,{refetch:function(a){return b(k,a)}}));j=d("Laminar").__createAction(function(){return[d("Laminar").__createReducer({reduce:function(a,b){return b.reducer(a)}},i,{},e+"QuerySetStateReducer")]},function(){return[]},e+"QuerySetStateAction");return f}g.create=a}),98);
__d("LikeFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsx("path",{d:"M462 1080.384c0-.575-.193-.74-.403-.905.116-.191.226-.466.226-.817 0-.717-.555-1.162-1.449-1.162h-2.437c.067-.376.147-1.401.147-1.766 0-.756-.18-1.697-.873-2.069a1.224 1.224 0 0 0-.637-.165c-.399 0-.663.164-.757.267a.312.312 0 0 0-.082.236l.058 1.567a.625.625 0 0 1-.071.348l-1.207 2.693a.195.195 0 0 1-.083.075l-.008.003-.007.004-.178.097a.454.454 0 0 0-.239.4v4.286c0 .132.06.257.16.344.052.045.727.68 1.393.68h3.93c.609 0 1.012-.206 1.231-.61.2-.37.168-.725.089-.983.332-.105.645-.355.738-.818.06-.299-.01-.548-.106-.733.291-.16.565-.396.565-.972m-9.553-2.384h-1.893a.554.554 0 0 0-.554.553v5.894c0 .306.248.553.553.553h1.893a.554.554 0 0 0 .554-.553v-5.894a.553.553 0 0 0-.553-.553"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("LinkFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsxs("g",{children:[i.jsx("path",{d:"m101.888 922.704-.336.336-.058.42a3.218 3.218 0 0 0 2.745 1.527 3.22 3.22 0 0 0 2.284-.943l1.952-1.952c1.16-1.16 1.363-3.026.361-4.325a3.233 3.233 0 0 0-4.848-.321l-1.842 1.843c.204-.032.41-.052.62-.052.46 0 .904.081 1.324.228l.923-.923c.584-.584 1.51-.72 2.198-.266a1.731 1.731 0 0 1 .283 2.676l-1.997 1.997c-.416.415-1.012.636-1.587.516a1.765 1.765 0 0 1-1.172-.846.956.956 0 0 0-.85.085",transform:"translate(352.5 157)"}),i.jsx("path",{d:"m105.09 922.294.346-.346.058-.433a3.257 3.257 0 0 0-.45-.56 3.23 3.23 0 0 0-2.59-.939c-.792.07-1.522.462-2.084 1.024l-1.82 1.819c-1.293 1.292-1.367 3.482-.044 4.744a3.235 3.235 0 0 0 2.24.895c.831 0 1.662-.316 2.295-.949l1.848-1.848c-.223.038-.448.06-.673.06a4 4 0 0 1-1.29-.218l-.91.91c-.589.589-1.523.727-2.218.269a1.75 1.75 0 0 1-.287-2.703l2.002-2.002a1.754 1.754 0 0 1 2.466-.007c.12.12.17.18.25.323.245.146.57.147.862-.039",transform:"translate(352.5 157)"})]})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("MAWCreateGroupThread",["fbt","I64","LSFactory","LSIssueNewErrorStoredProcedure","MAWBridgeSendAndReceive","MAWJobDefinitions","MAWTimedJob","WAJobOrchestratorTypes","asyncToGeneratorRuntime","promiseDone","unrecoverableViolation"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function j(a){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.db,e=a.deduplicationKey,g=a.isDualSend;g=g===void 0?!1:g;var j=a.offlineThreadingId,k=a.participantIds;a=a.threadName;j=j!=null?(i||(i=d("I64"))).to_string(j):void 0;var l="msgr";e=(yield d("MAWTimedJob").TimedUIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("createGroup",{extras:{clientThreadKey:j,deduplicationKey:e,isDualSend:g,platform:l},key:j,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION},subject:a,uniqKey:j,users:k})));a=e.error;j=e.value;if(a==null&&j!=null&&j.type===l)return{created:!0,jid:j.chatJid};if(!g){var m=h._("__JHASH__Q8EKHlLB3en__JHASH__").toString();c("promiseDone")(b.runInTransaction(function(a){return c("LSIssueNewErrorStoredProcedure")(c("LSFactory")(a),{errorBodyText:m,errorTitleText:m})},"readwrite",void 0,void 0,f.id+":78"))}throw c("unrecoverableViolation")("Unable to create group","maw_threads")});return k.apply(this,arguments)}function a(a){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.deduplicationKey;if(b==null)return j(a);b=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getThreadIdByDeduplicationKey",{deduplicationKey:b}));return b!=null?{created:!1,jid:b.jid}:j(a)});return l.apply(this,arguments)}g["default"]=a}),226);
__d("MAWCreateOptimisticSecureMessage",["I64","LSAuthorityLevel","LSIntEnum","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSMessageSendStatus","LSQuickReplyType","LSReplyMessageAttachmentType","LSReplyMessageStatus","MAWBridgeBuildMsg","MAWMsgReplySnippet","MessagingAttachmentType","QPLUserFlow","ReQL","asyncToGeneratorRuntime","gkx","isMWBumpMessage","qpl","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,c,d){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){if(e==null)return[void 0,void 0];var g=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.messages).getKeyRange(b,e.timestampMs,e.messageId)));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"get_reply_msg_end",{instanceKey:f});a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.attachments).getKeyRange(b,e.messageId)));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"get_reply_attachment_end",{instanceKey:f});return[g,a]});return k.apply(this,arguments)}function l(a,b){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange(b)));return a==null?void 0:a.firstName});return m.apply(this,arguments)}function n(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){if(b==null)return;var f=c("isMWBumpMessage")(b)&&b.replyToUserId!=null?b.replyToUserId:b.senderId;a=(yield l(a,f));return(b=d("MAWMsgReplySnippet").buildLocalizedReplySnippet({isAuthorMe:!0,isDeletedMsg:b.replyStatus===c("LSReplyMessageStatus").DELETED,recipientName:a,replySenderIsMe:(h||(h=d("I64"))).equal(f,e)}))==null?void 0:b.toString()});return o.apply(this,arguments)}function p(a){if(a==null)return;var b=a.attachmentType;return(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))||(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER))?a.previewUrl:void 0}function q(a){if(a!=null){if((h||(h=d("I64"))).equal(a==null?void 0:a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE)))return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PHOTO);if((h||(h=d("I64"))).equal(a==null?void 0:a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER)))return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").STICKER);if((h||(h=d("I64"))).equal(a==null?void 0:a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").VIDEO);if((h||(h=d("I64"))).equal(a==null?void 0:a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)))return(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").GIF);return(h||(h=d("I64"))).equal(a==null?void 0:a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_IMAGE))||(h||(h=d("I64"))).equal(a==null?void 0:a.attachmentType,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").EPHEMERAL_VIDEO))?(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").EPHEMERAL_RAVEN_MESSAGE):(i||(i=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").OTHER)}}function a(a,b,c,d,e,f,g,h,i,j,k,l,m){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,h,k,l,m,o,r,s,t){var u=(yield d("sendToSentQPLLogger").measureSendToSentPerformance("optimistic_message_get_reply",l,function(){return j(b,h,f,l)})),v=u[0];u=u[1];g=d("MAWBridgeBuildMsg").buildOptimisticMessage(g,v,m);m=(yield d("sendToSentQPLLogger").measureSendToSentPerformance("optimistic_message_reply_snippet",l,function(){return n(a,v,e)}));g=babelHelpers["extends"]({},g,{authorityLevel:(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC),displayedContentTypes:i.ofNumber(s),hasQuickReplies:!1,hotEmojiSize:k,isAdminMessage:!1,isCollapsed:!1,isUnsent:!1,messageId:o,offlineThreadingId:c("gkx")("23990")&&t!=null?t:o,primarySortKey:r,quickReplyType:i.ofNumber(c("LSQuickReplyType").NONE),replyAttachmentType:q(u),replyMediaPreviewHeight:u==null?void 0:u.previewHeight,replyMediaPreviewWidth:u==null?void 0:u.previewWidth,replyMediaUrl:p(u),replyMediaUrlMimeType:u==null?void 0:u.playableUrlMimeType,replySnippet:m,replySourceId:f==null?void 0:f.messageId,replySourceType:f!=null?(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceType").MESSAGE):void 0,replySourceTypeV2:f!=null?(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE):void 0,senderId:e,sendStatus:i.ofNumber(c("LSMessageSendStatus").SENDING_TO_SERVER),sendStatusV2:i.ofNumber(1),textHasLinks:!1,threadKey:h,timestampMs:r,transportKey:"WhatsApp",viewFlags:i.ofNumber(0)});return g});return r.apply(this,arguments)}g.buildOptimisticLsMessage=a}),98);
__d("MAWOptimisticMessageUtils",["I64","LSAuthorityLevel","LSHotEmojiSize","LSIntEnum","MAWAckLevel","MAWAdminMsg","MAWBridgeBuildMsgMentions","MAWBumpThread","MAWLocalizationType","MAWMsgType","MessagingAttachmentType","WAJids","WATimeUtils","asyncToGeneratorRuntime","cr:2472","gkx"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(){return d("WATimeUtils").millisTime()}function e(a,b){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=e.hotEmojiSize,g=e.mentionedJids,j=e.messageText,l=e.senderId,m=e.threadKey;e=e.ts;j=b("cr:2472")==null?j:b("cr:2472").unvault(j);f=f!=null&&(h||(h=d("I64"))).equal(f,(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL))&&j==="\ud83d\udc4d";f=f?"(Y)":k(j,g);j=d("MAWAdminMsg").buildLocalizedString([f],[],d("MAWLocalizationType").CURRENT_USER_SEND_TEXT);yield d("MAWBumpThread").threadMutation_DEPRECATED({description:"MAWOptimisticMessageUtils",lastActivityTs:e,lastReadTs:e,snippet:j,snippetSenderContactId:l,threadKey:m,txn:a})});return j.apply(this,arguments)}function k(a,b){b=d("MAWBridgeBuildMsgMentions").buildThreadSnippetWithMentions(a,b,[],d("MAWLocalizationType").CURRENT_USER_SEND_TEXT);var c=b[0];b[1];return(b=c)!=null?b:a}function f(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var c=b.optimisticMediaAttachment,e=b.senderId,f=b.threadKey;b=b.timestampMsI64;c=p(c.type);c!=null&&(yield d("MAWBumpThread").threadMutation_DEPRECATED({description:"MAWCreateOptimisticSecureMessageWithAttachment",lastActivityTs:b,lastReadTs:b,snippet:c,snippetSenderContactId:e,threadKey:f,txn:a}))});return l.apply(this,arguments)}function m(a){var b=a.ephemeralSettings,c=a.externalId,e=a.threadJid;a=a.ts;return{ack:d("MAWAckLevel").ACK.partialOptimistic,altIndex:void 0,author:d("WAJids").AUTHOR_ME,ephemeralSetting:(b=b)!=null?b:void 0,externalId:c,isForwarded:!1,specialTextSize:void 0,threadJid:e,ts:d("WATimeUtils").castMilliSecondsToUnixTime(a)}}function n(a){var b=a.content,c=a.initiatingSource,d=a.isFirstMsg,e=a.mentionedJids,f=a.optimisticMsg,g=a.quote,h=a.specialTextSize;a=a.threadSource;return{content:b,initiatingSource:c,isFirstMsg:d,isForwarded:!1,mentionedJids:e==null?void 0:e.slice(),openMessageOtid:void 0,openMessageParticipantCount:void 0,optimisticMsg:f,participantCount:void 0,quote:g,source:a,specialTextSize:h}}function o(a){var b,e=a.optimisticMediaAttachment,f=a.threadKey,g=a.timestampMsI64;b={attachmentFbid:a.offlineAttachmentId,attachmentIndex:(h||(h=d("I64"))).zero,attachmentType:(b=a.attachmentType)!=null?b:void 0,authorityLevel:(i||(i=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC),filename:e.filename,filesize:c("gkx")("4798")?(h||(h=d("I64"))).of_float(e.file.size):void 0,hasMedia:!0,hasXma:!1,isSharable:!1,messageId:a.messageExternalId,offlineAttachmentId:a.offlineAttachmentId,previewUrl:e.url,threadKey:f,timestampMs:g,transportKey:"WhatsApp"};if(e.type==="image"||e.type==="animated_image"||e.type==="video"||e.type==="sticker"){b=babelHelpers["extends"]({},b,{previewHeight:((a=e.thumbnailSpec)==null?void 0:a.height)?(h||(h=d("I64"))).of_float((f=e.thumbnailSpec)==null?void 0:f.height):void 0,previewWidth:((g=e.thumbnailSpec)==null?void 0:g.width)?(h||(h=d("I64"))).of_float((a=e.thumbnailSpec)==null?void 0:a.width):void 0})}return b}function p(a){switch(a){case"animated_image":return d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").CURRENT_USER_SEND_GIF);case"image":return d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").CURRENT_USER_SEND_IMAGE);case"video":return d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").CURRENT_USER_SEND_VIDEO);case"audio":return d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").CURRENT_USER_SEND_AUDIO);case"document":return d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").CURRENT_USER_SEND_ATTACHMENT);case"sticker":return d("MAWAdminMsg").buildLocalizedString([],[],d("MAWLocalizationType").CURRENT_USER_SEND_STICKER);default:return null}}function q(a){switch(a){case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER):return d("MAWMsgType").MSG_TYPE.STICKER;case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE):return d("MAWMsgType").MSG_TYPE.IMAGE;case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE):return d("MAWMsgType").MSG_TYPE.GIF;case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO):return d("MAWMsgType").MSG_TYPE.VIDEO;case(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO):return d("MAWMsgType").MSG_TYPE.PTT;default:return d("MAWMsgType").MSG_TYPE.DOCUMENT_FILE}}function r(a){if(a==null)return;if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL)))return 1;if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").MEDIUM)))return 2;if((h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").LARGE)))return 3}g.getOptimisticMessageTimestamp=a;g.optimisticBumpThread=e;g.optimisticBumpThreadMedia=f;g.buildMAWOptimisticBaseMsg=m;g.buildMAWBaseSendMsgArgs=n;g.buildOptimisticAttachment=o;g.lsAttachmentTypeToMsgType=q;g.getSpecialTextSize=r}),98);
__d("MAWCreateOptimisticSecureMessageWithAttachment",["I64","MAWCreateOptimisticSecureMessage","MAWOptimisticMessageUtils","MAWSendFileMsgTypes","QPLUserFlow","asyncToGeneratorRuntime","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c,d,e,f,g,h,j,k,l,m){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,i,k,l,m,n,o,p){m(o);m=d("MAWOptimisticMessageUtils").getOptimisticMessageTimestamp();var q=(h||(h=d("I64"))).of_float(m);a=(yield d("MAWCreateOptimisticSecureMessage").buildOptimisticLsMessage(a,b,e,f,"",g,void 0,l,void 0,o,q,j(k.type)));f=p==null?void 0:p.get(d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(i));f!=null&&(a=babelHelpers["extends"]({},a,{groupId:f.groupId,groupIndex:(h||(h=d("I64"))).of_float(f.groupIndex),groupSize:h.of_float(f.groupSize)}));yield b.messages.add(a);p=d("MAWOptimisticMessageUtils").buildOptimisticAttachment({attachmentType:n,messageExternalId:o,offlineAttachmentId:i,optimisticMediaAttachment:k,senderId:e,threadKey:g,timestampMsI64:q});yield b.attachments.add(p);c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"after_create_optimistic_message",{instanceKey:l});yield d("MAWOptimisticMessageUtils").optimisticBumpThreadMedia(b,{optimisticMediaAttachment:k,senderId:e,threadKey:g,timestampMsI64:q});return{messageExternalId:o,offlineAttachmentId:d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(i),offlineMsgTimestamp:m}});return i.apply(this,arguments)}function j(a){switch(a){case"animated_image":return 16384;case"image":return 2;case"video":return 2;case"audio":return 4;case"document":return 64;case"sticker":return 4096;default:return 1}}g.createOptimisticMessageWithAttachment=a}),98);
__d("MAWMessageRangeDataSource",["I64","LSDatabaseSingleton","MAWMiActOnActThreadReady","MAWPutMessagesToDB","MAWSecureLocalDBFetch","MLV2DataSourceLogger","MessageRangeSet","Promise","asyncToGeneratorRuntime","findMsgsWithMinAndMaxTimestamp","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=function(a){var e=this;this.$2=new(c("MessageRangeSet"))();this.getOrCreateMessageRangeCoveringCursor=function(a,b,c){b==null?void 0:b.annotateMessageRangesDataSource("MAWMessageRangeDataSource");b==null?void 0:b.markQPLPoint("maw_get_or_create_range_start");c=e.$2.getRangeForTimestamp(a.timestampMs);if(c!=null){b==null?void 0:b.markQPLPoint("maw_preexisting_range");b==null?void 0:b.markQPLPoint("maw_get_or_create_range_end");return c}c=(j||(j=d("I64"))).equal(a.timestampMs,j.max_int);c={hasMoreAfter:!c,hasMoreBefore:!0,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:(c=a.messageId)!=null?c:"",maxTimestampMs:a.timestampMs,minMessageId:(c=a.messageId)!=null?c:"",minTimestampMs:a.timestampMs,threadKey:e.$1};a=e.$2.upsertRange(c);b==null?void 0:b.markQPLPoint("maw_range_created");b==null?void 0:b.markQPLPoint("maw_get_or_create_range_end");return a};this.extendRange=function(a,c,f){var g=d("MLV2DataSourceLogger").getMLV2LoggerForThread(e.$1,c);a=e.$2.getRangeForTimestamp(a.minTimestampMs);if(a==null){g==null?void 0:g.markQPLPoint("extend_range_canceled");return(h||(h=b("Promise"))).resolve()}var i=a.value;if(c==="asc"&&(!i.hasMoreAfter||i.isLoadingAfter)){g==null?void 0:g.markQPLPoint("extend_range_canceled");return(h||(h=b("Promise"))).resolve()}if(c==="desc"&&(!i.hasMoreBefore||i.isLoadingBefore)){g==null?void 0:g.markQPLPoint("extend_range_canceled");return(h||(h=b("Promise"))).resolve()}a.next(babelHelpers["extends"]({},i,{isLoadingAfter:i.isLoadingAfter||c==="asc",isLoadingBefore:i.isLoadingBefore||c==="desc"}));return e.$3(a.value,c,f)};this.$3=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,f){var g=d("MLV2DataSourceLogger").getMLV2LoggerForThread(e.$1,b);g==null?void 0:g.markQPLPoint("maw_wait_act_thread_start");var h=(yield d("MAWMiActOnActThreadReady").waitForACTThreadReady((yield (i||(i=d("LSDatabaseSingleton"))).LSDatabaseSingleton).tables,e.$1,"MAWMessageRangeDataSourceForThread"));h=h.chatJid;g==null?void 0:g.markQPLPoint("maw_wait_act_thread_end");g==null?void 0:g.markQPLPoint("wait_secure_local_db_fetch_start");var k=(yield c("MAWSecureLocalDBFetch")({actionType:"user",chatJid:h,config:{admin:!0,editMsgHistory:!0,media:!0,reactions:!0,receiverFetch:!0,xma:!0},count:20,direction:l(b),offsetMsg:{includeOriginalMsg:!0,messageId:b==="asc"?a.maxMessageId:a.minMessageId},timestampMs:b==="asc"?a.maxTimestampMs:a.minTimestampMs}));g==null?void 0:g.markQPLPoint("insert_msgs_to_lsdb_start");yield d("MAWPutMessagesToDB").insertMessageResponseIntoDatabase(yield i.LSDatabaseSingleton,k,f);g==null?void 0:g.markQPLPoint("insert_msgs_to_lsdb_end");g==null?void 0:g.markQPLPoint("maw_upsert_range_start");h=c("findMsgsWithMinAndMaxTimestamp")(k.msgs);var m=h[0],n=h[1];f=babelHelpers["extends"]({},a,function(){var c;switch(b){case"asc":return{hasMoreAfter:k.hasMoreAfter,isLoadingAfter:!1,maxMessageId:(c=n==null?void 0:n.msgId)!=null?c:a.maxMessageId,maxTimestampMs:(j||(j=d("I64"))).max(a.maxTimestampMs,(n==null?void 0:n.sortOrderMs)!=null?(j||(j=d("I64"))).of_float(n==null?void 0:n.sortOrderMs):a.maxTimestampMs)};case"desc":return{hasMoreBefore:k.hasMoreBefore,isLoadingBefore:!1,minMessageId:(c=m==null?void 0:m.msgId)!=null?c:a.minMessageId,minTimestampMs:(j||(j=d("I64"))).min(a.minTimestampMs,(m==null?void 0:m.sortOrderMs)!=null?(j||(j=d("I64"))).of_float(m==null?void 0:m.sortOrderMs):a.minTimestampMs)}}}());e.$2.upsertRange(f);g==null?void 0:g.markQPLPoint("maw_upsert_range_end")});return function(b,c,d){return a.apply(this,arguments)}}();this.$1=a};a=function(){function a(){var a=this;this.$1=new Map();this.getOrCreateMessageRangeCoveringCursor=function(b,c,d){var e=b.threadKey;return a.$2(e).getOrCreateMessageRangeCoveringCursor(b,c,d)};this.extendRange=function(b,c,d){var e=b.threadKey;return a.$2(e).extendRange(b,c,d)}}var b=a.prototype;b.$2=function(a){var b=(j||(j=d("I64"))).to_string(a);if(!this.$1.has(b)){a=new k(a);this.$1.set(b,a)}return c("nullthrows")(this.$1.get(b))};return a}();function l(a){switch(a){case"asc":return"after";case"desc":return"before";case"point":return"point";default:return"point"}}e=new a();g["default"]=e}),98);
__d("combineLatestWith",["relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";function a(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return d("relay-runtime").Observable.create(function(a){var c=new Set(b),d=new Set(b),e=b.map(function(){return void 0}),f=b.map(function(b,f){return b.subscribe({complete:function(){d["delete"](b),d.size===0&&a.complete()},error:a.error,next:function(d){e[f]=d,c["delete"](b),c.size===0&&a.next(e)}})});return function(){f.forEach(function(a){return a.unsubscribe()})}})}g["default"]=a}),98);
__d("MAWEBCombinedRangeDataSource",["EBMessageRangeDataSource","I64","MAWMessageRangeDataSource","Promise","asyncToGeneratorRuntime","combineLatestWith","err","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){if(a==null&&b==null)throw c("err")("Expected non-null minrange.");if(a==null||b==null){var e;e=c("nullthrows")((e=a)!=null?e:b);return{minMessageId:e.minMessageId,minTimestampMs:e.minTimestampMs}}e=(i||(i=d("I64"))).ge((e=a==null?void 0:a.minTimestampMs)!=null?e:(i||(i=d("I64"))).min_int,(e=b==null?void 0:b.minTimestampMs)!=null?e:(i||(i=d("I64"))).min_int)?a:b;return e.hasMoreBefore===!1?{minMessageId:(i||(i=d("I64"))).le(a.minTimestampMs,b.minTimestampMs)?a.minMessageId:b.minMessageId,minTimestampMs:(i||(i=d("I64"))).min(a.minTimestampMs,b.minTimestampMs)}:{minMessageId:e.minMessageId,minTimestampMs:e.minTimestampMs}}function k(a,b){if(a==null&&b==null)throw c("err")("Expected non-null maxrange.");if(a==null||b==null){var e;e=c("nullthrows")((e=a)!=null?e:b);return{maxMessageId:e.maxMessageId,maxTimestampMs:e.maxTimestampMs}}e=(i||(i=d("I64"))).le(a.maxTimestampMs,b.maxTimestampMs)?a:b;return e.hasMoreAfter===!1?{maxMessageId:(i||(i=d("I64"))).ge(a.maxTimestampMs,b.maxTimestampMs)?a.maxMessageId:b.maxMessageId,maxTimestampMs:(i||(i=d("I64"))).max(a.maxTimestampMs,b.maxTimestampMs)}:{maxMessageId:e.maxMessageId,maxTimestampMs:e.maxTimestampMs}}var l=function(a){var d=this;this.getOrCreateMessageRangeCoveringCursor=function(a,b,e){b==null?void 0:b.annotateMessageRangesDataSource("MAWEBCombinedRangeDataSource");var f=c("MAWMessageRangeDataSource").getOrCreateMessageRangeCoveringCursor(a,b,e);b=c("EBMessageRangeDataSource")(d.$1).getOrCreateMessageRangeCoveringCursor(a,b,e);return c("combineLatestWith")(f,b).map(function(b){var c=b[0];b=b[1];var d=k(c,b),e=j(c,b);return{hasMoreAfter:Boolean((c==null?void 0:c.hasMoreAfter)||(b==null?void 0:b.hasMoreAfter)),hasMoreBefore:Boolean((c==null?void 0:c.hasMoreBefore)||(b==null?void 0:b.hasMoreBefore)),isLoadingAfter:Boolean((c==null?void 0:c.isLoadingAfter)||(b==null?void 0:b.isLoadingAfter)),isLoadingBefore:Boolean((c==null?void 0:c.isLoadingBefore)||(b==null?void 0:b.isLoadingBefore)),maxMessageId:d.maxMessageId,maxTimestampMs:d.maxTimestampMs,minMessageId:e.minMessageId,minTimestampMs:e.minTimestampMs,threadKey:a.threadKey}})};this.extendRange=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){yield (h||(h=b("Promise"))).all([c("EBMessageRangeDataSource")(d.$1).extendRange(a,e,f),c("MAWMessageRangeDataSource").extendRange(a,e,f)])});return function(b,c,d){return a.apply(this,arguments)}}();this.$1=a},m,n;function a(a){(m==null||n!==a)&&(n=a,m=new l(a));return m}g["default"]=a}),98);
__d("MAWFetchExternalAttachmentBlob",["asyncToGeneratorRuntime","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return h.apply(this,arguments)}function h(){h=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){a=(yield window.fetch(a,{}).then(function(a){return a.blob()})["catch"](function(a){d("sendToSentQPLLogger").markSendToSentPoint(b,"fetch_external_attachment_failed");throw a}));return a});return h.apply(this,arguments)}g.fetchExternalAttachmentBlob=a}),98);
__d("MAWFetchSecureMessages",["I64","MAWBridgeSendAndReceive","MAWDbMsg","MAWMiActOnActThreadReady","ReQL","WATagsLogger","asyncToGeneratorRuntime","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["MAWFetchSecureMessages: threadJid: "," minMsgSortOrderTsResponse ",""]);i=function(){return a};return a}var j=c("requireDeferred")("MWRestoreMessagesFromEB").__setRef("MAWFetchSecureMessages"),k=10;function a(a,b,c,d,e,f,g){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e,f,g,l){g===void 0&&(g=k);var m=l.addQPLAnnotations,n=l.markQPLFailure,o=l.markQPLPoint,p=l.markQPLStart;l=l.markQPLSuccess;var q=p();m(q,{string:{threadType:(h||(h=d("I64"))).to_string(e)}});function r(a){o(q,"load_more_msgs_success","successfully loaded messages from worker"),m(q,a)}o(q,"before_start_load_more_msgs","before fetching messages range from table");m(q,{string:babelHelpers["extends"]({direction:f,thread_id:h.to_string(c)},e!=null?{thread_type:(h||(h=d("I64"))).to_string(e)}:{})});p=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.messages_ranges_v2__generated).getKeyRange(c)));try{if(p!=null&&!p.isLoadingBefore&&f==="before"){o(q,"start_load_more_msgs","starting the load more QPL event");e=(yield d("MAWMiActOnActThreadReady").waitForACTThreadReady(a.tables,c,"MAWFetchMoreMessages"));var s=e.chatJid;o(q,"put_message_range","put txn in messages_ranges_v2__generated table");yield b.messages_ranges_v2__generated.put({hasMoreAfter:p.hasMoreAfter,hasMoreBefore:p.hasMoreBefore,isLoadingAfter:p.isLoadingAfter,isLoadingBefore:!0,maxMessageId:p.maxMessageId,maxTimestampMs:p.maxTimestampMs,minMessageId:p.minMessageId,minTimestampMs:p.minTimestampMs,threadKey:p.threadKey});o(q,"send_loadMoreMsgs_to_backend","calling backend with loadMoreMsgs");c=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","loadMoreMsgs",{chatJid:s,direction:f,numMsgs:g,offsetMsgId:d("MAWDbMsg").toMsgId(p.minMessageId)}));r({bool:{hasMoreBefore:c.hasMoreBefore}});if(c.hasMoreBefore){l(q);return}var t=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getMaybeNextNonAdminMsgSortOrderMs",{chatJid:s,mayBeAdminMsgId:d("MAWDbMsg").toMsgId(p.minMessageId)}));d("WATagsLogger").TAGS(["labyrinth_web","MAWFetchSecureMessages"]).LOG(i(),s,t.minMsgTimestampMs);o(q,"issued_range_query","MAWFetchSecureMessages: minMsgSortOrderTsResponse "+t.minMsgTimestampMs);l(q);j.onReady(function(b){b({chatJid:s,newerNumMessages:(h||(h=d("I64"))).zero,numMessages:h.of_int32(g),sortOrderMs:h.of_float(t.minMsgTimestampMs),storage:a})})}m(q,{bool:{isLoadingAfter:p==null?void 0:p.isLoadingAfter,isLoadingBefore:p==null?void 0:p.isLoadingBefore}});o(q,"already_loading_messages","end the load more QPL event.");l(q)}catch(a){n(q,a)}});return l.apply(this,arguments)}g["default"]=a}),98);
__d("useMAWQPLLogger",["MAWQPLLogger","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useMemo;function a(a){return i(function(){return c("MAWQPLLogger")(a)},[a])}g.useMAWQPLLogger=a}),98);
__d("MAWFetchMoreMessages",["Int64Hooks","MAWFetchSecureMessages","MAWSecureLocalDBDataSource","qpl","useMAWQPLLogger","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return d("Int64Hooks").useMemoInt64(function(){return new(c("MAWSecureLocalDBDataSource"))()},[])}function b(a){var b=(h||(h=c("useReStore")))(),e=d("useMAWQPLLogger").useMAWQPLLogger(c("qpl")._(25303796,"1974"));return d("Int64Hooks").useCallbackInt64(function(d,f,g,h){return c("MAWFetchSecureMessages")(b,d,f,a,g,h,e)},[b,e,a])}g.useSecureDataStorage=a;g.useFetchSecureMessages=b}),98);
__d("MAWFindFirstUrl",["getURLRanges"],(function(a,b,c,d,e,f,g){"use strict";function a(a){a=c("getURLRanges")(a);return a.length===0?null:a}g.findFirstUrl=a}),98);
__d("MAWLinkPreviewDataStatusUtils",["I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){return a!=null&&(h||(h=d("I64"))).equal(a,(i||(i=d("LSIntEnum"))).ofNumber(b))}g.linkPreviewDataStatusIsOfType=a}),98);
__d("MAWLoadingStateOutstandingUIReadyOfflineQueueSelector",["MAWSharedProtocolQueueConst"],(function(a,b,c,d,e,f,g){"use strict";a=function(a){return function(b){var c=b.offlineQueueCount,e=b.offlineQueueSyncState;b=b.offlineQueueThreadStatus;return a!=null&&Object.keys(b).length>0?b[a]!=null&&b[a].chatStatus!==d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete:c>0&&e!==d("MAWSharedProtocolQueueConst").OfflineConsumerStatus.Complete}};g.outstandingUIReadyOfflineQueueSelector=a}),98);
__d("MAWMediaManagerUtilsDeferred",["requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";a=c("requireDeferred")("MAWMediaManagerUtils").__setRef("MAWMediaManagerUtilsDeferred");b=a;g["default"]=b}),98);
__d("MAWMiActMaybeCreateActThread",["FBLogger","I64","LSAuthorityLevel","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSVerifyE2EEMetadataThreadExistsV2StoredProcedure","MAWCreateGroupThread","MAWCreateOneToOneThread","MAWMiActCreateThreadInActWithMiData","MAWMiActGetThreadLifecycleState","MAWMiActThreadLifecycleState","WAJids","WATagsLogger","asyncToGeneratorRuntime","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["Duplicated thread creation for ",""]);j=function(){return a};return a}function k(a,b){return a.runInTransaction(function(a){return c("LSVerifyE2EEMetadataThreadExistsV2StoredProcedure")(c("LSFactory")(a),{authorityLevel:(h||(h=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE),threadKey:b,threadType:h.ofNumber(15)}).then(function(){})},"readwrite",void 0,void 0,f.id+":45")}function l(a,b,e,f){var g=e.actorId;e=e.participantIds;var j=e.filter(function(a){return a!==(i||(i=d("I64"))).to_string(g)});if(d("LSMessagingThreadTypeUtil").isOneToOne(b.threadType)){var k=j.length===1?j:e;return d("MAWCreateOneToOneThread").call(a,(i||(i=d("I64"))).of_string(k[0]),i.to_string(b.threadKey),f)}else if(d("LSMessagingThreadTypeUtil").isGroup(b.threadType)&&j.length>1)return c("MAWCreateGroupThread")({db:a,offlineThreadingId:b.threadKey,participantIds:e});throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Did not know which type of optimistic thread to create for\n    threadKey: %s, participantsCount: %s, threadType: %s",(i||(i=d("I64"))).to_string(b.threadKey),e.length,(h||(h=d("LSIntEnum"))).toNumber(b.threadType))}function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){b=(yield d("MAWMiActCreateThreadInActWithMiData").miActCreateThreadInActWithMiData({description:b,fbid:a.serverThreadKey,isGroupThread:d("LSMessagingThreadTypeUtil").isGroup(a.thread.threadType),jid:a.jidInt64,lastActivityTimestampMs:a.thread.lastActivityTimestampMs,lastReadWatermarkTimestampMs:a.thread.lastReadWatermarkTimestampMs}));return{created:b.isCreated,jid:b.chatJid}});return n.apply(this,arguments)}function o(a,b){if(!d("LSMessagingThreadTypeUtil").isOneToOne(a.thread.threadType))return null;var c=b.actorId;b=b.participantIds;b=b.filter(function(a){return a!==(i||(i=d("I64"))).to_string(c)});if(b.length!==1)return null;b=b[0];return{jid:d("WAJids").unsafeCoerceToChatJid(b+"@msgr"),jidInt64:(i||(i=d("I64"))).of_string(b),serverThreadKey:a.thread.threadKey,thread:a.thread,type:"AUTHORITATIVE_THREAD_ONLY"}}var p=new Map(),q=new Set();function a(a,b,c,d,e){return r.apply(this,arguments)}function r(){r=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){var h=(yield d("MAWMiActGetThreadLifecycleState").getThreadLifecycleStateByThreadKey(a.tables,b,g));f!=null&&d("sendToSentQPLLogger").addSendToSentAnnotations(f,{string:{miActThreadState:h.type.toString()}});switch(h.type){case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.THREAD_KEY_ONLY:yield k(a,b);throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] We did not call MiActLoadExistingThread for threadKey: %s, threadState: %s",(i||(i=d("I64"))).to_string(b),h.type);case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_MISSING_MAPPING_ROW:f=o(h,e);if(f!=null){q.has(f.jid)&&d("WATagsLogger").TAGS(["occamadillo","retry_create_thread"]).LOG(j(),f.jid);q.add(f.jid);return m(f,g)}else throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] MI inserted the thread but the mapping row was not\n        written or it was deleted for threadKey: %s",(i||(i=d("I64"))).to_string(b));case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_NO_ACT:f=(i||(i=d("I64"))).to_string(b);var n=p.get(f);if(n!=null)return n;n=l(a,h.thread,e,g);p.set(f,n);return n;case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD_WITH_ACT:yield k(a,b);return{created:!1,jid:h.jid};case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.OPTIMISTIC_THREAD_WITH_ACT:return{created:!1,jid:h.jid};case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.AUTHORITATIVE_THREAD_ONLY:return m(h,g);case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.MI_AND_ACT_THREAD_COMPLETE:return{created:!1,jid:h.jid};case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.CLIENT_PARTIAL_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.SERVER_PARTIAL_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MI_THREAD:case d("MAWMiActThreadLifecycleState").MiActThreadStatesEnum.JID_MISSING_MAPPING_ROW:throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Unhandled ACT thread creation state %s for threadKey:\n        %s",h.type,(i||(i=d("I64"))).to_string(b));default:h.type;throw c("FBLogger")("messenger_e2ee_web").mustfixThrow("[MiActMapping] Unreachable miActThreadState.type: %s",h.type)}});return r.apply(this,arguments)}g["default"]=a}),98);
__d("MAWObservableUtils",["Random","ReStoreKeyComparer","err"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){return{id:c("Random").uint32()}}function b(a,b){if(!(Array.isArray(a)||Array.isArray(b)))return(h||(h=d("ReStoreKeyComparer"))).compareKey([a],[b]);else if(Array.isArray(a)&&Array.isArray(b))return(h||(h=d("ReStoreKeyComparer"))).compareKey(a,b);throw c("err")("[Separate Read Chunked Observable] Cannot compare array and non-array")}function e(a,b){var c=[];for(var d=0;d<a.length;d+=b)c.push(a.slice(d,d+b));return c}g.getUniqueRef=a;g.wrappedCompareKey=b;g.chunkArray=e}),98);
__d("MAWOptimisticUpdateContactRelationship",["I64","LSAddMessengerContactStoredProcedure","LSFactory","LSMessagingThreadTypeUtil","ReQL","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e,g){if(!d("LSMessagingThreadTypeUtil").isOneToOne(a.threadType))return;c("promiseDone")(e.runInTransaction(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var f;f=(f=(yield d("ReQL").firstAsync(d("ReQL").mergeJoin(d("ReQL").fromTableAscending(e.tables.participants).getKeyRange(a.threadKey),d("ReQL").fromTableAscending(e.tables.contacts)).filter(function(a){a[0];a=a[1];return!(h||(h=d("I64"))).equal(a.id,g)}))))!=null?f:[void 0,void 0];f[0];f=f[1];if(f==null)return;var i=babelHelpers["extends"]({},f,{contactViewerRelationship:(h||(h=d("I64"))).of_string("2")});yield b.contacts.upsert([f.id],i);d("LSMessagingThreadTypeUtil").isArmadilloSecure(a.threadType)&&(yield c("LSAddMessengerContactStoredProcedure")(c("LSFactory")(b),{contactId:f.id}))});return function(a){return f.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":39"))}g.call=a}),98);
__d("MAWParseLinkPreviewXMAData",["E2EELinkPreviewXMADataStatus","I64","LSIntEnum"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=a==null?void 0:a.status,e=a==null?void 0:a.data;if(a==null||b==null||e==null)return null;a=(h||(h=d("I64"))).equal(b,(i||(i=d("LSIntEnum"))).ofNumber(c("E2EELinkPreviewXMADataStatus").DISABLED));b=JSON.parse(e);return Object.keys(b).length===0||b.url==null||a?null:b}g.parseLinkPreviewXMAData=a}),98);
__d("MAWPreProcessLinkPreviewQPL",["MAWQPLInstanceKeyUtils","QPLUserFlow","justknobx","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=c("qpl")._(1056840460,"718");function a(a){var b=a.draftId;a=a.url;b=b.concat(a);var e=d("MAWQPLInstanceKeyUtils").getInstanceKey(b);a=c("justknobx")._("2714");c("QPLUserFlow").start(h,{annotations:{string:{preprocess_type:"link_preview_xma"}},instanceKey:e,timeoutInMs:a});return{addAnnotations:function(a){c("QPLUserFlow").addAnnotations(h,a,{instanceKey:e})},addPoint:function(a,b){c("QPLUserFlow").addPoint(h,a,{instanceKey:e}),b!=null&&c("QPLUserFlow").addAnnotations(h,b,{instanceKey:e})},endCancel:function(a,b){c("QPLUserFlow").endCancel(h,{annotations:a,cancelReason:b,instanceKey:e})},endFail:function(a,b){c("QPLUserFlow").endFailure(h,a,{instanceKey:e}),b!=null&&c("QPLUserFlow").addAnnotations(h,b,{instanceKey:e})},endSuccess:function(){c("QPLUserFlow").endSuccess(h,{instanceKey:e})}}}g.startMediaPreProcessLinkPreviewQpl=a}),98);
__d("MAWPrepareAttachmentsFromMediaManager",["MAWExternalId","MAWSendFileMsgTypes"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,c,e){var f=b.hasFile,g=b.hasImage;b=b.hasVideo;var h=null;if(b||g||f){b=a[a.length-1];h=d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(b.offlineAttachmentId)}else h=d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromStanzaId(d("MAWExternalId").generateExternalId());c(h);g=a.reduce(function(a,b){var c=e.get(d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(b.offlineAttachmentId));c!=null&&a.push([c,d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(b.offlineAttachmentId)]);return a},[]);return{attachmentOfflineId:h,attachments:g}}g.prepareAttachmentsFromMediaManagerImpl=a}),98);
__d("MAWSecureComposerUtils",["I64","LSMessagingThreadTypeUtil","MAWJobDefinitions","MAWMiActOnActThreadReady","MAWUIJob","MessageRequestsLog","Promise","WAJobOrchestratorTypes","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e,f,g){if(d("LSMessagingThreadTypeUtil").isArmadilloSecure(e.threadType)){f!=null&&d("MessageRequestsLog").logActionConfirmed(e,8,(i||(i=d("I64"))).to_string(f));c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(a.tables,e.threadKey,"MAWSecureComposerUtils",function(a,c){d("MAWUIJob").UIJobStarters.fireAndForget(d("MAWJobDefinitions").createStartJobInfo("deleteThread",{chatJid:c,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}));return(h||(h=b("Promise"))).resolve()}));return}}g.onDeleteThread=a}),98);
__d("MAWSecureTypingState",["I64","Int64Hooks","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSIntEnum","LSMessagingThreadTypeUtil","MAWBridgeFireAndForget","MAWMiActOnActThreadReady","MWPActor.react","MessengerWebUXLogger","Promise","ReQL","ReQLSuspense","WABridgedAPI","WAChatState","WAJids","asyncToGeneratorRuntime","gkx","promiseDone","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(a,b,c,d){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g){if(!(j||(j=d("I64"))).equal(f,(k||(k=d("LSIntEnum"))).ofNumber(15)))return(i||(i=b("Promise"))).resolve(!0);f=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.participants,["contactId"]).getKeyRange(e).filter(function(a){return!(j||(j=d("I64"))).equal(a.contactId,g)})));if(f==null)return!1;e=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.contacts).getKeyRange(f.contactId)));return e==null?!1:(j||(j=d("I64"))).equal(e.blockedByViewerStatus,(k||(k=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED))});return m.apply(this,arguments)}var n=[];function a(a,e,g){var m=(h||(h=c("useReStore")))(),o=d("MWPActor.react").useActor(),p=(j||(j=d("I64"))).to_string(e),q=c("MessengerWebUXLogger").useInteractionLogger(),r=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(m.tables.participants,["contactId"]).getKeyRange(e).map(function(a){return d("WAJids").toMsgrUserJid((j||(j=d("I64"))).to_string(a.contactId))})},[m,e],f.id+":87");return d("Int64Hooks").useCallbackInt64(function(f){(j||(j=d("I64"))).ge(a,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(g)&&(c("gkx")("24137")&&d("LSMessagingThreadTypeUtil").isGroup(g)&&!n.includes(p)&&c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(m.tables,e,"MAWSecureTypingState",function(a,b){n.push(p);return c("WABridgedAPI").preEstablishSession({groupJid:d("WAJids").toGroupJid(b),userJids:r}).then(function(){})})),c("promiseDone")(l(m,e,g,o).then(function(a){return!a?(i||(i=b("Promise"))).resolve():d("MAWMiActOnActThreadReady").onActThreadReady(m.tables,e,"MAWSecureTypingState",function(a,c){q==null?void 0:q({eventName:"send_typing_indicators",threadKey:e,threadType:g});d("MAWBridgeFireAndForget").fireAndForget("backend","sendChatStateFromComposer",{chatJid:c,state:f?d("WAChatState").TYPING:d("WAChatState").IDLE});return(i||(i=b("Promise"))).resolve()})})))},[m,r,a,e,g,o,p,q])}g.useOnTypingStateChanged=a}),98);
__d("MAWSendExternalLinkXMAV2",["ConstUriUtils","MAWExternalId","MAWExternalLinkUtil","MAWGetEphemeralSettings","MAWGetImageSpec","MAWImagePreProcess","MAWJobDefinitions","MAWParseXMAProtocol","MAWTimedJob","MAWXMALoggingUtils","MWPBumpEntityKey","QPLUserFlow","WAArmadilloXMA.pb","WAJobOrchestratorTypes","WALogger","WAMediaQplHelper","asyncToGeneratorRuntime","gkx","justknobx","qpl","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(['S410301 The externalLinkUrl set as native and action URL in XMA is not a valid URI"']);h=function(){return a};return a}function a(a,b,c,d,e,f,g,h,j,k,l){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,i,j,k,l,m,n){j=(yield d("MAWGetEphemeralSettings").getEphemeralSetting(f,j));var o=void 0;if(e!=null&&d("MAWExternalLinkUtil").allowedPreviewTypes.includes(e.type)){e=new File([e],"preview",{type:e.type});if(c("gkx")("4423")){var p=(yield d("MAWImagePreProcess").generateImageThumbnailInWorkerWithFallback(e,c("justknobx")._("2033"))),q=new File([p.jpegThumbnail],"preview",{type:"image/jpeg"});o={file:q,height:p.height,width:p.width}}else{q=(yield d("MAWGetImageSpec").getImageSpec(e));o={file:e,height:q.height,width:q.width}}d("sendToSentQPLLogger").addSendToSentAnnotations(g,{string:{sent_xma_preview_file_size_bucket:d("WAMediaQplHelper").convertIntegerSizeToStringBucket(o.file.size)}})}d("sendToSentQPLLogger").addSendToSentAnnotations(g,{bool:{has_xma_preview:o!=null}});p={content:a,ephemeralSetting:j==null?void 0:j,mentionedJids:n?Array.from(n):void 0,offlineAttachmentId:k==null?void 0:k,optimisticMsg:m==null?void 0:{msgId:m==null?void 0:m.messageExternalId,ts:m==null?void 0:m.offlineMsgTimestamp},quote:l,s2sInstanceKey:g,s2sUserFlowQPLEvent:c("qpl")._(25313175,"1551"),source:i,xmaMessageType:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE};q=(e=d("ConstUriUtils").getUri(b.url))==null?void 0:e.getDomain();a=d("MAWXMALoggingUtils").getXmaTargetTypeStringFromEnum(p.xmaMessageType);d("sendToSentQPLLogger").addSendToSentAnnotations(g,{string:{xmaTargetType:a}});d("ConstUriUtils").isValidUri(b.url)||d("WALogger").ERROR(h());d("MAWParseXMAProtocol").isURLValid(b.url,d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_EXTENDED_CONTENT_TYPE.MSG_EXTERNAL_LINK_SHARE,!1,!0)?d("MWPBumpEntityKey").bumpEntityKey("maw.xma_invalid_url","web_link_preview_url_valid"):d("MWPBumpEntityKey").bumpEntityKey("maw.xma_invalid_url","web_link_preview_url_invalid");n={defaultCTA:{actionUrl:b.url,buttonType:d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_CTA_BUTTON_TYPE.OPEN_NATIVE,nativeUrl:b.url},overlayIconGlyph:void 0,subtitleText:b.author_name,titleText:(j=b.title)!=null?j:q};c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"sending_message_to_wajob",{instanceKey:g});return d("MAWTimedJob").TimedUIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("sendXMAShareMsg",{args:p,chatJid:f,previewFile:(k=o)!=null?k:void 0,s2sInstanceKey:g,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION},xmaArgs:n,xmaMsgExternalId:(l=m==null?void 0:m.messageExternalId)!=null?l:d("MAWExternalId").generateExternalId()}))});return i.apply(this,arguments)}g.sendExternalLinkXMAV2=a}),98);
__d("MAWSendSecureAttachment",["FBLogger","I64","MAWBridgeSendAndReceive","MAWDbMsg","MAWJobDefinitions","MAWUIJob","QPLUserFlow","WAJobOrchestratorTypes","WALoggerDeferred","asyncToGeneratorRuntime","qpl","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("MWLogSend").__setRef("MAWSendSecureAttachment");function a(a,b,c,d,e,f,g,h,i,k,l,m,n,o,p,q){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g,j,k,l,m,n,o,p,q,r,s,t){yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","MAWSendSecureAttachment"],["Starting attachment message send"],"LOG");if(b==null){c("QPLUserFlow").endFailure(c("qpl")._(25313175,"1551"),"no_chat_jid",{instanceKey:o});return}var u=null;if(m!=null){m=d("MAWDbMsg").toMsgId(m.messageId);m!=null&&(u=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getProtocolMsgIdByMsgId",{msgId:m})))}c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"sending_media_to_wajob",{instanceKey:o});switch(j.type){case"image":case"animated_image":case"sticker":var v;m=j.imageSpec;var w=j.thumbnailUrlAndSpec;yield d("MAWUIJob").UIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("sendMediaMsg",{args:{ephemeralSetting:(v=p)!=null?v:void 0,height:m.height,initiatingSource:q,isFirstMsg:n,isForwarded:!1,jpegThumbnail:w.jpegThumbnail,jpegThumbnailHeight:w.height,jpegThumbnailWidth:w.width,mediaGroupMetadata:t,offlineAttachmentId:k,optimisticMsg:r,quote:(v=u)!=null?v:void 0,s2sInstanceKey:o,source:l,width:m.width},attachmentType:"image",chatJid:b,externalId:s,file:j.file,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}));break;case"video":w=j.thumbnailUrlAndSpec;yield d("MAWUIJob").UIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("sendMediaMsg",{args:{duration:w.duration,ephemeralSetting:(t=p)!=null?t:void 0,height:w.height,initiatingSource:q,isFirstMsg:n,isForwarded:!1,jpegThumbnail:w.jpegThumbnail,jpegThumbnailHeight:w.height,jpegThumbnailWidth:w.width,offlineAttachmentId:k,optimisticMsg:r,quote:(v=u)!=null?v:void 0,s2sInstanceKey:o,source:l,width:w.width},attachmentType:"video",chatJid:b,externalId:s,file:j.file,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}));break;case"audio":m=j.durations;t=j.isPtt;yield d("MAWUIJob").UIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("sendMediaMsg",{args:{duration:Math.round(m),ephemeralSetting:(v=p)!=null?v:void 0,initiatingSource:q,isFirstMsg:n,isForwarded:!1,isPtt:t,offlineAttachmentId:k,optimisticMsg:r,quote:(w=u)!=null?w:void 0,s2sInstanceKey:o,source:l},attachmentType:"audio",chatJid:b,externalId:s,file:j.file,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}));break;case"document":m=j.filename;yield d("MAWUIJob").UIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("sendMediaMsg",{args:{ephemeralSetting:(v=p)!=null?v:void 0,filename:m,initiatingSource:q,isFirstMsg:n,isForwarded:!1,offlineAttachmentId:k,optimisticMsg:r,quote:(t=u)!=null?t:void 0,s2sInstanceKey:o,source:l},attachmentType:"application",chatJid:b,externalId:s,file:j.file,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}));break;default:c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"uknown_file_type_sendMediaMsg_not_fired",{instanceKey:o}),c("FBLogger")("messenger_web_media").addMetadata("MESSENGER_E2EE_WEB","ERROR_MESSAGE","failed while sending attachment").mustfix("sendSecureAttachment: Failed while sending attachment, unknown attachment type %s",j.type)}var x;switch(j.type){case"image":x=8;break;case"video":x=10;break;case"audio":x=11;break;case"document":x=34;break}yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","MAWSendSecureAttachment"],["Send attachment message is done"],"LOG");i.onReady(function(b){var c=(h||(h=d("I64"))).to_string(e);return b.log(a,{actor:g,attachmentFbids:[],attachmentType:x,backend:1,hasReply:!1,messagingThreadId:c,offlineThreadingId:k,sendType:0,source:l,threadKey:e,threadType:f})});return b});return j.apply(this,arguments)}g.sendSecureAttachment=a}),98);
__d("MAWSendFileMsgIfNecessaryV2",["FBLogger","MAWExternalId","MAWSendSecureAttachment","Promise","asyncToGeneratorRuntime","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e){var f=e.actorId,g=e.attachments,i=e.chatJid,j=e.ephemeralSetting,k=e.initiatingSource,l=e.isFirstMsg,m=e.mediaGroupMetadataMap,n=e.offlineAttachmentIdToMessageData,o=e.reply,p=e.s2sInstanceKey,q=e.source,r=e.thread;d("sendToSentQPLLogger").markSendToSentPoint(p,"send_attachment_start");e=g.map(function(b){var c=b[0];b=b[1];var e=n==null?void 0:n.get(b);return d("MAWSendSecureAttachment").sendSecureAttachment(a,i,r.threadKey,r.threadType,f,c,b,q,o,l,p,j,k,e==null?void 0:{msgId:e==null?void 0:e.messageExternalId,ts:e==null?void 0:e.offlineMsgTimestamp},(c=e==null?void 0:e.messageExternalId)!=null?c:d("MAWExternalId").generateExternalId(),m==null?void 0:m.get(b))});yield (h||(h=b("Promise"))).all(e)["catch"](function(a){d("sendToSentQPLLogger").markSendToSentFail(p,"send_attachment_failed",a),a instanceof Error?c("FBLogger")("messenger_web_media").catching(a).addMetadata("MESSENGER_E2EE_WEB","ERROR_MESSAGE","failed while sending attachment promise").mustfix("Failed while sending message"):c("FBLogger")("messenger_web_media").addMetadata("MESSENGER_E2EE_WEB","ERROR_MESSAGE","failed while sending attachment promise").mustfix("Failed while sending attachment, %s",a.message)})});return i.apply(this,arguments)}g.sendFileMsgIfNecessaryV2=a}),98);
__d("MAWSupportedFileTypes",[],(function(a,b,c,d,e,f){"use strict";a=["*/*"];f.supportedFileTypes=a}),66);
__d("MDSForwardStackSvgIcon.react",["MDSSvgIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs(c("MDSSvgIcon.react"),babelHelpers["extends"]({},a,{children:[i.jsx("path",{d:"M10.5 14a.5.5 0 0 0 .5-.5v-2.536c0-1.608 1.769-2.532 3.02-1.578l9.21 7.026c1.026.783 1.027 2.37.002 3.154l-9.21 7.046c-1.25.957-3.022.034-3.022-1.576V22.5a.5.5 0 0 0-.5-.5H5a2 2 0 0 1-2-2v-4a2 2 0 0 1 2-2h5.5Z"}),i.jsx("path",{d:"M20.38 24.265a.97.97 0 0 0-.38.771c0 1.61 1.771 2.533 3.022 1.576l9.21-7.046c1.025-.784 1.024-2.37-.002-3.154l-9.21-7.026c-1.251-.954-3.02-.03-3.02 1.578 0 .295.138.574.373.753l4.07 3.105c2.074 1.583 2.076 4.747.004 6.332l-4.066 3.111Z"})]}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MDSHeadlineWithAddOn.react",["BaseRow.react","BaseRowItem.react","Locale","MDSText.react","isIE11OrGreater","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={addOn:{display:"x78zum5",flexDirection:"xdt5ytf",justifyContent:"xl56j7k",marginStart:"x1i64zmx",$$css:!0},nonBreakingSpace:{opacity:"xg01cxk",width:"xnalus7",$$css:!0},textFlexFixForIE:{flexBasis:"xdl72j9",$$css:!0}},k={ltr:{direction:"xzt5al7",$$css:!0},rtl:{direction:"xzyj77d",$$css:!0}};b=i.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var e=a.addOn,f=a.children,g=a.color,h=a.headlineId,l=a.headlineRef,m=a.isSemanticHeading,n=a.numberOfLines;a=a.type;return i.jsx(c("MDSText.react"),{isSemanticHeading:!1,ref:b,type:a,children:i.jsxs(c("BaseRow.react"),{verticalAlign:"center",xstyle:k[d("Locale").isRTL()?"rtl":"ltr"],children:[i.jsx(c("BaseRowItem.react"),{expanding:!0,xstyle:c("isIE11OrGreater")&&j.textFlexFixForIE,children:i.jsx(c("MDSText.react"),{color:g,id:h,isSemanticHeading:m,numberOfLines:n,ref:l,type:a,children:f})}),i.jsx(c("BaseRowItem.react"),{verticalAlign:"top",xstyle:j.addOn,children:i.jsxs(c("BaseRow.react"),{verticalAlign:"center",children:[i.jsx(c("BaseRowItem.react"),{xstyle:j.nonBreakingSpace,children:"\xa0"}),i.jsx(c("BaseRowItem.react"),{children:i.jsx(c("BaseRow.react"),{children:e})})]})})]})})}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),98);
__d("MDSPinnedMessageIcon.react",["MDSSvgIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useId;function a(a){var b=j(),d=j(),e=j(),f=j();return i.jsxs(c("MDSSvgIcon.react"),babelHelpers["extends"]({},a,{children:[i.jsx("g",{filter:"url(#"+b+")",children:i.jsx("rect",{fill:"url(#"+d+")",height:"2",width:"8",x:"17",y:"26"})}),i.jsx("path",{d:"M23.9989 27.5928L23.9988 27.5383L24.0367 27.585C24.1817 27.7518 24.7409 28.2715 25.8875 27.9427C26.9382 27.6414 26.5281 26.8227 26.371 26.5705C26.3138 26.4819 26.2525 26.3965 26.1873 26.3135L16.8703 14.3899C16.2845 15.045 15.5884 15.6539 14.8084 16.0737L23.9989 27.5928Z",fill:"url(#"+e+")"}),i.jsx("path",{d:"M11.5653 17.1305C15.7434 17.1305 19.1305 13.7434 19.1305 9.56526C19.1305 5.38708 15.7434 2 11.5653 2C7.38708 2 4 5.38708 4 9.56526C4 13.7434 7.38708 17.1305 11.5653 17.1305Z",fill:"#FF0D0D"}),i.jsx("path",{d:"M9.19306 12.5345C6.38338 10.2164 5.72669 6.37369 7.72578 3.95078C9.72486 1.52787 13.6231 1.44245 16.432 3.76062C19.2417 6.07879 19.8984 9.92145 17.8993 12.3444C15.9002 14.7673 12.0019 14.8519 9.19306 12.5345Z",fill:"url(#"+f+")"}),i.jsxs("defs",{children:[i.jsxs("filter",{colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse",height:"2.8",id:b,width:"8.8",x:"16.6",y:"25.6",children:[i.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),i.jsx("feBlend",{"in":"SourceGraphic",in2:"BackgroundImageFix",mode:"normal",result:"shape"}),i.jsx("feGaussianBlur",{result:"effect1_foregroundBlur_28_51",stdDeviation:"0.2"})]}),i.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:d,x1:"25",x2:"17.6667",y1:"27",y2:"27",children:[i.jsx("stop",{stopColor:"#969495"}),i.jsx("stop",{offset:"1",stopColor:"#D9D9D9",stopOpacity:"0"})]}),i.jsxs("linearGradient",{gradientUnits:"userSpaceOnUse",id:e,x1:"20.4956",x2:"21.941",y1:"22.4135",y2:"21.2698",children:[i.jsx("stop",{stopColor:"#666666"}),i.jsx("stop",{offset:"1",stopColor:"#CACCCD"})]}),i.jsxs("radialGradient",{cx:"0",cy:"0",gradientTransform:"translate(12.8132 8.1471) rotate(129.523) scale(5.68739 6.59482)",gradientUnits:"userSpaceOnUse",id:f,r:"1",children:[i.jsx("stop",{stopColor:"white",stopOpacity:"0.5"}),i.jsx("stop",{offset:"1",stopColor:"white",stopOpacity:"0"})]})]})]}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("getMDSTextHierarchyStyle",["memoizeWithArgs"],(function(a,b,c,d,e,f,g){"use strict";a=c("memoizeWithArgs")(function(a,b){switch(a){case 1:return{bodyType:"body1",headlineType:"headlineEmphasized1",metaType:"meta1"};case 2:return{bodyType:"body2",headlineType:"headlineEmphasized2",metaType:"meta2"};case 3:return{bodyType:"body3",headlineType:b===!0?"headline3":"headlineEmphasized3",metaType:"meta3"};default:case 4:return{bodyType:"body4",headlineType:b===!0?"headline4":"headlineEmphasized4",metaType:"meta4"};case"entityHeader1":return{bodyType:"body2",headlineType:"entityHeaderHeadline1",metaType:"entityHeaderMeta1"};case"entityHeader2":return{bodyType:"body2",headlineType:"entityHeaderHeadline2",metaType:"entityHeaderMeta2"}}},function(a,b){return String(a)+(b===!0?"":"e")});g["default"]=a}),98);
__d("MDSTextPairing.react",["Box.react","MDSHeadlineWithAddOn.react","MDSText.react","getMDSTextHierarchyStyle","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={item:{marginBottom:"xu06os2",marginTop:"x1ok221b",$$css:!0},root:{display:"x78zum5",flexDirection:"xdt5ytf",flexShrink:"xs83m0k",marginBottom:"xz62fqu",marginTop:"x16ldp7u",$$css:!0}},k={1:{marginBottom:"x11tup63",marginTop:"x16z1lm9",$$css:!0},2:{marginBottom:"x4cne27",marginTop:"xifccgj",$$css:!0},entityHeader1:{marginBottom:"x1wsgfga",marginTop:"x9otpla",$$css:!0},entityHeader2:{marginBottom:"x1wsgfga",marginTop:"x9otpla",$$css:!0}},l={1:{marginBottom:"xwoyzhm",marginTop:"x1rhet7l",$$css:!0},2:{marginBottom:"xzueoph",marginTop:"x1k70j0n",$$css:!0},entityHeader1:{marginBottom:"x1e56ztr",marginTop:"x1xmf6yo",$$css:!0},entityHeader2:{marginBottom:"x1e56ztr",marginTop:"x1xmf6yo",$$css:!0}};function a(a){var b=a.body,d=a.bodyColor;d=d===void 0?"primary":d;var e=a.bodyId,f=a.bodyLineLimit,g=a.bodyRef,h=a.headline,m=a.headlineAddOn,n=a.headlineColor;n=n===void 0?"primary":n;var o=a.headlineId,p=a.headlineLineLimit,q=a.headlineRef,r=a.isPrimaryHeading,s=a.isSemanticHeading,t=a.level,u=a.meta,v=a.metaColor;v=v===void 0?"secondary":v;var w=a.metaId,x=a.metaLineLimit,y=a.metaLocation;y=y===void 0?"below":y;var z=a.metaRef,A=a.reduceEmphasis;A=A===void 0?!1:A;var B=a.testid;B=a.textAlign;a=B===void 0?"start":B;B=c("getMDSTextHierarchyStyle")(t,A);A=B.bodyType;var C=B.headlineType;B=B.metaType;var D=[j.item,l[t]];m=h!=null&&i.jsx(c("Box.react"),{xstyle:D,children:m!=null?i.jsx(c("MDSHeadlineWithAddOn.react"),{addOn:m,color:n,headlineId:o,headlineRef:q,isPrimaryHeading:r,isSemanticHeading:s,numberOfLines:p,type:C,children:h}):i.jsx(c("MDSText.react"),{align:a,color:n,id:o,isPrimaryHeading:r,isSemanticHeading:s,numberOfLines:p,ref:q,type:C,children:h})});n=u!=null&&i.jsx(c("Box.react"),{xstyle:D,children:i.jsx(c("MDSText.react"),{align:a,color:v,id:w,isSemanticHeading:!1,numberOfLines:x,ref:z,type:B,children:u})});return i.jsxs(c("Box.react"),{"data-testid":void 0,xstyle:[j.root,k[t]],children:[y==="above"&&n,m,b!=null&&i.jsx(c("Box.react"),{xstyle:D,children:i.jsx(c("MDSText.react"),{align:a,color:d,id:e,isSemanticHeading:!1,numberOfLines:f,ref:g,type:A,children:b})}),y==="below"&&n]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatComposer3PBotCommandViewItem.react",["CometSearchMentionsBaseViewItem.react","MWXTextPairing.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.entry;a=babelHelpers.objectWithoutPropertiesLoose(a,["entry"]);var d=b.label,e=b.rawData.subtitle;return i.jsx(c("CometSearchMentionsBaseViewItem.react"),babelHelpers["extends"]({},a,{entry:b,children:i.jsx(c("MWXTextPairing.react"),{headline:d,level:4,meta:e,metaLineLimit:1,reduceEmphasis:!0})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWCommandsComposerPluginTextNode",["Lexical"],(function(a,b,c,d,e,f,g){"use strict";var h=function(b){babelHelpers.inheritsLoose(a,b);function a(a,c){var d,e=a.commandId,f=a.commandPrefix,g=a.handle;a=a.rangeType;d=b.call(this,""+((d=f)!=null?d:"")+g,c)||this;d.__handle=g;d.__commandId=e;d.__rangeType=a;d.__commandPrefix=f;return d}a.getType=function(){return"command"};a.clone=function(b){var c,d=b.getEntity();return new a({commandId:d.commandId,commandPrefix:(c=b.__commandPrefix)!=null?c:"",handle:d.handle,rangeType:d.rangeType},b.__key)};a.importJSON=function(a){return i({commandId:a.commandId,handle:a.handle,rangeType:a.rangeType})};var c=a.prototype;c.exportJSON=function(){return babelHelpers["extends"]({},b.prototype.exportJSON.call(this),{commandId:this.__commandId,handle:this.__handle,rangeType:this.__rangeType,type:"command"})};c.createDOM=function(a){a=b.prototype.createDOM.call(this,a);a.className="xv78j7m xt0e3qv x3jgonx";a.spellcheck=!1;return a};c.getEntity=function(){return{commandId:this.__commandId,handle:this.__handle,rangeType:this.__rangeType}};c.getRangeType=function(){return this.__rangeType};c.getCommandId=function(){return this.__commandId};return a}(d("Lexical").TextNode);function i(a){return new h(a).setMode("segmented").toggleDirectionless()}g.MessengerLexicalCommandNode=h;g.$createMessengerLexicalCommandNode=i}),98);
__d("createCommandsHandleMatchStrategy",[],(function(a,b,c,d,e,f){"use strict";b="\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\[\\]\\\\/!%'\"~=<>_:;";c="\\b[\\w][^\\s"+b+"]";d="(^|\\s|\\/)((?:"+c+"{"+1+",})$)";var g=new RegExp(d);function a(a){var b=a.minMatchLength;return{findMentionableString:function(a){a=g.exec(a);if(a===null)return null;var c=a[1],d=a[2];if(d!=null&&d.length>=b){var e=d;(c==null?void 0:c.startsWith("/"))&&(e=""+c+d);return{leadOffset:a.index+c.length,matchingString:d,replaceableString:e}}return null},name:"CommandsHandleMatchStrategy"}}f["default"]=a}),66);
__d("useMW3PBotsCommandsDataSourceResolverConfig",["I64","Promise","ReQL","ReQLSuspense","createCometMentionMatchStrategy","createCommandsHandleMatchStrategy","useCometMentionsDataSourceResolverConfig","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a){var e=(j||(j=c("useReStore")))(),g=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(e.tables.custom_thread_commands.index("rank")).getKeyRange(a).filter(function(a){return!a.isOpenPersistentMenu}).map(function(a){var b=a.commandDescription,c=a.commandId;a=a.commandText;return{key:(i||(i=d("I64"))).to_string(c),label:a,rawData:{rangeType:"cu",subtitle:b},type:"entry"}})},[e,a],f.id+":33"),k=function(a){return{entries:a.query.length?g.filter(function(b){return b.label.toLowerCase().startsWith(a.query.toLowerCase())}):g,params:a}};return{bootstrap:function(){},fetchCache:k,fetchNetwork:function(a){return(h||(h=b("Promise"))).resolve(k(a))}}}function a(a){a=k(a);a=[{dataSource:a,matchStrategy:c("createCommandsHandleMatchStrategy")({minMatchLength:4})},{dataSource:a,matchStrategy:c("createCometMentionMatchStrategy")({minMatchLength:0,name:"CometMentionsNameMatchStrategy",triggers:"/"})}];return c("useCometMentionsDataSourceResolverConfig")(a,!1)}g["default"]=a}),98);
__d("MW3PBotsCommandsComposerPlugin.react",["CometMentionsForLexical.react","CometMentionsLayoutStrategy.react","MWChatComposer3PBotCommandViewItem.react","MWCommandsComposerPluginTextNode","MWThreadKey.react","cometBaseMentionsLexicalCreateNodeStrategy","react","useCometTypeaheadViewListStrategy","useMW3PBotsCommandsDataSourceResolverConfig"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.editor;var b=d("MWThreadKey.react").useMWThreadKeyMemoizedExn();b=c("useMW3PBotsCommandsDataSourceResolverConfig")(b);var e=c("useCometTypeaheadViewListStrategy")({viewItemStrategyRenderer:c("MWChatComposer3PBotCommandViewItem.react")});return i.jsx(c("CometMentionsForLexical.react"),{createNodeStrategy:c("cometBaseMentionsLexicalCreateNodeStrategy")(function(a){return d("MWCommandsComposerPluginTextNode").$createMessengerLexicalCommandNode({commandId:a.key,handle:a.label,rangeType:(a=(a=a.rawData)==null?void 0:a.rangeType)!=null?a:"n"})}),dataSourceResolverConfig:b,editor:a,layoutStrategyRenderer:c("CometMentionsLayoutStrategy.react"),position:"above",viewStrategyRenderer:e})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatColors",[],(function(a,b,c,d,e,f,g){"use strict";a={action:{alignContent:"xc26acl",alignItems:"x6s0dn4",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",cursor:"x1ypdohk",display:"x78zum5",flexShrink:"x2lah0s",height:"xxk0z11",justifyContent:"xl56j7k",marginEnd:"x11i5rnm",marginStart:"x1mh8g0r",position:"x1n2onr6",textAlign:"x2b8uid",width:"xvy4d1p",":hover_backgroundColor":"x15vn3sj",$$css:!0},icon:{height:"x17rw0jw",opacity:"x197sbye",width:"x17z2i9w",":active_opacity":"x4gyw5p",":hover_opacity":"x1o7uuvo",$$css:!0},svgFill:{fill:"x148u3ch",$$css:!0},svgStroke:{fill:"xbh8q5q",stroke:"xmb71p3",$$css:!0}};b={styles:a};g.MessageActions=b}),98);
__d("MWMessageReactionIcon.react",["fbt","MWChatColors","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react");function a(a){var b=a.size;b=b===void 0?16:b;a=a.viewBox;a=a===void 0?"0 0 16 16":a;return k.jsxs("svg",{fill:"none",height:b,viewBox:a,width:b,xmlns:"http://www.w3.org/2000/svg",children:[k.jsx("title",{children:h._("__JHASH__Wo2O5nlXhKT__JHASH__")}),k.jsx("path",{className:(i||(i=c("stylex")))(d("MWChatColors").MessageActions.styles.svgFill),d:"M12.48 0.64C12.48 0.286538 12.7665 0 13.12 0C13.4735 0 13.76 0.286538 13.76 0.64V2.08C13.76 2.16837 13.8316 2.24 13.92 2.24H15.36C15.7135 2.24 16 2.52654 16 2.88C16 3.23346 15.7135 3.52 15.36 3.52H13.92C13.8316 3.52 13.76 3.59163 13.76 3.68V5.12C13.76 5.47346 13.4735 5.76 13.12 5.76C12.7665 5.76 12.48 5.47346 12.48 5.12V3.68C12.48 3.59163 12.4084 3.52 12.32 3.52H10.88C10.5265 3.52 10.24 3.23346 10.24 2.88C10.24 2.52654 10.5265 2.24 10.88 2.24H12.32C12.4084 2.24 12.48 2.16837 12.48 2.08V0.64Z"}),k.jsx("path",{className:i(d("MWChatColors").MessageActions.styles.svgFill),clipRule:"evenodd",d:"M8.96 2.42705C8.96 2.28386 8.86505 2.15735 8.726 2.12317C8.18582 1.99041 7.62113 1.92 7.04 1.92C3.15192 1.92 0 5.07192 0 8.96C0 12.8481 3.15192 16 7.04 16C10.9281 16 14.08 12.8481 14.08 8.96C14.08 8.37887 14.0096 7.81418 13.8768 7.274C13.8427 7.13495 13.7161 7.04 13.573 7.04H13.12C12.0596 7.04 11.2 6.18039 11.2 5.12C11.2 4.94327 11.0567 4.8 10.88 4.8C9.81961 4.8 8.96 3.94039 8.96 2.88V2.42705ZM4.63999 6.4C4.03999 6.4 3.67999 6.88 3.67999 7.68C3.67999 8.48 4.03999 8.96 4.63999 8.96C5.23999 8.96 5.59999 8.48 5.59999 7.68C5.59999 6.88 5.23999 6.4 4.63999 6.4ZM9.43999 6.4C8.83999 6.4 8.47999 6.88 8.47999 7.68C8.47999 8.48 8.83999 8.96 9.43999 8.96C10.04 8.96 10.4 8.48 10.4 7.68C10.4 6.88 10.04 6.4 9.43999 6.4ZM10.56 11.2C10.56 12.48 8.96 13.76 7.04 13.76C5.12 13.76 3.52 12.48 3.52 11.2C3.52 11.0233 3.66327 10.88 3.84 10.88H10.24C10.4167 10.88 10.56 11.0233 10.56 11.2Z",fillRule:"evenodd"})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWAddReactionButton.react",["fbt","I64","LSMessagingThreadTypeUtil","MWCMThreadTypes.react","MWChatMessageId","MWChatReactionsActionContainer.react","MWMessageReactionIcon.react","MWXPressable.react","MWXTooltip.react","ODS","emptyFunction","react","useIsReactionsV2Enabled"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||(i=d("react"));e=i;var m=e.useCallback,n=e.useMemo,o={emojiRowContainer:{borderTopStartRadius:"xdxvlk3",borderTopEndRadius:"x1fglp",borderBottomEndRadius:"x1rp6h8o",borderBottomStartRadius:"xg6i1s1",marginBottom:"x12nagc",marginEnd:"xw3qccf",$$css:!0}},p=l.forwardRef(a);function a(a,b){var e=a.onHoverInPrerenderer,f=a.onHoverOutPrerenderer,g=a.onPressInPrerenderer,i=a.showPopover;a=h._("__JHASH__czR8vxcW0mN__JHASH__");var k=m(function(){i(),(j||(j=d("ODS"))).bumpEntityKey(3185,"mwchat_actions","reaction")},[i]);return l.jsx(c("MWXTooltip.react"),{align:"middle",position:"above",tooltip:a,children:l.jsx(c("MWXPressable.react"),{"aria-label":a,expanding:!0,loggingEvent:"click_react_to_message",onHoverIn:e,onHoverOut:f,onPress:k,onPressIn:g,overlayRadius:"inherit",ref:b,role:"button",testid:void 0,xstyle:o.emojiRowContainer,children:l.jsx("div",{className:"x6s0dn4 x7daf1o xdxvlk3 x1fglp x1rp6h8o xg6i1s1 x78zum5 xl56j7k x10b6aqq xsyo7zv xurb0ha x1yrsyyn x1n2onr6 xp4054r",role:"none",children:l.jsx("div",{className:"x6s0dn4 x14yjl9h xudhj91 x18nykt9 xww2gxu x1ypdohk x14ju556 x11i5rnm x78zum5 xdt5ytf xl56j7k x1npj6m0",children:l.jsx(c("MWMessageReactionIcon.react"),{size:"1.125rem"})})})})})}a.displayName=a.name+" [from "+f.id+"]";function b(a){var b=a.isSecure,e=a.message,f=a.sendReaction,g=a.setShouldRowStayExpanded,h=a.threadKey;a=a.threadType;var i=(k||(k=d("I64"))).to_string(h),j=k.to_string(e.timestampMs),m=n(function(){return d("MWChatMessageId").makeSent(i,e.messageId,j)},[i,e.messageId,j]),o=d("MWCMThreadTypes.react").isBroadcastThread(a);a=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a);h=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(h);return l.jsx(c("MWChatReactionsActionContainer.react"),{alwaysShowEmojiPicker:!0,closeActionsMenu:c("emptyFunction"),disableCustomReactions:h&&o,hasReactionsV2:h,isBroadcastChannel:a,isBroadcastThread:o,isSecure:b,messageID:m,onVisibilityChange:g,sendReaction:f,children:function(a,b,c,d,e,f){return l.jsx(p,{messageID:m,onHoverInPrerenderer:d,onHoverOutPrerenderer:e,onPressInPrerenderer:f,ref:a,showPopover:b})}})}b.displayName=b.name+" [from "+f.id+"]";g["default"]=b}),226);
__d("MWXIconRefreshAlt",["MWXSvgIcon","SVGIcon","cr:9272","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9272")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWAudioPlayer.react",["I64","MAWGetIsMediaDownloadStatusEnabled","MWPAudioHighlightStylesHooks","MWPAudioPlaybackButton.react","MWPAudioPlayerButtons.react","MWPAudioPlayerContainer.react","MWPAudioPlayerHighlight.react","MWPAudioPlayerKeyCommands.react","MWPAudioPlayerSharedStyles","MWPAudioPlayerTimer.react","MWPAudioPlayerUtils","MWXMessageBubbleCornerStyles.react","react","requireDeferred","stylex","useMAWMediaDownloadStatusUIState","useMWNextAttachment","useMWPAudioWaveformData.react","useMWPMarkAudioAttachmentAsConsumed.react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react"));b=i;var l=b.useEffect,m=b.useRef,n=c("requireDeferred")("MWChatAudioLog").__setRef("MWAudioPlayer.react");function o(){n.onReady(function(a){return a.logBrowserDenyAccess()})}function a(a){var b=a.attachment,e=a.connectBottom,f=a.connectTop,g=a.getPlayableUrl,i=a.isReply;i=i===void 0?!1:i;var n=a.isSecure,p=a.mediaRenderQpl,q=a.message,r=a.outgoing,s=a.renderUnsupportedAttachment;a=a.width;var t=b.playableDurationMs,u=(j||(j=d("I64"))).to_float((t=t)!=null?t:(j||(j=d("I64"))).zero)/1e3,v=c("useMWNextAttachment")(b,q);t=n&&d("MAWGetIsMediaDownloadStatusEnabled").getIsMediaDownloadStatusEnabled()?b:null;n=c("useMAWMediaDownloadStatusUIState")(t,p);var w=g(b,"MWAudioPlayer",p),x=c("useMWPAudioWaveformData.react")(b,w);t=d("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({align:r===!0?"right":"left",connectBottom:e,connectTop:f});e=d("MWPAudioPlayerUtils").useControlCenter(w,v!=null&&(n==null||n==="downloaded")?g(v,"MWAudioPlayer"):void 0,q.messageId,v==null?void 0:v.messageId,o,!1,u,p);f=e[0];n=e[1];g=e[2];var y=e[3],z=e[4];e=e[5];c("useMWPMarkAudioAttachmentAsConsumed.react")(g,b);var A=j.gt((q=q.ephemeralDurationInSec)!=null?q:(j||(j=d("I64"))).zero,j.zero);q=f===d("MWPAudioPlayerUtils").State.NONE;var B=f===d("MWPAudioPlayerUtils").State.PLAYING,C=f===d("MWPAudioPlayerUtils").State.PAUSED,D=f===d("MWPAudioPlayerUtils").State.LOADING;f=f===d("MWPAudioPlayerUtils").State.ENDED;var E=B||C,F=m(),G=d("MWPAudioHighlightStylesHooks").useHighlightStyles(r);a=d("MWPAudioPlayerUtils").useCalculatePlayerWidth(a,A);a={width:a+"px"};var H=E?Math.max(u-n,0):0;l(function(){p==null?void 0:p.addPoint("render-audio-player",{bool:{has_next_attachment:v!=null,has_non_zero_duration:u>0,has_playable_url:Boolean(w),has_waveform:x!=null,is_disappearing_message:A}})},[u,A,p,v,w,x]);if(w==null||w.length===0){p==null?void 0:p.endFail("empty_preview_url");if(s!=null)return s(b)}return k.jsx(c("MWPAudioPlayerKeyCommands.react"),{audioEl:g,children:k.jsx(c("MWPAudioPlayerContainer.react"),{audioEl:g,hasScrubber:E,mediaRenderQpl:p,scrubberRef:F,style:a,useCase:d("MWPAudioPlayerUtils").UseCase.PLAYER,testid:void 0,children:k.jsxs("div",{className:(h||(h=c("stylex")))(d("MWPAudioPlayerSharedStyles").styles.common,t,r?d("MWPAudioPlayerSharedStyles").styles.commonOutgoing:d("MWPAudioPlayerSharedStyles").styles.commonIncoming,i&&d("MWPAudioPlayerSharedStyles").styles.commonReply,r&&i&&d("MWPAudioPlayerSharedStyles").styles.commonOutgoingReply),children:[k.jsx(d("MWPAudioPlayerHighlight.react").MWPAudioPlayerHighlightV2,{audioEl:g,currentTime:n,duration:u,hasEnded:f,hasScrubber:E,isListened:b.isAttachmentConsumed===!0,isPlaying:B,onUpdateScrubber:e,outgoing:r,progressHighlightRef:z,scrubberRef:F,waveformData:x,xstyle:G,children:k.jsx(c("MWPAudioPlaybackButton.react"),{disabled:q,hasEnded:f,isLoading:D,isPaused:C,isPlaying:B,onPress:y,outgoing:r,scrubberRef:F})}),k.jsx("div",{children:B?k.jsxs(k.Fragment,{children:[k.jsx(c("MWPAudioPlayerTimer.react"),{outgoing:r,time:H}),k.jsx(d("MWPAudioPlayerButtons.react").PlaybackRateButton,{outgoing:r})]}):k.jsx(c("MWPAudioPlayerTimer.react"),{outgoing:r,time:H})})]})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("WAGetMediaDevicesSupportedConstraints",["WALogger"],(function(a,b,c,d,e,f,g){"use strict";function h(){var a=babelHelpers.taggedTemplateLiteralLoose(["getSupportedConstraints is not supported in this browser. Error: ",""]);h=function(){return a};return a}function a(){try{var a;a=(a=navigator.mediaDevices)==null?void 0:a.getSupportedConstraints();return a}catch(a){d("WALogger").LOG(h(),a);return null}}g.getMediaDevicesSupportedConstraints=a}),98);
__d("MWPUseVoiceRecorder",["AudioContextSingleton","MWChatRecorderUtilsWorkerResource","MWPAudioPlayerIcons.react","MWPAudioPlayerLabels","Promise","WAGetMediaDevicesSupportedConstraints","WebWorker","clearTimeout","emptyFunction","react","setTimeout","useIsMountedRef","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i,l=k.useCallback,m=k.useEffect,n=k.useReducer,o=k.useRef;function a(a){switch(a.stage){case"Unopen":case"Recording":return!1;case"Recorded":case"Playing":return!0}}function e(a){switch(a.stage){case"Unopen":case"Recording":return!1;case"Recorded":case"Playing":return!0}}function p(a){switch(a.stage){case"Unopen":return 0;case"Recording":return a.duration;case"Recorded":case"Playing":return Math.max(a.duration-a.currentTime,0)}}function q(a){switch(a.stage){case"Unopen":return 0;case"Recording":return a.recordingTimeout;case"Recorded":case"Playing":return a.duration}}function r(a){switch(a.stage){case"Unopen":case"Recording":return;case"Recorded":case"Playing":return a.currentTime}}function s(a){switch(a.stage){case"Unopen":case"Recorded":return!1;case"Recording":case"Playing":return!0}}function t(a){if(a.stage==="Recorded")return a.currentTime===0;else return!1}function u(a){switch(a.stage){case"Recording":return d("MWPAudioPlayerLabels").stopLabel;case"Unopen":case"Recorded":return d("MWPAudioPlayerLabels").playLabel;case"Playing":return d("MWPAudioPlayerLabels").pauseLabel}}function v(a,b){switch(a.stage){case"Recording":return j.jsx(d("MWPAudioPlayerIcons.react").StopIcon,{color:b});case"Unopen":case"Recorded":return j.jsx(d("MWPAudioPlayerIcons.react").PlayIcon,{color:b});case"Playing":return j.jsx(d("MWPAudioPlayerIcons.react").PauseIcon,{color:b})}}v.displayName=v.name+" [from "+f.id+"]";function w(a,b){switch(b.type){case"Start":return{duration:0,mediaStream:b.mediaStream,recordingTimeout:b.recordingTimeout,stage:"Recording"};case"Toggle":switch(a.stage){case"Unopen":return a;case"Recording":return{currentTime:0,duration:a.duration,stage:"Recorded"};case"Recorded":return{currentTime:a.currentTime,duration:a.duration,stage:"Playing"};case"Playing":return{currentTime:a.currentTime,duration:a.duration,stage:"Recorded"}}break;case"UpdateDuration":var c=b.duration;switch(a.stage){case"Unopen":return a;case"Recording":return{duration:c,mediaStream:a.mediaStream,recordingTimeout:a.recordingTimeout,stage:"Recording"};case"Recorded":return{currentTime:a.currentTime,duration:c,stage:"Recorded"};case"Playing":return{currentTime:a.currentTime,duration:c,stage:"Playing"}}break;case"UpdateTime":c=b.currentTime;switch(a.stage){case"Unopen":case"Recording":return a;case"Recorded":var d=a.duration;return c===d?{currentTime:0,duration:d,stage:"Recorded"}:{currentTime:c,duration:d,stage:"Recorded"};case"Playing":d=a.duration;return c===d?{currentTime:0,duration:d,stage:"Recorded"}:{currentTime:c,duration:d,stage:"Playing"}}break;case"RecordingTimeout":return{currentTime:0,duration:b.recordingTimeout,stage:"Recorded"};case"Reset":return{stage:"Unopen"}}}var x={stage:"Unopen"},y=1;function z(a,e,f){var g;a===void 0&&(a=60);e===void 0&&(e=c("emptyFunction"));f===void 0&&(f=c("emptyFunction"));var i=((g=d("WAGetMediaDevicesSupportedConstraints").getMediaDevicesSupportedConstraints())==null?void 0:g.sampleRate)===!0;g=n(w,x);var j=g[0],k=g[1],p=c("useIsMountedRef")(),q=o(),r=o([]),s=o([]),t=o(),u=o(),v=o(),z=o(),A=o(c("emptyFunction")),B=l(function(a){var b=a[0],c=a[1];if(!p.current)return;a=URL.createObjectURL(b);v.current=a;var d=new Audio(a);d.addEventListener("canplay",function(){u.current=d;var a=d.duration;k({duration:a,type:"UpdateDuration"});a={duration:a,file:b,waveformData:c};z.current=a;A.current(a)});d.addEventListener("timeupdate",function(){var a;a=(a=u.current)==null?void 0:a.currentTime;a!=null&&k({currentTime:a,type:"UpdateTime"})});d.addEventListener("durationchange",function(){var a;a=(a=u.current)==null?void 0:a.duration;a!=null&&!Number.isNaN(a)&&k({duration:a,type:"UpdateDuration"})})},[p]),C=l(function(){if(q.current==null||t.current==null)return;t.current.postMessage({buffersL:r.current,buffersR:y===2?s.current:null,sampleRate:q.current})},[]);m(function(){if(j.stage!=="Recording")return;r.current=[];s.current=[];var a=c("AudioContextSingleton").get({sampleRate:i?44100:void 0}),b=a.destination;q.current=a.sampleRate;var d=j.mediaStream,f=a.createScriptProcessor(4096,y,y);a=a.createMediaStreamSource(d);t.current=new(c("WebWorker"))(c("MWChatRecorderUtilsWorkerResource")).setMessageHandler(B).setAllowCrossPageTransition(!0).execute();var g=function(a){j.stage==="Recording"&&a instanceof AudioProcessingEvent&&(r.current.push(a.inputBuffer.getChannelData(0).slice()),y===2&&s.current.push(a.inputBuffer.getChannelData(1).slice()))};f.addEventListener("audioprocess",g);a.connect(f);f.connect(b);e();return function(){d.getAudioTracks().forEach(function(a){if(a.readyState!=="ended"){a.stop();return}}),f.removeEventListener("audioprocess",g)}},[B,e,j.stage,j.mediaStream,i]);var D=c("usePrevious")(j);m(function(){(D==null?void 0:D.stage)==="Recording"&&j.stage==="Recorded"&&C()},[D==null?void 0:D.stage,C,j.stage]);m(function(){if(j.stage!=="Recording")return;var b=Date.now(),d,e=function e(){var f=(Date.now()-b)/1e3;if(f>=a){k({recordingTimeout:a,type:"RecordingTimeout"});return}k({duration:f,type:"UpdateDuration"});d=c("setTimeout")(e,1e3)};d=c("setTimeout")(e,1e3);return function(){d!=null&&c("clearTimeout")(d)}},[a,j.stage]);g=l(function(b){k({mediaStream:b,recordingTimeout:a,type:"Start"})},[a]);var E=l(function(){var a;k({type:"Reset"});(a=u.current)==null?void 0:a.pause();u.current=void 0;z.current=void 0;q.current=void 0;a=v.current;a!=null&&(URL.revokeObjectURL(a),v.current=void 0)},[]),F=l(function(){var a=function(){k({type:"Toggle"})},b=u.current;if(b==null){a();return}switch(j.stage){case"Unopen":case"Recording":a();break;case"Recorded":b.play().then(a)["catch"](f);break;case"Playing":b.pause();a();break}},[f,j.stage]),G=l(function(){return new(h||(h=b("Promise")))(function(a){var b=z.current;if(b!=null)return a(b);A.current=a;if(j.stage==="Recording")return F()})},[j,F]);return{audioEl:u,getVoiceClip:G,reset:E,start:g,state:j,toggle:F}}g.showScreenReaderLabel=a;g.hasScrubber=e;g.getTimerTime=p;g.getDuration=q;g.getCurrentTime=r;g.isProgressing=s;g.isCompleted=t;g.getPlaybackLabel=u;g.getPlaybackIcon=v;g.useVoiceRecorder=z}),98);
__d("MWAudioRecorder.react",["MWPAudioHighlightStylesHooks","MWPAudioPlayerButtons.react","MWPAudioPlayerContainer.react","MWPAudioPlayerHighlight.react","MWPAudioPlayerKeyCommands.react","MWPAudioPlayerSharedStyles","MWPAudioPlayerTimer.react","MWPAudioPlayerUtils","MWPUseVoiceRecorder","MWXTooltip.react","react","requireDeferred","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i.useRef,l=c("requireDeferred")("MWChatAudioLog").__setRef("MWAudioRecorder.react");function a(a){var b;a=a.voiceRecorder;var e=a.audioEl,f=a.state,g=a.toggle;a=k();var i=d("MWPAudioPlayerUtils").useResetHighlightProgress(a),m=(b=d("MWPUseVoiceRecorder")).hasScrubber(f),n=function(){g();switch(f.stage){case"Unopen":return;case"Recording":l.onReady(function(a){return a.logClickStopRecording(0)});return;case"Recorded":var a=f.currentTime,b=f.duration;a===0?l.onReady(function(a){return a.logPlaybackStart(b)}):l.onReady(function(c){return c.logPlaybackResume(b,a)});return;case"Playing":var c=f.currentTime,d=f.duration;l.onReady(function(a){return a.logPlaybackPause(d,c)});return}},o=d("MWPAudioPlayerUtils").useProgressLiveUpdate(b.getDuration(f),e,b.getCurrentTime(f),b.isProgressing(f),!1,b.isCompleted(f)),p=d("MWPAudioHighlightStylesHooks").useHighlightStyles(!0);b=b.getPlaybackLabel(f);var q=function(){switch(f.stage){case"Unopen":case"Recording":return null;case"Recorded":case"Playing":return j.jsx(d("MWPAudioPlayerUtils").ScreenReaderLabel,{currentTime:f.currentTime,duration:f.duration})}}();return j.jsx(c("MWPAudioPlayerContainer.react"),{audioEl:e,hasScrubber:m,mediaRenderQpl:null,scrubberRef:a,style:{backgroundColor:"var(--chat-composer-button-color, var(--accent))",borderRadius:"18px"},testid:void 0,useCase:d("MWPAudioPlayerUtils").UseCase.RECORDER,children:j.jsxs(c("MWPAudioPlayerKeyCommands.react"),{audioEl:e,children:[j.jsx(d("MWPAudioPlayerHighlight.react").MWPAudioPlayerHighlightV1,{ref:o,xstyle:p}),q,j.jsx(d("MWPAudioPlayerHighlight.react").MWPAudioPlayerHighlightV1,{ref:a,xstyle:p}),j.jsx("div",{className:(h||(h=c("stylex")))(d("MWPAudioPlayerSharedStyles").styles.playbackButtonContainer),onMouseMove:m?i:void 0,children:j.jsx(c("MWXTooltip.react"),{align:"middle",position:"above",tooltip:b,children:j.jsx(d("MWPAudioPlayerButtons.react").AudioPlayerPlaybackButton,{icon:d("MWPUseVoiceRecorder").getPlaybackIcon(f,"var(--chat-composer-button-color, var(--accent))"),label:b,onPress:n})})}),j.jsx(c("MWPAudioPlayerTimer.react"),{time:d("MWPUseVoiceRecorder").getTimerTime(f)})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2TombstonedMessageWithDarkModeSupport.react",["MWXMessageBubbleCornerStyles.react","MWXText.react","react","react-strict-dom","useCurrentDisplayMode"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={message:{fontStyle:"x1k4tb9n",marginBottom:"x12nagc",marginTop:"x1gslohp",$$css:!0},messageColorForDarkMode:{color:"x10dhlfy",$$css:!0},root:{borderTopColor:"x2z21go",borderEndColor:"x7glw7h",borderBottomColor:"xytfwv8",borderStartColor:"x1c7a9eh",borderTopStyle:"x13fuv20",borderEndStyle:"xu3j5b3",borderBottomStyle:"x1q0q8m5",borderStartStyle:"x26u7qi",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",color:"x1tbs7aw",maxWidth:"x193iq5w",paddingTop:"x1y1aw1k",paddingEnd:"xn6708d",paddingBottom:"xwib8y2",paddingStart:"x1ye3gou",wordBreak:"x13faqbe",$$css:!0}};function a(a){var b=a.children,e=a.connectBottom;e=e===void 0?!1:e;a=a.connectTop;a=a===void 0?!1:a;var f=c("useCurrentDisplayMode")();f=f==="dark";f=f?i.jsx(c("MWXText.react"),{type:"body3",children:i.jsx(d("react-strict-dom").html.div,{style:[j.messageColorForDarkMode,j.message],children:b})}):i.jsx(c("MWXText.react"),{color:"disabled",type:"body3",children:i.jsx(d("react-strict-dom").html.div,{style:j.message,children:b})});b=d("MWXMessageBubbleCornerStyles.react").getMWXBubbleCornerStyles({connectBottom:e,connectTop:a});return i.jsx(d("react-strict-dom").html.div,{style:[j.root,b],children:f})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWBlockedTombstoneMessage.react",["fbt","MWChatBubbleEmphasisRing.react","MWPVisibleMessageContext.react","MWV2TombstonedMessageWithDarkModeSupport.react","MWXPressable.react","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react"),l={bubble:{paddingBottom:"x1120s5i",$$css:!0},bubbleReply:{paddingBottom:"xwib8y2",$$css:!0}};b={ORIGINAL_MESSAGE:"original-message",REPLIED_TO:"replied-to"};function a(a){var b=a.isLastMessageInGroup,e=a.messageId,f=a.onClick;a=a.source;var g=h._("__JHASH__IgHPZSLlYoi__JHASH__"),j=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext();j=j.visibleMessage;j=(j==null?void 0:j.source)==="Pinned"&&(j==null?void 0:j.messageId)===e;e=j?k.jsx(c("MWChatBubbleEmphasisRing.react"),{connectBottom:!1,connectTop:!1,hasXMA:!1,outgoing:!1,precedesXMA:!1,children:k.jsx(c("MWV2TombstonedMessageWithDarkModeSupport.react"),{children:g})}):k.jsx(c("MWV2TombstonedMessageWithDarkModeSupport.react"),{children:g});return k.jsx("div",{className:(i||(i=c("stylex")))(b===!1&&l.bubble,a==="replied-to"&&l.bubbleReply),"data-testid":void 0,children:k.jsx(c("MWXPressable.react"),{onPress:f,overlayDisabled:!0,children:e})})}a.displayName=a.name+" [from "+f.id+"]";g.MWBlockedTombstoneMessageSource=b;g.MWBlockedTombstoneMessage=a}),226);
__d("MWBlockingProtectionLogging",["I64","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("MwbGroupBlockeeMessagesTapToRevealActionFalcoEvent").__setRef("MWBlockingProtectionLogging");function a(a){return function(){i.onReady(function(b){return b.log(function(){return{entry_point:22,source:3,source_type:0,thread_id:(h||(h=d("I64"))).to_string(a.threadKey)}})})}}g.useLogTapToReviewAction=a}),98);
__d("MWCMContentTakedownEnforcementNoticeDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="25476419472006466"}),null);
__d("MWCMContentTakedownEnforcementNoticeDialogQuery$Parameters",["MWCMContentTakedownEnforcementNoticeDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWCMContentTakedownEnforcementNoticeDialogQuery_facebookRelayOperation"),metadata:{},name:"MWCMContentTakedownEnforcementNoticeDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWCMContentTakedownEnforcementNoticeDialog.entrypoint",["JSResourceForInteraction","MWCMContentTakedownEnforcementNoticeDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){a=a.interventions_ids;return{queries:{queryReference:{parameters:c("MWCMContentTakedownEnforcementNoticeDialogQuery$Parameters"),variables:{interventions_ids:a}}}}},root:c("JSResourceForInteraction")("MWCMContentTakedownEnforcementNoticeDialog.react").__setRef("MWCMContentTakedownEnforcementNoticeDialog.entrypoint")};g["default"]=a}),98);
__d("MWCMElectionFactLabelDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="8111791688896993"}),null);
__d("MWCMElectionFactLabelDialogQuery$Parameters",["MWCMElectionFactLabelDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWCMElectionFactLabelDialogQuery_facebookRelayOperation"),metadata:{},name:"MWCMElectionFactLabelDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWCMElectionFactLabelDialog.entrypoint",["JSResourceForInteraction","MWCMElectionFactLabelDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){a=a.message_id;return{queries:{queryReference:{parameters:c("MWCMElectionFactLabelDialogQuery$Parameters"),variables:{message_id:a}}}}},root:c("JSResourceForInteraction")("MWCMElectionFactLabelDialog.react").__setRef("MWCMElectionFactLabelDialog.entrypoint")};g["default"]=a}),98);
__d("MWCMElectionInformTreatmentDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="8150321178322855"}),null);
__d("MWCMElectionInformTreatmentDialogQuery$Parameters",["MWCMElectionInformTreatmentDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWCMElectionInformTreatmentDialogQuery_facebookRelayOperation"),metadata:{},name:"MWCMElectionInformTreatmentDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWCMElectionInformTreatmentDialog.entrypoint",["JSResourceForInteraction","MWCMElectionInformTreatmentDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){a=a.message_id;return{queries:{queryReference:{parameters:c("MWCMElectionInformTreatmentDialogQuery$Parameters"),variables:{message_id:a}}}}},root:c("JSResourceForInteraction")("MWCMElectionInformTreatmentDialog.react").__setRef("MWCMElectionInformTreatmentDialog.entrypoint")};g["default"]=a}),98);
__d("MWCMInformTreatmentGenAITransparencyDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7797384147050491"}),null);
__d("MWCMInformTreatmentGenAITransparencyDialogQuery$Parameters",["MWCMInformTreatmentGenAITransparencyDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWCMInformTreatmentGenAITransparencyDialogQuery_facebookRelayOperation"),metadata:{},name:"MWCMInformTreatmentGenAITransparencyDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWCMInformTreatmentGenAITransparencyDialog.entrypoint",["JSResourceForInteraction","MWCMInformTreatmentGenAITransparencyDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{queryReference:{parameters:c("MWCMInformTreatmentGenAITransparencyDialogQuery$Parameters"),variables:{}}}}},root:c("JSResourceForInteraction")("MWCMInformTreatmentGenAITransparencyDialog.react").__setRef("MWCMInformTreatmentGenAITransparencyDialog.entrypoint")};g["default"]=a}),98);
__d("MWChatBusinessQuickReply.react",["CometImage.react","MDSTextPairing.react","gkx","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={image:{borderTopStartRadius:"x1z11no5",borderTopEndRadius:"xjy5m1g",borderBottomEndRadius:"x1mnwbp6",borderBottomStartRadius:"x4pb5v6","float":"xrbpyxo",height:"x158ke7r",marginTop:"x16ldp7u",marginEnd:"x1t4t16n",marginBottom:"xz62fqu",marginStart:"xbmpl8g",width:"x1kl0l3y",$$css:!0},vertical:{paddingBottom:"xsag5q8",paddingEnd:"xn6708d",paddingStart:"xr9oo41",$$css:!0}};function a(a){var b=a.bodyLineLimit;b=b===void 0?1:b;var d=a.imageUrl,e=a.onClick,f=a.quickReplyVertical;f=f===void 0?!1:f;a=a.text;var g=c("gkx")("24108");return j.jsx("div",{className:(h||(h=c("stylex")))(f?k.vertical:!1),children:j.jsxs("button",{className:"x6s0dn4 x1eb86dx xfh8nwu xoqspk4 x12v9rci x138vmkv x143s1ad xp3zfi1 x137oirg xojro6o x1vnslfi x9f619 x1ypdohk xjb2p0i xk50ysn xl56j7k xr9ek0c x1emribx xjpr12u x1i64zmx x1mzt3pk x1a8lsjc xn6708d x1ye3gou x889kno x1yc453h x13faqbe",onClick:e,children:[d!=null?j.jsx(c("CometImage.react"),{src:d,xstyle:k.image}):null,j.jsx(c("MDSTextPairing.react"),{body:a,bodyColor:g?"blueLink":"primary",bodyLineLimit:b,level:3,textAlign:f?"end":"start"})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatBusinessQuickReplyText.react",["MWChatBusinessQuickReply.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.onSend,d=a.quickReply;a=a.quickReplyVertical;var e=a?3:1,f=function(){return b(d)},g=d.image_url;return i.jsx(c("MWChatBusinessQuickReply.react"),{bodyLineLimit:e,imageUrl:(e=g)!=null?e:void 0,onClick:f,quickReplyVertical:a,text:d.title})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatUserBirthdayQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="4679476245513562"}),null);
__d("MWChatUserBirthdayQuery.graphql",["MWChatUserBirthdayQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,concreteType:"Date",kind:"LinkedField",name:"birthdate",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"day",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"month",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"year",storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatUserBirthdayQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"user",args:null,concreteType:"User",kind:"LinkedField",name:"account_user",plural:!1,selections:[a],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWChatUserBirthdayQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"user",args:null,concreteType:"User",kind:"LinkedField",name:"account_user",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("MWChatUserBirthdayQuery_facebookRelayOperation"),metadata:{},name:"MWChatUserBirthdayQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatUserBirthdayQuery",["CometRelay","MWChatUserBirthdayQuery.graphql","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i="en-US";function j(a,b,c,d){c=new Date(c,b-1,a);return c.toLocaleDateString(d,{day:"numeric",month:"numeric",year:"numeric"})}function a(){var a=d("CometRelay").useRelayEnvironment();return function(b){var e=d("CometRelay").fetchQuery(a,k,{}).toPromise().then(function(a){a=a==null?void 0:(a=a.viewer)==null?void 0:(a=a.user)==null?void 0:a.birthdate;if(a){var c=a==null?void 0:a.day,d=a==null?void 0:a.month;a=a==null?void 0:a.year;c!=null&&d!=null&&a!=null&&b(j(c,d,a,i))}});c("promiseDone")(e)}}var k=h!==void 0?h:h=b("MWChatUserBirthdayQuery.graphql");g.useUserBirthdayDataQuery=a}),98);
__d("MWChatBusinessQuickReplyUserBirthday.react",["MWChatBusinessQuickReply.react","MWChatUserBirthdayQuery","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){var b=a.onSend,e=a.quickReply,f=a.quickReplyVertical;a=a.userID;var g=d("MWChatUserBirthdayQuery").useUserBirthdayDataQuery(),h=k(),l=h[0],m=h[1];j(function(){g(function(a){return m(a)})},[a,g,m]);if(l==null)return null;h=e.content_type;a=e.data;var n=e.image_url;e=e.payload;var o={content_type:h,data:a,image_url:n,payload:e,title:l};h=function(){return b(o)};return i.jsx(c("MWChatBusinessQuickReply.react"),{onClick:h,quickReplyVertical:f,text:l})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatUserEmailQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5146654855396537"}),null);
__d("MWChatUserEmailQuery.graphql",["MWChatUserEmailQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:"Email",kind:"LinkedField",name:"all_emails",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"display_email",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_primary",storageKey:null}],storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatUserEmailQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWChatUserEmailQuery",selections:a},params:{id:b("MWChatUserEmailQuery_facebookRelayOperation"),metadata:{},name:"MWChatUserEmailQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatUserEmailQuery",["CometRelay","MWChatUserEmailQuery.graphql","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("CometRelay").useRelayEnvironment();return function(b){var e=d("CometRelay").fetchQuery(a,i,{}).toPromise().then(function(a){a=a==null?void 0:a.viewer.all_emails;if(a&&a.length>0){var c=a.find(function(a){return a.is_primary});c!=null?b(c.display_email):b(a[0].display_email)}});c("promiseDone")(e)}}var i=h!==void 0?h:h=b("MWChatUserEmailQuery.graphql");g.useUserEmailDataQuery=a}),98);
__d("MWChatBusinessQuickReplyUserEmail.react",["MWChatBusinessQuickReply.react","MWChatUserEmailQuery","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){var b=a.onSend,e=a.quickReply,f=a.quickReplyVertical;a=a.userID;var g=d("MWChatUserEmailQuery").useUserEmailDataQuery(),h=k(),l=h[0],m=h[1];j(function(){g(m)},[a,g,m]);return l==null?null:i.jsx(c("MWChatBusinessQuickReply.react"),{onClick:function(){return b({content_type:e.content_type,data:e.data,image_url:e.image_url,payload:e.payload,title:l})},quickReplyVertical:f,text:l})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatUserPhoneNumberQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="5063442323698780"}),null);
__d("MWChatUserPhoneNumberQuery.graphql",["MWChatUserPhoneNumberQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,concreteType:"Phone",kind:"LinkedField",name:"all_phones",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"is_preferred",storageKey:null},{alias:null,args:null,concreteType:"PhoneNumber",kind:"LinkedField",name:"phone_number",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"universal_number",storageKey:null}],storageKey:null}],storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatUserPhoneNumberQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"user",args:null,concreteType:"User",kind:"LinkedField",name:"account_user",plural:!1,selections:[a],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWChatUserPhoneNumberQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:"user",args:null,concreteType:"User",kind:"LinkedField",name:"account_user",plural:!1,selections:[a,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("MWChatUserPhoneNumberQuery_facebookRelayOperation"),metadata:{},name:"MWChatUserPhoneNumberQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatUserPhoneNumberQuery",["CometRelay","MWChatUserPhoneNumberQuery.graphql","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("CometRelay").useRelayEnvironment();return function(b){var e=d("CometRelay").fetchQuery(a,i,{}).toPromise().then(function(a){a=a==null?void 0:a.viewer.user.all_phones;if(a&&a.length>0){var c=a.find(function(a){return a.is_preferred});if(c!=null){b((c=c.phone_number)==null?void 0:c.universal_number)}else{b((c=a[0].phone_number)==null?void 0:c.universal_number)}}});c("promiseDone")(e)}}var i=h!==void 0?h:h=b("MWChatUserPhoneNumberQuery.graphql");g.useUserPhoneNumberDataQuery=a}),98);
__d("MWChatBusinessQuickReplyUserPhoneNumber.react",["MWChatBusinessQuickReply.react","MWChatUserPhoneNumberQuery","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){var b=a.onSend,e=a.quickReply,f=a.quickReplyVertical;a=a.userID;var g=d("MWChatUserPhoneNumberQuery").useUserPhoneNumberDataQuery(),h=k(function(){}),l=h[0],m=h[1];j(function(){g(function(a){return m(function(){return a})})},[a,g,m]);if(l==null)return null;h=e.content_type;a=e.data;var n=e.image_url;e=e.payload;var o={content_type:h,data:a,image_url:n,payload:e,title:l};h=function(){return b(o)};return i.jsx(c("MWChatBusinessQuickReply.react"),{onClick:h,quickReplyVertical:f,text:l})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatUserProfileLocationQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7039613476103704"}),null);
__d("MWChatUserProfileLocationQuery.graphql",["MWChatUserProfileLocationQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a={kind:"InlineFragment",selections:[{alias:null,args:null,concreteType:"StreetAddress",kind:"LinkedField",name:"address",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"region",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"postal_code",storageKey:null}],storageKey:null}],type:"User",abstractKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatUserProfileLocationQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[a],storageKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWChatUserProfileLocationQuery",selections:[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"actor",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},a,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}],storageKey:null}]},params:{id:b("MWChatUserProfileLocationQuery_facebookRelayOperation"),metadata:{},name:"MWChatUserProfileLocationQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatUserProfileLocationQuery",["CometRelay","MWChatUserProfileLocationQuery.graphql","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=d("CometRelay").useRelayEnvironment();return function(b){var e=d("CometRelay").fetchQuery(a,i,{}).toPromise().then(function(a){a=a==null?void 0:(a=a.viewer)==null?void 0:(a=a.actor)==null?void 0:(a=a.address)==null?void 0:a.region;a!=null&&a!==""&&b(a)});c("promiseDone")(e)}}function e(){var a=d("CometRelay").useRelayEnvironment();return function(b){var e=d("CometRelay").fetchQuery(a,i,{}).toPromise().then(function(a){a=a==null?void 0:(a=a.viewer)==null?void 0:(a=a.actor)==null?void 0:a.address;a=a==null?void 0:a.postal_code;a!=null&&b(a)});c("promiseDone")(e)}}var i=h!==void 0?h:h=b("MWChatUserProfileLocationQuery.graphql");g.useUserProfileStateDataQuery=a;g.useUserProfileZipCodeDataQuery=e}),98);
__d("MWChatBusinessQuickReplyUserState.react",["MWChatBusinessQuickReply.react","MWChatUserProfileLocationQuery","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){var b=a.onSend,e=a.quickReply,f=a.quickReplyVertical;a=a.userID;var g=d("MWChatUserProfileLocationQuery").useUserProfileStateDataQuery(),h=k(),l=h[0],m=h[1];j(function(){g(function(a){return m(a)})},[a,g,m]);if(l==null)return null;h=e.content_type;a=e.data;var n=e.image_url;e=e.payload;var o={content_type:h,data:a,image_url:n,payload:e,title:l};h=function(){return b(o)};return i.jsx(c("MWChatBusinessQuickReply.react"),{onClick:h,quickReplyVertical:f,text:l})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatBusinessQuickReplyUserZipCode.react",["MWChatBusinessQuickReply.react","MWChatUserProfileLocationQuery","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){var b=a.onSend,e=a.quickReply,f=a.quickReplyVertical;a=a.userID;var g=d("MWChatUserProfileLocationQuery").useUserProfileZipCodeDataQuery(),h=k(),l=h[0],m=h[1];j(function(){g(function(a){return m(a)})},[a,g,m]);if(l==null)return null;h=e.content_type;a=e.data;var n=e.image_url;e=e.payload;var o={content_type:h,data:a,image_url:n,payload:e,title:l};h=function(){return b(o)};return i.jsx(c("MWChatBusinessQuickReply.react"),{onClick:h,quickReplyVertical:f,text:l})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatBusinessQuickReplyList.react",["Actor","CometScrollableArea.react","I64","LSIntEnum","LSQuickReplyType","MWChatBusinessQuickReplyText.react","MWChatBusinessQuickReplyUserBirthday.react","MWChatBusinessQuickReplyUserEmail.react","MWChatBusinessQuickReplyUserPhoneNumber.react","MWChatBusinessQuickReplyUserState.react","MWChatBusinessQuickReplyUserZipCode.react","MessengerWebEventsFalcoEvent","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react")),m=i.useEffect,n={pillContainer:{backgroundColor:"x1eb86dx",display:"x78zum5",flexDirection:"x1q0g3np",flexWrap:"xozqiw3",paddingTop:"x1nn3v0j",paddingEnd:"x1sxyh0",paddingBottom:"x1a8lsjc",paddingStart:"xurb0ha",$$css:!0},pillContainerVertical:{alignItems:"xuk3077",backgroundColor:"x1eb86dx",display:"x78zum5",flexDirection:"xdt5ytf",paddingTop:"xm7lytj",$$css:!0}};function a(a){var b=a.arrayQR,e=a.id,f=a.onSend;a=a.quickReplyType;a=a===void 0?(j||(j=d("LSIntEnum"))).ofNumber(c("LSQuickReplyType").NONE):a;var g=(k||(k=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSQuickReplyType").VERTICAL));a=d("Actor").useActor();var i=a[0];m(function(){c("MessengerWebEventsFalcoEvent").log(function(){return{event_name:"render_quick_replies",other_user_fbid:e}})},[e]);return l.jsx("div",{className:"x1n2onr6 xh8yej3 x1eb86dx",children:l.jsx(c("CometScrollableArea.react"),{horizontal:!0,children:l.jsx("div",{className:(h||(h=c("stylex")))(g?n.pillContainerVertical:n.pillContainer),children:b.map(function(a,b){switch(a.content_type){case"text":return l.jsx(c("MWChatBusinessQuickReplyText.react"),{onSend:f,quickReply:a,quickReplyVertical:g},String(b));case"user_birthday":return l.jsx(c("MWChatBusinessQuickReplyUserBirthday.react"),{onSend:f,quickReply:a,quickReplyVertical:g,userID:i},String(b));case"user_email":return l.jsx(c("MWChatBusinessQuickReplyUserEmail.react"),{onSend:f,quickReply:a,quickReplyVertical:g,userID:i},String(b));case"user_phone_number":return l.jsx(c("MWChatBusinessQuickReplyUserPhoneNumber.react"),{onSend:f,quickReply:a,quickReplyVertical:g,userID:i},String(b));case"user_state":return l.jsx(c("MWChatBusinessQuickReplyUserState.react"),{onSend:f,quickReply:a,quickReplyVertical:g,userID:i},String(b));case"user_zip_code":return l.jsx(c("MWChatBusinessQuickReplyUserZipCode.react"),{onSend:f,quickReply:a,quickReplyVertical:g,userID:i},String(b));default:return null}})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWChatComposerVoiceIndicator.react",["fbt","CurrentUser","MDSTextPairing.react","MWXText.react","getTopMostRoute","react","useCometRouterState"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){a=a.forceShown_TEST_ONLY;a=a===void 0?!1:a;var b=c("useCometRouterState")();b=b!=null?c("getTopMostRoute")(b):null;b=(b=b==null?void 0:b.tracePolicy)!=null?b:null;b=b!==null?b.startsWith("comet.page.admin")||b.startsWith("comet.group.admin"):!1;var d=c("CurrentUser").getName();d=h._("__JHASH__moy48BoqFvP__JHASH__",[h._param("full name",j.jsx(c("MWXText.react"),{type:"meta2",children:d}))]);return b||a?j.jsx("div",{className:"x1exxf4d x13fuv20 x178xt8z xi81zsa x14vqqas xkrivgy xat24cr x1gryazu xyinxu5 xho0xa1 xs9asl8 x1vobaek",children:j.jsx(c("MDSTextPairing.react"),{body:j.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:d}),level:4,textAlign:"center"})}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWChatEntityUnsupportedXMA.react",["fbt","MWV2TombstonedMessage.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useEffect,l={extraPaddingBottom:{paddingTop:"x1iorvi4",$$css:!0},extraPaddingTop:{paddingTop:"x1iorvi4",$$css:!0}};function a(a){var b=a.mediaRenderQpl,e=a.nextMessage;a=a.prevMessage;k(function(){b==null?void 0:b.endSuccess()},[b]);return j.jsx(d("react-strict-dom").html.div,{style:[a&&l.extraPaddingTop,e&&l.extraPaddingBottom],children:j.jsx(c("MWV2TombstonedMessage.react"),{isOutgoing:!1,children:h._("__JHASH__-GvVFaMikWU__JHASH__")})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWChatFilePreProcessingErrorDialog.react",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a={body:h._("__JHASH__rp1B2ks3qwV__JHASH__"),title:h._("__JHASH__xqsOpg5ebEg__JHASH__")};g.invalidFileFormat=a}),226);
__d("MWChatFilePreProcessingErrorToast.react",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a={body:h._("__JHASH__rp1B2ks3qwV__JHASH__"),title:h._("__JHASH__xqsOpg5ebEg__JHASH__")};g.invalidFileFormat=a}),226);
__d("MWChatFileUploadErrorDialog.react",["fbt"],(function(a,b,c,d,e,f,g,h){"use strict";a=function(a){return{body:h._("__JHASH__Tr8urrZ1rc1__JHASH__",[h._param("size",a)]),title:h._("__JHASH__GVmFuh2jycz__JHASH__")}};b=function(a){return{body:h._("__JHASH__TAA-hbgGa5n__JHASH__",[h._param("limit",a)]),title:h._("__JHASH__L_Ni3O-TarB__JHASH__")}};c=function(a){return{body:h._("__JHASH__-3D7kzgvAq5__JHASH__",[h._param("limit",a)]),title:h._("__JHASH__syTHdrAlZYC__JHASH__")}};d=function(){return{body:h._("__JHASH__1WylqAbhvtc__JHASH__"),title:h._("__JHASH__hio_8S892IQ__JHASH__")}};g.maxFileSizeExceeded=a;g.maxFilesNumberExceeded=b;g.maxMediaNumberExceeded=c;g.unsupportedFile=d}),226);
__d("MWChatMessageUnreadIndicator.react",["fbt","MDSRow.react","MDSRowItem.react","MWXText.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={color:{color:"x186z157",$$css:!0},line:{backgroundColor:"x1m026b5",flexGrow:"x1iyjqo2",height:"xjm9jq1",$$css:!0}};function a(){var a=h._("__JHASH__dAK4xN4bf5e__JHASH__");return j.jsxs(c("MDSRow.react"),{"aria-label":a,paddingVertical:12,spacingVertical:0,children:[j.jsx(c("MDSRowItem.react"),{verticalAlign:"center",xstyle:k.line,children:j.jsx(j.Fragment,{})}),j.jsx(c("MDSRowItem.react"),{children:j.jsx(c("MWXText.react"),{color:"secondary",isSemanticHeading:!0,type:"meta4",children:j.jsx(d("react-strict-dom").html.div,{style:k.color,children:a})})}),j.jsx(c("MDSRowItem.react"),{verticalAlign:"center",xstyle:k.line,children:j.jsx(j.Fragment,{})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWChatMultiReactionsTooltip.react",["fbt","I64","Int64Hooks","LSClearReactionsV2DetailsAndRangeStoredProcedure","LSFactory","LSIssueReactionsV2DetailsUsersListFetchStoredProcedure","LSPlatformWaitForTaskCompletion","MWPActor.react","MWXPressable.react","MWXText.react","ReQL","ReQLSuspense","intlSummarizeNumber","promiseDone","react","usePrevious","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react"));b=k;var m=b.useEffect,n=b.useRef,o=b.useState,p=9;function a(a){var b=a.isProcessingReactions,e=a.messageId,g=a.onTooltipCTAPress,k=a.reactionFbid,q=a.threadKey,r=(i||(i=c("useReStore")))();a=o(!0);var s=a[0],t=a[1];d("Int64Hooks").useEffectInt64(function(){b||(t(!0),c("promiseDone")(c("LSPlatformWaitForTaskCompletion")(r,function(a){return c("LSIssueReactionsV2DetailsUsersListFetchStoredProcedure")(c("LSFactory")(a),{messageId:e,reactionFbid:k,threadId:q})},"issueReactionsV2DetailsUsersListFetch").then(function(){t(!1)})))},[r,q,e,k,t,b]);var u=d("MWPActor.react").useActor();a=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(r.tables.reactions_v2_details).getKeyRange(q,e).filter(function(a){return(j||(j=d("I64"))).equal(a.reactionFbid,k)})},[r,q,e,k],f.id+":84");var v=new Map();a.forEach(function(a){return v.set((j||(j=d("I64"))).to_string(a.reactorId),a.fullName)});var w=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(r.tables.threads).getKeyRange(q).map(function(a){var b=a.parentThreadKey;return d("ReQLSuspense").toArray(d("ReQL").fromTableAscending(r.tables.contextual_profile_v1).filter(function(a){return(j||(j=d("I64"))).equal(a.associatedEntityId,b)}),f.id+":102")})},[r,q],f.id+":97"),x=null;w!=null&&w.forEach(function(a){var b=(j||(j=d("I64"))).to_string(a.ownerId),c=a.profileName;if(c==null)return;v.has(b)&&v.set(b,c);(j||(j=d("I64"))).equal(a.ownerId,u)&&(x=c)});var y=a.map(function(a){return v.get((j||(j=d("I64"))).to_string(a.reactorId))}).filter(Boolean);w=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(r.tables.reactions_v2).getKeyRange(q,e,k)},[r,q,e,k],f.id+":131");a=(a=w==null?void 0:w.viewerIsReactor)!=null?a:!1;var z=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(r.tables.contacts).getKeyRange(u).map(function(a){return a.name})},[r,u],f.id+":143");z=x!=null?x:z;var A=w!=null?(j||(j=d("I64"))).to_int32(w.count):0;A===1&&a&&y.length===0&&z!=null?y.push(z):a&&y[0]!=null&&z!=null&&((w=y[0])==null?void 0:w.toString())!==z&&y.unshift(z);var B=h._("__JHASH__GTBXwO8BaZr__JHASH__");a=function(){var a=[].concat(y.slice(0,p)),d=!1;if(y.length>p){var e=A-p;if(e<0)return[B,!0];a.push(h._("__JHASH__KVtJcih6CQz__JHASH__",[h._plural(e),h._param("count",String(c("intlSummarizeNumber")(e)))]).toString())}else d=(!s||!b)&&y.length!==A;return a.length===0?[B,d]:[a.map(function(a,b){return l.jsx("div",{children:a},String(b))}),d]}();w=a[0];var C=a[1],D=c("usePrevious")(C),E=n(null);m(function(){return function(){E.current!=null&&window.clearTimeout(E.current)}},[]);m(function(){if(D===C)return;if(!C)E.current!=null&&(window.clearTimeout(E.current),E.current=null);else{if(E.current!=null)return;E.current=window.setTimeout(function(){E.current=null,c("promiseDone")(r.runInTransaction(function(a){return c("LSClearReactionsV2DetailsAndRangeStoredProcedure")(c("LSFactory")(a))},"readwrite",void 0,void 0,f.id+":241")),c("promiseDone")(r.runInTransaction(function(a){return c("LSIssueReactionsV2DetailsUsersListFetchStoredProcedure")(c("LSFactory")(a),{messageId:e,threadId:q})},"readwrite",void 0,void 0,f.id+":249"))},700)}},[r,C,D,e,k,q]);return l.jsx(c("MWXPressable.react"),{"aria-label":h._("__JHASH__g_e4jdcSB-i__JHASH__"),onPress:g,overlayDisabled:!0,children:l.jsx(c("MWXText.react"),{color:"tooltip",type:"body4",children:w})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWChatUnavailableComposer.react",["fbt","ComponentMountUnmountSubspanLogger.react","MWBlockedComposerLogging","MWXComposerBanner.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=a.reason;a=a.thread;d("MWBlockedComposerLogging").useLogMWBlockedComposerReason(a.threadKey,b);a=h._("__JHASH__FoZB3MxTOU9__JHASH__");return j.jsxs("div",{children:[j.jsx(c("ComponentMountUnmountSubspanLogger.react"),{description:"MWChatUnavailableComposer"}),j.jsx(c("MWXComposerBanner.react"),{bodyText:a})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWChatViewerChatVisibilityHookQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6404754876239370"}),null);
__d("MWChatViewerChatVisibilityHookQuery.graphql",["MWChatViewerChatVisibilityHookQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{alias:null,args:null,concreteType:"Viewer",kind:"LinkedField",name:"viewer",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"chat_visibility",storageKey:null}],storageKey:null}];return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"MWChatViewerChatVisibilityHookQuery",selections:a,type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"MWChatViewerChatVisibilityHookQuery",selections:a},params:{id:b("MWChatViewerChatVisibilityHookQuery_facebookRelayOperation"),metadata:{},name:"MWChatViewerChatVisibilityHookQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWChatViewerChatVisibilityHook",["CometRelay","MWChatViewerChatVisibilityHookQuery.graphql","promiseDone","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useEffect,k=h!==void 0?h:h=b("MWChatViewerChatVisibilityHookQuery.graphql");function a(){var a,b=d("CometRelay").useRelayEnvironment(),e=d("CometRelay").useLazyLoadQuery(k,{},{fetchPolicy:"store-only"});j(function(){var a;(e==null?void 0:(a=e.viewer)==null?void 0:a.chat_visibility)==null&&c("promiseDone")(d("CometRelay").fetchQuery(b,k,{}).toPromise())},[e==null?void 0:(a=e.viewer)==null?void 0:a.chat_visibility,b]);return(e==null?void 0:(a=e.viewer)==null?void 0:a.chat_visibility)===!0}g.useViewerChatVisibility=a}),98);
__d("MWClickToReavealMustachTextInPinnedMessageList.react",["MWClickToRevealMustacheText.react","MWPMessageParsingUtils","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={lastMessageInGroup:{marginTop:"xifccgj",$$css:!0},pinnedMessage:{paddingTop:"x1yrsyyn",$$css:!0}};function a(a){var b=a.isLastMessage,e=a.message;a=a.nextMessage;a=d("MWPMessageParsingUtils").isEndOfGroup(e,a);return i.jsx(c("MWClickToRevealMustacheText.react"),{messageId:e.messageId,xsyle:a&&!b?j.lastMessageInGroup:j.pinnedMessage})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWMessageRowTheme",["MWLSThreadDisplayContext","gkx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useMemo;function a(){var a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();return i(function(){var b=c("gkx")("23219")?"12px":a==="Inbox"?"16px":"8px";return{dark:{"mwp-message-list-profile-start-padding":b},light:{"mwp-message-list-profile-start-padding":b},type:"VARIABLES"}},[a])}g["default"]=a}),98);
__d("MWMessageRowAdminMessage.react",["BaseView.react","MWMessageListAttachmentContainer.react","MWPMessageListColumn.react","MWPMessageListRowWithKeyboardInteractions.react","MWV2ChatAdminMessage.react","MWV2MessageRowSimple.react","react","useMWMessageRowTheme","useMWPEditMessageDeemphasizer"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={adminMessageAttachment:{boxSizing:"x9f619",maxWidth:"x4ndzw7",minWidth:"xwj5yc2",paddingBottom:"xdvlbce",paddingStart:"x5ib6vp",paddingLeft:null,paddingRight:null,paddingEnd:"xc73u3c",paddingTop:"x1nn3v0j",$$css:!0},adminMessageContainer:{maxWidth:"x193iq5w",$$css:!0}};function a(a){var b=a.domElementRef,e=a.isDialogOpened,f=a.isFirstMessageInGroup,g=a.isFocused,h=a.isModal,k=a.message,l=a.messageDomID,m=a.nextMessage,n=a.outgoing,o=a.prevMessage,p=a.setFocusedInTransition,q=a.setHoveredInTransition,r=a.setIsDialogOpened;a=a.stopHoveringRef;var s=c("useMWPEditMessageDeemphasizer")(),t=c("useMWMessageRowTheme")();s=i.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{centered:!0,children:i.jsxs(c("BaseView.react"),{xstyle:[s,j.adminMessageContainer],children:[i.jsx(d("MWV2ChatAdminMessage.react").MWV2ChatAdminMessage,{message:k,nextMessage:m,prevMessage:o}),i.jsx(c("MWMessageListAttachmentContainer.react"),{connectBottom:!1,connectTop:!1,mediaRenderQpl:null,message:k,outgoing:n,xstyle:j.adminMessageAttachment})]})});if(k.adminMsgCtaType==null)return i.jsx(c("MWV2MessageRowSimple.react"),{children:s});else return i.jsx(c("MWPMessageListRowWithKeyboardInteractions.react"),{domElementRef:f?void 0:b,isDialogOpened:e,isFocused:g,isModal:h,message:k,messageDomID:l,outgoing:n,setFocused:p,setHovered:q,setIsDialogOpened:r,stopHoveringRef:a,theme:t,children:s})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWExtraPinnedMessagePadding.react",["MWPMessageListColumn.react","react","useMWPIsMessagePinned"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.nextMessage;a=c("useMWPIsMessagePinned")(a);return a&&i.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:6})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMessagePromptPopoverTrigger.react",["I64","JSResourceForInteraction","MWPActor.react","MWShowMessagePromptPopoverContext.react","MWXLazyPopoverTrigger.react","emptyFunction","react","useShouldAllowRollCallForMessage"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h.useRef,l=c("JSResourceForInteraction")("MWMessagePromptPopover.react").__setRef("MWMessagePromptPopoverTrigger.react");function a(a){var b=a.attachments,e=a.children;a=a.message;b=d("useShouldAllowRollCallForMessage").useShouldAllowRollCallForMessage(a,b);var f=k(!1),g=d("MWPActor.react").useActor(),h=d("MWShowMessagePromptPopoverContext.react").useMWShowMessagePromptPopoverContext();h[0];var m=h[1];return b?j.jsx(c("MWXLazyPopoverTrigger.react"),{align:"middle",popoverProps:{message:a,onClose:c("emptyFunction")},popoverResource:l,position:(i||(i=d("I64"))).equal(g,a.senderId)?"start":"end",children:function(a,b){f.current===!1&&(f.current=!0,m(b));return j.jsx("div",{ref:a,children:e})}}):e}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("usePinnedIconAnimation",["react","useDebouncedValue"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef,k=b.useState,l={mountAnimationIncoming:{animationDuration:"x5hsz1j",animationName:"x1ko8byu",animationTimingFunction:"x4hg4is",$$css:!0},mountAnimationOutgoing:{animationDuration:"x5hsz1j",animationName:"x1c78tyx",animationTimingFunction:"x4hg4is",$$css:!0},unmountAnimation:{animationDuration:"x5hsz1j",animationFillMode:"x10e4vud",animationName:"xvma63k",animationTimingFunction:"x4hg4is",$$css:!0}};function a(a,b){var d=k(!1),e=d[0],f=d[1],g=j(a);d=b?l.mountAnimationOutgoing:l.mountAnimationIncoming;i(function(){a!==g.current&&f(!0),g.current=a},[a]);return{mountAnimation:e?d:null,shouldShow:c("useDebouncedValue")(a,200),unmountAnimation:l.unmountAnimation}}g["default"]=a}),98);
__d("MWPinnedMessageOverlay.react",["MDSPinnedMessageIcon.react","react","stylex","useMWPIsMessagePinned","usePinnedIconAnimation"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={alignEnd:{end:"xds687c",transform:"x7b9nwf",$$css:!0},alignStart:{start:"x17qophe",transform:"x1op1vkj",$$css:!0},container:{position:"x10l6tqk",top:"x13vifvy",zIndex:"xhtitgo",$$css:!0}};function a(a){var b=a.alreadyRenderedPin,d=a.children,e=a.message;a=a.outgoing;e=c("useMWPIsMessagePinned")(e);var f=c("usePinnedIconAnimation")(e,a),g=f.mountAnimation,i=f.shouldShow;f=f.unmountAnimation;return!i||b?j.jsx(j.Fragment,{children:d}):d&&j.jsxs("div",{className:"x1n2onr6",children:[j.jsx("div",{className:(h||(h=c("stylex")))([k.container,a?k.alignEnd:k.alignStart,e?g:f]),children:j.jsx(c("MDSPinnedMessageIcon.react"),{color:"tertiary",size:16})}),d]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPBaseRepliedMessage.react",["I64","LSIntEnum","LSMessageReplySourceTypeV2","LSReplyMessageAttachmentType","LSReplyMessageStatus","MWXPressable.react","gkx","react","recoverableViolation","useIsRollcallEnabled","useMWJumpToMessage","useRollcallContributionsXMAActionHandler"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||d("react"),l={pressable:{display:"x1lliihq",$$css:!0}};function a(a){var b=a.clickToNavigateToReply;b=b===void 0?!0:b;var e=a.earlyCheckForReplyStatus;e=e===void 0?!1:e;var f=a.isSecureMessage,g=a.mediaRenderQpl,h=a.message,m=a.outgoing,n=a.renderAttachment,o=a.renderCollection,p=a.renderExpiredMessage,q=a.renderGIF,r=a.renderMedia,s=a.renderPost,t=a.renderRaven,u=a.renderRemovedMessage,v=a.renderRollcallContribution,w=a.renderSticker,x=a.renderStory,y=a.renderTextMessage,z=a.renderUnavailableMessage;a=a.renderVideo;var A=h.replyAttachmentId,B=h.replyAttachmentType,C=h.replyMessageText,D=A!=null||h.replySourceTypeV2!=null&&(i||(i=d("I64"))).equal(h.replySourceTypeV2,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").STORY));B!=null&&D&&(!e||h.replyStatus!=null&&!(i||(i=d("I64"))).equal(h.replyStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageStatus").DELETED)))?((i||(i=d("I64"))).equal(B,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PHOTO))||(i||(i=d("I64"))).equal(B,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").VIDEO)))&&h.replySourceTypeV2!=null&&(i||(i=d("I64"))).equal(h.replySourceTypeV2,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").STORY))?D=k.jsx(x,{isSecureMessage:f,mediaRenderQpl:g,message:h,outgoing:m}):A!=null?(i||(i=d("I64"))).equal(B,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").OTHER))?D=k.jsx(n,{isSecureMessage:f,mediaRenderQpl:g,message:h,outgoing:m}):(i||(i=d("I64"))).equal(B,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PHOTO))?r!=null?D=k.jsx(r,{isSecureMessage:f,mediaRenderQpl:g,message:h,outgoing:m}):D=k.jsx(n,{isSecureMessage:f,mediaRenderQpl:g,message:h,outgoing:m}):(i||(i=d("I64"))).equal(B,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").ROLL_CALL_PHOTO_CONTRIBUTION))||(i||(i=d("I64"))).equal(B,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").ROLL_CALL_VIDEO_CONTRIBUTION))||(i||(i=d("I64"))).equal(B,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").ROLL_CALL_TEXT_CONTRIBUTION))?v!=null?D=k.jsx(v,{isSecureMessage:f,mediaRenderQpl:g,message:h,outgoing:m}):D=k.jsx(n,{isSecureMessage:f,mediaRenderQpl:g,message:h,outgoing:m}):(i||(i=d("I64"))).equal(B,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").MULTIPHOTO))?c("gkx")("2982")&&o!=null?D=k.jsx(o,{message:h,outgoing:m}):r!=null?D=k.jsx(r,{isSecureMessage:f,mediaRenderQpl:g,message:h,outgoing:m}):D=k.jsx(n,{isSecureMessage:f,mediaRenderQpl:g,message:h,outgoing:m}):(i||(i=d("I64"))).equal(B,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").VIDEO))?a!=null?D=k.jsx(a,{isSecureMessage:f,mediaRenderQpl:g,message:h,outgoing:m}):D=k.jsx(n,{isSecureMessage:f,mediaRenderQpl:g,message:h,outgoing:m}):(i||(i=d("I64"))).equal(B,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").GIF))?q!=null?D=k.jsx(q,{isSecureMessage:f,mediaRenderQpl:g,message:h,outgoing:m}):D=k.jsx(n,{isSecureMessage:f,mediaRenderQpl:g,message:h,outgoing:m}):(i||(i=d("I64"))).equal(B,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").STICKER))?w!=null?D=k.jsx(w,{isSecureMessage:f,mediaRenderQpl:g,message:h,outgoing:m}):D=k.jsx(n,{isSecureMessage:f,mediaRenderQpl:g,message:h,outgoing:m}):(i||(i=d("I64"))).equal(B,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").LINK))||(i||(i=d("I64"))).equal(B,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PERMANENT_RAVEN_PHOTO))||(i||(i=d("I64"))).equal(B,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").PERMANENT_RAVEN_VIDEO))||(i||(i=d("I64"))).equal(B,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").AUDIO))?D=k.jsx(n,{isSecureMessage:f,mediaRenderQpl:g,message:h,outgoing:m}):s!=null?D=k.jsx(s,{isSecureMessage:f,mediaRenderQpl:g,message:h,outgoing:m}):D=c("recoverableViolation")("Unknown attachment type: "+(i||(i=d("I64"))).to_string(B),"messenger_comet"):(i||(i=d("I64"))).equal(B,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").STICKER))&&w!=null?D=k.jsx(w,{isSecureMessage:f,mediaRenderQpl:g,message:h,outgoing:m}):(i||(i=d("I64"))).equal(B,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").XMA))&&n!=null?C!=null&&C!==""?D=k.jsx(y,{isSecureMessage:f,message:h,outgoing:m,text:C}):D=k.jsx(n,{isSecureMessage:f,mediaRenderQpl:g,message:h,outgoing:m}):D=null:A!=null?h.replySourceTypeV2!=null&&(i||(i=d("I64"))).equal(h.replySourceTypeV2,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").LIGHTWEIGHT_STATUS))&&C!=null&&C!==""?D=k.jsx(y,{isSecureMessage:f,message:h,outgoing:m,text:C}):r!=null?D=k.jsx(r,{isSecureMessage:f,mediaRenderQpl:g,message:h,outgoing:m}):D=k.jsx(n,{isSecureMessage:f,mediaRenderQpl:g,message:h,outgoing:m}):B!=null&&(i||(i=d("I64"))).equal(B,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").EPHEMERAL_RAVEN_MESSAGE))&&t!=null?D=k.jsx(t,{isSecureMessage:f,mediaRenderQpl:g,message:h,outgoing:m}):h.replyStatus!=null&&(i||(i=d("I64"))).equal(h.replyStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageStatus").DELETED))?u!=null?D=k.jsx(u,{outgoing:m}):D=null:h.replyStatus!=null&&(i||(i=d("I64"))).equal(h.replyStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageStatus").EXPIRED))?p!=null?D=k.jsx(p,{isSecureMessage:f,mediaRenderQpl:g,message:h,outgoing:m}):D=null:h.replyStatus!=null&&(i||(i=d("I64"))).equal(h.replyStatus,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageStatus").TEMPORARY_UNAVAILABLE))?z!=null?D=k.jsx(z,{outgoing:m}):D=null:C!=null&&h.replySourceTypeV2!=null&&(i||(i=d("I64"))).equal(h.replySourceTypeV2,(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE))?C!==""?D=k.jsx(y,{isSecureMessage:f,message:h,outgoing:m,text:C}):D=k.jsx(n,{isSecureMessage:f,mediaRenderQpl:g,message:h,outgoing:m}):D=null;e=k.jsx("div",{className:"x193iq5w x1n2onr6 x1vjfegm",children:D});var E=h.replySourceTimestampMs,F=h.replySourceId,G=c("useMWJumpToMessage")("Pinned");x=B!=null&&((i||(i=d("I64"))).equal(B,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").ROLL_CALL_PHOTO_CONTRIBUTION))||(i||(i=d("I64"))).equal(B,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").ROLL_CALL_VIDEO_CONTRIBUTION))||(i||(i=d("I64"))).equal(B,(j||(j=d("LSIntEnum"))).ofNumber(c("LSReplyMessageAttachmentType").ROLL_CALL_TEXT_CONTRIBUTION)));var H=d("useRollcallContributionsXMAActionHandler").useRollcallContributionsXMAActionHandler();v=c("useIsRollcallEnabled")(h.threadKey);if(F!=null&&E!=null&&b){o=function(){G(F,E)};if(x&&v){var I=(i||(i=d("I64"))).of_string((a=h.replyAttachmentExtra)!=null?a:"0"),J=h.threadKey,K=(q=h.replySourceId)!=null?q:null;o=function(){H(I,J,K,null)}}return k.jsx(c("MWXPressable.react"),{onPress:o,overlayDisabled:!0,xstyle:function(){return[l.pressable]},children:e})}else return e}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXMessageReplyBubble.react",["fbt","CometScreenReaderText.react","MWXMessageBubble.react","MWXText.react","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react"),l={content:{overflowWrap:"x1mzt3pk",paddingBottom:"x1l90r2v",paddingTop:"x1iorvi4",$$css:!0},italic:{fontStyle:"x1k4tb9n",$$css:!0}};function a(a){var b=a.children,d=a.fontStyle;d=d===void 0?"normal":d;a=a.outgoing;return k.jsxs(c("MWXMessageBubble.react"),{align:a?"right":"left",color:"quoted",connectBottom:!0,connectTop:!1,precedesXMA:!1,children:[k.jsx(c("CometScreenReaderText.react"),{text:h._("__JHASH__pLiiclD1jc1__JHASH__")}),k.jsx(c("MWXText.react"),{color:"secondary",type:"body4",children:k.jsx("div",{className:(i||(i=c("stylex")))(l.content,d==="italic"&&l.italic),"data-testid":void 0,children:b})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWRepliesAttachment.react",["fbt","ix","MWXIcon.react","MWXMessageReplyBubble.react","fbicon","react"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k=j||(j=d("react")),l=j.useEffect;function a(a){var b=a.mediaRenderQpl;a=a.outgoing;l(function(){b==null?void 0:b.addPoint("render-replies-attachment")},[b]);var e=h._("__JHASH__ExfgVu3ZeIV__JHASH__");return k.jsx(c("MWXMessageReplyBubble.react"),{fontStyle:"italic",outgoing:a,children:k.jsxs("div",{className:"x6s0dn4 x78zum5",children:[e,k.jsx("span",{className:"x1lliihq x1i64zmx",children:k.jsx(c("MWXIcon.react"),{color:"secondary",icon:d("fbicon")._(i("537728"),12)})})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWRepliesExpired.react",["fbt","MWXMessageReplyBubble.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useEffect;function a(a){var b=a.mediaRenderQpl;a=a.outgoing;k(function(){b==null?void 0:b.addPoint("render-replies-expired"),b==null?void 0:b.endSuccess()},[b]);var d=h._("__JHASH__LRWYiWT4b63__JHASH__");return j.jsx(c("MWXMessageReplyBubble.react"),{fontStyle:"italic",outgoing:a,children:d})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("useMWRepliesImageGetMaxDimensions",["MWLSThreadDisplayContext"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();a=a==="ChatTab";return{maxHeight:100,maxWidth:a?180:300}}g["default"]=a}),98);
__d("MWRepliesImage.react",["I64","MWPThreadCapabilitiesContext","MWXMessageImage.react","cr:4509","gkx","react","useMWRepliesImageGetMaxDimensions"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h.useCallback,l={incoming:{borderBottomStartRadius:"x10y3i5r",$$css:!0},outgoing:{borderBottomEndRadius:"xrt01vj",$$css:!0},root:{borderTopStartRadius:"x1tlxs6b",borderTopEndRadius:"x1g8br2z",borderBottomEndRadius:"x1gn5b1j",borderBottomStartRadius:"x230xth",display:"x1lliihq",filter:"xin470k",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",width:"x14atkfc",$$css:!0},rootHasSticker:{borderTopStartRadius:"x168nmei",borderTopEndRadius:"x13lgxp2",borderBottomEndRadius:"x5pf9jr",borderBottomStartRadius:"xo71vjh",$$css:!0}};function a(a){var e=a.height,f=a.imageAlt;f=f===void 0?"":f;var g=a.isSticker;g=g===void 0?!1:g;var h=a.mediaRenderQpl,m=a.outgoing,n=a.src;a=a.width;var o=c("useMWRepliesImageGetMaxDimensions")(),p=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();p=p.blurMediaEnabled;p=c("gkx")("24098")&&p;m=g?!1:m?l.outgoing:l.incoming;var q=k(function(){h==null?void 0:h.endFail("load-image-error")},[h]),r=k(function(){h==null?void 0:h.endSuccess()},[h]);f=j.jsx(c("MWXMessageImage.react"),{alt:f,height:e!=null?(i||(i=d("I64"))).to_float(e):void 0,maxHeight:o.maxHeight,maxWidth:o.maxWidth,onError:q,onLoad:r,src:n,width:a!=null?(i||(i=d("I64"))).to_float(a):void 0,xstyle:[l.root,g&&l.rootHasSticker,m]});return b("cr:4509")!=null&&p&&!g?j.jsx(b("cr:4509"),{mediaType:"Image",overlayDisabled:!0,type:"image",uncoverable:!1,url:n,xstyle:[l.root,m],children:f}):f}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWRepliesGIF.react",["fbt","CometPlaceholder.react","I64","LSMediaUrlAttachment","MAWGetIsMediaDownloadStatusEnabled","MWRepliesImage.react","MWXMessageReplyBubble.react","ReQL","ReQLSuspense","cr:9765","react","useMAWMediaDownloadStatusUIState","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react")),m=k.useEffect;function n(a){var e=a.isSecureMessage;e=e===void 0?!1:e;var g=a.mediaRenderQpl,k=a.message;a=a.outgoing;m(function(){g==null?void 0:g.addPoint("render-replies-gif-impl")},[g]);var n=(i||(i=c("useReStore")))(),o=d("ReQLSuspense").useFirst(function(){var a,b=(a=k.replyAttachmentPlaintextHash)!=null?a:null,c=(a=k.replySourceId)!=null?a:"";if(b!=null)return d("ReQL").fromTableAscending(n.tables.attachments).filter(function(a){return a.attachmentFbid===b&&a.messageId===c});else{a=(a=k.replyAttachmentId)!=null?a:(j||(j=d("I64"))).zero;return d("ReQL").fromTableAscending(n.tables.attachments).getKeyRange(k.threadKey,c,(j||(j=d("I64"))).to_string(a))}},[n,k],f.id+":48"),p=e&&d("MAWGetIsMediaDownloadStatusEnabled").getIsMediaDownloadStatusEnabled()?o:null;p=c("useMAWMediaDownloadStatusUIState")(p,g);var q;o!=null&&(p!=="downloaded"&&e&&d("MAWGetIsMediaDownloadStatusEnabled").getIsMediaDownloadStatusEnabled()?q=null:b("cr:9765")==null||!e?q=d("LSMediaUrlAttachment").previewUrl(o):q=b("cr:9765").getAttachmentBlobNonOptional(o.attachmentFbid,"MWRepliesGIF",g));if(q!=null&&q!=="")return l.jsx(c("MWRepliesImage.react"),{height:k.replyMediaPreviewHeight,mediaRenderQpl:g,outgoing:a,src:q,width:k.replyMediaPreviewWidth});else return l.jsx(c("MWXMessageReplyBubble.react"),{fontStyle:"italic",outgoing:a,children:h._("__JHASH__kPmtZiB6viN__JHASH__")})}n.displayName=n.name+" [from "+f.id+"]";function a(a){var b=babelHelpers["extends"]({},a);m(function(){var a;(a=b.mediaRenderQpl)==null?void 0:a.addPoint("render-replies-gif")},[b.mediaRenderQpl]);return l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsx(n,babelHelpers["extends"]({},b))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("getLSMediaMessageReplyMediaUrl",["LSMediaUrlUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.replyMediaExpirationTimestampMs;if(b!=null&&d("LSMediaUrlUtils").isTimestampExpired(b))return a.replyMediaUrlFallback;else return a.replyMediaUrl}g["default"]=a}),98);
__d("MWRepliesMedia.react",["fbt","ix","CometPlaceholder.react","FDSIcon.react","I64","IconSource","MAWGetIsMediaDownloadStatusEnabled","MWRepliesImage.react","MWV2AttachmentLoadingPlaceholder.react","MWXMessageReplyBubble.react","ReQL","ReQLSuspense","WAArmadilloXMA.pb","cr:9765","getLSMediaMessageReplyMediaUrl","react","useMAWMediaDownloadStatusUIState","useMWRepliesImageGetMaxDimensions","useReStore"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m=l||(l=d("react")),n=l.useEffect;function o(a){var e=a.isSecureMessage;e=e===void 0?!1:e;var g=a.mediaRenderQpl,l=a.message;a=a.outgoing;var o=h._("__JHASH__bznTdd53oJN__JHASH__");o=m.jsx(c("MWXMessageReplyBubble.react"),{fontStyle:"italic",outgoing:a,children:o});var p=(j||(j=c("useReStore")))(),q=d("ReQLSuspense").useFirst(function(){var a=l.replySourceId;if(a!=null)if(l.replyAttachmentPlaintextHash!=null){var b=l.replyAttachmentPlaintextHash;return d("ReQL").fromTableAscending(p.tables.attachments).filter(function(c){return c.attachmentFbid===b&&c.messageId===a})}else if(l.replyAttachmentId!=null){var c=l.replyAttachmentId;return d("ReQL").fromTableAscending(p.tables.attachments).getKeyRange(l.threadKey,a,(k||(k=d("I64"))).to_string(c))}return d("ReQL").empty()},[p,l],f.id+":94");n(function(){q!=null&&(g==null?void 0:g.addAttachmentAnnotations==null?void 0:g.addAttachmentAnnotations(q)),g==null?void 0:g.addPoint("render-reply-media-impl",{bool:{has_db_attachment:q!=null}})},[q,g]);var r=c("useMWRepliesImageGetMaxDimensions")(),s=e&&d("MAWGetIsMediaDownloadStatusEnabled").getIsMediaDownloadStatusEnabled()?q:null,t=c("useMAWMediaDownloadStatusUIState")(s,g);if(s!=null&&t!=="downloaded")return o;s=q!=null&&q.hasXma&&e&&q.gatingType===String(d("WAArmadilloXMA.pb").EXTENDED_CONTENT_MESSAGE_OVERLAY_ICON_GLYPH.PRIVATE);if(q!=null&&q.hasXma&&e){t=(t=q.defaultCtaType)!=null?t:""}else t="";var u=new(c("IconSource"))("FB",i("1423124"),28);if(s)if(t==="xma_montage_share")return m.jsx("div",{className:"x6s0dn4 x1qb2erx xjw5052 xyi19xy x1ccrb07 xtf3nb5 x1pc53ja x78zum5 xdt5ytf x1wkxgih xl56j7k x197sbye x2b8uid xni59qk",children:m.jsx("div",{className:"x14vqqas xq8finb xod5an3 x16n37ib",children:m.jsx(c("FDSIcon.react"),{icon:u})})});else return m.jsx("div",{className:"x6s0dn4 x99fzhk x18aeczl x1tlxs6b x1g8br2z x1gn5b1j x230xth x78zum5 xdt5ytf xpyat2d xl56j7k x2b8uid x1exxlbk",children:m.jsx("div",{className:"x14vqqas xq8finb xod5an3 x16n37ib",children:m.jsx(c("FDSIcon.react"),{icon:u})})});if(e&&(q==null?void 0:q.hasMedia)===!1){return m.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{descriptionForLogging:"MWRepliesMedia.NoMedia",height:(k||(k=d("I64"))).to_float((s=l.replyMediaPreviewHeight)!=null?s:(k||(k=d("I64"))).of_float(100)),maxHeight:r.maxHeight,maxWidth:r.maxWidth,mediaRenderQpl:g,outgoing:a,width:k.to_float((t=l.replyMediaPreviewWidth)!=null?t:(k||(k=d("I64"))).of_float(100))})}u=b("cr:9765")!=null&&e?function(a){if(q!=null&&q.hasXma){g==null?void 0:g.addPoint("fetch_reply_preview_url_xma_start");var c=a.replyAttachmentId!=null?b("cr:9765").getInfoUrlXMA(q,"preview","MWRepliesMedia",g):void 0;g==null?void 0:g.addPoint("fetch_reply_preview_url_xma_end",{bool:{has_url:Boolean(c)},string:{fetch_by:"maw_backend"}});return c}if(a.replyAttachmentPlaintextHash!=null){g==null?void 0:g.addPoint("fetch_reply_preview_url_media_start",{string:{fetch_by:"plaintextHash"}});c=a.replyAttachmentPlaintextHash!=null?b("cr:9765").getAttachmentBlobNonOptional(a.replyAttachmentPlaintextHash,"MWRepliesMedia",g):void 0;g==null?void 0:g.addPoint("fetch_reply_preview_url_media_end",{bool:{has_url:Boolean(c)},string:{fetch_by:"plaintextHash"}});return c}else{g==null?void 0:g.addPoint("fetch_reply_preview_url_media_start",{string:{fetch_by:"mediaId"}});c=a.replyAttachmentId!=null?b("cr:9765").getAttachmentBlobNonOptional((k||(k=d("I64"))).to_string(a.replyAttachmentId),"MWRepliesMedia",g):void 0;g==null?void 0:g.addPoint("fetch_reply_preview_url_media_end",{bool:{has_url:Boolean(c)},string:{fetch_by:"mediaId"}});return c}}:c("getLSMediaMessageReplyMediaUrl");s=u(l);return s!=null&&s!==""?m.jsx(c("MWRepliesImage.react"),{height:l.replyMediaPreviewHeight,imageAlt:h._("__JHASH__eNDXc9eUfIy__JHASH__"),mediaRenderQpl:g,outgoing:a,src:s,width:l.replyMediaPreviewWidth}):o}o.displayName=o.name+" [from "+f.id+"]";function a(a){var b,e=a.isSecureMessage;e=e===void 0?!1:e;var f=a.mediaRenderQpl,g=a.message;a=a.outgoing;n(function(){f==null?void 0:f.addPoint("render-replies-media")},[f]);var h=c("useMWRepliesImageGetMaxDimensions")();return m.jsx(c("CometPlaceholder.react"),{fallback:m.jsx(c("MWV2AttachmentLoadingPlaceholder.react"),{descriptionForLogging:"MWRepliesMedia.Suspense",height:(k||(k=d("I64"))).to_float((b=g.replyMediaPreviewHeight)!=null?b:(k||(k=d("I64"))).of_float(100)),maxHeight:h.maxHeight,maxWidth:h.maxWidth,outgoing:a,width:k.to_float((b=g.replyMediaPreviewWidth)!=null?b:(k||(k=d("I64"))).of_float(100))}),children:m.jsx(o,{isSecureMessage:e,mediaRenderQpl:f,message:g,outgoing:a})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWRepliesRemoved.react",["fbt","MWXMessageReplyBubble.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){a=a.outgoing;var b=h._("__JHASH__uG4wbYWD9QU__JHASH__");return j.jsx(c("MWXMessageReplyBubble.react"),{fontStyle:"italic",outgoing:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWRepliesRollcallContribution.react",["fbt","CometBlurredBackgroundImage.react","CometPlaceholder.react","FDSImageCover.react","I64","Int64Hooks","LSFactory","LSIssuePointQueryForRollCallConversionStoredProcedure","MWXMessageReplyBubble.react","ReQL","ReQLSuspense","cr:2472","getLSMediaMessageReplyMediaUrl","isStringNullOrEmpty","promiseDone","react","stylex","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=l||(l=d("react")),n=l.useEffect,o=213,p=213,q={blurredImage:{borderBottomStartRadius:"x230xth",borderTopStartRadius:"x1tlxs6b",borderTopEndRadius:"x1g8br2z",borderBottomEndRadius:"x1gn5b1j",$$css:!0},outgoing:{borderBottomEndRadius:"xrt01vj",borderBottomStartRadius:"x230xth",$$css:!0},unblurredImageContainer:{borderBottomStartRadius:"x230xth",borderTopStartRadius:"x1tlxs6b",borderTopEndRadius:"x1g8br2z",borderBottomEndRadius:"x1gn5b1j",opacity:"x197sbye",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}};function a(a){var b=babelHelpers["extends"]({},a);n(function(){var a;(a=b.mediaRenderQpl)==null?void 0:a.addPoint("render-replies-rollcall-contribution")},[b.mediaRenderQpl]);return m.jsx(c("CometPlaceholder.react"),{fallback:null,children:m.jsx(r,babelHelpers["extends"]({},b))})}a.displayName=a.name+" [from "+f.id+"]";function r(a){var e,g=a.mediaRenderQpl,l=a.message;a=a.outgoing;n(function(){g==null?void 0:g.addPoint("render-replies-rollcall-contribution-impl")},[g]);var r=c("isStringNullOrEmpty")(l.replyMessageText)?h._("__JHASH__YG4J77RBBDH__JHASH__"):b("cr:2472")==null?l.replyMessageText:b("cr:2472").unvault(l.replyMessageText),s=(i||(i=c("useReStore")))(),t=(k||(k=d("I64"))).of_string((e=l.replyAttachmentExtra)!=null?e:"0"),u=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(s.tables.roll_calls).getKeyRange(t)},[s,t],f.id+":87"),v=l.threadKey;d("Int64Hooks").useEffectInt64(function(){u||c("promiseDone")(s.runInTransaction(function(a){return c("LSIssuePointQueryForRollCallConversionStoredProcedure")(c("LSFactory")(a),{rollCallId:t,threadKey:v})},"readwrite",void 0,void 0,f.id+":96"))},[u,t,v,s]);e=(e=u==null?void 0:u.isBlurred)!=null?e:!1;var w=c("getLSMediaMessageReplyMediaUrl")(l),x=l.replyMediaPreviewHeight!=null?(k||(k=d("I64"))).to_float(l.replyMediaPreviewHeight):0;l=l.replyMediaPreviewWidth!=null?(k||(k=d("I64"))).to_float(l.replyMediaPreviewWidth):0;var y=Math.min(1,o/x),z=Math.min(1,p/l);x=Math.round(x*Math.min(y,z));l=Math.round(l*Math.min(y,z));return!c("isStringNullOrEmpty")(w)?e?m.jsx("div",{style:{height:x,width:l},children:m.jsx(c("CometBlurredBackgroundImage.react"),{src:w,xstyle:[q.blurredImage,a&&q.outgoing]})}):m.jsx("div",{className:(j||(j=c("stylex")))([q.unblurredImageContainer,a&&q.outgoing]),style:{height:x,width:l},children:m.jsx(c("FDSImageCover.react"),{alt:"",src:w})}):m.jsx(c("MWXMessageReplyBubble.react"),{outgoing:a,children:r})}r.displayName=r.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("issueReceiverFetchTask",["LSDispatchMediaReceiverFetchForWebStoredProcedure","LSFactory","MAWGetIsMediaDownloadStatusEnabled","MAWMediaDownloadStatus","MAWMediaReceiverFetchDoneCallbackMap","WAHashUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b,e,g,h){d("MAWGetIsMediaDownloadStatusEnabled").getIsMediaDownloadStatusEnabled()&&(h==null?void 0:h({tag:"UpdateMediaStatus",value:{details:"issue_receiver_fetch_task",key:d("WAHashUtils").stringToPlaintextHash(b),status:c("MAWMediaDownloadStatus").DOWNLOADING,type:"main"}}),c("MAWMediaReceiverFetchDoneCallbackMap").set(b,function(a){h==null?void 0:h({tag:"UpdateMediaStatus",value:{details:"issue_receiver_fetch_task_callback",key:d("WAHashUtils").stringToPlaintextHash(b),status:a==="success"?c("MAWMediaDownloadStatus").SUCCESS:c("MAWMediaDownloadStatus").MANUAL_RETRYABLE_FAILURE,type:"main"}})}));return a.runInTransaction(function(a){return c("LSDispatchMediaReceiverFetchForWebStoredProcedure")(c("LSFactory")(a),{messageId:b,receiverFetchId:e,threadKey:g})},"readwrite",void 0,void 0,f.id+":57")}g["default"]=a}),98);
__d("useIssueMediaReceiverFetchTask",["FBLogger","Int64Hooks","LSMediaUrlUtils","MAWGetIsMediaDownloadStatusEnabled","MAWMediaDownloadStatus","MAWStateContext.react","WAHashUtils","gkx","issueReceiverFetchTask","promiseDone","react","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useRef;function a(a,b,e,f,g,h,k,l,m){var n=i(d("MAWStateContext.react").MAWStateContext),o=n.dispatch,p=c("useAsyncReStore")(),q=j(!1),r=d("LSMediaUrlUtils").hasValidReceiverFetchPreviewUrl(k,l);d("Int64Hooks").useEffectInt64(function(){if(!g||!a||f==null||b==null||q.current||r||!c("gkx")("5624"))return;q.current=!0;h==null?void 0:h.addPoint("media_receiver_fetch_task_start");c("promiseDone")(p,function(a){return c("issueReceiverFetchTask")(a,b,f,e,o)},function(a){h==null?void 0:h.endFail("media_receiver_fetch_task_fail"),d("MAWGetIsMediaDownloadStatusEnabled").getIsMediaDownloadStatusEnabled()&&o({tag:"UpdateMediaStatus",value:{details:"media_receiver_fetch_task_fail",key:d("WAHashUtils").stringToPlaintextHash(b),status:c("MAWMediaDownloadStatus").MANUAL_RETRYABLE_FAILURE,type:"main"}}),c("FBLogger")("messenger_web_media").catching(a).warn("Failed to issue media receiver fetch task on mount")})},[p,r,o,g,h,b,f,e,a,m])}g["default"]=a}),98);
__d("MWRepliesSticker.react",["fbt","CometPlaceholder.react","I64","LSHotEmojiSize","LSMediaUrlAttachment","MAWGetIsMediaDownloadStatusEnabled","MWRepliesImage.react","MWV2ChatEmojiHotLike.react","MWV2Sticker.react","MWXMessageReplyBubble.react","ReQL","ReQLSuspense","cr:2472","cr:9765","getLSMediaMessageReplyMediaUrl","gkx","isReceiverFetchSticker","qex","react","useIssueMediaReceiverFetchTask","useMAWMediaDownloadStatusUIState","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react")),m=k.useEffect,n={replyHotLikeSticker:{filter:"xin470k",transform:"xst6bnn",$$css:!0},replyHotLikeStickerV2:{filter:"xin470k",height:"x10w6t97",marginBottom:"x12nagc",width:"x1td3qas",$$css:!0},replySticker:{filter:"xin470k",$$css:!0}};function a(a){var e=a.isSecureMessage;e=e===void 0?!1:e;var g=a.mediaRenderQpl,k=a.message;a=a.outgoing;var o=h._("__JHASH__13yhS1gywbZ__JHASH__");o=l.jsx(c("MWXMessageReplyBubble.react"),{fontStyle:"italic",outgoing:a,children:o});var p=(i||(i=c("useReStore")))(),q=d("ReQLSuspense").useFirst(function(){var a=k.replyAttachmentPlaintextHash,b=k.replySourceId;if(a!=null&&b!=null)return d("ReQL").fromTableAscending(p.tables.attachments).filter(function(c){return c.attachmentFbid===a&&c.messageId===b});else{var c=k.replyAttachmentId;if(c!=null&&b!=null)return d("ReQL").fromTableAscending(p.tables.attachments).getKeyRange(k.threadKey,b,(j||(j=d("I64"))).to_string(c))}return d("ReQL").empty()},[p,k],f.id+":81");c("useIssueMediaReceiverFetchTask")(q?c("isReceiverFetchSticker")(q):!1,k.replySourceId,k.threadKey,q==null?void 0:q.receiverFetchId,e,g,q==null?void 0:q.previewUrl,q==null?void 0:q.previewUrlExpirationTimestampMs,q==null?void 0:q.attachmentType);m(function(){q!=null&&(g==null?void 0:g.addAttachmentAnnotations==null?void 0:g.addAttachmentAnnotations(q)),g==null?void 0:g.addPoint("render-replies-sticker",{bool:{has_db_attachment:q!=null}})},[q,g]);var r=e&&d("MAWGetIsMediaDownloadStatusEnabled").getIsMediaDownloadStatusEnabled()?q:null,s=c("useMAWMediaDownloadStatusUIState")(r,g);if(r!=null&&s!=="downloaded")return o;s=(r=k.replyMessageText)!=null?r:"";r=(b("cr:2472")!=null?b("cr:2472").unvault(s):s)==="\ud83d\udc4d";if(r)return l.jsx(c("MWV2ChatEmojiHotLike.react"),{hotEmojiSize:c("LSHotEmojiSize").NONE,xstyle:!c("gkx")("23249")&&c("qex")._("131")===!0?n.replyHotLikeStickerV2:n.replyHotLikeSticker});s=c("getLSMediaMessageReplyMediaUrl")(k);if(s!=null&&q==null)return l.jsx(c("MWRepliesImage.react"),{height:k.replyMediaPreviewHeight,isSticker:!0,mediaRenderQpl:g,outgoing:a,src:s,width:k.replyMediaPreviewWidth});if(q==null)return o;b("cr:9765")==null||!e||q.receiverFetchId!=null?r=function(a){return d("LSMediaUrlAttachment").previewUrl(a)}:r=function(a){return b("cr:9765").getAttachmentBlobNonOptional(a.attachmentFbid,"MWRepliesSticker",g)};return l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsx(c("MWV2Sticker.react"),{attachment:q,getPreviewUrl:r,mediaRenderQpl:g,scale:.6,xstyle:n.replySticker})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWRepliesStory.react",["fbt","CometPlaceholder.react","FBLogger","I64","Int64Hooks","LSIntEnum","LSXmaContentType","MWMediaRenderQplUtils","MWRepliesImage.react","MWXPressable.react","XCometStoriesControllerRouteBuilder","cr:9765","getLSMediaMessageReplyMediaUrl","gkx","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||(i=d("react")),m=i.useEffect;function a(a){var b=babelHelpers["extends"]({},a);m(function(){var a;(a=b.mediaRenderQpl)==null?void 0:a.addPoint("render-replies-story")},[b.mediaRenderQpl]);return l.jsx(c("CometPlaceholder.react"),{fallback:null,children:l.jsx(n,babelHelpers["extends"]({},b))})}a.displayName=a.name+" [from "+f.id+"]";function n(a){var e=a.isSecureMessage;e=e===void 0?!1:e;var f=a.mediaRenderQpl,g=a.message;a=a.outgoing;var i=g.replySourceId;i=i!=null?e?i:(i=c("XCometStoriesControllerRouteBuilder").buildUri({card_id:window.btoa("S:_ISC:"+i),view_single:!0}).setDomain("www.facebook.com"))==null?void 0:(i=i.setProtocol("https"))==null?void 0:i.toString():void 0;d("Int64Hooks").useEffectInt64(function(){f==null?void 0:f.addPoint("render-reply-story-impl",{bool:{has_reply_attachment_id:g.replyAttachmentId!=null,has_reply_attachment_plaintext_hash:g.replyAttachmentPlaintextHash!=null,has_reply_mime_type:g.replyMediaUrlMimeType!=null,has_reply_source_id:g.replySourceId!=null}}),f==null?void 0:f.addAnnotations({string:{xma_content_type:d("MWMediaRenderQplUtils").getXmaContentTypeStringFromEnum((j||(j=d("LSIntEnum"))).ofNumber(c("LSXmaContentType").FB_STORY_REPLY))}})},[f,g.replyAttachmentId,g.replyAttachmentPlaintextHash,g.replyMediaUrlMimeType,g.replySourceId]);e=b("cr:9765")!=null&&e?function(a){if(c("gkx")("6417")){a.replyAttachmentId!=null&&a.replyAttachmentPlaintextHash==null&&c("FBLogger")("messenger_web_media").mustfix("Failed to get story preview url. Reply attachment id is set but Reply plaintextHash is missing");return a.replyAttachmentPlaintextHash!=null?b("cr:9765").getAttachmentBlobNonOptional(a.replyAttachmentPlaintextHash,"MWRepliesStory",f):null}else return a.replyAttachmentId!=null?b("cr:9765").getAttachmentBlobNonOptional((k||(k=d("I64"))).to_string(a.replyAttachmentId),"MWRepliesStory",f):null}:c("getLSMediaMessageReplyMediaUrl");var n=e(g);m(function(){n==null&&(f==null?void 0:f.endFail("missing-reply-media",{bool:{has_plaintexthash:g.replyAttachmentPlaintextHash!=null}}))},[f,g.replyAttachmentPlaintextHash,n]);return n==null?null:l.jsx(c("MWXPressable.react"),{"aria-label":h._("__JHASH__thxINaLEtLl__JHASH__"),linkProps:i!=null?{url:i}:void 0,overlayDisabled:!0,children:l.jsx(c("MWRepliesImage.react"),{mediaRenderQpl:f,outgoing:a,src:n})})}n.displayName=n.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWRepliesText.react",["MWChatTextFormatting","MWChatTextTransform","MWXMessageReplyBubble.react","MWXMessageTextWithEntities.react","cr:2472","react","useStringWithSubstitutions"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo;function a(a){var e=a.isSecureMessage,f=a.message,g=a.outgoing,h=a.text;a=j(function(){return{MessengerTextFormatting:[d("MWChatTextFormatting").messageRenderer]}},[]);var k=j(function(){return d("MWChatTextFormatting").getFormattingRanges(h)},[h]),l=j(function(){var a;return new Set(e?(a=(a=f.mentionIds)==null?void 0:a.split==null?void 0:a.split(","))!=null?a:[]:[])},[e,f.mentionIds]),m=b("cr:2472")==null?h:b("cr:2472").unvault(h);l=(l=(l=d("useStringWithSubstitutions").useStringWithMentionSubstitutionsAndUpdatedRanges(m,[],l))==null?void 0:l.textWithSubstitutions)!=null?l:m;return i.jsx(c("MWXMessageReplyBubble.react"),{outgoing:g,children:i.jsx("div",{className:"xi81zsa x126k92a",children:i.jsx(c("MWXMessageTextWithEntities.react"),{maxLength:120,maxLines:3,ranges:k,renderers:a,text:l,transforms:d("MWChatTextTransform").textTransformsNoVault,truncationStyle:"ellipsis-only",withParagraphs:!1})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWRepliesUnavailable.react",["fbt","MWXMessageReplyBubble.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){a=a.outgoing;var b=h._("__JHASH__3TzRhHHRgwV__JHASH__");return j.jsx(c("MWXMessageReplyBubble.react"),{fontStyle:"italic",outgoing:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWRepliesVideo.react",["fbt","ix","CometPlaceholder.react","I64","LSMediaUrlAttachment","MAWGetIsMediaDownloadStatusEnabled","MWXImage.react","MWXMessageImage.react","MWXMessageReplyBubble.react","MWXVideoStatusListener.react","ReQL","ReQLSuspense","cr:9765","react","useMAWMediaDownloadStatusUIState","useMWRepliesImageGetMaxDimensions","useReStore"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m=l||(l=d("react"));e=l;var n=e.useCallback,o=e.useEffect,p=e.useRef,q={thumbnail:{borderTopStartRadius:"x1tlxs6b",borderTopEndRadius:"x1g8br2z",borderBottomEndRadius:"x1gn5b1j",borderBottomStartRadius:"x230xth",filter:"xin470k",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}};function r(a){var e=a.isSecureMessage;e=e===void 0?!1:e;var g=a.mediaRenderQpl,l=a.message;a=a.outgoing;var r=c("useMWRepliesImageGetMaxDimensions")(),s=r.maxHeight;r=r.maxWidth;var t=(j||(j=c("useReStore")))(),u=d("ReQLSuspense").useFirst(function(){var a,b=l.replyAttachmentPlaintextHash,c=(a=l.replySourceId)!=null?a:"";if(b!=null&&c!=null)return d("ReQL").fromTableAscending(t.tables.attachments).filter(function(a){return a.attachmentFbid===b&&a.messageId===c});else{a=(a=l.replyAttachmentId)!=null?a:(k||(k=d("I64"))).zero;return d("ReQL").fromTableAscending(t.tables.attachments).getKeyRange(l.threadKey,c,(k||(k=d("I64"))).to_string(a))}},[t,l],f.id+":73");o(function(){u!=null&&(g==null?void 0:g.addAttachmentAnnotations==null?void 0:g.addAttachmentAnnotations(u)),g==null?void 0:g.addPoint("render-reply-video-impl",{bool:{has_db_attachment:u!=null}})},[u,g]);var v=e&&d("MAWGetIsMediaDownloadStatusEnabled").getIsMediaDownloadStatusEnabled()?u:null,w=c("useMAWMediaDownloadStatusUIState")(v,g),x;u!=null&&(v!=null&&w!=="downloaded"?x=null:b("cr:9765")==null||!e?x=d("LSMediaUrlAttachment").previewUrl(u):x=b("cr:9765").getAttachmentBlobNonOptional(u.attachmentFbid,"MWRepliesVideo",g));v=p(null);var y=n(function(a){g==null?void 0:g.endFail("load-video-error",{string:{video_error_name:a}})},[g]);w=n(function(){g==null?void 0:g.endSuccess()},[g]);if(x==null){g==null?void 0:g.endSuccess();return m.jsx(c("MWXMessageReplyBubble.react"),{fontStyle:"italic",outgoing:a,children:h._("__JHASH__7WGJ1daCkBD__JHASH__")})}a=l.replyMediaPreviewHeight!=null?(k||(k=d("I64"))).to_float(l.replyMediaPreviewHeight):void 0;var z=l.replyMediaPreviewWidth!=null?(k||(k=d("I64"))).to_float(l.replyMediaPreviewWidth):void 0;(u==null?void 0:u.previewUrlMimeType)!=null&&!e?e=m.jsx(c("MWXMessageImage.react"),{alt:"",height:a,maxHeight:s,maxWidth:r,onError:function(){return y()},onLoad:w,src:x,width:z,xstyle:q.thumbnail}):e=m.jsxs(m.Fragment,{children:[m.jsx(c("MWXVideoStatusListener.react"),{onError:y,onLoad:w,videoRef:v}),m.jsx("video",{alt:"",className:"x1tlxs6b x1g8br2z x1gn5b1j x230xth xin470k x6ikm8r x10wlt62",height:a!=null&&a>s?"100%":a,src:x,style:{maxHeight:s,maxWidth:r},width:z!=null&&z>r?"100%":z})]});return m.jsxs("div",{className:"x1n2onr6",children:[e,m.jsx("div",{className:"x6s0dn4 x78zum5 xdt5ytf x5yr21d x17qophe xl56j7k x10l6tqk x13vifvy xh8yej3",children:m.jsx(c("MWXImage.react"),{onError:function(){return y()},onLoad:w,src:i("354763")})})]})}r.displayName=r.name+" [from "+f.id+"]";function a(a){var b=babelHelpers["extends"]({},a);o(function(){var a;(a=b.mediaRenderQpl)==null?void 0:a.addPoint("render-replies-video")},[b.mediaRenderQpl]);return m.jsx(c("CometPlaceholder.react"),{fallback:null,children:m.jsx(r,babelHelpers["extends"]({},b))})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWRepliedMessage.react",["MWBlockedTombstoneMessage.react","MWBlockingProtectionContext.react","MWGroupBlockingProtectionUtils","MWPBaseRepliedMessage.react","MWRepliesAttachment.react","MWRepliesExpired.react","MWRepliesGIF.react","MWRepliesMedia.react","MWRepliesRemoved.react","MWRepliesRollcallContribution.react","MWRepliesSticker.react","MWRepliesStory.react","MWRepliesText.react","MWRepliesUnavailable.react","MWRepliesVideo.react","cr:6968","react","useMWJumpToMessage"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useEffect;function a(a){var e=a.isSecureMessage;e=e===void 0?!1:e;var f=a.mediaRenderQpl,g=a.message;a=a.outgoing;var h=c("MWBlockingProtectionContext.react").useHook();h=h.findMessageId;var k=d("MWGroupBlockingProtectionUtils").useMWIsMessageSentByBlockedContact(g.replyToUserId,g.threadKey),l=k&&!h((k=g.replySourceId)!=null?k:""),m=c("useMWJumpToMessage")("Pinned");j(function(){f==null?void 0:f.addPoint("render-replied-message",{bool:{show_blocking_tombstone:l}})},[f,l]);if(l){var n=g.replySourceTimestampMs,o=g.replySourceId;return i.jsx(d("MWBlockedTombstoneMessage.react").MWBlockedTombstoneMessage,{messageId:g.messageId,onClick:function(){o!=null&&n&&m(o,n)},source:d("MWBlockedTombstoneMessage.react").MWBlockedTombstoneMessageSource.REPLIED_TO})}return i.jsx(c("MWPBaseRepliedMessage.react"),{isSecureMessage:e,mediaRenderQpl:f,message:g,outgoing:a,renderAttachment:c("MWRepliesAttachment.react"),renderExpiredMessage:c("MWRepliesExpired.react"),renderGIF:c("MWRepliesGIF.react"),renderMedia:c("MWRepliesMedia.react"),renderRaven:(h=b("cr:6968"))!=null?h:void 0,renderRemovedMessage:c("MWRepliesRemoved.react"),renderRollcallContribution:c("MWRepliesRollcallContribution.react"),renderSticker:c("MWRepliesSticker.react"),renderStory:c("MWRepliesStory.react"),renderTextMessage:c("MWRepliesText.react"),renderUnavailableMessage:c("MWRepliesUnavailable.react"),renderVideo:c("MWRepliesVideo.react")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWThreadViewMediaRenderQpl",["CurrentUser","I64","Int64Hooks","LSAuthorityLevel","LSBitFlag","LSIntEnum","LSMediaUrlUtils","MAWMsg","MWMediaRenderQplUtils","MWPActor.react","MWVersion","QPLUserFlow","WAMediaQplHelper","gkx","justknobx","mergeDeep","react","shouldUseMAWSharedWorker","useLSMessagingInitiatingSource","usePartialViewImpression","useXMAPreviewsDisabledSetting"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;e=h||d("react");var k=e.useLayoutEffect,l=e.useRef;function a(a,b){return m(a,b,n,!1)}function b(a,b){return m(a,b,o,!0,{string:{reply_attachment_type:d("MWMediaRenderQplUtils").getReplyMessageAttachmentTypeStringFromEnum(a.replyAttachmentType)}})}function m(a,b,e,f,g){g===void 0&&(g={});var h=(i||(i=d("I64"))).le(a.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC)),m=d("MWPActor.react").useActor(),n=i.equal(a.senderId,m),o=c("useLSMessagingInitiatingSource")(),p=c("useXMAPreviewsDisabledSetting")(),q=l(!1),r=d("Int64Hooks").useMemoInt64(function(){var j;if(!e(a,b))return null;var k=d("MWMediaRenderQplUtils").getThreadViewMediaRenderQplInstanceKey(a.offlineThreadingId,h,f),l=c("CurrentUser").getAppID();l={bool:{has_db_reply_attachment:a.replyAttachmentId!=null,has_message_xma_receiver_fetch_params:a.xmaReceiverFetchParams!=null,has_text:Boolean(a.text),is_admin_message:a.isAdminMessage,is_expired:a.isExpired,is_forwarded:(j=a.isForwarded)!=null?j:!1,is_optimistic:h,is_outgoing:n,is_pdb:Boolean(c("gkx")("24032")),is_reply_to_media:f,is_unsent:a.isUnsent,use_maw_shared_worker:d("shouldUseMAWSharedWorker").shouldUseMAWSharedWorker()},string:{app_id:(j=l)!=null?j:void 0,content_type:d("MWMediaRenderQplUtils").getMessageContentTypeString(a),entry_point:"thread_view",messaging_initiation_source:d("MWMediaRenderQplUtils").getMessagingInitiationSourceStringFromEnum(o),mw_version:(i||(i=d("I64"))).to_string(d("MWVersion").v2),reply_source_type:a.replySourceType!=null?d("MWMediaRenderQplUtils").getMessageReplySourceTypeStringFromEnum(a.replySourceType):void 0,reply_source_type_v2:a.replySourceTypeV2!=null?d("MWMediaRenderQplUtils").getMessageReplySourceTypeV2StringFromEnum(a.replySourceTypeV2):void 0,thread_type:d("MWMediaRenderQplUtils").getThreadTypeStringFromEnum(b),transport_key:a.transportKey}};j=c("mergeDeep")(l,g);return babelHelpers["extends"]({},d("MWMediaRenderQplUtils").createQplFlowCommon(d("MWMediaRenderQplUtils").event,k,q,j),{addAttachmentAnnotations:function(a){var b;c("QPLUserFlow").addAnnotations(d("MWMediaRenderQplUtils").event,{bool:{has_attachment_receiver_fetch_id:(a==null?void 0:a.receiverFetchId)!=null,has_db_attachment:a!=null,has_db_media:(a==null?void 0:a.hasMedia)===!0,has_db_playable_url:Boolean(a==null?void 0:a.playableUrl),has_db_preview_url:Boolean(a==null?void 0:a.previewUrl),has_db_preview_url_large:Boolean(a==null?void 0:a.previewUrlLarge),has_db_xma:(a==null?void 0:a.hasXma)===!0,has_db_xma_favicon:(a==null?void 0:a.hasXmaFavicon)===!0,has_db_xma_header_image:(a==null?void 0:a.hasXmaHeaderImage)===!0,has_db_xma_preview:(a==null?void 0:a.hasXmaPreview)===!0,is_db_playable_url_expired:(a==null?void 0:a.playableUrlExpirationTimestampMs)!=null?d("LSMediaUrlUtils").isTimestampExpired(a.playableUrlExpirationTimestampMs):void 0,is_db_preview_url_expired:(a==null?void 0:a.previewUrlExpirationTimestampMs)!=null?d("LSMediaUrlUtils").isTimestampExpired(a.previewUrlExpirationTimestampMs):void 0,is_xma_previews_disabled:p},string:{attachment_transport_key:(b=a==null?void 0:a.transportKey)!=null?b:void 0,attachment_type:a==null?null:d("MWMediaRenderQplUtils").getAttachmentTypeString(a),file_size_bucket:(a==null?void 0:a.filesize)!=null?d("WAMediaQplHelper").convertIntegerSizeToStringBucket((i||(i=d("I64"))).to_float(a==null?void 0:a.filesize)):void 0,playable_url_mime_type:a==null?void 0:a.playableUrlMimeType,preview_url_mime_type:a==null?void 0:a.previewUrlMimeType,xma_content_type:(a==null?void 0:a.xmaContentType)!=null?d("MWMediaRenderQplUtils").getXmaContentTypeStringFromEnum(a.xmaContentType):void 0,xma_default_cta_type:a==null?void 0:a.defaultCtaType}},{instanceKey:k})}})},[h,a.displayedContentTypes]);m=c("usePartialViewImpression")({onImpressionEnd:function(){c("justknobx")._("3028")&&(q.current===!1&&(r==null?void 0:r.addPoint("message-row-hidden"),r==null?void 0:r.addAnnotations({bool:{message_row_is_hidden:!0}})))},onImpressionStart:function(){c("justknobx")._("3028")&&(q.current===!1&&(r==null?void 0:r.addPoint("message-row-visible"),r==null?void 0:r.addAnnotations({bool:{message_row_has_been_visible:!0,message_row_is_hidden:!1}})))}});k(function(){r==null?void 0:r.start();r==null?void 0:r.addPoint("message-row-mounted");return function(){q.current===!1&&(r==null?void 0:r.getInstanceKey())!=null&&(r==null?void 0:r.addPoint("message-row-unmounted"),r==null?void 0:r.endCancel(706))}},[r]);return{mediaRenderQpl:r,messageRowRef:m}}function n(a,b){if(p(a))return!1;b=d("LSBitFlag").has((j||(j=d("LSIntEnum"))).ofNumber(1024),a.displayedContentTypes);return b||d("MAWMsg").isMediaMsg(a)}function o(a,b){return d("MAWMsg").isMediaReplyAttachmentType(a,b)&&!p(a)}function p(a){return a.isUnsent||a.isExpired}g.useMediaRenderQpl=a;g.useMediaRenderQplForReply=b}),98);
__d("MWV2ReplyError.react",["fbt","MWXMessageReplyBubble.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){a=a.outgoing;return j.jsx(c("MWXMessageReplyBubble.react"),{fontStyle:"italic",outgoing:a,children:h._("__JHASH__962PS6SI-P2__JHASH__")})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("useMWIsReplyToAuthor",["I64","LSIntEnum","LSMessageReplySourceTypeV2"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){return a.replySourceTypeV2!=null&&(h||(h=d("I64"))).equal(a.replySourceTypeV2,(i||(i=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").XMA))}g["default"]=a}),98);
__d("MWMessageReplyRow.react",["CometErrorBoundary.react","I64","MWMessageListDisplayContext.react","MWPMessageListColumn.react","MWPinnedMessageOverlay.react","MWRepliedMessage.react","MWThreadViewMediaRenderQpl","MWV2MessageProfilePhoto.react","MWV2ReplyError.react","MWXMessageBubbleRow.react","react","useMWIsReplyToAuthor"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h.useEffect,l={replyMargin:{marginBottom:"x1oo3vh0",minHeight:"x1hshjfz",$$css:!0}};function a(a){var b=a.outgoing,e=a.isGroupThread,f=a.isSecureMessage,g=a.message;a=a.threadType;var h=d("MWMessageListDisplayContext.react").useMWMessageListDisplayContext();h=h.isStandardMessageList;var m=c("useMWIsReplyToAuthor")(g);m=m||g.replySourceId==null?!1:g.replyMediaExpirationTimestampMs!=null?(i||(i=d("I64"))).gt(g.replyMediaExpirationTimestampMs,(i||(i=d("I64"))).zero):!0;e=j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnProfile,{children:j.jsx(c("MWV2MessageProfilePhoto.react"),{display:"hidden",isGroupThread:e,message:g})});var n=j.jsx("div",{className:"x1xc55vz",role:"none"});a=d("MWThreadViewMediaRenderQpl").useMediaRenderQplForReply(g,a);var o=a.mediaRenderQpl;a=a.messageRowRef;k(function(){o==null?void 0:o.addPoint("render-message-reply-row")},[o]);return j.jsx("div",{ref:a,children:j.jsx(c("MWXMessageBubbleRow.react"),{addOnEnd:b?e:n,addOnStart:b?n:e,align:b?"right":"left",opaque:!0,xstyle:m&&l.replyMargin,children:j.jsx(c("CometErrorBoundary.react"),{fallback:function(a){return j.jsx(c("MWV2ReplyError.react"),{outgoing:b})},children:h?j.jsx(c("MWPinnedMessageOverlay.react"),{alreadyRenderedPin:!1,message:g,outgoing:b,children:j.jsx(c("MWRepliedMessage.react"),{isSecureMessage:f,mediaRenderQpl:o,message:g,outgoing:b})}):j.jsx(c("MWRepliedMessage.react"),{isSecureMessage:f,mediaRenderQpl:o,message:g,outgoing:b})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ChatReactionsTooltip.react",["fbt","FBLogger","I64","LSAuthorityLevel","LSClearReactionsV2DetailsAndRangeStoredProcedure","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSIntEnum","LSIssueReactionsV2DetailsUsersListFetchStoredProcedure","LSVerifyContactRowExistsStoredProcedure","MWLSThread","MWPActor.react","Promise","ReQL","ReQLSuspense","intlSummarizeNumber","promiseDone","react","react-strict-dom","useIsReactionsV2Enabled","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m,n=m||(m=d("react"));e=m;var o=e.useEffect,p=e.useMemo,q=9;function r(a){var b=(j||(j=c("useReStore")))(),e=d("ReQLSuspense").useArray(function(){return a==null?d("ReQL").empty():d("ReQL").fromTableAscending(b.tables.contextual_profile_v1.index("associatedEntityIdAndOwner")).getKeyRange(a)},[b,a],f.id+":47"),g=p(function(){var a=new Map();for(var b=e,c=Array.isArray(b),f=0,b=c?b:b[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(c){if(f>=b.length)break;g=b[f++]}else{f=b.next();if(f.done)break;g=f.value}g=g;var h=g==null?void 0:g.profileName;h!=null&&a.set((l||(l=d("I64"))).to_string(g.ownerId),h)}return a},[e]);return g}function a(a){var b=a.messageId;a.parentThreadKey;var c=a.reactions;a=a.threadKey;var e=d("MWLSThread").useThread(a,function(a){return a.parentThreadKey}),f=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(a);return f?n.jsx(t,{messageId:b,parentThreadKey:e,reactions:c,threadKey:a}):n.jsx(s,{messageId:b,parentThreadKey:e,reactions:c,threadKey:a})}a.displayName=a.name+" [from "+f.id+"]";function s(a){var e=a.messageId,g=a.parentThreadKey,m=a.reactions,s=a.threadKey,t=(j||(j=c("useReStore")))(),u=d("ReQLSuspense").useArray(function(){return d("ReQL").leftJoin(d("ReQL").fromTableAscending(t.tables.reactions).getKeyRange(s,e),d("ReQL").fromTableAscending(t.tables.contacts))},[t,s,e],f.id+":108"),v=r(g);o(function(){c("promiseDone")(t.runInTransaction(function(a){return(i||(i=b("Promise"))).all(u.map(function(e){e=e[1];if(e!=null)return c("LSVerifyContactRowExistsStoredProcedure")(c("LSFactory")(a),{authorityLevel:(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").CLIENT_PARTIAL),blockedByViewerStatus:k.ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:k.ofNumber(c("LSContactIdType").FBID),contactType:k.ofNumber(c("LSContactType").USER),contactViewerRelationship:k.ofNumber(c("LSContactViewerRelationship").UNKNOWN),gender:k.ofNumber(c("LSContactGender").UNKNOWN),id:e.id,isBlocked:!1,isMemorialized:!1,isSelf:!1,workForeignEntityType:k.ofNumber(c("LSContactWorkForeignEntityType").UNKNOWN)});else return(i||(i=b("Promise"))).resolve()}))},"readwrite",void 0,void 0,f.id+":124"))},[t,u]);a=p(function(){var a=new Map(u.map(function(a){var b=a[1];b==null&&c("FBLogger")("messenger_web_product").debug("missing contact for reaction tooltip");return[(l||(l=d("I64"))).to_string(a[0].actorId),b!=null?b.name:h._("__JHASH__AaE4hJExM0x__JHASH__")]})),b=m.map(function(b){b=(l||(l=d("I64"))).to_string(b.actorId);if(v.has(b))return v.get(b);b=a.get(b);if(b==null)return"";else return b}).filter(function(a){return a!==""}),e=b.length;b=b.slice(0,q);if(e>q){e=e-q;b.push(h._("__JHASH__KVtJcih6CQz__JHASH__",[h._plural(e),h._param("count",String(e))]))}return b},[v,m,u]);g=a.map(function(a,b){return n.jsx(d("react-strict-dom").html.div,{children:a},String(b))});return n.jsx(d("react-strict-dom").html.div,{children:g})}s.displayName=s.name+" [from "+f.id+"]";function t(a){var b,e=a.messageId,g=a.parentThreadKey;a.reactions;var i=a.threadKey,k=(j||(j=c("useReStore")))();o(function(){c("promiseDone")(k.runInTransaction(function(a){return c("LSClearReactionsV2DetailsAndRangeStoredProcedure")(c("LSFactory")(a))},"readwrite",void 0,void 0,f.id+":226")),c("promiseDone")(k.runInTransaction(function(a){return c("LSIssueReactionsV2DetailsUsersListFetchStoredProcedure")(c("LSFactory")(a),{messageId:e,threadId:i})},"readwrite",void 0,void 0,f.id+":231"))},[k,i,e]);var m=r(g);a=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(k.tables.reactions_v2_details).getKeyRange(i,e).map(function(a){var b;return(b=m.get((l||(l=d("I64"))).to_string(a.reactorId)))!=null?b:a.fullName})},[k,m,i,e],f.id+":242");g=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(k.tables.reactions_v2).getKeyRange(i,e)},[k,i,e],f.id+":255");var p=g?g.map(function(a){return a.viewerIsReactor}):[];p=p.length>0?p.reduce(function(a,b){return a||b}):!1;var s=d("MWPActor.react").useActor(),t=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(k.tables.contacts).getKeyRange(s)},[k,s],f.id+":274");g=g?g.map(function(a){return(l||(l=d("I64"))).to_int32(a.count)}).filter(function(a){return a>0}):[];b=(b=(t==null?void 0:t.id)!=null?m.get((l||(l=d("I64"))).to_string(t.id)):null)!=null?b:t==null?void 0:t.name;JSON.stringify(g)===JSON.stringify([1])&&p&&b!=null&&a.length===0?a.push(b):p&&a[0]!=null&&t&&b!=null&&((g=a[0])==null?void 0:g.toString())!==b&&a.unshift(b);p=h._("__JHASH__GTBXwO8BaZr__JHASH__");t=a.slice(0,q);if(a.length>q){g=a.length-q;t.push(h._("__JHASH__KVtJcih6CQz__JHASH__",[h._plural(g),h._param("count",String(c("intlSummarizeNumber")(g)))]).toString())}b=t.length===0?p:t.map(function(a,b){return n.jsx(d("react-strict-dom").html.div,{children:a},String(b))});return n.jsx(d("react-strict-dom").html.div,{children:b})}t.displayName=t.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWMessageReactionsContainer.react",["fbt","I64","MWChatReactionEmoji","MWChatReactionsUtils","MWV2ChatReactionsTooltip.react","MWXTooltip.react","intlSummarizeNumber","react","stylex","useIsReactionDialogEnabled"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=j||d("react"),m={emoji:{alignItems:"x6s0dn4",backgroundColor:"xsrzb8j",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",lineHeight:"x14ju556",$$css:!0},emojiMargin:{marginEnd:"xcwd3tp",$$css:!0},emojiWithCursor:{cursor:"x1ypdohk",$$css:!0},scaleHeartEmoji:{transform:"xhqu4j4",$$css:!0}};function a(a){var b=a.count,e=a.emojis,f=a.message,g=a.reactions,j=a.reactionsV2,o=a.renderEmojis;a=a.threadKey;f=f.messageId;j=j!=null?j.map(function(a){return(k||(k=d("I64"))).to_int32(a.count)}).reduce(function(a,b){return a+b},0):0;var p=c("useIsReactionDialogEnabled")(a);j=j>1?j:b;var q=j>1;b=e.map(function(a,b){var f=q||b!==e.length-1,g=d("MWChatReactionsUtils").isHeart(a[0]);return l.jsx("div",{className:(i||(i=c("stylex")))(m.emoji,p?m.emojiWithCursor:!1,f?m.emojiMargin:!1),children:l.jsx("div",{className:i(g?m.scaleHeartEmoji:!1),children:o?o(a,16,"messenger_reaction_emoji_"+a[0]):l.jsx(c("MWChatReactionEmoji"),{emoji:a,size:16,testid:void 0})})},String(b))});b=l.jsxs("div",{className:"x6s0dn4 x2bj2ny x1a2cdl4 xnhgr82 x1qt0ttw xgk8upj x10vwrwz x78zum5 xl56j7k x4p5aij x19um543 x1j85h84 x1m6msm xp4054r",role:"none",children:[b,q?l.jsx(n,{reactionCount:j}):null]});return p?l.jsx(c("MWXTooltip.react"),{align:"middle",label:h._("__JHASH__pugXv5G1XoG__JHASH__"),position:"above",tooltip:l.jsx(c("MWV2ChatReactionsTooltip.react"),{messageId:f,reactions:g,threadKey:a}),children:b}):b}a.displayName=a.name+" [from "+f.id+"]";function n(a){a=a.reactionCount;a=c("intlSummarizeNumber")(a);var b=a.length;return l.jsx("div",{className:"xi81zsa x1ncwhqj x14ju556 xdhweic x150jy0e x1e558r4 x2b8uid",role:"none",style:{width:b+"ch"},children:a})}n.displayName=n.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWPMessageFooter.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i.Children,l={container:{backgroundColor:"x1eb86dx",display:"x78zum5",height:"xmix8c7",justifyContent:"x13a6bvl",position:"x1n2onr6",width:"xh8yej3",zIndex:"x1vjfegm",$$css:!0},items:{display:"x78zum5",transform:"x11z5cog",$$css:!0}};function a(a){var b=a.children,d=a.itemsXstyle,e=a.outgoing;a=a.xstyle;b=k.toArray(b).filter(Boolean);return b.length===0?null:j.jsxs("div",{className:(h||(h=c("stylex")))(l.container,a),role:"none",children:[b.map(function(a,b){return j.jsx("div",{className:(h||(h=c("stylex")))(l.items,d),role:"none",children:a},""+b)}),e?null:j.jsx("div",{className:"x1ohifd9 x1c4vz4f xs83m0k",role:"none"})]})}a.displayName=a.name+" [from "+f.id+"]";g.MWPMessageFooter=a}),98);
__d("MWPMessageLoggingWrapper.react",["CometHeroInteractionWithDiv.react","MWChatInteraction","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react");function a(a){var b=a.children,e=a.messageId,f=a.optimisticMessageId;a=a.xstyle;e=d("MWChatInteraction").get(e);f=d("MWChatInteraction").get(f);e=(e=e)!=null?e:f;if(e==null)return j.jsx("div",{className:(h||(h=c("stylex")))(a),children:b});else return j.jsx(c("CometHeroInteractionWithDiv.react"),{interactionDesc:"MESSAGE_RENDER",interactionUUID:e,pageletName:"Message",xstyle:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ChatUnsupportedMessage.react",["fbt","FBLogger","MWV2TombstonedMessage.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){a=a.isOutgoing;c("FBLogger")("messenger_browser_clients").warn("Unsupported message type");var b=h._("__JHASH__pL9gn5HLY3n__JHASH__");return j.jsx(c("MWV2TombstonedMessage.react"),{isOutgoing:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g.MWV2ChatUnsupportedMessage=a}),226);
__d("MWMessageRowMessageComponent.react",["CometErrorBoundary.react","GroupsCometChatsEngagementLogger","I64","Int64Hooks","LSMessagingThreadTypeUtil","MWBlockedTombstoneMessage.react","MWBlockingProtectionLogging","MWChatEntityUnsupportedXMA.react","MWClickedMessageContext.react","MWGroupBlockingProtectionUtils","MWMessageListAttachmentContainer.react","MWMessageReactionsContainer.react","MWPBaseMessage.react","MWPMessageFooter.react","MWPMessageIsReply","MWPMessageLoggingWrapper.react","MWPMessageReactions.react","MWV2ChatBubbleContainer.react","MWV2ChatEmoji.react","MWV2ChatErrorBubble.react","MWV2ChatText.react","MWV2ChatUnsentMessage.react","MWV2ChatUnsupportedMessage.react","MWV2MessageTimestampTooltip.react","MWXPressable.react","MetaConfig","ReQL","asyncToGeneratorRuntime","cr:120","gkx","justknobx","promiseDone","react","useIsMultiReactionEnabled","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));e=j;var l=e.memo,m=e.useEffect;function a(a){var e=a.hasClickState,f=e===void 0?!1:e,g=a.hasMessageEmphasisRing;e=a.isFirstMessageInGroup;var j=a.isLastMessageInGroup,l=a.isSearchPluginAttachment,n=a.isSecureMessage,o=a.mediaRenderQpl,p=a.message,q=a.navigateToRouteForMediaViewer,r=a.nextMessage,s=a.offlineAttachmentId,t=a.outgoing,u=a.prevMessage,v=a.reactions,w=a.reactionsV2,x=a.renderAttachment;a=a.threadType;var y=c("MWClickedMessageContext.react").useHook(),z=y.clickedMessageId,A=y.fetchMessageSeenCount,B=y.hasError,C=y.setClickedMessageId,D=(h||(h=c("useReStore")))(),E=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a),F=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(p.threadKey),G=c("MWPMessageIsReply")(p),H=d("Int64Hooks").useCallbackInt64(function(){if(window.getSelection().toString()!=="")return;c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(D.tables.threads).getKeyRange(p.threadKey))),b=a==null?null:yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(D.tables.community_folders).getKeyRange(a.parentThreadKey));a!=null&&b!=null&&d("GroupsCometChatsEngagementLogger").log({action:"tap",client_extras:{mid:p.messageId},community_id:(i||(i=d("I64"))).to_string(b.folderId),event:"render_seen_count",group_id:i.to_string(b.fbGroupId),source:"message_bubble",surface:"thread_view",thread_id:i.to_string(a.threadKey)});if(z===p.messageId&&!B)return C(null);else return A(p.threadKey,p.messageId,b)})())},[D,z,p.messageId,p.threadKey,B,C,A]),I=d("MWBlockingProtectionLogging").useLogTapToReviewAction(p);m(function(){o==null?void 0:o.addPoint("render-message-row-message-component",{bool:{is_chat_entity_thread:(i||(i=d("I64"))).to_string(p.threadKey)===c("MetaConfig")._("83"),is_message_row_message_componentrender_attachment_prop_set:x!=null,is_search_plugin:l,is_secure_message:n}})},[l,n,o,p.threadKey,x]);return k.jsx(c("CometErrorBoundary.react"),{fallback:function(){return k.jsx(c("MWV2ChatErrorBubble.react"),{isOutgoing:t,isReply:G})},children:k.jsx(c("MWPBaseMessage.react"),{checkEmoticon:!0,isFirstMessageInGroup:e,isLastMessageInGroup:j,isSearchPluginAttachment:l,isSecureMessage:n,mediaRenderQpl:o,message:p,nextMessage:r,outgoing:t,prevMessage:u,reactions:v,reactionsV2:w,renderAttachment:function(a,b,e){if(l){o==null?void 0:o.endSuccess();return null}return x!=null&&n?x(p,u,r,t,e,o):(i||(i=d("I64"))).to_string(p.threadKey)===c("MetaConfig")._("83")&&!t&&c("gkx")("5131")?k.jsx(c("MWChatEntityUnsupportedXMA.react"),{mediaRenderQpl:o,nextMessage:r,prevMessage:u}):k.jsx(c("MWMessageListAttachmentContainer.react"),{connectBottom:b,connectTop:a,hasEmphasisRing:g,hasText:e,mediaRenderQpl:o,message:p,navigateToRouteForMediaViewer:q,outgoing:t})},renderEmoji:function(){return k.jsx(c("MWV2ChatEmoji.react"),{hasEmphasisRing:g,isSecureMessage:n,message:p})},renderMessageBubble:function(a,b,d,e){return k.jsx(c("MWV2ChatBubbleContainer.react"),{connectBottom:d,connectTop:b,hasEmphasisRing:g,message:p,outgoing:t,precedesXMA:e,children:k.jsx(c("MWV2ChatText.react"),{isSecureMessage:n,message:p,outgoing:t})})},renderMessageContainer:function(a,d){var e;e=k.jsx(c("MWPMessageLoggingWrapper.react"),{messageId:p.messageId,optimisticMessageId:(e=s)!=null?e:p.offlineThreadingId,xstyle:d,children:E&&!c("justknobx")._("641")&&b("cr:120")?k.jsx(b("cr:120"),{message:p,children:a}):k.jsx(c("MWV2MessageTimestampTooltip.react"),{message:p,children:a})});return f?k.jsx(c("MWXPressable.react"),{onPress:H,overlayDisabled:!0,xstyle:d,children:e}):e},renderMessageFooter:function(){if(F)return null;var a=w!=null&&w.length>0;return k.jsx(d("MWPMessageFooter.react").MWPMessageFooter,{outgoing:t,children:!a&&v.length<1?null:k.jsx(d("MWPMessageReactions.react").MWPMessageReactions,{message:p,outgoing:t,reactions:v,reactionsV2:a?w:void 0,children:function(b,d,e,f,g){return k.jsx(c("MWMessageReactionsContainer.react"),{count:d,emojis:b,message:f,reactions:e,reactionsV2:a?w:void 0,threadKey:g})}})})},renderMessageFromBlockee:d("MWGroupBlockingProtectionUtils").useShouldEnableBlockingProtection(p.threadKey)?function(a){var b=function(){a(),I()};return k.jsx(d("MWBlockedTombstoneMessage.react").MWBlockedTombstoneMessage,{isLastMessageInGroup:j,messageId:p.messageId,onClick:b,source:d("MWBlockedTombstoneMessage.react").MWBlockedTombstoneMessageSource.ORIGINAL_MESSAGE})}:void 0,renderUnsentMessage:function(){return k.jsx(c("MWV2MessageTimestampTooltip.react"),{message:p,children:k.jsx(d("MWV2ChatUnsentMessage.react").MWV2ChatUnsentMessage,{isSecureMessage:n,message:p,outgoing:t})})},renderUnsupportedMessage:function(){return k.jsx(c("MWV2MessageTimestampTooltip.react"),{message:p,children:k.jsx(d("MWV2ChatUnsupportedMessage.react").MWV2ChatUnsupportedMessage,{isOutgoing:t})})}})})}a.displayName=a.name+" [from "+f.id+"]";e=l(a);g.MWMessageRowMessageComponent=e}),98);
__d("MWMessageSearchPluginMustache.react",["BaseView.react","CurrentUser","IGDWebUtils","MWPMessageListColumn.react","MWSearchPluginUtils","MWXPressable.react","MWXText.react","MessengerWebUXLogger","react","useMWPGetAttachmentCTA","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useCallback,k=b.useMemo,l={root:{marginStart:"x16n37ib",$$css:!0}};function a(a){var b=a.attachment,e=a.botResponseId,f=a.dialogResource,g=a.flowInstanceId;a=a.isSearchSingleBubblePluginAttachment;a=a===void 0?!1:a;var h=b.attachmentCta1Id;b=b.attachmentCta2Id;var m=c("useMWPGetAttachmentCTA")(h);h=c("useMWPGetAttachmentCTA")(a?h:b);var n=d("MWSearchPluginUtils").useSearchPluginSources(h==null?void 0:h.nativeUrl);b=d("IGDWebUtils").isInstagramWebSupportedApp(Number(c("CurrentUser").getAppID()));f=c("useMWXLazyDialog")(f);var o=f[0];f=b?"highlight":"blueLink";b=b?"bodyLink4":"body4";var p=k(function(){var a;return{extraData:{botResponseId:(a=e)!=null?a:""},flowInstanceId:g}},[e,g]),q=c("MessengerWebUXLogger").useImpressionLoggerRef(babelHelpers["extends"]({eventName:"search_plugin_attachment_rendered"},p)),r=c("MessengerWebUXLogger").useInteractionLogger(),s=j(function(){r==null?void 0:r(babelHelpers["extends"]({eventName:"search_plugin_see_more"},p))},[r,p]),t=j(function(){n!=null&&(r==null?void 0:r(babelHelpers["extends"]({eventName:"search_plugin_see_sources"},p)),o({botResponseId:e,sources:n}))},[e,p,r,o,n]);return i.jsxs(c("BaseView.react"),{ref:q,xstyle:l.root,children:[i.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:4}),a?i.jsx("div",{className:"x78zum5 x1q0g3np",children:i.jsx(c("MWXPressable.react"),{onPress:t,overlayDisabled:!0,children:i.jsx(c("MWXText.react"),{color:f,type:b,children:h!=null&&h.title})})}):i.jsxs("div",{className:"x78zum5 x1q0g3np",children:[i.jsx(c("MWXPressable.react"),{linkProps:{url:m==null?void 0:m.actionUrl},onPress:s,overlayDisabled:!0,children:i.jsx(c("MWXText.react"),{color:f,type:b,children:m!=null&&m.title})}),i.jsx(c("MWXPressable.react"),{children:i.jsx(c("MWXText.react"),{color:"primary",type:"bodyLink4",children:"\xa0\xb7\xa0"})}),i.jsx(c("MWXPressable.react"),{onPress:t,overlayDisabled:!0,children:i.jsx(c("MWXText.react"),{color:f,type:b,children:h!=null&&h.title})})]}),i.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:4})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMustacheTextImpl.react",["MWPMessageListColumn.react","MWXLink.react","MWXText.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||c("react"),k={outgoing:{alignSelf:"xpvyfi4",$$css:!0},row:{marginTop:"x1anpbxc",marginBottom:"xyorhqc",$$css:!0}};function a(a){var b=a.label,e=a.onClick;a=a.outgoing;return j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnWithGutters,{shrinkwrap:!0,children:j.jsx("div",{className:(i||(i=c("stylex")))(k.row,a&&k.outgoing),children:e!=null?j.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:j.jsx(c("MWXLink.react"),{onClick:e,children:b})}):j.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:b})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMustacheTextInformTreatment.react",["fbt","$InternalEnum","MWCMElectionFactLabelDialog.entrypoint","MWCMElectionInformTreatmentDialog.entrypoint","MWCMInformTreatmentGenAITransparencyDialog.entrypoint","MWMustacheTextImpl.react","MessengerWellbeingInformTreatmentFalcoEventLogger","gkx","justknobx","qex","react","useMWInformTreatmentFalcoEventLogger","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||c("react"),k=b("$InternalEnum")({SEE_AI_INFO:"See AI info",SEE_ELECTION_INFO:"See election info"});function l(a){var b=a.messageId;a=a.outgoing;b=c("useMWXEntryPointDialog")(c("MWCMElectionInformTreatmentDialog.entrypoint"),{message_id:b});var d=b[0];return j.jsx(c("MWMustacheTextImpl.react"),{label:h._("__JHASH__8dc_hiLyYbc__JHASH__"),onClick:function(){return d({})},outgoing:a})}l.displayName=l.name+" [from "+f.id+"]";function m(a){var b=a.label,e=a.message;a=a.outgoing;var f=c("useMWXEntryPointDialog")(c("MWCMInformTreatmentGenAITransparencyDialog.entrypoint"),{}),g=f[0],h=c("useMWInformTreatmentFalcoEventLogger")({message:e});return j.jsx(c("MWMustacheTextImpl.react"),{label:b,onClick:function(){h("view_info_click",{name:d("MessengerWellbeingInformTreatmentFalcoEventLogger").MWInformTreatmentEventName.AI_GENERATED_CONTENT,type:"media_label"}),g({})},outgoing:a})}m.displayName=m.name+" [from "+f.id+"]";function n(a){var b=a.label,d=a.messageId;a=a.outgoing;d=c("useMWXEntryPointDialog")(c("MWCMElectionFactLabelDialog.entrypoint"),{message_id:d});var e=d[0];return j.jsx(c("MWMustacheTextImpl.react"),{label:b,onClick:function(){return e({})},outgoing:a})}n.displayName=n.name+" [from "+f.id+"]";function a(a){var b,d=a.isPublicCMThread,e=a.message;a=a.outgoing;var f=e.metadataDataclass!=null?JSON.parse(e.metadataDataclass):null;if(f==null)return null;b=(b=f.mustache_cta)==null?void 0:b.title;if(d&&((d=f.misinfo_metadata)==null?void 0:d.has_misinfo)&&c("justknobx")._("2910")&&c("gkx")("2872"))return j.jsx(l,{messageId:e.messageId,outgoing:a});else if(c("qex")._("1581")===!0&&b===k.SEE_AI_INFO)return j.jsx(m,{label:b,message:e,outgoing:a});else if(c("gkx")("6396")&&b===k.SEE_ELECTION_INFO)return j.jsx(n,{label:b,messageId:e.messageId,outgoing:a});return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWMustacheText",["fbt","I64","LSIntEnum","LSMessageTakedownState","MAWGetIsMediaDownloadStatusEnabled","MAWMediaDownloadStatusUIStateType","MWMustacheTextImpl.react","MWMustacheTextInformTreatment.react","MessagingAttachmentType","cr:10287","cr:10288","react","useGetMediaGroupInformation","useGroupsCometCMDisabledChatEntryPointDialog","useMAWMediaDownloadStatusUIState","useMWPGetAttachments"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||d("react");function m(a){var e=a.attachment,f=a.isSecureThread,g=a.mediaRenderQpl;a=a.outgoing;var i=(j||(j=d("I64"))).equal(e.attachmentType,(k||(k=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA));f=c("useMAWMediaDownloadStatusUIState")(f&&!i&&d("MAWGetIsMediaDownloadStatusEnabled").getIsMediaDownloadStatusEnabled()?e:null,g);if(f!=null&&d("MAWMediaDownloadStatusUIStateType").isErrorState(f)&&b("cr:10288"))return l.jsx(b("cr:10288"),{attachment:e,downloadStatusUIState:f,mediaRenderQpl:g,outgoing:a});i=e.mustacheText;return i==null||i===""?null:l.jsx(c("MWMustacheTextImpl.react"),{label:h._("__JHASH__fTQoFWqjgLD__JHASH__",[h._param("quoted text",i)]),outgoing:a})}m.displayName=m.name+" [from "+f.id+"]";function n(a){var b=a.outgoing,d=a.threadID,e=!0;a=c("useGroupsCometCMDisabledChatEntryPointDialog")({isGeoBlocked:e,threadID:d});var f=a[0];return l.jsx(c("MWMustacheTextImpl.react"),{label:h._("__JHASH__P-dEPoA1cwy__JHASH__"),onClick:function(){return f({isGeoBlocked:e,threadID:d})},outgoing:b})}n.displayName=n.name+" [from "+f.id+"]";function a(a){var e,f=a.isPublicCMThread,g=a.isSecureThread,h=a.mediaRenderQpl,i=a.message;a=a.outgoing;e=(e=c("useMWPGetAttachments")(i))==null?void 0:e[0];var o=c("useGetMediaGroupInformation")(i,g,h),p=i.takedownState!=null&&(j||(j=d("I64"))).equal(i.takedownState,(k||(k=d("LSIntEnum"))).ofNumber(c("LSMessageTakedownState").GEO_BLOCKED));if(p)return l.jsx(n,{outgoing:a,threadID:(j||(j=d("I64"))).to_string(i.threadKey)});if(i.metadataDataclass!=null)return l.jsx(c("MWMustacheTextInformTreatment.react"),{isPublicCMThread:f,message:i,outgoing:a});else if(o!=null&&o.mediaDownloadErrorsCount>0&&b("cr:10287")!=null)return l.jsx(b("cr:10287"),{mediaGroupInfo:o,mediaRenderQpl:h,outgoing:a});else if(e!=null)return l.jsx(m,{attachment:e,isSecureThread:g,mediaRenderQpl:h,outgoing:a});return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWPinnedMessageDropdownButton.react",["fbt","JSResourceForInteraction","MWXIconDots3Horizontal","MWXIconStrict.react","MWXLazyPopoverTrigger.react","MWXPressable.react","react","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||d("react"),l={button:{borderTopStartRadius:"xfh8nwu",borderTopEndRadius:"xoqspk4",borderBottomEndRadius:"x12v9rci",borderBottomStartRadius:"x138vmkv",height:"x10w6t97",width:"x1td3qas",$$css:!0},centered:{alignItems:"x6s0dn4",display:"x78zum5",justifyContent:"xl56j7k",$$css:!0},container:{height:"x5yr21d",paddingStart:"xurb0ha",$$css:!0},hidden:{visibility:"xlshs6z",$$css:!0}},m=c("JSResourceForInteraction")("MWPinnedMessageItemHoverDropdownMenu.react").__setRef("MWPinnedMessageDropdownButton.react");function a(a){var b=a.hidden,d=a.isSecureMessage,e=a.isSecureThread;a=a.message;return k.jsx("div",{className:(i||(i=c("stylex")))(l.container,l.centered,b&&l.hidden),children:k.jsx(c("MWXLazyPopoverTrigger.react"),{popoverProps:{isSecureMessage:d,isSecureThread:e,message:a},popoverResource:m,children:function(a,b){return k.jsx(c("MWXPressable.react"),{"aria-label":h._("__JHASH__2-Q8CjJAjMD__JHASH__"),onPress:b,overlayRadius:"inherit",ref:a,xstyle:[l.button,l.centered],children:k.jsx(c("MWXIconStrict.react"),{color:"primary",icon:c("MWXIconDots3Horizontal"),size:16})})}})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("useMWIsXMARoom",["ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=(h||(h=c("useReStore")))(),e=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(b.tables.attachments).getKeyRange(a.threadKey,a.messageId)},[b,a],f.id+":27");return(e==null?void 0:e.defaultCtaType)==="xma_web_url"&&(e==null?void 0:e.attachmentLoggingType)==="xma_open_native_rooms_invite"}g["default"]=a}),98);
__d("MWPinnedMessageRowFooterNUXWrapperRequireNUX.react",["MWMessageListDisplayContext.react","nux:344","react","useMWIsXMARoom","withCometPlaceholder"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=b("nux:344")==null?void 0:b("nux:344")("WEB_MSGR_PINNED_MESSAGES_NUX");function a(a){var b=a.isLastMessage,e=a.isOutgoing;a=a.message;var f=d("MWMessageListDisplayContext.react").useMWMessageListDisplayContext();f=f.isPinnedMessageList;var g=a.textHasLinks;a=c("useMWIsXMARoom")(a);e=!e&&(g||a)&&b&&!f;return!e?null:j?i.jsx(j,{}):null}a.displayName=a.name+" [from "+f.id+"]";e=d("withCometPlaceholder").withCometPlaceholder(a);g["default"]=e}),98);
__d("useAttachmentsProvider",["MAWMsg","cr:960","qex","useIsSecureMessage","useMAWSeparateReadsSelector","useMWPGetAttachments","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){var f=(h||(h=c("useReStore")))();f=c("useIsSecureMessage")(f,a,{fallbackIsSecure:e});var g=c("useMWPGetAttachments")(a),i=b("cr:960")(a,f);g=d("useMAWSeparateReadsSelector").useMAWSeparateReadsArraySelector("Attachment",i,g,e&&f&&!d("MAWMsg").isOptimistic(a)&&!d("MAWMsg").isXMAMsg(a)&&((i=c("qex")._("60"))!=null?i:!1),function(a,b){return a.attachmentFbid.localeCompare(b.attachmentFbid)});return g}g["default"]=a}),98);
__d("MWMessageRowBody.react",["CometErrorBoundary.react","CometPlaceholder.react","I64","JSResourceForInteraction","LSMessagingThreadTypeUtil","MWAttachmentContext","MWClickedMessageContext.react","MWExtraPinnedMessagePadding.react","MWGroupBlockingProtectionUtils","MWMessageListDisplayContext.react","MWMessageListLoggingContext","MWMessagePromptPopoverTrigger.react","MWMessageReplyRow.react","MWMessageRowActions.react","MWMessageRowMessageComponent.react","MWMessageSearchPluginMustache.react","MWMustacheText","MWPBaseMessageListRow.react","MWPIsMessageUnsupported","MWPMessageIsReply","MWPMessageListColumn.react","MWPMessageParsingUtils","MWPMessageReactions.react","MWPinnedMessageDropdownButton.react","MWPinnedMessageOverlay.react","MWPinnedMessageRowFooterNUXWrapperRequireNUX.react","MWSearchPluginUtils","MWV2ChatErrorBubble.react","MWV2MessageProfilePhoto.react","cr:3395","deferredLoadComponent","isMWEditedMessage","qex","react","requireDeferredForDisplay","stylex","useAttachmentsProvider","useGetMediaGroupInformation","useIsMultiReactionEnabled","useMAWSeparateReadsSelector"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||d("react"),l=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MWMessageReactionsContainerV2.react").__setRef("MWMessageRowBody.react")),m=c("deferredLoadComponent")(c("requireDeferredForDisplay")("MWPEditedMessageHistoryList.react").__setRef("MWMessageRowBody.react")),n={multiReactContainer:{display:"x78zum5",flexDirection:"x1q0g3np",$$css:!0},multiReactContainerOutgoing:{alignSelf:"xpvyfi4",$$css:!0}};function a(a){var e=a.containerThreadKey,f=a.focused,g=a.hasClickState,i=a.hasMessageEmphasisRing,p=a.hovered,q=a.incoming,r=a.isDialogOpened,s=a.isFirstMessageInGroup,t=a.isGroupThread,u=a.isModal,v=a.isSecureMessage,w=a.mediaRenderQpl,x=a.message,y=a.navigateToRouteForMediaViewer,z=a.nextMessage,A=a.onRenderError,B=a.prevMessage,C=a.renderAttachment,D=a.shouldUseReactionsV2,E=a.threadType;a=d("MWMessageListDisplayContext.react").useMWMessageListDisplayContext();var F=a.isPinnedMessageList,G=a.isStandardMessageList;a=d("MWPMessageReactions.react").useReactions(x);var H=b("cr:3395")(x,v),I=d("MWPMessageReactions.react").useReactionsV2(x),J=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(x.threadKey),K=d("MWMessageListLoggingContext").useFlowInstanceId(),L=c("MWClickedMessageContext.react").useHook();L=L.clickedMessageId;var M=c("MWPMessageIsReply")(x),N=c("isMWEditedMessage")(x),O=d("MWGroupBlockingProtectionUtils").useMWShouldHideReply(x),P=z==null,Q=!q;q=q&&t;var R=d("LSMessagingThreadTypeUtil").isArmadilloSecure(E),S=d("LSMessagingThreadTypeUtil").isPublicCMThread(E),T=c("useGetMediaGroupInformation")(x,R,w),U=F||d("MWPMessageParsingUtils").isEndOfGroup(x,z)||(T==null?void 0:T.groupsLastMessage)!=null&&d("MWPMessageParsingUtils").isEndOfGroup(T.groupsLastMessage,(T=T.groupsNextMessage)!=null?T:void 0),V=d("useMAWSeparateReadsSelector").useMAWSeparateReadsArraySelector("Reaction",H,a,v&&((T=c("qex")._("99"))!=null?T:!1),o);H=c("useAttachmentsProvider")(x,R);a=H.length>0;T=a&&d("MWSearchPluginUtils").isSearchPlugin(H[0]);a=a&&d("MWSearchPluginUtils").isSearchSingleBubblePlugin(H[0]);var W=c("MWPIsMessageUnsupported")(x,H),X=J&&I.some(function(a){return(j||(j=d("I64"))).to_int32(a.count)>0})||W;W=(V.length>0||I.length>0)&&!J;return k.jsxs(c("MWAttachmentContext").Provider,{value:H,children:[s&&!q?k.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:2}):null,M&&!O&&k.jsx(c("MWMessageReplyRow.react"),{isGroupThread:t,isSecureMessage:v,message:x,outgoing:Q,threadType:E}),N&&k.jsx(c("CometPlaceholder.react"),{fallback:null,children:k.jsx(m,{editCount:x.editCount,isReply:M,isSecureMessage:v,msgId:x.messageId,outgoing:Q,threadType:E})}),k.jsx(d("MWPBaseMessageListRow.react").MWPBaseMessageListRowBody,{hasMessageEmphasisRing:i,hasReactions:W,message:x,outgoing:Q,renderGutterItem:function(){return k.jsx("div",{className:"x1xc55vz",role:"none"})},renderMessageActions:function(a){return G?k.jsx(d("MWMessageRowActions.react").MWMessageRowActions,{ariaHidden:u===!1,containerThreadKey:e,focused:f||r||u,hidden:a,hovered:p,isSecureMessage:v,message:x,outgoing:Q,shouldHideHoverMenuReact:X,threadType:E}):F?k.jsx(c("MWPinnedMessageDropdownButton.react"),{hidden:!p&&!f,isSecureMessage:v,isSecureThread:R,message:x}):null},renderMultiReactions:function(){if(x.isUnsent)return null;var a=I!=null&&I.length>0;return!J||!a?null:k.jsx("div",{className:(h||(h=c("stylex")))(n.multiReactContainer,Q?n.multiReactContainerOutgoing:!1),children:k.jsx(d("MWPMessageReactions.react").MWPMessageReactions,{message:x,outgoing:Q,reactions:V,reactionsV2:I,children:function(a,b,d,e,f,g,h,i){return k.jsx(c("CometPlaceholder.react"),{fallback:null,children:k.jsx(l,{emojis:a,isMultiReactRowExpanded:h,message:e,onOpenDialog:g,outgoing:Q,reactionsV2:I,toggleMultiReactionRowExpansion:i})})}})})},renderProfile:function(){return k.jsx(c("MWV2MessageProfilePhoto.react"),{ariaHidden:t?!u:!0,display:U?"visible":"hidden",isGroupThread:t,message:x})},children:k.jsxs(c("CometErrorBoundary.react"),{fallback:function(a){return k.jsx(c("MWV2ChatErrorBubble.react"),{isOutgoing:Q,isReply:M})},onError:A,children:[k.jsx(c("MWMessagePromptPopoverTrigger.react"),{attachments:H,message:x,children:F?k.jsx(d("MWMessageRowMessageComponent.react").MWMessageRowMessageComponent,{hasClickState:g,hasMessageEmphasisRing:i,isFirstMessageInGroup:s,isLastMessageInGroup:U,isSearchPluginAttachment:T,isSecureMessage:v,mediaRenderQpl:w,message:x,nextMessage:z,offlineAttachmentId:H&&H.length>0?H[0].offlineAttachmentId:null,outgoing:Q,prevMessage:B,reactions:V,reactionsV2:D?I:void 0,renderAttachment:C,threadType:E}):k.jsx(c("MWPinnedMessageOverlay.react"),{alreadyRenderedPin:M,message:x,outgoing:Q,children:k.jsx(d("MWMessageRowMessageComponent.react").MWMessageRowMessageComponent,{hasClickState:g,hasMessageEmphasisRing:i,isFirstMessageInGroup:s,isLastMessageInGroup:U,isSearchPluginAttachment:T,isSecureMessage:v,mediaRenderQpl:w,message:x,navigateToRouteForMediaViewer:y,nextMessage:z,offlineAttachmentId:H&&H.length>0?H[0].offlineAttachmentId:null,outgoing:Q,prevMessage:B,reactions:V,reactionsV2:D?I:void 0,renderAttachment:C,threadType:E})})}),(T||a)&&k.jsx(c("MWMessageSearchPluginMustache.react"),{attachment:H[0],botResponseId:x.botResponseId,dialogResource:c("JSResourceForInteraction")("MWMessageSearchPluginSourcesDialog.react").__setRef("MWMessageRowBody.react"),flowInstanceId:K.current,isSearchSingleBubblePluginAttachment:a})]})}),k.jsx(c("MWPinnedMessageRowFooterNUXWrapperRequireNUX.react"),{isLastMessage:P,isOutgoing:Q,message:x}),k.jsx(c("MWMustacheText"),{isPublicCMThread:S,isSecureThread:R,mediaRenderQpl:w,message:x,outgoing:Q}),k.jsx(c("MWExtraPinnedMessagePadding.react"),{nextMessage:z}),g&&L===x.messageId?k.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:6}):U&&!P?k.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnVerticalRhythm,{height:6}):null]})}a.displayName=a.name+" [from "+f.id+"]";function o(a,b){return(j||(j=d("I64"))).compare(a.actorId,b.actorId)}g["default"]=a}),98);
__d("MWMessageRowFooter.react",["MWClickToReavealMustachTextInPinnedMessageList.react","MWMessageDeliveryStatus","MWMessageListDisplayContext.react","MWPBaseMessageListRow.react","MWV2MessageEndOfGroupContent.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.hasClickState,e=a.incoming,f=a.isBroadcastThread,g=a.isFromBlockedContact,h=a.isLastMessage,j=a.message,k=a.nextMessage,l=a.outgoing,m=a.status;a=d("MWMessageListDisplayContext.react").useMWMessageListDisplayContext();var n=a.isPinnedMessageList;a=a.isStandardMessageList;if(a)return i.jsx(d("MWPBaseMessageListRow.react").MWPBaseMessageListRowFooter,{message:j,nextMessage:k,showContent:b||d("MWMessageDeliveryStatus").isAlwaysShownStatus(m),children:function(){return i.jsx(d("MWV2MessageEndOfGroupContent.react").MWV2MessageEndOfGroupContent,{alignLeft:b&&e,hasTextBasedMessageReceipts:!0,isFromBlockedContact:g,isLastMessage:h,isOutgoing:l,isTextOnly:f,message:j,status:m})}});return n?g?i.jsx(c("MWClickToReavealMustachTextInPinnedMessageList.react"),{isLastMessage:h,message:j,nextMessage:k}):null:null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWHighlyForwardedIndicator.react",["fbt","LSMessagingThreadTypeUtil","MDSForwardStackSvgIcon.react","MWXText.react","coerceMessagingThreadTypeToLSThreadType","react","requireDeferred","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=c("requireDeferred")("MwbHighlyForwardedIndicatorImpressionFalcoEvent").__setRef("MWHighlyForwardedIndicator.react");function a(a){var b=a.forwardScore,e=a.mid,f=a.threadType;a=function(){k.onReady(function(a){a.log(function(){return{limit:b,mid:f!=null&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(f)?void 0:e,thread_type:f!=null?c("coerceMessagingThreadTypeToLSThreadType")(f):void 0}})})};a=c("useSinglePartialViewImpression")({onImpressionStart:a});return j.jsxs(j.Fragment,{children:[j.jsx(c("MDSForwardStackSvgIcon.react"),{color:"tertiary",size:16}),j.jsx("span",{className:"x1h0ha7o",children:j.jsx(c("MWXText.react"),{color:"tertiary",ref:a,type:"meta4",children:h._("__JHASH__hxhFsSrRndH__JHASH__")})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWPForwardedContent",["fbt","I64","LSIntEnum","MWPMessageAuthor.react","MessagingAttachmentType","ReQL","ReQLSuspense","mwpMessageHasAttachment","react","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l,m=(j||d("react")).useMemo;function n(a){if((k||(k=d("I64"))).equal(a.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA)))return a.defaultCtaType==="xma_web_url";else return!1}function o(a){if((k||(k=d("I64"))).equal(a.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE)))return!0;else return(k||(k=d("I64"))).equal(a.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").IMAGE))}function p(a,b,e){var g=(i||(i=c("useReStore")))(),j=a.messageId,p=a.threadKey,q=c("mwpMessageHasAttachment")(a),r=d("ReQLSuspense").useFirst(function(){if(q)return d("ReQL").fromTableAscending(g.tables.attachments).getKeyRange(p,j);else return d("ReQL").empty()},[g,j,p,q],f.id+":63");return m(function(){if(b)if(r!=null)if(n(r))return h._("__JHASH___8ZpqsY3Jrg__JHASH__");else if(o(r))return h._("__JHASH__INRUrq18hhv__JHASH__");else if((k||(k=d("I64"))).equal(r.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))return h._("__JHASH__Z71bv2q5yoA__JHASH__");else return h._("__JHASH__8h2fNslikTS__JHASH__");else return h._("__JHASH__8h2fNslikTS__JHASH__");else if(r!=null)if(e!=null)if(n(r))return h._("__JHASH__5GN3g82hBzH__JHASH__",[h._param("name",e)]);else if(o(r))return h._("__JHASH__NQwzfDxVOf0__JHASH__",[h._param("name",e)]);else if((k||(k=d("I64"))).equal(r.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))return h._("__JHASH__QvgCMGMfMHB__JHASH__",[h._param("name",e)]);else return h._("__JHASH__1jGDZrisR_E__JHASH__",[h._param("name",e)]);else if(n(r))return h._("__JHASH__QhCmPJ-QbeG__JHASH__");else if(o(r))return h._("__JHASH__vFSMWshNg-J__JHASH__");else if((k||(k=d("I64"))).equal(r.attachmentType,(l||(l=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").VIDEO)))return h._("__JHASH__U5_TMTE9DWx__JHASH__");else return h._("__JHASH__CmZMizVeMX7__JHASH__");else if(e!=null)return h._("__JHASH__1jGDZrisR_E__JHASH__",[h._param("name",e)]);else return h._("__JHASH__CmZMizVeMX7__JHASH__")},[b,r,e])}function a(a,b){var c=d("MWPMessageAuthor.react").useAuthorName();c=c[0];return p(a,b,c)}g.useTitle=a}),226);
__d("MWXIconForwardAction",["MWXSvgIcon","SVGIcon","cr:9157","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9157")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWForwardedContent.react",["BaseIsDecorativeContext","I64","MWHighlyForwardedIndicator.react","MWPForwardedContent","MWXIconForwardAction","MWXIconStrict.react","MWXRow.react","MWXRowItem.react","MWXText.react","MWXThreadThemeColor","gkx","justknobx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react"),k=c("justknobx")._("1649"),l=d("MWXThreadThemeColor").mwxThreadThemeColor("var(--chat-admin-text-color, var(--placeholder-text))");function a(a){var b=a.message,e=a.outgoing;a=a.threadType;e=d("MWPForwardedContent").useTitle(b,e);var f=b.forwardScore!=null?(i||(i=d("I64"))).to_int32(b.forwardScore):0;f=c("gkx")("24141")&&k!==0&&f>=k;f=f?j.jsx(c("MWHighlyForwardedIndicator.react"),{forwardScore:(i||(i=d("I64"))).to_string((f=b.forwardScore)!=null?f:(i||(i=d("I64"))).zero),mid:b.messageId,threadType:a}):j.jsxs(c("MWXRow.react"),{paddingHorizontal:0,paddingVertical:0,spacing:4,verticalAlign:"center",children:[j.jsx(c("MWXRowItem.react"),{children:j.jsx(c("BaseIsDecorativeContext").Provider,{value:!0,children:j.jsx(c("MWXIconStrict.react"),{color:l,icon:c("MWXIconForwardAction"),size:12})})}),j.jsx(c("MWXRowItem.react"),{children:j.jsx(c("MWXText.react"),{color:"tertiary",type:"meta4",children:j.jsx("span",{className:"x1aimgj9",children:e})})})]});return j.jsx("div",{className:"x6s0dn4 x78zum5 xg8j3zb x1nn3v0j",children:f})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPMessagePinnedText.react",["fbt","react","useMWPIsMessagePinned"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){var b=a.divider;a=a.message;a=c("useMWPIsMessagePinned")(a);var d=h._("__JHASH__hknrqEeMk6h__JHASH__");return a&&j.jsxs(j.Fragment,{children:[b!=null&&j.jsx("span",{className:"x1sdyfia",children:b}),j.jsx("span",{"aria-label":d,children:d})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWXIconForward",["MWXSvgIcon","SVGIcon","cr:10714","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:10714")),c("gkx")("23219"));g["default"]=a}),98);
__d("useMWReplySnippetContent",["fbt","Actor","I64","MWPMessageAuthor.react","useMWIsReplyToAuthor","useMWPIsMessagePinned"],(function(a,b,c,d,e,f,g,h){"use strict";var i;function a(a,b){var e=c("useMWPIsMessagePinned")(a),f=d("MWPMessageAuthor.react").useAuthorName();f=f[0];var g=d("Actor").useActor();g=g[0];g=g===(i||(i=d("I64"))).to_string(a.senderId);var j=c("useMWIsReplyToAuthor")(a);return!e||g||j?a.replySnippet:b?h._("__JHASH__lpeJtmI6peT__JHASH__").toString():h._("__JHASH__bGQxu-uwmpe__JHASH__",[h._param("name",f)]).toString()}g["default"]=a}),226);
__d("MWReplySnippet.react",["I64","LSIntEnum","LSMessageReplySourceTypeV2","LSMessagingThreadTypeUtil","MWEditedEyebrow.react","MWXIconForward","MWXIconForwardAction","MWXIconReply","MWXIconStrict.react","MWXRow.react","MWXRowItem.react","MWXText.react","MWXThreadThemeColor","ReQL","ReQLSuspense","isMWEditedMessage","react","useMWReplySnippetContent","useReStore","useStringWithSubstitutions"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||d("react"),m={separator:{paddingEnd:"x150jy0e",paddingStart:"x1e558r4",$$css:!0}},n=d("MWXThreadThemeColor").mwxThreadThemeColor("var(--chat-admin-text-color, var(--placeholder-text))");function o(a){a=a.replySourceType;if(a==null)return null;if((j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE))||(j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").STORY))||(j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").HIGHLIGHTS_TAB_POST_REPLY)))return l.jsx(c("MWXIconStrict.react"),{color:n,icon:c("MWXIconReply"),size:12});else if((j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FORWARD))||(j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").IG_STORY_SHARE))||(j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FB_STORY_SHARE)))return l.jsx(c("MWXIconStrict.react"),{color:n,icon:c("MWXIconForwardAction"),size:12});else if((j||(j=d("I64"))).equal(a,(k||(k=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").FB_STORY_MENTION)))return l.jsx(c("MWXIconStrict.react"),{color:n,icon:c("MWXIconForward"),size:12});return null}o.displayName=o.name+" [from "+f.id+"]";function a(a){var b=a.enableEditHistory;b=b===void 0?!0:b;var e=a.message;a=a.outgoing;var g=(h||(h=c("useReStore")))();a=c("useMWReplySnippetContent")(e,a);var i=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(g.tables.threads,["threadType"]).getKeyRange(e.threadKey).map(function(a){return a.threadType})},[g,e.threadKey],f.id+":101");i=i==null?!1:d("LSMessagingThreadTypeUtil").isArmadilloSecure(i);i=(i=d("useStringWithSubstitutions").useStringWithSubstitutions(i?a:null,e.threadKey))!=null?i:a;if(a==null||a.trim().length===0)return null;a=c("isMWEditedMessage")(e);return l.jsxs(c("MWXRow.react"),{paddingHorizontal:0,paddingTop:10,paddingVertical:4,spacing:4,testid:void 0,verticalAlign:"center",children:[l.jsx(c("MWXRowItem.react"),{children:l.jsx(o,{replySourceType:e==null?void 0:e.replySourceTypeV2})}),l.jsx(c("MWXRowItem.react"),{children:l.jsx(c("MWXText.react"),{color:"tertiary",type:"meta4",children:l.jsxs("span",{className:"x1aimgj9",children:[i,a&&l.jsx(d("MWEditedEyebrow.react").MWEditedEyebrow,{enableEditHistory:b,separatorStyle:m.separator})]})})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMessageRowHeader.react",["BaseMiddot.react","MWForwardedContent.react","MWMessageListDisplayContext.react","MWPBaseMessageRowHeader.react","MWPMessagePinnedText.react","MWReplySnippet.react","MWXText.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){var b=a.isCMThread,e=a.isFirstMessageInGroup,f=a.isGroupThread,g=a.isLastMessageInGroup,h=a.message,j=a.outgoing,k=a.threadType;a=d("MWMessageListDisplayContext.react").useMWMessageListDisplayContext();var l=a.isPinnedMessageList,m=a.isStandardMessageList;a=function(a){return i.jsx(c("MWXText.react"),{color:"secondary",type:"meta4",children:a})};return i.jsx(c("MWPBaseMessageRowHeader.react"),{alwaysRenderSenderName:l,isAnyCMThread:b,isFirstMessageInGroup:e,isGroupThread:f,isLastMessageInGroup:g,message:h,outgoing:j,renderForwardSnippet:function(){return i.jsx(c("MWForwardedContent.react"),{message:h,outgoing:j,threadType:k})},renderPinnedText:function(a,b){return m?i.jsx(c("MWPMessagePinnedText.react"),{divider:b&&i.jsx(c("BaseMiddot.react"),{}),message:h}):null},renderReplySnippet:function(){return i.jsx(c("MWReplySnippet.react"),{message:h,outgoing:j})},renderTextWrapper:function(a){return i.jsx(c("MWXText.react"),{color:"secondary",type:"meta4",children:a})},renderTimestamp:l?a:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEBRestoreGapUIWithEBCheck.react",["cr:9929"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=b("cr:9929")}),98);
__d("MWMessageRowMissingMessagesIndicator.react",["CometErrorBoundary.react","I64","MWEBRestoreGapUIWithEBCheck.react","MWPMessageListColumn.react","MWV2MessageRowSimple.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react"),k=(i||(i=d("I64"))).of_int32(5e3);function a(a){var b=a.lastEbMessageTime,e=a.message;a=a.nextMessage;e=b!=null&&(i||(i=d("I64"))).gt((i||(i=d("I64"))).sub(b,e.timestampMs),k)&&(a==null||(i||(i=d("I64"))).lt(b,a.timestampMs));return e===!0&&c("MWEBRestoreGapUIWithEBCheck.react")?j.jsx(c("MWV2MessageRowSimple.react"),{children:j.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:j.jsx(c("CometErrorBoundary.react"),{fallback:function(){return null},children:j.jsx(c("MWEBRestoreGapUIWithEBCheck.react"),{})})})}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMessageRowUnreadMessagesIndicator.react",["MWChatMessageUnreadIndicator.react","MWPMessageListColumn.react","MWV2MessageRowSimple.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.shouldRenderUnreadIndicator;return a===!0?i.jsx(c("MWV2MessageRowSimple.react"),{children:i.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnGrow,{children:i.jsx(c("MWChatMessageUnreadIndicator.react"),{})})}):null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useNextNonAdminMessage",["ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i=10;function a(a,b){var e=(h||(h=c("useReStore")))(),g=(b==null?void 0:b.isAdminMessage)===!0,j=d("ReQLSuspense").useFirst(function(){return g?d("ReQL").fromTableAscending(e.tables.messages.index("messageDisplayOrder"),["isAdminMessage","timestampMs","senderId"]).getKeyRange(a.threadKey).bounds({gt:d("ReQL").key(a.primarySortKey)}).take(i).filter(function(a){return!a.isAdminMessage}):d("ReQL").empty()},[e,g,a.primarySortKey,a.threadKey],f.id+":49");return g?j:b}g["default"]=a}),98);
__d("MWMessageRow.react",["BaseView.react","CometErrorBoundary.react","I64","Int64Hooks","LSIntEnum","LSMessagingThreadTypeUtil","MNLSXMALayoutType","MWCMThreadTypes.react","MWGroupBlockingProtectionUtils","MWMessageEditContext.react","MWMessageListAttachmentContainer.react","MWMessageListDisplayContext.react","MWMessageRowAdminMessage.react","MWMessageRowBody.react","MWMessageRowFooter.react","MWMessageRowHeader.react","MWMessageRowMissingMessagesIndicator.react","MWMessageRowUnreadMessagesIndicator.react","MWPActor.react","MWPMessageIsReply","MWPMessageListColumn.react","MWPMessageListRowWithKeyboardInteractions.react","MWPMessageParsingUtils","MWPMessageRowCalculateStatus.react","MWPThreadCapabilitiesContext","MWShowMessagePromptPopoverContext.react","MWThreadViewMediaRenderQpl","MWV2ChatErrorBubble.react","MWV2MessageRowSimple.react","MWV2MessageStartOfGroupContent.react","cr:3932","cr:7412","mwCMIsAnyCMThread","react","useMWMessageRowTheme","useMWPEditMessageDeemphasizer","useMWPGetAttachments","useNextNonAdminMessage"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react"));e=h;var l=e.memo,m=e.startTransition,n=e.useCallback,o=e.useEffect,p=e.useId,q=e.useState,r={adminMessageAttachment:{boxSizing:"x9f619",maxWidth:"x4ndzw7",minWidth:"xwj5yc2",paddingBottom:"xdvlbce",paddingStart:"x5ib6vp",paddingLeft:null,paddingRight:null,paddingEnd:"xc73u3c",paddingTop:"x1nn3v0j",$$css:!0}},s=k.memo(c("MWPMessageRowCalculateStatus.react"));function t(a){var b=a.message,c=a.nextMessage;a=babelHelpers.objectWithoutPropertiesLoose(a,["message","nextMessage"]);return k.jsx(s,babelHelpers["extends"]({message:d("Int64Hooks").usePickInt64(b,["senderId","isUnsent","threadKey","primarySortKey","timestampMs","messageId","isAdminMessage","sendStatusV2","groupId","groupIndex","groupSize"]),nextMessage:d("Int64Hooks").usePickInt64(c,["senderId","timestampMs","isAdminMessage"])},a))}t.displayName=t.name+" [from "+f.id+"]";function a(a){var e=a.containerThreadKey,f=a.domElementRef,g=a.hasMessageEmphasisRing,h=a.isMediaGroupLastMessage,l=a.isModal,s=a.isSecureMessage,u=a.lastEbMessageTime,v=a.message,w=a.navigateToRouteForMediaViewer,x=a.nextMessage,y=a.onRenderError,z=a.prevMessage,A=a.renderAttachment,B=a.shouldRenderUnreadIndicator,C=a.stopHoveringRef,D=a.threadType;a=a.useReactionsV2;var E=a===void 0?!1:a;a=d("MWMessageListDisplayContext.react").useMWMessageListDisplayContext();var F=a.isPinnedMessageList;a=a.isStandardMessageList;var G=d("MWPActor.react").useActor(),H=F||d("MWPMessageParsingUtils").isStartOfGroup(v,z),aa=F||d("MWPMessageParsingUtils").isEndOfGroup(v,x),ba=c("mwCMIsAnyCMThread")(D),I=d("MWCMThreadTypes.react").isBroadcastThread(D),J=d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(D),K=d("LSMessagingThreadTypeUtil").isGroup(D),L=d("LSMessagingThreadTypeUtil").isArmadilloSecure(D),ca=c("MWPMessageIsReply")(v),M=d("MWPThreadCapabilitiesContext").useMWPThreadCapabilitiesContext();M=M.seenCountV2Enabled;M=!v.isUnsent&&M;var N=M&&!J&&!d("LSMessagingThreadTypeUtil").isCMSubthread(D)&&!d("MWCMThreadTypes.react").isStandardCMThread(D),da=d("MWGroupBlockingProtectionUtils").useMWIsMessageSentByBlockedContact(v.senderId,v.threadKey),O=!F&&(i||(i=d("I64"))).equal(v.senderId,G);M=c("useNextNonAdminMessage")(v,x);var ea=M==null||h===!0,P=!O;F=q(!1);var Q=F[0],R=F[1];G=q(!1);var fa=G[0],S=G[1],T=n(function(a){return m(function(){return S(a)})},[S,m]),U=n(function(a){return m(function(){return R(a)})},[R,m]),V=p();F=q(!1);var W=F[0],X=F[1],ga=c("useMWMessageRowTheme")(),Y;G=c("useMWPGetAttachments")(v);F=G.length>0&&G[0].xmaLayoutType!=null&&(i||(i=d("I64"))).equal(G[0].xmaLayoutType,(j||(j=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").STANDARD_DXMA));G=G.length>0&&G[0].xmaLayoutType!=null&&(i||(i=d("I64"))).equal(G[0].xmaLayoutType,(j||(j=d("LSIntEnum"))).ofNumber(c("MNLSXMALayoutType").SHARED_STACK));var ha=d("LSMessagingThreadTypeUtil").isCMSubthread(D)&&v.subthreadKey!=null,ia=c("useMWPEditMessageDeemphasizer")(),Z=d("MWThreadViewMediaRenderQpl").useMediaRenderQpl(v,D),$=Z.mediaRenderQpl;Z=Z.messageRowRef;o(function(){$==null?void 0:$.addPoint("render-message-row")},[$]);v.isAdminMessage?Y=k.jsx(c("MWMessageRowAdminMessage.react"),{domElementRef:f,isDialogOpened:W,isFirstMessageInGroup:H,isFocused:Q,isModal:l,message:v,messageDomID:V,nextMessage:x,outgoing:O,prevMessage:z,setFocusedInTransition:U,setHoveredInTransition:T,setIsDialogOpened:X,stopHoveringRef:C}):F||G?Y=k.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{centered:!0,children:k.jsx(c("MWV2MessageRowSimple.react"),{children:k.jsx(c("BaseView.react"),{xstyle:ia,children:k.jsx(c("MWMessageListAttachmentContainer.react"),{connectBottom:!1,connectTop:!1,mediaRenderQpl:$,message:v,outgoing:O,xstyle:r.adminMessageAttachment})})})}):Y=k.jsx(d("MWShowMessagePromptPopoverContext.react").MWShowMessagePromptPopoverContextProvider,{children:k.jsx(d("MWMessageEditContext.react").MWMessageEditContextProvider,{children:k.jsxs(k.Fragment,{children:[k.jsx(c("MWMessageRowUnreadMessagesIndicator.react"),{shouldRenderUnreadIndicator:B}),H&&a?k.jsx(c("MWV2MessageStartOfGroupContent.react"),{message:v,prevMessage:z}):null,k.jsx(t,{isBroadcastChannel:J,isBroadcastThread:I,isLargeGroup:!1,isSecureGroupThread:L&&K,isSecureThread:L,message:v,nextMessage:M,children:function(a){return k.jsxs(c("MWPMessageListRowWithKeyboardInteractions.react"),{domElementRef:f,isDialogOpened:W,isFocused:Q,isModal:l,message:v,messageDomID:V,outgoing:O,setFocused:U,setHovered:T,setIsDialogOpened:X,stopHoveringRef:C,theme:ga,children:[k.jsx(c("MWMessageRowHeader.react"),{isCMThread:ba,isFirstMessageInGroup:H,isGroupThread:K,isLastMessageInGroup:aa,message:v,outgoing:O,threadType:D}),k.jsx(c("MWMessageRowBody.react"),{containerThreadKey:e,focused:Q,hasClickState:N,hasMessageEmphasisRing:g,hovered:fa,incoming:P,isDialogOpened:W,isFirstMessageInGroup:H,isGroupThread:K,isModal:l,isSecureMessage:s,mediaRenderQpl:$,message:v,navigateToRouteForMediaViewer:w,nextMessage:x,onRenderError:y,prevMessage:z,renderAttachment:A,shouldUseReactionsV2:E,threadType:D}),k.jsx(c("MWMessageRowFooter.react"),{hasClickState:N,incoming:P,isBroadcastThread:I,isFromBlockedContact:da,isLastMessage:ea,message:v,nextMessage:h===!0?void 0:x,outgoing:O,status:a})]})}}),H&&a&&ha&&v.subthreadKey!=null&&b("cr:7412")!=null?k.jsx(b("cr:7412"),{domElementRef:f,message:v,nextMessage:x,subthreadKey:v.subthreadKey}):null]})})});return k.jsx("div",{ref:Z,children:k.jsxs(c("CometErrorBoundary.react"),{fallback:function(){return k.jsx(c("MWV2ChatErrorBubble.react"),{isOutgoing:O,isReply:ca})},children:[Y,k.jsx(c("MWMessageRowMissingMessagesIndicator.react"),{lastEbMessageTime:u,message:v,nextMessage:x}),b("cr:3932")==null?null:k.jsx(b("cr:3932"),{})]})})}a.displayName=a.name+" [from "+f.id+"]";e=l(a);g.MWMessageRow=e}),98);
__d("MWCollapsibleAdminMessages.react",["fbt","BaseView.react","MWMessageRow.react","MWPMessageListColumn.react","MWV2ChatAdminMessage.react","MWV2MessageActionsVisibility.react","MWXLink.react","MWXText.react","ODS","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=i||(i=d("react")),l=i.useState,m={collapsed:{paddingTop:"xz9dl7a",paddingBottom:"xsag5q8",$$css:!0},expanded:{paddingBottom:"x1120s5i",paddingTop:"xz9dl7a",position:"x1n2onr6",zIndex:"x1vjfegm",$$css:!0}};function a(a){var b=d("MWV2MessageActionsVisibility.react").useStopHoveringRef(),e=a.messages,f=babelHelpers.objectWithoutPropertiesLoose(a,["messages"]);a=l(!1);var g=a[0],i=a[1];return k.jsx(d("MWPMessageListColumn.react").MWPMessageListColumnShrinkwrap,{centered:!0,children:k.jsxs(d("MWV2ChatAdminMessage.react").MWV2ChatAdminMessageContainer,{children:[k.jsx(c("MWXText.react"),{type:"bodyLink4",children:k.jsx(c("MWXLink.react"),{color_DEPRECATED:"highlight",onClick:function(){(j||(j=d("ODS"))).bumpEntityKey(3303,"collapsible_admin_messages",g?"hide_messages":"show_messages"),i(function(a){return!a})},role:"button",children:k.jsx(c("BaseView.react"),{xstyle:g?m.expanded:m.collapsed,children:g?h._("__JHASH__k2cKnwAsyRP__JHASH__"):h._("__JHASH__ZpmrUMcuTWA__JHASH__",[h._param("number of admin udpates",e.length)])})})}),g?e.map(function(a,c){return k.createElement(d("MWMessageRow.react").MWMessageRow,babelHelpers["extends"]({},f,{key:a.messageId,message:a,nextMessage:e[c+1],prevMessage:e[c-1],stopHoveringRef:b}))}):null]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWCommandsComposerPluginCommandList",["fbt","ix","FBLogger","fbicon"],(function(a,b,c,d,e,f,g,h,i){"use strict";function a(a,b,c,d,e){b=b.toString();return{data:{decorType:"regular",handle:b,key:a,label:b,rawData:{icon:d,subtitle:c.toString()},type:"entry"},rangeType:e}}e=[a("silent",h._("__JHASH__fM-I8ly761K__JHASH__"),h._("__JHASH__bcTzx6eBHE9__JHASH__"),d("fbicon")._(i("549627"),16),"s")];f=e.map(function(a){return a.data});var j=e.reduce(function(a,b){var c;a[(c=b.data.handle)!=null?c:b.data.key]=b.rangeType;return a},{});function b(a){var b=j[a];if(b==null){c("FBLogger")("messenger_web_messaging").mustfix("Unregisted messenger composer command %s used. Please add the command to the mapping in MWCommandsComposerPluginCommandList",a);return"n"}return b}g.commands=f;g.commandToRangeType=b}),226);
__d("messengerCommandsLexicalCreateNodeStrategy",["MWCommandsComposerPluginCommandList","MWCommandsComposerPluginTextNode","cometBaseMentionsLexicalCreateNodeStrategy","cometMentionsDataEntryText"],(function(a,b,c,d,e,f,g){"use strict";a=c("cometBaseMentionsLexicalCreateNodeStrategy")(function(a){var b;return d("MWCommandsComposerPluginTextNode").$createMessengerLexicalCommandNode({commandId:"0",commandPrefix:"/",handle:c("cometMentionsDataEntryText")(a),rangeType:d("MWCommandsComposerPluginCommandList").commandToRangeType((b=a.handle)!=null?b:a.key)})});b=a;g["default"]=b}),98);
__d("MWCommandsComposerPlugin.react",["CometMentionsForLexical.react","CometMentionsLayoutStrategy.react","MWChatComposerMentionsViewItem.react","MWCommandsComposerPluginCommandList","Promise","createCometMentionMatchStrategy","messengerCommandsLexicalCreateNodeStrategy","react","useCometMentionsDataSourceResolverConfig","useCometTypeaheadViewListStrategy"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i.useMemo,l={view:{minWidth:"x1jzhcrs",$$css:!0}},m=function(){function a(){}var c=a.prototype;c.bootstrap=function(){return};c.fetchCache=function(a){return{entries:a.query.length===0?d("MWCommandsComposerPluginCommandList").commands:d("MWCommandsComposerPluginCommandList").commands.filter(function(b){return(b=b.handle)==null?void 0:b.startsWith(a.query)}),params:a}};c.fetchNetwork=function(a){return(h||(h=b("Promise"))).resolve(this.fetchCache(a))};return a}();function a(a){a=a.editor;var b=c("useCometMentionsDataSourceResolverConfig")(k(function(){return[{dataSource:new m(),matchStrategy:c("createCometMentionMatchStrategy")({minMatchLength:0,name:"MessengerCommandsMatchStrategy",triggers:"/"})}]},[]),!0),d=c("useCometTypeaheadViewListStrategy")({viewItemStrategyRenderer:c("MWChatComposerMentionsViewItem.react"),viewXStyle:l.view});return j.jsx(c("CometMentionsForLexical.react"),{createNodeStrategy:c("messengerCommandsLexicalCreateNodeStrategy"),dataSourceResolverConfig:b,editor:a,layoutStrategyRenderer:c("CometMentionsLayoutStrategy.react"),position:"above",viewStrategyRenderer:d})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWComposerPlaceholder.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){a=a.height;return i.jsx("div",{className:"x1exxf4d x13fuv20 x178xt8z",style:{height:a.toString()+"px"}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWEBRestoreGapUI.react",["fbt","MAWEncryptedBackupsRestoreDialog.entrypoint","MWChatEncryptedBackupsQPLEvents","MWChatEncryptedBackupsQPLSource.enum","MWEBEntrypointsKillswitch.enum","MWEncryptedBackupsRetrieveQplLoggingAnnotations","MWXLink.react","MWXRow.react","MWXRowItem.react","MWXText.react","QPLUserFlow","promiseDone","react","requireDeferred","useLabyrinthLogging","useMWEBBackupState","useMWEBGetUpsellState","useMWXEntryPointDialog","useReStore","useVisibilityObserver"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));b=j;var l=b.useCallback,m=b.useEffect,n=b.useRef,o=c("requireDeferred")("mwEBCheckIfEBKeysExistInDisk").__setRef("MWEBRestoreGapUI.react"),p={banner:{backgroundColor:"xlhe6ec",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",overflowX:"x6ikm8r",overflowY:"x10wlt62",paddingTop:"xyamay9",paddingBottom:"x1l90r2v",paddingStart:"x1xfsgkm",paddingLeft:null,paddingRight:null,paddingEnd:"xqmdsaz",$$css:!0}};function a(){var a=(i||(i=c("useReStore")))(),b=c("useMWEBBackupState")({entrypoint:c("MWEBEntrypointsKillswitch.enum").IN_THREAD_GAP_UI}),e=c("useMWXEntryPointDialog")(c("MAWEncryptedBackupsRestoreDialog.entrypoint"),{}),f=e[0];e=d("useLabyrinthLogging").useLabyrinthLoggingFlow();var g=e.startFlow;e=c("useMWEBGetUpsellState")();e=e.isRestoreUpsellsDismissed;var j=c("MWChatEncryptedBackupsQPLSource.enum").IN_THREAD_GAP_UI,q=n(!1),r=n(!1),s=l(function(b){d("MWEncryptedBackupsRetrieveQplLoggingAnnotations").encryptedBackupsRetrieveQplLoggingAnnotations({db:a,onFetch:function(a){var e=a.ebsmWiped,f=a.firstUpsellTime,h=a.hasEbKeysLocally,i=a.hasEBSM,k=a.hasPDB,l=a.hasUserRestoredBefore;a=a.hasUserRestoredBeforeTemp;g({additionalAnnotations:{eb_session_identifier:f,ebsm_wiped:e,has_eb_keys_locally:h,has_ebsm:i,has_pdb:k,has_user_restored_before:l,has_user_restored_before_temp:a,restore_upsell_first_impression_time:f},event:d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,source:j});c("QPLUserFlow").addPoint(d("MWChatEncryptedBackupsQPLEvents").restoreQplEvent,b);r.current===!1&&(r.current=!0,c("promiseDone")(o.load(),function(a){return a(h)}))}})},[j,g,a]),t=c("useVisibilityObserver")({onVisible:function(){s("RESTORE_IN_THREAD_MISSING_MESSAGE_GAP_UI_IMPRESSION")}}),u=b===4&&!e;m(function(){q.current===!1&&u&&(q.current=!0,s("RESTORE_IN_THREAD_MISSING_MESSAGE_GAP_UI_MOUNT"))},[u,s]);return!u?null:k.jsx(c("MWXRow.react"),{align:"center",paddingHorizontal:16,paddingVertical:4,ref:t,spacing:0,children:k.jsx(c("MWXRowItem.react"),{xstyle:p.banner,children:k.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:k.jsxs(k.Fragment,{children:[h._("__JHASH__4WMqcKoHbeS__JHASH__")," ",k.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:k.jsx(c("MWXLink.react"),{onClick:function(){s("RESTORE_IN_THREAD_GAP_UI_CTA_CLICK"),f({source:j})},target:"_blank",testid:void 0,children:h._("__JHASH__KfRv84gajDv__JHASH__")})})]})})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWEditChannelDialogQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6185531621550317"}),null);
__d("MWEditChannelDialogQuery$Parameters",["MWEditChannelDialogQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWEditChannelDialogQuery_facebookRelayOperation"),metadata:{},name:"MWEditChannelDialogQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWEditChannelDialog.entrypoint",["JSResourceForInteraction","MWEditChannelDialogQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(a){a=a.threadID;return{queries:{queryReference:{options:{fetchPolicy:"network-only"},parameters:c("MWEditChannelDialogQuery$Parameters"),variables:{threadID:a}}}}},root:c("JSResourceForInteraction")("MWEditChannelDialog.react").__setRef("MWEditChannelDialog.entrypoint")};g["default"]=a}),98);
__d("MWEditChannelDialogTrigger.react",["I64","MWEditChannelDialog.entrypoint","promiseDone","react","useMWXEntryPointDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;j||d("react");function a(a){var b=a.children,e=a.threadKey,f=(h||(h=c("useReStore")))();a={threadID:(i||(i=d("I64"))).to_string(e)};a=c("useMWXEntryPointDialog")(c("MWEditChannelDialog.entrypoint"),a);var g=a[0];a=function(){c("promiseDone")(f.tables.threads.get(e),function(a){if(a==null)return;g({thread:a})})};return b(a)}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWExpandReactionsButton.react",["fbt","I64","MWCMThreadTypes.react","MWChatMessageId","MWChatReactionsActionContainer.react","MWMultiReactConstants","MWXPressable.react","MWXTooltip.react","emptyFunction","intlSummarizeNumber","react","stylex","useIsReactionsV2Enabled"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=j||(j=d("react"));b=j;var m=b.useCallback,n=b.useMemo,o={additionalInlineButton:{display:"x78zum5",flexDirection:"xdt5ytf",height:"xlup9mm",justifyContent:"xl56j7k",width:"x1npj6m0",$$css:!0},emoji:{alignItems:"x6s0dn4",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",cursor:"x1ypdohk",lineHeight:"x14ju556",marginEnd:"x11i5rnm",$$css:!0},emojiNum:{paddingStart:"x1k2j06m",paddingEnd:"x10ogl3i",textAlign:"x2b8uid",$$css:!0},emojiRowContainer:{borderTopStartRadius:"xdxvlk3",borderTopEndRadius:"x1fglp",borderBottomEndRadius:"x1rp6h8o",borderBottomStartRadius:"xg6i1s1",marginBottom:"x12nagc",marginEnd:"xw3qccf",$$css:!0},fontStyles:{color:"xi81zsa",fontSize:"x1nxh6w3",fontWeight:"x1s688f",$$css:!0}};function a(a){var b=a.isMultiReactExpanded,e=a.isReactionReadOnly,f=a.isSecure,g=a.message,j=a.numOverflowEmojis,p=a.sendReaction,q=a.setIsReactionsRowAnimationInProgress,r=a.threadKey,s=a.threadType,t=a.toggleMultiReactExpanded,u=(k||(k=d("I64"))).to_string(r),v=k.to_string(g.timestampMs);a=n(function(){return d("MWChatMessageId").makeSent(u,g.messageId,v)},[u,g.messageId,v]);s=d("MWCMThreadTypes.react").isBroadcastThread(s);r=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(r);var w=m(function(){t(),q(!0)},[q,t]);return l.jsx(c("MWChatReactionsActionContainer.react"),{alwaysShowEmojiPicker:!0,closeActionsMenu:c("emptyFunction"),disableCustomReactions:r&&s,hasReactionsV2:r,isBroadcastThread:s,isSecure:f,messageID:a,onVisibilityChange:c("emptyFunction"),sendReaction:p,children:function(a,f,g,k,m){f=h._("__JHASH__S6Ab1Epvc_N__JHASH__");var n=c("intlSummarizeNumber")(j),p="+"+n;n=n.length;g=l.jsx(c("MWXPressable.react"),{"aria-label":f,disabled:e,expanding:!0,onHoverIn:g,onHoverOut:k,onPress:w,onPressIn:m,overlayRadius:"inherit",ref:a,role:"button",testid:void 0,xstyle:o.emojiRowContainer,children:l.jsx("div",{className:"x6s0dn4 x7daf1o xdxvlk3 x1fglp x1rp6h8o xg6i1s1 x78zum5 xl56j7k x10b6aqq xsyo7zv xurb0ha x1yrsyyn x1n2onr6 xp4054r",role:"none",children:l.jsx("div",{className:(i||(i=c("stylex")))([].concat(b?[o.fontStyles,o.emoji,o.additionalInlineButton]:[o.fontStyles,o.emojiNum])),role:"none",style:{minWidth:n*d("MWMultiReactConstants").SPACING_PER_COUNT_CHARACTER},children:p})})});return e?g:l.jsx(c("MWXTooltip.react"),{align:"middle",position:"above",tooltip:f,children:g})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWGroupLimitContainer.react",["cr:3409","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");function a(a){var c=a.children,d=a.groupLimitReachedContent;a=a.thread;a=(a=b("cr:3409")==null?void 0:b("cr:3409")(a.threadKey))!=null?a:[!1,!1];a=a[0];return a?d:c}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWInboxInfoMembersSectionStorageKey",[],(function(a,b,c,d,e,f){"use strict";a="__MWInboxInfoMembersSection.isOpen__";f.storageKey=a}),66);
__d("MWXIconMenuItemArrowDown",["MWXSvgIcon","SVGIcon","cr:9362","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgMenuItemIcon(d("SVGIcon").svgIcon(b("cr:9362")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWJumpToMostRecentMessageButton.react",["fbt","MWPBumpEntityKey","MWXIconMenuItemArrowDown","MWXIconStrict.react","MWXPressable.react","MWXThreadThemeColor","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={circleButton:{alignItems:"x6s0dn4",backgroundColor:"x1l31dnx",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",boxShadow:"xurzqwv",display:"x78zum5",height:"x1vqgdyp",justifyContent:"xl56j7k",width:"x100vrsf",$$css:!0}};function a(a){var b=a.onPress;return j.jsx(c("MWXPressable.react"),{"aria-label":h._("__JHASH__mZcaI1xn9AA__JHASH__"),onPress:function(){b(),d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_jump_to_bottom","app_id")},xstyle:k.circleButton,children:j.jsx(c("MWXIconStrict.react"),{color:d("MWXThreadThemeColor").mwxThreadThemeColor("var(--mwp-primary-theme-color)"),icon:c("MWXIconMenuItemArrowDown"),size:20})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWMediaComposerRenderQpl",["LSGetAttachmentType","MAWQPLInstanceKeyUtils","MWMediaRenderQplUtils","QPLUserFlow","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=i.useEffect,k=i.useMemo,l=i.useRef;function a(a,b,e){var f;a=d("MAWQPLInstanceKeyUtils").getInstanceKey(a);b=d("LSGetAttachmentType").LSGetAttachmentTypeSyncButLessAccurate(b);c("QPLUserFlow").start((f=d("MWMediaRenderQplUtils")).event,{annotations:{string:{attachment_type:f.getAttachmentTypeStringFromEnum(b),content_type:f.deriveMessageContentTypeStringFromAttachmentTypeLessAccurate(b),entry_point:"composer_view",thread_type:f.getThreadTypeString(e)}},cancelOnUnload:!0,instanceKey:a,timeoutInMs:f.QPL_TIMEOUT})}function b(a,b){a=d("MAWQPLInstanceKeyUtils").getInstanceKey(a);c("QPLUserFlow").endCancel(d("MWMediaRenderQplUtils").event,{annotations:{string:{cancel_reason:b}},instanceKey:a})}function e(a,b){a=d("MAWQPLInstanceKeyUtils").getInstanceKey(a);c("QPLUserFlow").addPoint(d("MWMediaRenderQplUtils").event,b,{instanceKey:a})}function f(a){var b=d("MAWQPLInstanceKeyUtils").getInstanceKey(a.offlineAttachmentId),e=l(!1);c("QPLUserFlow").addAnnotations(d("MWMediaRenderQplUtils").event,{string:{attachment_type:d("MWMediaRenderQplUtils").getAttachmentTypeStringFromEnum(a.attachmentType),content_type:d("MWMediaRenderQplUtils").deriveMessageContentTypeStringFromAttachmentTypeLessAccurate(a.attachmentType)}},{instanceKey:b});var f=k(function(){return babelHelpers["extends"]({},d("MWMediaRenderQplUtils").createQplFlowCommon(d("MWMediaRenderQplUtils").event,b,e))},[]);j(function(){return function(){e.current===!1&&(f==null?void 0:f.getInstanceKey())!=null&&(f==null?void 0:f.endCancel(706))}},[f]);return f}g.startMediaComposerRenderQpl=a;g.endCancelMediaComposerRenderQpl=b;g.addPointMediaComposerRenderQpl=e;g.useMediaComposerRenderQpl=f}),98);
__d("MWSharedMediaManagerUtils",["I64","LSGetAttachmentType","LSIntEnum","LSMailboxType","MWPreloadableQueries","Promise","ReQLSuspense","asyncToGeneratorRuntime","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function l(a){return new(k||(k=b("Promise")))(function(b){var c=new Image();c.onload=function(){return b({previewHeight:c.height,previewWidth:c.width})};c.onerror=function(){return b()};c.src=a})}function m(a){return new(k||(k=b("Promise")))(function(b){var c=document.createElement("video");c.onloadedmetadata=function(){return b({previewHeight:c.videoHeight,previewWidth:c.videoWidth})};c.onerror=function(){return b()};c.src=a})}function n(a,b){if(b==null||a==null)return;var c=Math.floor(a.previewHeight*b.previewWidth/a.previewWidth);return c>=b.previewHeight?{previewHeight:(i||(i=d("I64"))).of_float(c),previewWidth:i.of_float(b.previewWidth)}:{previewHeight:(i||(i=d("I64"))).of_float(b.previewHeight),previewWidth:i.of_float(a.previewWidth*b.previewHeight/a.previewHeight)}}function a(a,b,c){return o.apply(this,arguments)}function o(){o=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,g){var h=(yield (k||(k=b("Promise"))).all(e.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=a.file,e=a.offlineAttachmentId,f=a.attachmentType!=null?(j||(j=d("LSIntEnum"))).ofNumber(a.attachmentType):yield d("LSGetAttachmentType").LSGetAttachmentType(b),h=URL.createObjectURL(b);a.previewHeight!=null&&a.previewWidth!=null?a={previewHeight:a.previewHeight,previewWidth:a.previewWidth}:b.type.includes("video/")?a=(yield m(h)):a=(yield l(h));return[{attachmentType:f,durationMs:void 0,fbid:void 0,filename:b.name,fileSize:(i||(i=d("I64"))).of_int32(b.size),hasError:!1,isSent:!1,mailboxType:(j||(j=d("LSIntEnum"))).ofNumber(c("LSMailboxType").MESSENGER),mimeType:b.type,offlineAttachmentId:e,offlineThreadingId:void 0,previewUrl:h,progress:0,threadKey:g},a]});return function(b){return a.apply(this,arguments)}}())));yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var c=(yield a.sync_groups.get((i||(i=d("I64"))).of_float(1))),e;if((c==null?void 0:c.syncParams)!=null){c=JSON.parse(c.syncParams);var f=c.preview_height;c=c.preview_width;e={previewHeight:f,previewWidth:c}}yield (k||(k=b("Promise"))).all(h.map(function(b){var c=b[0];b=b[1];return a.media_staging.add(babelHelpers["extends"]({},c,n(b,e)))}))});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":145")});return o.apply(this,arguments)}function e(a,b){return a.runInTransaction(function(a){return a.media_staging["delete"](b)},"readwrite",void 0,void 0,f.id+":171")}function p(a){var b=(h||(h=c("useReStore")))();return d("ReQLSuspense").useArray(function(){return d("MWPreloadableQueries").getMediaStagingQuery(b,a.threadKey)},[b,a.threadKey],f.id+":181")}function q(a){if(a.mimeType==="image/gif")return!0;else return a.mimeType==="image/webp"}g.insertMediaStaging=a;g.deleteMediaStaging=e;g.useMediaStaging=p;g.isVideoLikeImage=q}),98);
__d("WorkFailedSendMessageFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("6352");b=d("FalcoLoggerInternal").create("work_failed_send_message",a);e=b;g["default"]=e}),98);
__d("MWMediaManager",["FBLogger","I64","Int64Hooks","LSMessagingThreadTypeUtil","MWChatFilePreProcessingErrorDialog.react","MWChatFilePreProcessingErrorToast.react","MWChatFileUploadErrorDialog.react","MWMediaComposerRenderQpl","MWPActor.react","MWSharedMediaManagerUtils","OfflineThreadingId","Promise","WorkFailedSendMessageFalcoEvent","cr:8525","emptyFunction","gkx","promiseDone","requireDeferred","useMWXAlertDialog","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=c("requireDeferred")("MWOpenMediaManagerUtils").__setRef("MWMediaManager"),l=function(){if(b("cr:8525")==null){c("FBLogger")("messenger_web_media").warn("Unsupported thread type for media upload");return(j||(j=b("Promise"))).resolve(null)}return b("cr:8525").load()},m=c("gkx")("24138")?75:25;function n(a,c){if(c)return l().then(function(c){return(j||(j=b("Promise"))).resolve((c=c==null?void 0:c.preprocessV2(a))!=null?c:[])});else return k.load().then(function(b){return b.preprocess(a)})}function o(a,b,c){for(var d=0;d<a.length;d++){var e=a[d],f=c(e,b);if(e.size>f*1024*1024)return f}return null}function a(a){var e=a.chatSupportUserId,f=a.chatSupportUserNonce,g=a.getMaxAttachmentSizeInMB,p=g===void 0?function(){return m}:g,q=a.isChatSupportUser,r=a.maxNumberOfAttachments,s=a.onUploadFailure,t=a.onUploadStart,u=a.onUploadSuccess,v=a.showUploadFailureToast,w=a.thread,x=a.validateFileName,y=(i||(i=c("useReStore")))(),z=c("useMWXAlertDialog")({onClose:c("emptyFunction")}),A=d("LSMessagingThreadTypeUtil").isArmadilloSecure(w.threadType),B=d("MWSharedMediaManagerUtils").useMediaStaging(w),C=B.length,D=d("MWPActor.react").useActor();g=d("Int64Hooks").useCallbackInt64(function(a){var g=o(a,A,p);if(g!=null){z(d("MWChatFileUploadErrorDialog.react").maxFileSizeExceeded(g),c("emptyFunction"));return}if(r!=null&&C+a.length>r){c("gkx")("23249")?(z(d("MWChatFileUploadErrorDialog.react").maxFilesNumberExceeded(r),c("emptyFunction")),c("WorkFailedSendMessageFalcoEvent").log(function(){return{breaking_rule:"",event:"NUMBER_OF_ATTACHMENTS_LIMIT_REACHED"}})):z(d("MWChatFileUploadErrorDialog.react").maxMediaNumberExceeded(r),c("emptyFunction"));return}if(x!=null)for(g=0;g<a.length;g++){var i=a[g];if(!x(i)){z(d("MWChatFileUploadErrorDialog.react").unsupportedFile(),c("emptyFunction"));return}}var m=d("OfflineThreadingId").createForItemsInOrder(a);m.forEach(function(a){var b=a[0];a=a[1];d("MWMediaComposerRenderQpl").startMediaComposerRenderQpl(a,b,w);d("MWMediaComposerRenderQpl").addPointMediaComposerRenderQpl(a,"preprocess_start")});c("promiseDone")(n(m,A)["catch"](function(){c("gkx")("1185")?v(d("MWChatFilePreProcessingErrorToast.react").invalidFileFormat.title,d("MWChatFilePreProcessingErrorToast.react").invalidFileFormat.body):z(d("MWChatFilePreProcessingErrorDialog.react").invalidFileFormat,c("emptyFunction"));m.forEach(function(a){a[0];a=a[1];d("MWMediaComposerRenderQpl").endCancelMediaComposerRenderQpl(a,"invalid-file-format")});return(j||(j=b("Promise"))).resolve([])}).then(function(a){a.forEach(function(a){d("MWMediaComposerRenderQpl").addPointMediaComposerRenderQpl(a.offlineAttachmentId,"preprocess_success")});c("promiseDone")(d("MWSharedMediaManagerUtils").insertMediaStaging(y,a,w.threadKey));a.forEach(function(a){d("MWMediaComposerRenderQpl").addPointMediaComposerRenderQpl(a.offlineAttachmentId,"media_staging_insert_success")});var b=w.threadKey;return A?l().then(function(c){return c==null?void 0:c.upload(y,b,a)}):k.load().then(function(c){return c.upload(y,b,a,v,t,u,s,q,e,f,(h||(h=d("I64"))).to_string(D))})}))},[D,e,f,y,p,q,A,r,C,s,t,u,z,v,w,x]);a=function(a){c("promiseDone")(d("MWSharedMediaManagerUtils").deleteMediaStaging(y,a).then(function(){if(A&&b("cr:8525")!=null)return b("cr:8525").load().then(function(b){b.MAWMediaManagerAttachmentsV2["delete"](a)})}))};var E=function(){var a=B.map(function(a){return a.offlineAttachmentId});a.forEach(function(a){d("MWSharedMediaManagerUtils").deleteMediaStaging(y,a)["catch"](function(a){c("FBLogger")("messenger_web_media").catching(a).mustfix("Error deletting media staging.")})})};return{handleFileRemove:a,handleFileSelect:g,mediaStaging:B,resetAttachments:E}}g.useMediaManager=a}),98);
__d("MWMediaTraceHandler",["I64","LSAppendDataTraceAddonStoredProcedure","LSDataTraceCheckPoint","LSDataTraceType","LSFactory","LSIntEnum","MAWTimeUtils","WATimeUtils"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){return a.data_trace_meta.add({contextOne:void 0,contextThree:void 0,contextTwo:void 0,foregroundTimestampMs:(h||(h=d("I64"))).zero,initTimestampMs:d("MAWTimeUtils").toTimestamp(d("WATimeUtils").unixTime()),predefinedId:void 0,shouldFlush:!1,traceId:b,traceType:(i||(i=d("LSIntEnum"))).ofNumber(c("LSDataTraceType").TASK)})}function a(a,b,e,f){return j(a,b).then(function(){return c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:(i||(i=d("LSIntEnum"))).ofNumber(c("LSDataTraceCheckPoint").RICH_MEDIA_UPLOAD_START),dataTraceId:b,syncChannel:(h||(h=d("I64"))).neg_one,tags:h.to_string(e)+","+h.to_string(f)})})}g.logMediaSendStart=a}),98);
__d("MWMessageList",["CometPageletWithDiv.react","I64","Int64Hooks","LSCommunityBitOffset","LSMessageRenderingType","LSMessagingThreadTypeUtil","MWBlockingProtectionContext.react","MWClickedMessageContext.react","MWCollapsibleAdminMessages.react","MWInboxThreadMessagesSpinner.react","MWJumpToMostRecentMessageButton.react","MWMessageListLoggingContext","MWMessageRow.react","MWMessageSendingContext.react","MWPMessageListFocusTable.react","MWPThreadCapabilitiesContext","MWPTypingIndicators.react","MWPVisibleMessageContext.react","MWV2ChatAdminMessage.react","MWV2MessageActionsVisibility.react","WebUXLoggingSurfaceContextProvider","cr:3907","cr:6714","cr:7486","gkx","isMWNewSearchUXEnabled","mwCMIsAnyCMThread","react","useCommunityFolder","useIsReactionsV2Enabled","useMWPAriaLabelForMessageListGrid","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react"));e=h;var k=e.useEffect,l=e.useId,m=e.useState;function n(a){return d("MWV2ChatAdminMessage.react").isAdminMessage(a)&&a!=null&&(a.messageRenderingType==null||!(i||(i=d("I64"))).equal(a.messageRenderingType,(i||(i=d("I64"))).of_int32(c("LSMessageRenderingType").NON_COLLAPSIBLE_ADMIN_MESSAGE)))}function o(a){return j.jsx(c("MWInboxThreadMessagesSpinner.react"),{vcIgnore:a})}o.displayName=o.name+" [from "+f.id+"]";function p(a){return j.jsx(c("MWJumpToMostRecentMessageButton.react"),{onPress:a})}p.displayName=p.name+" [from "+f.id+"]";e=j.forwardRef(a);function a(a,e){var f=a.entryPoint,g=a.renderFooter,h=a.renderHeader,q=a.thread,r=d("MWV2MessageActionsVisibility.react").useStopHoveringRef();a=m("");var s=a[0];a=a[1];var t=l(),u=d("LSMessagingThreadTypeUtil").isArmadilloSecure(q.threadType),v=c("useMWPAriaLabelForMessageListGrid")(q),w=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext(),x=w.setVisibleMessage,y=w.visibleMessage,z=d("Int64Hooks").useMemoInt64(function(){return q.threadType},[q.threadType]),A=c("useCommunityFolder")(q),B=A!=null?d("LSCommunityBitOffset").has(9,A):!1,C=d("useIsReactionsV2Enabled").useIsReactionsV2Enabled(q.threadKey),D=b("cr:6714")(q.threadKey);w=m(!1);var E=w[0],F=w[1];k(function(){D&&!E&&x(function(a){return(a=a)!=null?a:{contextLine:"",highlights:[],messageId:D.messageId,source:"LastReadWatermark",timestamp:D.timestampMs}})},[D,x,E]);w=d("Int64Hooks").useCallbackInt64(function(){return j.jsxs(j.Fragment,{children:[j.jsx(d("MWPTypingIndicators.react").MWPTypingIndicators,{threadKey:q.threadKey,threadType:z}),g&&g()]})},[g,q.threadKey,z]);var G=new Map();f=j.jsx(b("cr:7486"),{entryPoint:f,onUserScroll:function(){return F(!0)},pageSize:c("gkx")("23432")?3:15,ref:e,renderFooter:w,renderHeader:h,renderJumpToMostRecentMessageButton:p,renderLoadingAnimation:o,renderRow:function(a){var b=a.domElementRef,e=a.message,f=a.nextMessage;a=a.prevMessage;var g=u?(i||(i=d("I64"))).equal(q.threadKey,e.threadKey):!1,h=(D==null?void 0:D.messageId)===e.messageId,k=!n(a)&&!n(f),l=y==null?!1:y.messageId===e.messageId&&(y.source==="Reply"||y.source==="Pinned"||y.source==="Search"&&c("isMWNewSearchUXEnabled")());if((c("mwCMIsAnyCMThread")(q.threadType)||d("LSMessagingThreadTypeUtil").isDiscoverableChannel(q.threadType))&&n(e)&&!k){G.set(e.messageId,e);k=n(a)&&!n(f);if(k){k=Array.from(G.values());G.clear();return j.jsx(c("MWCollapsibleAdminMessages.react"),{domElementRef:b,fbGroupId:A==null?void 0:A.fbGroupId,hasMessageEmphasisRing:l,isCMAdmin:B,isModal:s===e.messageId,isSecureMessage:g,messages:k,shouldRenderUnreadIndicator:h,threadType:z,useReactionsV2:C})}else return null}return j.jsx(d("MWMessageRow.react").MWMessageRow,{containerThreadKey:q.threadKey,domElementRef:b,fbGroupId:A==null?void 0:A.fbGroupId,hasMessageEmphasisRing:l,isCMAdmin:B,isModal:s===e.messageId,isSecureMessage:g,message:e,nextMessage:f,prevMessage:a,shouldRenderUnreadIndicator:h,stopHoveringRef:r,threadType:z,useReactionsV2:C})},thread:q});return j.jsx(c("MWMessageSendingContext.react").Provider,{children:j.jsx(c("MWClickedMessageContext.react").Provider,{children:j.jsx(c("MWBlockingProtectionContext.react").Provider,{children:j.jsx(d("CometPageletWithDiv.react").Placeholder,{className:"x78zum5 xdt5ytf x1iyjqo2 x5yr21d",fallback:j.jsx(c("MWInboxThreadMessagesSpinner.react"),{}),name:"MWMessageList",children:j.jsx(d("MWPThreadCapabilitiesContext").Provider,{thread:q,children:j.jsx(c("MWPMessageListFocusTable.react"),{ariaLabel:v,modal:s,setModal:a,children:j.jsx(d("WebUXLoggingSurfaceContextProvider").WebUXSurfaceLoggingContext.Provider,{value:"message_list",children:j.jsx(d("MWMessageListLoggingContext").MWMessageListLoggingContext,{flowInstanceId:c("uuidv4")(),children:b("cr:3907")==null?f:j.jsx(b("cr:3907"),{id:t,children:f})})})})})})})})})}a.displayName=a.name+" [from "+f.id+"]";a=e;g["default"]=a}),98);
__d("MWMessageListProtectedMedia.react",["fbt","$InternalEnum","MWLSThreadDisplayContext","MWVerticalRhythm","MWXPressable.react","MWXText.react","emptyFunction","react","setTimeout","stylex"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=j||(j=d("react"));e=j;var l=e.useMemo,m=e.useRef,n=e.useState,o=b("$InternalEnum").Mirrored(["Protected","Blurred","Unprotected"]),p={container:{alignItems:"x6s0dn4",display:"x78zum5",justifyContent:"xl56j7k",minHeight:"x7v6ubd",minWidth:"xfb3i0g",position:"x1n2onr6",$$css:!0},containerForInbox:{minWidth:"xlm99nl",$$css:!0},containerUncoverable:{minWidth:"xfb3i0g",$$css:!0},overlay:{maxWidth:"x193iq5w",":before_content":"x1gftdam",":before_height":"xw22vqi",":before_position":"x1te0kx0",":before_start":"x7r5wyf",":before_top":"x1ehtkf2",":before_width":"xy7dqi3",":before_zIndex":"x1wl4osp",$$css:!0},overlayBlurred:{filter:"xj2j9hd",$$css:!0},overlayDisabled:{pointerEvents:"x47corl",$$css:!0},pressable:{alignItems:"x6s0dn4",display:"x78zum5",justifyContent:"xl56j7k",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",$$css:!0},sneezeguard:{backgroundColor:"x11dxs5c",height:"x5yr21d",start:"x17qophe",position:"x10l6tqk",top:"x13vifvy",width:"xh8yej3",zIndex:"x1vjfegm",$$css:!0},sneezeguardTransparent:{backgroundColor:"x1cw4mn1",$$css:!0}};function q(a){var b=a.mediaType,d=a.state;a=a.uncoverable;a=a===void 0?!0:a;var e=h._("__JHASH__ffo2a6Rimy8__JHASH__"),f=h._("__JHASH__SmhjEO8LZM7__JHASH__"),g=h._("__JHASH__fSHhveuOoUn__JHASH__"),i=h._("__JHASH__9LbnXUNEOkH__JHASH__"),j=h._("__JHASH__grSMjsZRe9-__JHASH__"),l=h._("__JHASH__4a9auIct2D0__JHASH__"),m=h._("__JHASH___nqNxb75_gn__JHASH__"),n=h._("__JHASH__cegqh2566-V__JHASH__"),p=h._("__JHASH__NU6koyzdQfy__JHASH__");f=k.jsx(c("MWXText.react"),{color:"white",testid:void 0,type:"body3",children:b==="Image"?f:b==="Video"?e:g});return d===o.Unprotected?null:k.jsx("div",{"aria-live":"polite","aria-relevant":"all",className:"x6s0dn4 x9f619 x78zum5 xdt5ytf x5yr21d x17qophe xl56j7k xyamay9 x1pi30zi x1l90r2v x1swvt13 x10l6tqk x13vifvy xh8yej3 xhtitgo",children:k.jsx("div",{className:"x78zum5 xdt5ytf xurgmgr x2b8uid",children:d===o.Protected?k.jsxs(k.Fragment,{children:[f,a?k.jsxs(k.Fragment,{children:[k.jsx(c("MWVerticalRhythm"),{height:25}),k.jsx(c("MWXText.react"),{color:"white",testid:void 0,type:"bodyLink3",children:b==="Image"?j:b==="Video"?i:l})]}):null]}):k.jsxs(k.Fragment,{children:[f,k.jsx(c("MWVerticalRhythm"),{height:25}),k.jsx(c("MWXText.react"),{color:"white",testid:void 0,type:"bodyLink3",children:b==="Image"?n:b==="Video"?m:p})]})})},d)}q.displayName=q.name+" [from "+f.id+"]";function a(a){var b=a.ariaLabel,e=a.children,f=a.disabled,g=a.linkProps,h=a.mediaType,j=a.onPress,r=j===void 0?c("emptyFunction"):j;j=a.overlayDisabled;j=j===void 0?!1:j;var s=a.testid,t=a.type;s=a.uncoverable;s=s===void 0?!0:s;var u=a.url;a=a.xstyle;var v=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),w=n(o.Protected),x=w[0],y=w[1],z=x===o.Unprotected;w=x===o.Blurred;var A=m(null),B=l(function(){return{url:"#"}},[]),C=l(function(){if(t==="video")return;if(u!=null)return{backgroundImage:"url("+u+")",backgroundSize:"cover",filter:"blur(10px)",height:"100%",left:"0",position:"absolute",right:"0",transform:"scale(1.2)",width:"100%"}},[u,t]);v=k.jsxs("div",{className:(i||(i=c("stylex")))(p.container,v==="Inbox"?p.containerForInbox:!1,s?p.containerUncoverable:!1),children:[k.jsx("div",{style:C}),k.jsx("div",{"aria-hidden":!z,className:i(p.overlay,!z&&p.overlayDisabled,w&&p.overlayBlurred),children:e}),z?null:k.jsx("div",{className:(i||(i=c("stylex")))(p.sneezeguard,w&&p.sneezeguardTransparent)}),k.jsx(q,{mediaType:h,state:x,uncoverable:s})]});return!s?k.jsx("div",{className:(i||(i=c("stylex")))(a,p.pressable),"data-testid":void 0,children:v}):k.jsx(c("MWXPressable.react"),{"aria-label":z?b:void 0,disabled:f,linkProps:z?g:B,onPress:function(){z?r():y(function(a){switch(a){case o.Protected:return o.Blurred;case o.Blurred:c("setTimeout")(function(){var a=A.current;if(a!=null)return a.focus()},0);return o.Unprotected;case o.Unprotected:return a}})},overlayDisabled:j,ref:A,testid:void 0,xstyle:[a,p.pressable],children:v})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWMessageReaction.react",["BaseContextualLayer.react","I64","MWChatMultiReactionsTooltip.react","MWChatReactionEmoji","MWChatReactionsUtils","MWMultiReactConstants","MWXPopover.react","MWXPressable.react","MWXText.react","gkx","intlSummarizeNumber","react","stylex","useCometTheme","useFadeEffect"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react"));b=i;var l=b.useEffect,m=b.useRef,n=b.useState,o={"--card-background":"rgba(0,0,0,0)"},p={animatedEmoji:{animationDuration:"xdz8niu",animationIterationCount:"x1v7wizp",animationName:"x4uz0a7",animationTimingFunction:"xjmqbfh",opacity:"x1hc1fzr",transform:"xds7yc5",transformOrigin:"x1jpgh95",$$css:!0},emoji:{alignItems:"x6s0dn4",borderTopStartRadius:"x14yjl9h",borderTopEndRadius:"xudhj91",borderBottomEndRadius:"x18nykt9",borderBottomStartRadius:"xww2gxu",lineHeight:"x14ju556",marginEnd:"x11i5rnm",$$css:!0},emojiEnabled:{cursor:"x1ypdohk",$$css:!0},emojiNum:{color:"xi81zsa",fontSize:"x1nxh6w3",fontWeight:"x1s688f",paddingStart:"x1k2j06m",paddingEnd:"x10ogl3i",textAlign:"x2b8uid",$$css:!0},emojiRow:{alignItems:"x6s0dn4",backgroundColor:"x7daf1o",borderTopStartRadius:"xdxvlk3",borderTopEndRadius:"x1fglp",borderBottomEndRadius:"x1rp6h8o",borderBottomStartRadius:"xg6i1s1",display:"x78zum5",justifyContent:"xl56j7k",paddingBottom:"x10b6aqq",paddingEnd:"xsyo7zv",paddingStart:"xurb0ha",paddingTop:"x1yrsyyn",position:"x1n2onr6",textAlign:"xp4054r",$$css:!0},emojiRowContainer:{borderTopStartRadius:"xdxvlk3",borderTopEndRadius:"x1fglp",borderBottomEndRadius:"x1rp6h8o",borderBottomStartRadius:"xg6i1s1",marginBottom:"x12nagc",marginEnd:"xw3qccf",$$css:!0},scaleHeartEmoji:{transform:"xhqu4j4",$$css:!0},selectedColor:{backgroundColor:"x1y4ma1z",$$css:!0},selectedTextColor:{color:"x1f0x4kx",$$css:!0},tooltipContainer:{borderTopStartRadius:"x1r9drvm",borderTopEndRadius:"x16aqbuh",borderBottomEndRadius:"x9rzwcf",borderBottomStartRadius:"xjkqk3g",display:"x1lliihq",marginBottom:"xjpr12u",marginTop:"xr9ek0c",maxWidth:"x86nfjv",opacity:"xg01cxk",paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",position:"x1n2onr6",transitionDuration:"x1ebt8du",transitionProperty:"x19991ni",transitionTimingFunction:"x1dhq9h",$$css:!0},tooltipContainerVisible:{opacity:"x1hc1fzr",transitionDuration:"xhb22t3",transitionTimingFunction:"xls3em1",$$css:!0},tootltipBackgroundComet:{backgroundColor:"xj5tmjb",boxShadow:"xms15q0",$$css:!0}};function a(a){var b=a.emoji,e=a.isProcessingReactions,f=a.isReadOnly,g=a.isTooltipShown,i=a.message,q=a.onFocus,r=a.onMouseEnter,s=a.onMouseLeave,t=a.onTooltipCTAPress,u=a.queueSendReactionCallback,v=a.reaction,w=a.sendReaction,x=a.shouldAnimate;a=a.threadKey;var y=c("useCometTheme")("invert"),z=y[0];y=y[1];var A=c("useCometTheme")("light");A[0];A=A[1];var B=d("MWChatReactionsUtils").isHeart(b[0]),C=m(null);g=c("useFadeEffect")(g);var D=g[0],E=g[1];g=g[2];var F=n(v.viewerIsReactor),G=F[0],H=F[1];F=n((j||(j=d("I64"))).to_int32(v.count));var I=F[0],J=F[1];F=n(!1);var K=F[0],L=F[1],M=m(null);l(function(){M.current!=null&&window.clearTimeout(M.current)},[]);l(function(){x&&(L(!0),M.current!=null&&window.clearTimeout(M.current),M.current=window.setTimeout(function(){M.current=null,L(!1)},600))},[x]);l(function(){e||(J((j||(j=d("I64"))).to_int32(v.count)),H(v.viewerIsReactor))},[e,v.count,v.viewerIsReactor]);function N(){H(!0),J(function(a){return a+1})}function O(){H(!1),J(function(a){return a>1?a-1:a})}F=c("intlSummarizeNumber")(I).length;return k.jsxs("div",{className:(h||(h=c("stylex")))(G?A:null),onFocus:q,onMouseEnter:r,onMouseLeave:s,children:[k.jsx(c("MWXPressable.react"),{disabled:f,onPress:function(){G?O():N();var a=b.join("");I===1&&G?w(a,G):u(a,function(){w(a,G)})},overlayRadius:"inherit",ref:C,xstyle:p.emojiRowContainer,children:k.jsxs("div",{className:h([p.emojiRow,G&&p.selectedColor]),children:[k.jsx("div",{className:h([p.emoji,f?null:p.emojiEnabled]),children:k.jsx("div",{className:h(x||K?p.animatedEmoji:!1,B?p.scaleHeartEmoji:!1),children:k.jsx(c("MWChatReactionEmoji"),{emoji:b,size:16,testid:void 0})})}),k.jsx("div",{className:h([p.emojiNum,G&&p.selectedTextColor]),"data-testid":void 0,role:"none",style:{minWidth:F*d("MWMultiReactConstants").SPACING_PER_COUNT_CHARACTER},children:c("intlSummarizeNumber")(I)})]})}),!f&&D&&k.jsx(z,{children:k.jsx(c("BaseContextualLayer.react"),{align:"middle",contextRef:C,position:"above",ref:g,children:k.jsx("div",{style:c("gkx")("23219")?null:o,children:k.jsx(c("MWXPopover.react"),{withArrow:c("gkx")("23219"),children:k.jsx("div",{className:(h||(h=c("stylex")))(y,p.tooltipContainer,c("gkx")("23219")?null:p.tootltipBackgroundComet,E&&p.tooltipContainerVisible),role:"tooltip",children:k.jsx(c("MWXText.react"),{color:"primary",type:"body4",children:k.jsx(c("MWChatMultiReactionsTooltip.react"),{isProcessingReactions:e,messageId:i.messageId,onTooltipCTAPress:function(){return t(v.reactionFbid,b.join(""))},reactionFbid:v.reactionFbid,threadKey:a})})})})})})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useEmojiReactionDynamicStyleXTransition",["differenceSets","mapMapToArray","mapSet","nullthrows","react","setImmediate","sortBy","useForceUpdate","useIsMountedRef","useStable"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useEffect,k=b.useLayoutEffect,l=b.useRef,m={animationBase:{opacity:"xg01cxk",transitionDuration:"xbb3pvg",transitionProperty:"xeq7tfg",width:"xnalus7",$$css:!0},animationEnter:{animationDuration:"xllfotl",animationName:"x127lhb5",opacity:"x1hc1fzr",$$css:!0},animationEnterWidth1:{width:"x1ygkb0v",$$css:!0},animationEnterWidth2:{width:"x1247r65",$$css:!0},animationEnterWidth3:{width:"xdc2ju1",$$css:!0},animationEnterWidth4:{width:"xgbm1jk",$$css:!0},animationEnterWidth5:{width:"x1rdo73f",$$css:!0},animationEnterWidth6:{width:"x13oubkp",$$css:!0},animationLeave:{animationDuration:"x773k2o",animationName:"xvma63k",opacity:"xg01cxk",width:"xnalus7",$$css:!0}};function n(a){switch(a){case 1:return m.animationEnterWidth1;case 2:return m.animationEnterWidth2;case 3:return m.animationEnterWidth3;case 4:return m.animationEnterWidth4;case 5:return m.animationEnterWidth5;case 6:return m.animationEnterWidth6;default:return null}}function o(){var a=l(new Map());function b(){return a.current}j(function(){return function(){return Array.from(b().values()).forEach(window.clearTimeout)}},[]);return b()}function p(){var a=c("useForceUpdate")(),b=c("useIsMountedRef")();return c("useStable")(function(){return function(){b.current&&a()}})}function a(a,b,d,e){var f=p(),g=o(),h=c("useStable")(function(){return new Map()}),j=l(!0),q=d.duration,r=q===void 0?100:q,s=d.durationIn,t=d.durationOut,u=d.onEnter,v=d.onEnterComplete,w=d.onLeave,x=d.onLeaveComplete,y=i(function(a,b,c){return{item:b,key:a,order:c,style:{transitionDuration:((a=s)!=null?a:r)+"ms"},xstyle:[m.animationBase,j.current&&m.animationEnter,j.current&&n((c=b==null?void 0:b.reactionCountCharactersNum)!=null?c:0)]}},[s,r]),z=new Map(a.map(function(a,c){return[b(a),{item:a,order:c}]})),A=c("differenceSets")(new Set(z.keys()),new Set(h.keys())),B=c("differenceSets")(new Set(h.keys()),new Set(z.keys())),C=new Map();q=Array.from(c("mapSet")(B,function(a){a=c("nullthrows")(h.get(a));a=a.order;return a})).sort(function(a,b){return a-b});q.forEach(function(b,c){b=b-c;while(b<a.length){c=(c=C.get(b))!=null?c:0;C.set(b,c+1);b+=1}});d=c("sortBy")([].concat(c("mapMapToArray")(h,function(a){var b=a.key;b=z.get(b);if(b){return babelHelpers["extends"]({},a,{item:b.item,order:b.order+((b=C.get(b.order))!=null?b:0)})}return a}),Array.from(c("mapSet")(A,function(a){var b=c("nullthrows")(z.get(a)),d=b.item;b=b.order;return y(a,d,b)}))),function(a){return a.order});k(function(){if(e===!0)return;a.forEach(function(a,d){var e,i=b(a),j=(e=h.get(i))!=null?e:y(i,a,d);A.has(i)&&window.requestAnimationFrame(function(){var b;j.xstyle=[m.animationBase,m.animationEnter,n((b=a==null?void 0:a.reactionCountCharactersNum)!=null?b:0)];window.clearTimeout(g.get(i));g.set(i,window.setTimeout(function(){v&&v(a)},(b=s)!=null?b:r));c("setImmediate")(function(){var b;j.xstyle=[m.animationBase,m.animationEnter,n((b=a==null?void 0:a.reactionCountCharactersNum)!=null?b:0)];u&&u(a);f()})});j.item=a;j.order=d+((e=C.get(d))!=null?e:0);h.set(i,j)});Array.from(B.values()).forEach(function(a){var b=h.get(a);if(b==null)return;var d=b.item;if(b.status!=="leaving"){var e;b.status="leaving";b.style={transitionDuration:((e=t)!=null?e:r)+"ms"};window.requestAnimationFrame(function(){var e;b.xstyle=[m.animationBase,m.animationLeave];window.clearTimeout(g.get(a));g.set(a,window.setTimeout(function(){h["delete"](a),x&&x(d),f()},(e=t)!=null?e:r));c("setImmediate")(function(){w&&w(d),f()})})}});j.current=!1});return d}g["default"]=a}),98);
__d("useSendReactionCallbackQueue",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useRef,j=b.useState,k=1e3,l=1500;function a(){var a=i(new Map()),b=i(null),c=j(!1),d=c[0],e=c[1];c=function(c,d){e(!0),window.clearTimeout(b.current),a.current.set(c,d),b.current=window.setTimeout(function(){f()},l)};var f=function c(){if(a.current.size>0){e(!0);var d=Array.from(a.current.entries())[0],f=d[0];d=d[1];d();a.current["delete"](f);b.current=window.setTimeout(function(){c()},l)}else g()},g=function(){window.setTimeout(function(){b.current=null,e(!1)},k)};return[c,d]}g["default"]=a}),98);
__d("MWMessageReactionsList.react",["I64","LSAuthorityLevel","LSIntEnum","MWMessageReaction.react","MWMultiReactConstants","intlSummarizeNumber","react","stylex","useEmojiReactionDynamicStyleXTransition","useSendReactionCallbackQueue"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=i||(i=d("react")),m=i.useRef;function a(a){var b=a.emojis,e=a.hideTooltip,f=a.isMultiReactExpanded,g=a.isReactionReadOnly,i=a.message,n=a.onTooltipCTAPress,o=a.previousReactionItems,p=a.reactionItemsShown,q=a.reactionsV2,r=a.sendReactionThrottled,s=a.setIsReactionsRowAnimationInProgress,t=a.setShouldAnimate,u=a.shouldAnimate,v=a.showTooltip,w=a.threadKey,x=a.tooltipIndex,y=p.length,z=m(y);a=c("useSendReactionCallbackQueue")();var A=a[0],B=a[1];a=function(){z.current=y,s(!1),f&&t(!1)};var C=function(){z.current=y,s(!1)},D=[];q!=null&&(D=p.map(function(a,f){var h=a.emoji;a=a.reaction;return b[f]==null?null:{element:l.jsx(c("MWMessageReaction.react"),{emoji:h,isProcessingReactions:B,isReadOnly:g,isTooltipShown:x===f,message:i,onFocus:function(){return v(f)},onMouseEnter:function(){return v(f)},onMouseLeave:e,onTooltipCTAPress:n,queueSendReactionCallback:A,reaction:a,sendReaction:r,shouldAnimate:(o==null?void 0:o.find(function(a){return a.emoji.join("")===h.join("")}))==null&&(j||(j=d("I64"))).equal(a.authorityLevel,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC)),threadKey:w},h),key:b.toString()+f,reactionCountCharactersNum:c("intlSummarizeNumber")((j||(j=d("I64"))).to_int32(a.count)).length}}));q=c("useEmojiReactionDynamicStyleXTransition")(D,function(a){return a!=null?a.key:0},{duration:d("MWMultiReactConstants").REACTIONS_ROW_EXPAND_COLLAPSE_ANIMATION_TOTAL_DURATION,onEnterComplete:a,onLeaveComplete:C});return u?q.map(function(a){return l.jsx("div",{className:(h||(h=c("stylex")))([a==null?void 0:a.xstyle]),style:babelHelpers["extends"]({},a.style),children:a.item&&a.item.element},a.key)}):D.map(function(a){return a==null?void 0:a.element})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useGetMultiReactOrderedItems",["I64","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i;b=h||d("react");var j=b.useMemo,k=b.useRef;function l(a,b){var c={};a.forEach(function(a){c[a]=!0});var d=a;b.forEach(function(a){a=a.emoji.join("");if(c[a])return;d.push(a)});return d}function m(a,b){b=((b=b)!=null?b:[]).filter(function(a){return(i||(i=d("I64"))).gt(a.count,i.zero)});return b.map(function(b,c){return{emoji:a[c],reaction:b}}).filter(function(a){return a.emoji!=null})}function a(a,b){var c=k(!0),e=k([]),f=j(function(){return m(a,b)},[a,b]),g=j(function(){var a={};f.forEach(function(b){a[b.emoji.join("")]=b});return a},[f]);return j(function(){if(c.current)c.current=!1,e.current=f.sort(function(a,b){return(i||(i=d("I64"))).compare(b.reaction.count,a.reaction.count)}).map(function(a){return a.emoji.join("")});else{var a=e.current.filter(function(a){a=g[a];return a==null?!1:(i||(i=d("I64"))).to_int32(a.reaction.count)>0});e.current=l(a,f)}return e.current.map(function(a){return g[a]}).filter(Boolean)},[g,f])}g["default"]=a}),98);
__d("MWMessageReactionsContainerV2.react",["LSMessagingThreadTypeUtil","MAWPSendOrRemoveReaction.react","MWAddReactionButton.react","MWExpandReactionsButton.react","MWLSThread","MWMessageReactionsList.react","MWMultiReactConstants","ReQL","ReQLSuspense","emptyFunction","justknobx","react","stylex","unrecoverableViolation","useGetMultiReactOrderedItems","useIsMultiReactionEnabled","useIsReactionsV2Enabled","useOnOutsideClick","usePrevious","useReStore","useThrottled"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=j||(j=d("react"));b=j;var l=b.useCallback,m=b.useRef,n=b.useState,o={wrapper:{alignItems:"x1cy8zhl",display:"x78zum5",flexDirection:"x1q0g3np",flexWrap:"x1a02dak",marginTop:"x1gslohp",$$css:!0},wrapperOutgoing:{alignItems:"xuk3077",justifyContent:"x13a6bvl",$$css:!0}};function a(a){var b,e=a.emojis,g=a.isMultiReactRowExpanded,j=a.message,p=a.onOpenDialog,q=a.outgoing,r=a.reactionsV2,s=a.toggleMultiReactionRowExpansion;a=n(-1);var t=a[0],u=a[1],v=c("justknobx")._("2078");a=n({isReactionsRowAnimationInProgress:!1,shouldAnimate:v});var w=a[0],x=a[1],y=function(a){v&&x(function(b){return babelHelpers["extends"]({},b,{isReactionsRowAnimationInProgress:a})})},z=function(a){v&&x(function(b){return babelHelpers["extends"]({},b,{shouldAnimate:a})})};a=n(!1);var A=a[0],B=a[1];a=j.threadKey;var C=(h||(h=c("useReStore")))(),D=d("MWLSThread").useThread(a),E=d("ReQLSuspense").useFirst(function(){return(D==null?void 0:D.parentThreadKey)?d("ReQL").fromTableAscending(C.tables.community_folders).getKeyRange(D==null?void 0:D.parentThreadKey):d("ReQL").empty()},[C,D==null?void 0:D.parentThreadKey],f.id+":99");b=(b=D)!=null?b:{};b=b.threadType;if(b==null)throw c("unrecoverableViolation")("thread cannot be null when reacting to message","messenger_web_messaging");var F=d("LSMessagingThreadTypeUtil").isArmadilloSecure(b),G=d("LSMessagingThreadTypeUtil").isDiscoverableChannel(b),H=c("useOnOutsideClick")(g?function(){A||(z(!0),s&&s(),y(!0))}:null),I=d("useIsMultiReactionEnabled").useIsMultiReactEnabled(a),J=d("MAWPSendOrRemoveReaction.react").useSendOrRemoveReaction(j,F,"instant_react"),K=l(function(a,b){return J(j.messageId,a,b?"remove_reaction":"reaction")},[J,j.messageId]),L=c("useThrottled")(function(a,b){K(a,b)},750),M=m(null),N=l(function(a){if(t===a)return;B(!0);M.current!=null&&window.clearTimeout(M.current);u(-1);M.current=window.setTimeout(function(){u(a)},1500)},[t]),O=l(function(){B(!1),M.current!=null&&window.clearTimeout(M.current),M.current=window.setTimeout(function(){return u(-1)},300)},[]),P=l(function(a,b){p({reactionFbid:a,reactionType:b}),O()},[O,p]),Q=c("useGetMultiReactOrderedItems")(e,r);I=I?G===!0?d("MWMultiReactConstants").PUBLIC_CHANNELS_MAX_REACTIONS_EMOJIS_PREVIEWED_WHEN_COLLAPSED:d("MWMultiReactConstants").CM_MAX_REACTION_EMOJIS_ALLOWED:d("MWMultiReactConstants").DEFAULT_MAX_REACTION_PREVIEWED_ALLOWED;var R=g?Q:Q.slice(0,I);I=g?[]:Q.slice(I);var S=I.length;I=Q.length||0;Q=c("usePrevious")(Q);if(I<1)return null;E=D==null?!1:d("useIsReactionsV2Enabled").isReactionsV2ReadOnly(D,E==null?void 0:E.communityType);var T=!q&&w.isReactionsRowAnimationInProgress;G=!E&&I>0&&(G||I<d("MWMultiReactConstants").CM_MAX_REACTION_EMOJIS_ALLOWED)&&!T;I=S>0&&!T;return k.jsxs("div",{className:(i||(i=c("stylex")))(o.wrapper,q?o.wrapperOutgoing:!1),"data-testid":void 0,ref:H,children:[k.jsx(c("MWMessageReactionsList.react"),{emojis:e,hideTooltip:O,isMultiReactExpanded:g,isReactionReadOnly:E,message:j,onTooltipCTAPress:P,previousReactionItems:Q,reactionItemsShown:R,reactionsV2:r,sendReactionThrottled:L,setIsReactionsRowAnimationInProgress:y,setShouldAnimate:z,shouldAnimate:w.shouldAnimate,showTooltip:N,threadKey:a,tooltipIndex:t}),I?k.jsx(c("MWExpandReactionsButton.react"),{isMultiReactExpanded:g,isReactionReadOnly:E,isSecure:F,message:j,numOverflowEmojis:(T=S)!=null?T:0,sendReaction:K,setIsReactionsRowAnimationInProgress:y,threadKey:a,threadType:b,toggleMultiReactExpanded:(q=s)!=null?q:c("emptyFunction")}):null,G?k.jsx(c("MWAddReactionButton.react"),{isSecure:F,message:j,sendReaction:function(a,b){S>0&&(s==null?void 0:s()),window.setTimeout(function(){K(a,b)},S*10)},setShouldRowStayExpanded:B,threadKey:a,threadType:b}):null]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWMessageRequestComposerBanner.react",["fbt","I64","JSResourceForInteraction","LSIntEnum","LSMessageThreadUnsendabilityStatus","MWMessageRequestSharedTexts.react","MWXComposerBanner.react","MessageRequestsLog","MessengerMSplitFlag","MessengerWebUXLogger","react","useMWXConfirmationDialog","useMWXLazyDialog"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||(i=d("react"));b=i;var m=b.useCallback,n=b.useMemo;function a(a){var b=a.isGroup,e=a.isGXAC,f=a.isIgContact,g=a.isMSplitContact,i=a.name,o=a.onDeleteConversation,p=a.onLeaveGroup,q=a.otherUserContact,r=a.secondaryName,s=a.thread,t=c("useMWXConfirmationDialog")();a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWChatBlockActionDialog.react").__setRef("MWMessageRequestComposerBanner.react"));var u=a[0];a[1];var v=(j||(j=d("I64"))).equal(s.threadType,(k||(k=d("LSIntEnum"))).ofNumber(1))&&s.cannotUnsendReason!=null&&(j||(j=d("I64"))).equal(s.cannotUnsendReason,(k||(k=d("LSIntEnum"))).ofNumber(c("LSMessageThreadUnsendabilityStatus").DENY_IF_PAGE_THREAD)),w=q!=null?(j||(j=d("I64"))).to_string(q.id):void 0,x=n(function(){return{onConfirm:o,thread:s}},[o,s]),y=m(function(){var a;u({loggingData:{entryPoint:4,requestId:void 0,source:v?5:1,sourceOwner:0},targetFBID:(a=w)!=null?a:(j||(j=d("I64"))).to_string(s.threadKey),thread:s})},[v,w,s,u]),z=m(function(){t({body:h._("__JHASH__RPa59uyqDnD__JHASH__"),title:h._("__JHASH__QD3NL6bztov__JHASH__")},p)},[t,p]);a=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWChatDeleteConversationDialog.react").__setRef("MWMessageRequestComposerBanner.react"));var A=a[0],B=c("MessengerWebUXLogger").useInteractionLogger();q=n(function(){return{label:h._("__JHASH__-p5reen4SU3__JHASH__"),onPress:function(){d("MessageRequestsLog").logActionTapped(s,2,w),y()}}},[w,s,y]);a=n(function(){return{label:h._("__JHASH__9sXJViR2MXn__JHASH__"),onPress:function(){d("MessageRequestsLog").logActionTapped(s,10),B==null?void 0:B({eventName:"leave_group",threadKey:s.threadKey,threadType:s.threadType}),z()}}},[s,B,z]);var C=b?a:q;a=h._("__JHASH__lzIMTtzL2x8__JHASH__");b?(q=e?h._("__JHASH__Zo8nGcr-Wbu__JHASH__"):void 0,a=e?h._("__JHASH__dGW95F1FSGX__JHASH__"):c("MessengerMSplitFlag").is_msplit_account?h._("__JHASH__MWNB1ho8ez7__JHASH__"):h._("__JHASH__8Xn13sU52xi__JHASH__")):(q=f?h._("__JHASH__CEpoRXODTMn__JHASH__"):void 0,f?i!=null&&r!=null?a=h._("__JHASH__WhaEH6LWAgw__JHASH__",[h._param("XACDisplayName",i),h._param("XACSecondaryName",r)]):i==null&&r!=null?a=h._("__JHASH__qZp511P-lrQ__JHASH__",[h._param("XACDisplayName",r)]):a=h._("__JHASH__UMff0aQK9RN__JHASH__"):a=i!=null?h._("__JHASH__PiWKQUwgi8l__JHASH__",[h._param("Composer info message",c("MessengerMSplitFlag").is_msplit_account||g?d("MWMessageRequestSharedTexts.react").getFBUserInfoTextMessageForMSplit(i):d("MWMessageRequestSharedTexts.react").getFBUserInfoTextMessage(i))]):h._("__JHASH__5qC4Qq1WTkB__JHASH__"));b=n(function(){return{label:C.label,onPress:C.onPress,size:32,type:"secondary"}},[C.label,C.onPress]);e=n(function(){return{label:h._("__JHASH__OllJcbQyTkT__JHASH__"),onPress:function(){d("MessageRequestsLog").logActionTapped(s,8,w),A(x)},size:32,type:"secondary"}},[A,w,s,x]);return l.jsx(c("MWXComposerBanner.react"),{bodyText:a,buttons:[b,e],headerText:q,testid:void 0})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWMessageSeenCountTooltip.react",["fbt","I64","Int64Hooks","LSMessagingThreadTypeUtil","MWClickedMessageContext.react","MWLSThread","MWLogBroadcastChannelFalcoEvent","MWMessageDeliveryStatus","MWMessageUnsentTimestampText.react","MWXTooltip.react","ReQL","ReQLSuspense","getMessengerPreciseTimestamp","gkx","justknobx","react","useReStore","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react")),m=k.useMemo,n=c("gkx")("23219")?3:11;function o(a){var b,e=(i||(i=c("useReStore")))(),g=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(e.tables.community_chat_message_seen_count).getKeyRange(a.threadKey,a.messageId)},[e,a.threadKey,a.messageId],f.id+":46"),k=(b=d("MWLSThread").useThread(a.threadKey,function(a){return d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a.threadType)}))!=null?b:!1,o=g?(j||(j=d("I64"))).to_int32(g.seenCount):null;b=d("Int64Hooks").useCallbackInt64(function(){if(!k)return;d("MWLogBroadcastChannelFalcoEvent").logBroadcastChannelFalcoEvent({action:2,event:16,parentSurface:n,source:15,surface:7,threadFbid:a.threadKey})},[k,a.threadKey]);var p=c("useSinglePartialViewImpression")({onImpressionStart:b});return m(function(){var b=a.isUnsent,e=a.timestampMs,f=a.unsentTimestampMs;if(f!=null&&b)return[l.jsx(c("MWMessageUnsentTimestampText.react"),{timestampMs:a.timestampMs,unsentTimestampMs:f},"first"),h._("__JHASH__8eZEd_EeDsx__JHASH__")];b=o!=null?d("MWMessageDeliveryStatus").getSeenCount(o):d("MWMessageDeliveryStatus").Titles.loading;return[l.jsxs("div",{children:[l.jsx("div",{children:h._("__JHASH__GNnexJRNZQN__JHASH__",[h._param("time",c("getMessengerPreciseTimestamp")((j||(j=d("I64"))).to_float(e)))])}),(!c("justknobx")._("2943")||o!==0)&&l.jsx("div",{ref:p,children:b})]},"first"),b]},[a,p,o])}function a(a){var b=a.children,d=a.message;a=c("MWClickedMessageContext.react").useHook();var e=a.fetchMessageSeenCount;a=o(d);var f=a[0];a=a[1];return l.jsx(c("MWXTooltip.react"),{align:"middle",label:a,onVisibilityChange:function(a){a&&e(d.threadKey,d.messageId)},position:"start",tooltip:f,children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWPArmadilloLoadingStateMessage.react",["fbt","MWXColumn.react","MWXColumnItem.react","MWXSpinner.react","MWXText.react","cr:6285","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(a){a=a.threadKey;a=b("cr:6285")(a);return a?null:j.jsxs(c("MWXColumn.react"),{align:"center",id:"armadillo-loading-indicator-banner",paddingVertical:12,spacing:8,children:[j.jsx(c("MWXColumnItem.react"),{children:j.jsx(c("MWXSpinner.react"),{color:"disabled",size:20})}),j.jsx(c("MWXColumnItem.react"),{children:j.jsx(c("MWXText.react"),{type:"entityHeaderMeta1",children:h._("__JHASH__7VvIEysTDk2__JHASH__")})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWPComposerDraftMessages",["FBLogger","I64","LSMessagingThreadTypeUtil","MAWFindFirstUrl","MAWIsLinkPreviewXMAEnabled","MWHasLinksUtil","cr:5710","justknobx","uuidv4"],(function(a,b,c,d,e,f,g){"use strict";var h,i=new Map(),j=void 0;function k(){return Array.from(i.values()).some(function(a){return a.messageText.trim()!==""})}function l(a){return i.get((h||(h=d("I64"))).to_string(a))}function m(){if(!c("justknobx")._("2955")||b("cr:5710")==null||j!=null)return;j=b("cr:5710").onBeforeUnload(function(){if(k())return"You have pending messages. Please wait for them to be sent before closing the window.";return},!1)}function a(a){var b=a.deleteLinkPreviewXMATableData,e=a.fetchAndWriteLinkPreviewXMA,f=a.message,g=a.threadKey;a=a.threadType;if(f==null){i["delete"]((h||(h=d("I64"))).to_string(g));if(i.size===0){var k;(k=j)==null?void 0:k.remove();j=void 0}return}i.has((h||(h=d("I64"))).to_string(g))?n(g,f):i.set((h||(h=d("I64"))).to_string(g),{id:c("uuidv4")(),linkPreviewURL:null,messageText:f});k=a!=null&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(a);k&&d("MAWIsLinkPreviewXMAEnabled").isLinkPreviewXMAEnabled()&&o(g,f,e,b);m()}function n(a,b){var e=l(a);if(e==null){c("FBLogger")("messenger_web_messaging").mustfix("currentDraft was null in updateDraftMessageText");return}i.set((h||(h=d("I64"))).to_string(a),babelHelpers["extends"]({},e,{messageText:b}))}function o(a,b,e,f){var g,h=l(a);if(h==null){c("FBLogger")("messenger_web_sharing").mustfix("currentDraft was null in updateDraftMessageURL");return}var i=h==null?void 0:h.linkPreviewURL;g=(g=d("MAWFindFirstUrl").findFirstUrl(b))!=null?g:[];b=d("MWHasLinksUtil").getHasLinks(b);b=b?(b=(b=g[0])==null?void 0:b.entity.url)!=null?b:null:null;if(i===b)return;if(b==null){p(a,h,null);f&&void f({draftId:h.id});return}p(a,h,b);e&&void e({draftId:h.id,urls:g})}function p(a,b,c){i.set((h||(h=d("I64"))).to_string(a),babelHelpers["extends"]({},b,{linkPreviewURL:c}))}g.getDraftMessage=l;g.updateDraftMessage=a}),98);
__d("MWPComposerPlaceholder.react",["CometPlaceholder.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function j(a){a=a.height;return i.jsx("div",{className:"x1exxf4d x13fuv20 x178xt8z",style:{height:a.toString()+"px"}})}j.displayName=j.name+" [from "+f.id+"]";function a(a){var b=a.children;a=a.height;return i.jsx(c("CometPlaceholder.react"),{fallback:i.jsx(j,{height:a}),children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPConcatenateMessageListsDataSource",["ReplayLastSubject","relay-runtime","switchMap"],(function(a,b,c,d,e,f,g){"use strict";a=function(){function a(a){var b=a.count,e=a.first,f=a.getSecond;this.$1=c("switchMap")(e,function(a){var c=a.data.length;if(c>=b||a.hasMore||a.isLoadingMore)return new(d("ReplayLastSubject").ReplayLastSubject)(babelHelpers["extends"]({},a,{hasMore:!0}));c=d("relay-runtime").Observable.from(f(b-c));return c.map(function(b){return{data:[].concat(a.data,b.data),hasMore:a.hasMore||b.hasMore,isLoadingMore:a.isLoadingMore||b.isLoadingMore}})})}var b=a.prototype;b.subscribe=function(a){return this.$1.subscribe(a)};return a}();g["default"]=a}),98);
__d("MWPEditMessageHistoryListText.react",["MWChatTextTransform","MWUnvaultedText","MWXMessageTextWithEntities.react","MWXText.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||d("react"),k={incoming:{color:"x18lvrbx",$$css:!0},outgoing:{color:"xyk4ms5",$$css:!0},regular:{marginTop:"x1gslohp",marginEnd:"x11i5rnm",marginBottom:"x12nagc",marginStart:"x1mh8g0r",textAlign:"x1yc453h",whiteSpace:"x126k92a",$$css:!0}};function a(a){var b=a.isSecureMessage,e=a.maxLength,f=a.maxLines,g=a.seeLessLinkProps,i=a.seeMoreLinkProps,l=a.text,m=a.truncationStyle,n=a.outgoing,o=a.ranges,p=a.renderers,q=a.transforms;a=a.xstyleForText;b=d("MWUnvaultedText").useMWUnvaultedText(b,l);return j.jsx(c("MWXText.react"),{color:n?"white":"primary",type:"body3",children:j.jsx("div",{className:(h||(h=c("stylex")))(k.regular,a,n?k.outgoing:k.incoming),dir:"auto",children:j.jsx(c("MWXMessageTextWithEntities.react"),{maxLength:e,maxLines:f,ranges:o,renderers:p,seeLessLinkProps:g,seeMoreLinkProps:i,text:b||"",transforms:(l=q)!=null?l:d("MWChatTextTransform").textTransforms,truncationStyle:m,truncationThreshold:2,withParagraphs:!0})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPEditedMessageHistoryEntry.react",["MWPEditMessageHistoryListText.react","MWXMessageBubble.react","react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react")),k=i.useState,l={border:{boxShadow:"x7h7r2v",$$css:!0},inner:{display:"x78zum5",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",marginBottom:"xjpr12u",minWidth:"xeuugli",opacity:"xbyyjgo",$$css:!0},makeSpaceForMessageActions:{maxWidth:"x1no2skz",$$css:!0},messageBubbleIncoming:{paddingEnd:"x1k62owy",$$css:!0},messageBubbleOutgoing:{paddingStart:"x6plb61",$$css:!0},outgoing:{flexDirection:"x15zctf7",$$css:!0}};function a(a){var b=a.isReply,d=a.isSecureMessage,e=a.messageHistoryEntry,f=a.outgoing,g=a.renderMessageActions;a={color_DEPRECATED:f?"white":void 0,weight_DEPRECATED:"semibold"};var i=k(!1),m=i[0],n=i[1];return j.jsxs("div",{className:(h||(h=c("stylex")))(l.inner,f&&l.outgoing),"data-testid":void 0,onMouseEnter:function(){g!=null&&n(!0)},onMouseLeave:function(){g!=null&&n(!1)},role:"none",children:[j.jsx("div",{className:h(g?l.makeSpaceForMessageActions:f?l.messageBubbleOutgoing:l.messageBubbleIncoming),children:j.jsx(c("MWXMessageBubble.react"),{align:f?"right":"left",color:f?"outgoing":"incoming",connectBottom:!1,connectTop:!1,variant:"opaque",xstyle:!f&&b&&l.border,children:j.jsx(c("MWPEditMessageHistoryListText.react"),{isSecureMessage:d,maxLength:300,maxLines:3,outgoing:f,ranges:[],seeLessLinkProps:a,seeMoreLinkProps:a,text:e.messageContent||"",truncationStyle:"see-more-and-less"})})}),g&&m?j.jsx("div",{className:"xc26acl x78zum5",children:g(e)}):null]})}a.displayName=a.name+" [from "+f.id+"]";g.MWPEditedMessageHistoryEntry=a}),98);
__d("useEditMessageHistoryLS",["ReQL","ReQLSuspense","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useMemo;function a(a,b){var e=(h||(h=c("useReStore")))(),g=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(e.tables.edit_message_history.index("originalMsgPkEditTs")).getKeyRange(a)},[e,a],f.id+":29");return j(function(){return b?g.slice(0,-1):g},[g,b])}g["default"]=a}),98);
__d("MWPEditedMessageHistoryList.react",["I64","MWMessageEditContext.react","MWPEditedMessageHistoryEntry.react","QPLUserFlow","cr:4654","qex","qpl","react","stylex","useEditMessageHistoryLS","useMAWSeparateReadsSelector"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=i||(i=d("react")),l=i.useEffect,m={base:{backgroundColor:"x1eb86dx",maxWidth:"x193iq5w",zIndex:"x1vjfegm",$$css:!0},incoming:{display:"x1lliihq",paddingStart:"xd06s5i",$$css:!0},outgoing:{display:"x1lliihq",paddingEnd:"x1sxyh0",$$css:!0}};function a(a){var e=a.editCount,f=a.isReply,g=a.isSecureMessage,i=a.msgId,o=a.outgoing,p=a.renderMessageActions,q=a.threadType;a=a.xstyle;var r=d("MWMessageEditContext.react").useMWMessageEditContext()||{showEdits:!1},s=r.showEdits;r=c("useEditMessageHistoryLS")(i,g);i=b("cr:4654")(i,g);var t=d("useMAWSeparateReadsSelector").useMAWSeparateReadsArraySelector("EditMessageHistory",i,r,g&&((i=c("qex")._("228"))!=null?i:!1),n);l(function(){s&&(c("QPLUserFlow").addAnnotations(c("qpl")._(1056849214,"1777"),{bool:{isSecureMessage:g},"int":{threadType:(j||(j=d("I64"))).to_int32(q)}}),t!=null&&e!=null&&t.length===(j||(j=d("I64"))).to_int32(e)?c("QPLUserFlow").endSuccess(c("qpl")._(1056849214,"1777")):c("QPLUserFlow").endFailure(c("qpl")._(1056849214,"1777"),"no edits found"))},[t,e,s,g,q]);r=k.jsx("div",{className:(h||(h=c("stylex")))(m.base,o?m.outgoing:m.incoming,a),role:"none",children:t.map(function(a,b){return k.jsx(d("MWPEditedMessageHistoryEntry.react").MWPEditedMessageHistoryEntry,{isReply:f,isSecureMessage:g,messageHistoryEntry:a,outgoing:o,renderMessageActions:p},b)})});return s?r:null}a.displayName=a.name+" [from "+f.id+"]";function n(a,b){return(j||(j=d("I64"))).compare(a.pk,b.pk)}g["default"]=a}),98);
__d("MWPFeatureLimitLoggingUtils",["I64","Int64Hooks","LSFeatureLimitsType","LSIntEnum","LSMessagingThreadTypeUtil","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=c("requireDeferred")("MwbActorExperienceEventFalcoEvent").__setRef("MWPFeatureLimitLoggingUtils");function a(a,b,c){var e=k(c);return d("Int64Hooks").useCallbackInt64(function(){var c;l({action:1,restriction_type:a,surface:e,thread_id:(h||(h=d("I64"))).to_string((c=b)!=null?c:(h||(h=d("I64"))).zero)})},[b,a,e])}function b(a,b,c){var e=k(c);return d("Int64Hooks").useCallbackInt64(function(){var c;l({action:2,restriction_type:a,surface:e,thread_id:(h||(h=d("I64"))).to_string((c=b)!=null?c:(h||(h=d("I64"))).zero)})},[b,a,e])}function e(a){if(a)if((h||(h=d("I64"))).equal(a.type_,(i||(i=d("LSIntEnum"))).ofNumber(c("LSFeatureLimitsType").MESSAGE_SEND_PRIVATE)))return 40;else if((h||(h=d("I64"))).equal(a.type_,(i||(i=d("LSIntEnum"))).ofNumber(c("LSFeatureLimitsType").MESSAGE_SEND_PUBLIC)))return 39;else return 6;return 0}function k(a){if(a){var b=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a),c=d("LSMessagingThreadTypeUtil").isOneToOne(a);if(c)return b?"messenger_encrypted_direct_thread":"messenger_direct_thread_details";c=d("LSMessagingThreadTypeUtil").isGroup(a);a=d("LSMessagingThreadTypeUtil").isPublicCMThread(a);if(c)return b?"messenger_encrypted_group_thread":a?"messenger_public_cm_chat":"messenger_group_thread_details"}return"unknown"}function l(a){var b=a.action,c=a.restriction_type,d=a.surface,e=a.thread_id;j.onReady(function(a){return a.log(function(){return{action:b,restriction_type:c,surface:d,thread_id:e}})})}g.useLogFeatureLimitComposerImpression=a;g.useLogViewCommunityStandards=b;g.getRestrictionTypeFromFeatureLimit=e}),98);
__d("useMWCMFetchSafetyInterventions",["I64","MWPActor.react","ReQL","ReQLSuspense","gkx","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){a===void 0&&(a="prompt");var b=(i||(i=c("useReStore")))(),e=d("MWPActor.react").useActor(),g=a==="composer_block",j=c("gkx")("5985"),k=d("ReQLSuspense").useArray(function(){return j?d("ReQL").fromTableAscending(b.tables.mwb_safety_interventions).filter(function(b){var c=b.logOnlySafetyInterventionType,f=b.mutImpressionsCount,i=b.userId;return b.uiType===a&&c==="education_notice_cm"&&i===(h||(h=d("I64"))).to_string(e)&&(g||(h||(h=d("I64"))).equal(f,(h||(h=d("I64"))).zero))}).map(function(a){return(h||(h=d("I64"))).to_string(a.interventionId)}):d("ReQL").empty()},[j,b.tables.mwb_safety_interventions,a,e,g],f.id+":31");return k}g["default"]=a}),98);
__d("useMWPFeatureLimitComposerBlockHeaderText",["fbt","I64","useServerTime"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=60*60*1e3,k=24*j,l=23*j,m=1e3;function a(a,b){var e=c("useServerTime")().valueOf();a=a!=null?(i||(i=d("I64"))).to_float(a.expirationTimestampSeconds)*1e3:e;a=a-e;if(a<=l){e=Math.ceil(Math.max(a,j)/j);return b?h._("__JHASH__MtDrzd4mllU__JHASH__",[h._plural(e,"number")]):h._("__JHASH__Oh7AJclyvOB__JHASH__",[h._plural(e,"number")])}else{e=Math.ceil(Math.max(a,k)/k);return e>=m?h._("__JHASH__XJkVHKZY5be__JHASH__"):b?h._("__JHASH__DoFdcIuVM_E__JHASH__",[h._plural(e,"number")]):h._("__JHASH__RWH0KbM4haJ__JHASH__",[h._plural(e,"number")])}}g["default"]=a}),226);
__d("MWPFeatureLimitsBlockedComposer.react",["fbt","I64","LSFeatureLimitsType","LSIntEnum","MWBlockedComposerLogging","MWCMContentTakedownEnforcementNoticeDialog.entrypoint","MWCMThreadTypes.react","MWPActor.react","MWPFeatureLimitLoggingUtils","MWPFeatureLimitedData","MWXComposerBanner.react","react","useMWCMFetchSafetyInterventions","useMWPFeatureLimitComposerBlockHeaderText","useMWXEntryPointDialog","useSinglePartialViewImpression"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=i||d("react");function a(a){a=a.thread;var b=c("useMWCMFetchSafetyInterventions")("composer_block"),e=(a==null?void 0:a.threadType)!=null?d("MWCMThreadTypes.react").isJoinedCMThread(a.threadType):!1;e=e&&b.length>0;var f=c("useMWXEntryPointDialog")(c("MWCMContentTakedownEnforcementNoticeDialog.entrypoint"),{interventions_ids:b}),g=f[0];d("MWBlockedComposerLogging").useLogMWBlockedComposerReason(a==null?void 0:a.threadKey,d("MWBlockedComposerLogging").ComposerBlockingReason.FEATURE_LIMITED_TO_READONLY);f=d("MWPFeatureLimitedData").useReadOnlyFeatureLimitDataWithThreadType(a==null?void 0:a.threadType);var i=d("MWPActor.react").isAPPlus();i=f!=null&&(j||(j=d("I64"))).equal(f.type_,(k||(k=d("LSIntEnum"))).ofNumber(c("LSFeatureLimitsType").MESSAGE_SEND_PUBLIC))&&i;var m=c("useMWPFeatureLimitComposerBlockHeaderText")(f,i);f=d("MWPFeatureLimitLoggingUtils").getRestrictionTypeFromFeatureLimit(f);var n=d("MWPFeatureLimitLoggingUtils").useLogFeatureLimitComposerImpression(f,a==null?void 0:a.threadKey,a==null?void 0:a.threadType);f=d("MWPFeatureLimitLoggingUtils").useLogViewCommunityStandards(f,a==null?void 0:a.threadKey,a==null?void 0:a.threadType);a=c("useSinglePartialViewImpression")({onImpressionStart:n});n=h._("__JHASH__7_EenTF_FJG__JHASH__");var o=h._("__JHASH__phCVAIUGUlz__JHASH__"),p={target:"_blank",url:"https://www.facebook.com/communitystandards/"},q=i||e?h._("__JHASH__9oilSt_qVYo__JHASH__"):h._("__JHASH___Q1doHhXtgm__JHASH__");return l.jsx("div",{ref:a,children:l.jsx(c("MWXComposerBanner.react"),{bodyText:i?o:n,buttons:[{label:q,linkProps:e?void 0:p,onPress:e?function(){g({interventionsIds:b},function(){})}:f}],headerText:m})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWPJumpToMostRecentMessageButtonAnimationWrapper.react",["react","stylex"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useEffect,l=b.useMemo,m=b.useState,n={animateIn:{animationDuration:"x2mfxb",animationName:"x1j49z95",transform:"x1dufm33",$$css:!0},animateOut:{animationDuration:"x2mfxb",animationName:"x1j4bph1",transform:"xk9af5f",$$css:!0},animationWrapper:{bottom:"x1ey2m1c",start:"x14yxtea",position:"x10l6tqk",zIndex:"x1vjfegm",$$css:!0}};function a(a){var b=a.children,d=a.visible;a=m(d);var e=a[0],f=a[1];k(function(){d&&f(!0)},[d,f]);return l(function(){return e?j.jsx("div",{className:"xqtp20y x1n2onr6 xh8yej3",children:j.jsx("div",{className:(h||(h=c("stylex")))([n.animationWrapper,d?n.animateIn:n.animateOut]),onAnimationEnd:function(a){d||f(!1)},children:b})}):null},[d,e,f,b])}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("memoizeObservable",["deepEquals","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h={};function a(a,b){b===void 0&&(b=c("deepEquals"));return d("relay-runtime").Observable.create(function(c){var d=h,e=a.subscribe({complete:function(){c.complete()},error:function(a){c.error(a)},next:function(a){b(d,a)||(d=a,c.next(a))}});return function(){e.unsubscribe()}})}g["default"]=a}),98);
__d("MWPMessageListSingleDirectionDataSource",["I64","LSMessageRenderingType","LSMessagingThreadTypeUtil","MAWJids","MLV2DataSourceLogger","Promise","ReQL","ReQLObservable","ReplayLastSubject","WAJids","combineLatestWith","cr:906","gkx","justknobx","memoizeObservable","promiseDone","relay-runtime","setTimeout","switchMap"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=b("cr:906")==null?void 0:b("cr:906").MAWMessagesLiveQuery;function k(a){return a.length>0?a[a.length-1]:void 0}var l=2;a=function(){function a(a,b,c,e,f,g,h,i,j){this.$7=new(d("ReplayLastSubject").ReplayLastSubject)(!1),this.$1=a,this.$2=b,this.$4=c,this.$3=e,this.$5=f,this.$6=g,this.$10=h,this.$9=d("MLV2DataSourceLogger").startMLV2LoggerForThread(this.$4.threadKey,this.$3,this.$5,h),this.$11=i,this.$12=j,this.$8=this.$13()}var e=a.prototype;e.subscribe=function(a){var b;(b=this.$9)==null?void 0:b.markQPLPoint("subscribed");return this.$8.subscribe(a)};e.$14=function(a){var b,d=this;this.$15(!0);(b=this.$9)==null?void 0:b.markQPLPoint("fetch_more_msgs_start");c("promiseDone")(this.$6.extendRange(a,this.$3,this.$11)["finally"](function(){var a;(a=d.$9)==null?void 0:a.markQPLPoint("fetch_more_msgs_end","begin attempting to extend a message range in a given direction");return d.$15(!1)}))};e.$15=function(a){var d=this;c("justknobx")._("3066")&&!a?c("promiseDone")(new(i||(i=b("Promise")))(function(a){return c("setTimeout")(a,0)}).then(function(){return d.$7.next(a)})):this.$7.next(a)};e.$16=function(a){var b=this.$4,e=b.messageId;b=b.timestampMs;e=(e==null||e==="")&&(h||(h=d("I64"))).equal(b,(h||(h=d("I64"))).max_int);b=e&&(h||(h=d("I64"))).equal(a.minTimestampMs,(h||(h=d("I64"))).max_int);e=!a.hasMoreBefore||b;e=this.$3==="asc"?{gte:d("ReQL").key(this.$4.timestampMs),lte:d("ReQL").key(a.hasMoreAfter?a.maxTimestampMs:(h||(h=d("I64"))).max_int)}:{gte:d("ReQL").key(e?(h||(h=d("I64"))).min_int:a.minTimestampMs),lte:d("ReQL").key(this.$4.timestampMs)};a=this.$2;var f=this.$4.secureThreadJid==null?null:(h||(h=d("I64"))).to_string(this.$4.secureThreadJid);if(a!=null&&f!=null&&j!=null){var g=d("LSMessagingThreadTypeUtil").isGroup(this.$10);g=g?d("WAJids").toGroupJid(f):d("MAWJids").toUserJid(f);return j(this.$12,a,this.$4.threadKey,g,this.$3,e,b?l:this.$5)}f=this.$3==="asc"?d("ReQL").fromTableAscending:d("ReQL").fromTableDescending;a=c("gkx")("5081")?f(this.$1.tables.messages.index("messageDisplayOrder")):f(this.$1.tables.messages);var i=a.getKeyRange(this.$4.threadKey).bounds(e).filter(function(a){var b=a.isCollapsed;a=a.messageRenderingType;return!b&&!(h||(h=d("I64"))).equal(a,(h||(h=d("I64"))).of_int32(c("LSMessageRenderingType").HIDDEN))}).take(b?l:this.$5);return d("ReQLObservable").create(this.$1,function(){return i})};e.$17=function(a,b,c){var d,e;b===void 0&&(b=[]);a=a;d=(d=k(b))==null?void 0:d[1];e=this.$3==="asc"?[c==null?void 0:c.maxMessageId,(e=c==null?void 0:c.hasMoreAfter)!=null?e:!1,(e=c==null?void 0:c.isLoadingAfter)!=null?e:!1]:[c==null?void 0:c.minMessageId,(e=c==null?void 0:c.hasMoreBefore)!=null?e:!1,(e=c==null?void 0:c.isLoadingBefore)!=null?e:!1];var f=e[0],g=e[1];e=e[2];d=b.length===this.$5&&(d!=null&&d.messageId!==f||!g);c!=null&&b.length<this.$5&&g&&!d&&!a&&!e&&(a=!0,this.$14(c));return{data:b,hasMore:d||g,isLoadingMore:a||!d&&e}};e.$13=function(){var a=this;return(h||(h=d("I64"))).equal(this.$4.timestampMs,(h||(h=d("I64"))).max_int)&&this.$3==="asc"?d("relay-runtime").Observable.from(new(d("ReplayLastSubject").ReplayLastSubject)({data:[],hasMore:!1,isLoadingMore:!1})):c("memoizeObservable")(c("combineLatestWith")(this.$7,c("switchMap")(this.$6.getOrCreateMessageRangeCoveringCursor(this.$4,this.$9,this.$11),function(b){var c;(c=a.$9)==null?void 0:c.markQPLPoint("emitting_range");(c=a.$9)==null?void 0:c.addQPLAnnotations({string:{range:JSON.stringify(babelHelpers["extends"]({},b,{maxTimestampMs:b.maxTimestampMs==null?null:(h||(h=d("I64"))).to_string(b.maxTimestampMs),minTimestampMs:b.minTimestampMs==null?null:(h||(h=d("I64"))).to_string(b.minTimestampMs)}))}});return a.$16(b).map(function(a){return{messages:a,messagesRange:b}})})).map(function(b){var c=b[0];b=b[1];b=(b=b)!=null?b:{};var d=b.messages;b=b.messagesRange;return a.$17(c,d,b)}))["do"]({error:function(b){var c;(c=a.$9)==null?void 0:c.markQPLFailure(b);a.$9=void 0},next:function(b){var c,d=b.data;b=b.isLoadingMore;(c=a.$9)==null?void 0:c.markQPLPoint("emitting_messages");if(!b){(c=a.$9)==null?void 0:c.addQPLAnnotations({"int":{final_query_count:a.$5,num_fetched:d.length}});(b=a.$9)==null?void 0:b.markQPLSuccess();a.$9=void 0}else{(c=a.$9)==null?void 0:c.markQPLPoint("waiting_for_fetch")}}})};return a}();g["default"]=a}),98);
__d("MWPMessageRangeDataSource",["I64","LSFactory","LSIntEnum","LSIssueMessagesRangeQueryStoredProcedure","LSMailboxMessagesRangeQueryDirection","LSMessagePointQueryStoredProcedure","MLV2DataSourceLogger","Promise","ReQL","ReQLObservable","asyncToGeneratorRuntime","err","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;a=function(a){var e=this;this.$2=function(a){return k(e.$1.tables.messages_ranges_v2__generated,a)};this.getOrCreateMessageRangeCoveringCursor=function(a,b,f){b==null?void 0:b.annotateMessageRangesDataSource("MWPMessageRangeDataSource");b==null?void 0:b.markQPLPoint("msys_message_range_fetch_start");return d("ReQLObservable").create(e.$1,function(){return e.$2(a)}).map(function(f){b==null?void 0:b.markQPLPoint("msys_message_range_fetch_end");f=(f=f[0])==null?void 0:f[1];if(f==null)if(a.messageId==null){var g;return{hasMoreAfter:!(j||(j=d("I64"))).equal(a.timestampMs,j.max_int),hasMoreBefore:!0,isLoadingAfter:!1,isLoadingBefore:!1,maxMessageId:(g=a.messageId)!=null?g:"",maxTimestampMs:a.timestampMs,minMessageId:(g=a.messageId)!=null?g:"",minTimestampMs:a.timestampMs,threadKey:a.threadKey}}else{c("promiseDone")(p(e.$1,a));return{hasMoreAfter:!0,hasMoreBefore:!0,isLoadingAfter:!0,isLoadingBefore:!0,maxMessageId:(g=a.messageId)!=null?g:"",maxTimestampMs:a.timestampMs,minMessageId:(g=a.messageId)!=null?g:"",minTimestampMs:a.timestampMs,threadKey:a.threadKey}}return f})};this.extendRange=function(a,g,i){var k=d("MLV2DataSourceLogger").getMLV2LoggerForThread(a.threadKey,g),o=a.threadKey;if(!n(a,g)){k==null?void 0:k.markQPLPoint("mwp_msg_range_not_extensible","Trying to extend a range that is not extensible");return(h||(h=b("Promise"))).resolve()}return e.$1.runInTransaction(function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var e;k==null?void 0:k.markQPLPoint("fetch_message_ranges_from_table_start","Find a range in the database matching the range we were handed.");e=(e=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(b.messages_ranges_v2__generated).getKeyRange(o).bounds({lte:d("ReQL").key(a.minTimestampMs)}).filter(function(b){return(j||(j=d("I64"))).ge(b.maxTimestampMs,a.maxTimestampMs)}))))!=null?e:a;if(!n(e,g)){k==null?void 0:k.markQPLPoint("mwp_msg_range_not_extensible","Trying to extend a range that is not extensible");return}if(!l(e,a,g)){k==null?void 0:k.markQPLPoint("mwp_msg_range_bound_mismatch","The range we are trying to extend has already been extended");return}k==null?void 0:k.markQPLPoint("mwp_fetch_message_ranges_start","Begin fetching message ranges");return c("LSIssueMessagesRangeQueryStoredProcedure")(c("LSFactory")(b),m(e,g))["finally"](function(){k==null?void 0:k.markQPLPoint("mwp_fetch_message_ranges_end","Finish fetching message ranges")})});return function(a){return e.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":131")};this.$1=a};function k(a,b){return d("ReQL").fromTableDescending(a).getKeyRange(b.threadKey).bounds({lte:d("ReQL").key(b.timestampMs)}).filter(function(a){return o(b,a)}).take(1)}function l(a,b,c){if(c==="asc")return(j||(j=d("I64"))).equal(a.minTimestampMs,b.minTimestampMs);else return(j||(j=d("I64"))).equal(a.maxTimestampMs,b.maxTimestampMs)}function m(a,b){var e=a.maxTimestampMs,f=a.minTimestampMs;a=a.threadKey;return b==="asc"?{direction:(i||(i=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").AFTER),referenceTimestampMs:e,threadKey:a}:{direction:(i||(i=d("LSIntEnum"))).ofNumber(c("LSMailboxMessagesRangeQueryDirection").BEFORE),referenceTimestampMs:f,threadKey:a}}function n(a,b){return b==="asc"&&a.hasMoreAfter&&!a.isLoadingAfter||b==="desc"&&a.hasMoreBefore&&!a.isLoadingBefore}function o(a,b){a=a.timestampMs;return((j||(j=d("I64"))).equal(a,(j||(j=d("I64"))).max_int)||(j||(j=d("I64"))).ge(b.maxTimestampMs,a))&&(j||(j=d("I64"))).le(b.minTimestampMs,a)}function p(a,b,c){return q.apply(this,arguments)}function q(){q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e===void 0&&(e=20);var g=b.messageId,h=b.threadKey;if(g==null)throw c("err")("Cannot issue a point query without a message ID.");yield a.runInTransaction(function(a){return c("LSMessagePointQueryStoredProcedure")(c("LSFactory")(a),{messageId:g,numContextMessages:(j||(j=d("I64"))).of_float(e),threadKey:h})},"readwrite",void 0,void 0,f.id+":285")});return q.apply(this,arguments)}g.MSYSMessageRangeDataSource=a}),98);
__d("MWPMessageListDataSource",["I64","LSMessagingThreadTypeUtil","MAWEBCombinedRangeDataSource","MWPConcatenateMessageListsDataSource","MWPMessageListSingleDirectionDataSource","MWPMessageRangeDataSource","combineLatestWith","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";var h;a=function(){var a=b.prototype;a.subscribe=function(a){return this.$1.subscribe(a)};function b(a,b,e,f,g){var k=e.after,l=e.before,m=e.cursor,n=e.secondaryThreadKey,o=e.secondaryThreadType,p=e.threadType,q=function(e,j){return new(c("MWPMessageListSingleDirectionDataSource"))(a,b,j==="desc"&&!(h||(h=d("I64"))).equal(m.timestampMs,(h||(h=d("I64"))).max_int)?babelHelpers["extends"]({},m,{timestampMs:(h||(h=d("I64"))).sub(m.timestampMs,(h||(h=d("I64"))).one)}):m,j,e,i(a,p),p,f,g)},r=function(e,j){return new(c("MWPMessageListSingleDirectionDataSource"))(a,b,{messageId:m.messageId,threadKey:c("nullthrows")(n),timestampMs:j==="desc"&&!(h||(h=d("I64"))).equal(m.timestampMs,(h||(h=d("I64"))).max_int)?(h||(h=d("I64"))).sub(m.timestampMs,(h||(h=d("I64"))).one):m.timestampMs},j,e,i(a,c("nullthrows")(o)),p,f,g)},s;n==null||o==null?(e=q(l,"desc"),s=q(k,"asc")):(e=new(c("MWPConcatenateMessageListsDataSource"))({count:l,first:q(l,"desc"),getSecond:function(a){return r(a,"desc")}}),s=new(c("MWPConcatenateMessageListsDataSource"))({count:k,first:r(k,"asc"),getSecond:function(a){return q(a,"asc")}}));this.$1=c("combineLatestWith")(e,s).map(function(a){var b=a[0];a=a[1];var c=b.data.toReversed().concat(a.data).sort(j(m.threadKey));return{data:c,hasNext:a.hasMore,hasPrevious:b.hasMore,isLoadingNext:a.isLoadingMore,isLoadingPrevious:b.isLoadingMore}})}return b}();function i(a,b){return d("LSMessagingThreadTypeUtil").isArmadilloSecure(b)?c("MAWEBCombinedRangeDataSource")(a):new(d("MWPMessageRangeDataSource").MSYSMessageRangeDataSource)(a)}var j=function(a){return function(b,c){b=b[1];c=c[1];var e=(h||(h=d("I64"))).compare(b.threadKey,c.threadKey);if(e!==0)return(h||(h=d("I64"))).equal(b.threadKey,a)?1:-1;e=h.compare(b.primarySortKey,c.primarySortKey);if(e!==0)return e;e=h.compare((e=b.secondarySortKey)!=null?e:(h||(h=d("I64"))).zero,(e=c.secondarySortKey)!=null?e:(h||(h=d("I64"))).zero);return e!==0?e:h.compare(b.timestampMs,c.timestampMs)}};g["default"]=a}),98);
__d("useIsNearBottomOfScrollArea",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useLayoutEffect,j=b.useState,k=10;function a(a,b){b===void 0&&(b=k);var c=j(!0),d=c[0],e=c[1];i(function(){var c=a.current;if(c==null)return;var d=function(){return e(Math.abs(c.scrollHeight-c.scrollTop-c.clientHeight)<b)},f=window.requestAnimationFrame(d);c.addEventListener("scroll",d);return function(){c.removeEventListener("scroll",d),window.cancelAnimationFrame(f)}},[b,a]);return d}g["default"]=a}),98);
__d("MWPMessageListJumpToMostRecentMessageButton.react",["MWPJumpToMostRecentMessageButtonAnimationWrapper.react","react","useIsNearBottomOfScrollArea"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).c,k=h||(h=c("react"));function a(a){var b=j(4),d=a.alwaysShow,e=a.jumpToMostRecentMessage,f=a.renderButton;a=a.scrollAreaRef;a=c("useIsNearBottomOfScrollArea")(a,108);a=a===!1||d;b[0]!==f||b[1]!==e||b[2]!==a?(d=f?k.jsx(c("MWPJumpToMostRecentMessageButtonAnimationWrapper.react"),{visible:a,children:f(e)}):null,b[0]=f,b[1]=e,b[2]=a,b[3]=d):d=b[3];return d}g["default"]=a}),98);
__d("MWPNewMessageDraftContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));c=h;e=c.createContext;var j=c.useContext,k=c.useRef,l=e();function a(a){a=a.children;var b=k("");return i.jsx(l.Provider,{value:b,children:a})}a.displayName=a.name+" [from "+f.id+"]";function b(){return j(l)}g.MWPNewMessageDraftContextProvider=a;g.useNewMessageDraftContext=b}),98);
__d("MWXMessageScrollList.react",["CometInfiniteScrollTrigger.react","MWXScrollableAreaStyles","react","stylex","useMergeRefs","useResizeObserver"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useLayoutEffect,m=b.useRef,n=10,o=function(a){return a},p={expanding:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"x2lah0s",justifyContent:"xl56j7k",minHeight:"x121v3j4",$$css:!0},scrollArea:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",overflowX:"x6ikm8r",overflowY:"x1odjw0f",$$css:!0}};function q(a){var b=a.anchoredElement,d=a.getKeyForItem;d=d===void 0?o:d;var e=a.hasNext;a=a.items;var f=a.length,g=f>0?d(a[0]):void 0,h=f>0?d(a[a.length-1]):void 0,i=m(f),j=m(g),p=m(h),q=m(),r=m(),s=m(),t=m(),u=m();d=k(function(a){a=a.target;if(!(a instanceof HTMLDivElement))return;if(q.current!=null&&a.scrollHeight!==q.current||r.current!=null&&a.clientHeight!==r.current)return;s.current=a.scrollTop},[]);l(function(){var a=u.current;if(a==null)return;a.scrollTop<=n&&(a.scrollTop=a.scrollHeight)},[]);a=k(function(){var a,c,d,k,l,m,o;a=(a=b==null?void 0:(a=b.current)==null?void 0:a.offsetTop)!=null?a:0;var v=p.current,w=j.current;c=(c=i.current)!=null?c:0;d=(d=q.current)!=null?d:0;k=(k=r.current)!=null?k:0;l=(l=s.current)!=null?l:0;m=(m=t.current)!=null?m:-1;var x=u.current;if((x==null?void 0:x.scrollHeight)===0&&(x==null?void 0:x.clientHeight)===0)return;q.current=(o=x==null?void 0:x.scrollHeight)!=null?o:q.current;s.current=(o=x==null?void 0:x.scrollTop)!=null?o:s.current;i.current=f;j.current=g;p.current=h;t.current=a;if(x==null)return;o=x.clientHeight;var y=x.scrollHeight;r.current=o;var z=Math.abs(d-l-k)<n;v=v!=null&&h!==v;w=w!=null&&g!==w;c=f>c;w=c&&w;c=c&&v;var A=k!==0&&k!==o;v=m!==-1&&m>l&&m<l+k;var B;(b==null?void 0:b.current)!=null&&v?B=a-(m-l):!e&&z?B=l+y-d+k-o:w?B=l+y-d:c&&(B=l);var C=B;if(C!=null){x.scrollTop=C;s.current=B;var D=window.requestAnimationFrame(function(){var a=x.scrollTop;Math.abs(a-C)>n?x.scrollTop=C+(a>C?1:-1)*n:A&&(x.scrollTop=C)});return function(){return window.cancelAnimationFrame(D)}}},[g,e,h,f,b]);var v=c("useResizeObserver")(a),w=c("useResizeObserver")(a);l(a,[a]);return{contentRef:w,onScroll:d,ref:c("useMergeRefs")(u,v)}}e=j.forwardRef(a);function a(a,b){var d=a.anchoredElement,e=a.ariaLabel,f=a.getKeyForItem,g=a.hasNext,i=a.hasPrevious,l=a.isLoadingNext,m=a.isLoadingPrevious,n=a.items,o=a.loadNext,r=a.loadPrevious,s=a.onUserScroll,t=a.renderFooter,u=a.renderHeader,v=a.renderItem;a=a.renderLoadingAnimation;u=[!i&&u!=null&&j.jsx(j.Fragment,{children:u()},"header"),j.jsx(c("CometInfiniteScrollTrigger.react"),{hasMore:i,isLoading:m,onLoadMore:r,xstyle:p.expanding,children:a==null?void 0:a()},"loadPrevious")].concat(n.map(function(a,b){return v(a,n[b-1],n[b+1])}),[j.jsx(c("CometInfiniteScrollTrigger.react"),{hasMore:g,isLoading:l,onLoadMore:o,xstyle:p.expanding,children:a==null?void 0:a()},"loadNext"),!g&&t!=null&&j.jsx(j.Fragment,{children:t()},"footer")]);i=q({anchoredElement:d,getKeyForItem:f,hasNext:g,items:n});m=i.contentRef;var w=i.onScroll;r=i.ref;l=k(function(a){s==null?void 0:s(),w(a)},[s,w]);o=c("useMergeRefs")(r,b);return j.jsx("div",{"aria-label":e,className:(h||(h=c("stylex")))(p.scrollArea,c("MWXScrollableAreaStyles").themed),"data-testid":void 0,onScroll:l,ref:o,role:"grid",children:j.jsx("div",{className:"x78zum5 xdt5ytf x1iyjqo2 x2lah0s xl56j7k x121v3j4",ref:m,children:u})})}a.displayName=a.name+" [from "+f.id+"]";d=e;g["default"]=d}),98);
__d("useMWMarkThreadAsReadWhenNewMessagesArrive",["I64","Int64Hooks","MWLSThreadDisplayContext","MWV2IsTabFocusedContext.react","ReQL","ReQLObservable","UserActivity","asyncToGeneratorRuntime","cr:268","gkx","promiseDone","useAsyncReStore","useEmptyFunction","useMWInboxPassiveContext","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(e=b("cr:268"))!=null?e:c("useEmptyFunction");function k(a,b,c,d,e){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f,g){var h=(yield d("ReQL").firstAsync(d("ReQL").fromTableDescending(a.tables.messages).getKeyRange(b)));if(h==null)return!1;a=(yield d("ReQL").firstAsync(d("ReQL").fromTableAscending(a.tables.threads).getKeyRange(b)));if(a==null)return!1;b=g!==void 0?g==="ChatTab"?e:g==="Inbox"&&c("gkx")("24041")?!f.isPassive:!0:!0;e=(i||(i=d("I64"))).gt(h.timestampMs,a.lastActivityTimestampMs)?h.timestampMs:a.lastActivityTimestampMs;g=(i||(i=d("I64"))).gt(e,a.lastReadWatermarkTimestampMs);return c("UserActivity").isOnTab()&&c("UserActivity").isActive()&&b&&g});return l.apply(this,arguments)}function m(a,e){var f=c("useAsyncReStore")(),g=d("MWV2IsTabFocusedContext.react").useIsTabFocused(),h=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext(),i=c("useMWInboxPassiveContext")();return d("Int64Hooks").useCallbackInt64(function(){c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(yield f);if(yield k(b,a,g,i,h))return e()})())},[f,a,g,i,h,e])}function n(a,e,f,g){var i=(h||(h=c("useReStore")))();d("Int64Hooks").useEffectInt64(function(){var c=function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=a();typeof b!=="boolean"&&(b=(yield b));if(b&&!e())return f()});return function(){return c.apply(this,arguments)}}();window.addEventListener("focus",c);document.hasFocus()&&void c();var h=d("ReQLObservable").create(i,function(){return d("ReQL").fromTableDescending(i.tables.messages).getKeyRange(g)}).subscribe({next:c});return function(){window.removeEventListener("focus",c),h.unsubscribe()}},[f,a,e,g,i])}function a(a,b,c,d){b=m(a.threadKey,b);j(a);n(c,d,b,a.threadKey);return b}g["default"]=a}),98);
__d("useMWPSafelyMarkThreadAsRead",["I64","Int64Hooks","LSFactory","LSMessagingThreadTypeUtil","LSOptimisticMarkThreadReadV2StoredProcedure","ServerTime","cr:886","promiseDone","useMAWMarkThreadAsRead","useMWMarkThreadAsReadWhenNewMessagesArrive","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,e,g,j){var k=(i||(i=c("useReStore")))(),l=a.consistentThreadFbid,m=a.threadKey,n=a.threadType,o=c("useMAWMarkThreadAsRead")(a),p=b("cr:886")({consistentThreadFbid:l,entryPoint:j,threadKey:m,threadType:n});l=d("Int64Hooks").useCallbackInt64(function(){p==null?void 0:p();if(d("LSMessagingThreadTypeUtil").isArmadilloSecure(n)){o();return}c("promiseDone")(k.runInTransaction(function(a){return c("LSOptimisticMarkThreadReadV2StoredProcedure")(c("LSFactory")(a),{readWatermarkTimestampMs:(h||(h=d("I64"))).of_float(d("ServerTime").getMillis()),threadKey:m})},"readwrite","ui",void 0,f.id+":62"))},[k,p,o,m,n]);return c("useMWMarkThreadAsReadWhenNewMessagesArrive")(a,l,e,g)}g["default"]=a}),98);
__d("useMWPMessageListOnScrollToBottom",["Promise","react","useIsNearBottomOfScrollArea","useMWPSafelyMarkThreadAsRead"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=i||d("react");e.useCallback;var j=e.useEffect,k=e.c;function l(a,d,e,f,g){var i=k(10),l;i[0]!==f||i[1]!==e?(l=function(){return(h||(h=b("Promise"))).resolve(f&&!e)},i[0]=f,i[1]=e,i[2]=l):l=i[2];l=l;var m=c("useMWPSafelyMarkThreadAsRead")(g,l,a,d);i[3]!==a?(g=a(),i[3]=a,i[4]=g):g=i[4];var n=g;i[5]!==f||i[6]!==n||i[7]!==m?(l=function(){f&&!n&&m()},d=[f,n,m],i[5]=f,i[6]=n,i[7]=m,i[8]=l,i[9]=d):(l=i[8],d=i[9]);j(l,d)}function a(a,b,d,e,f,g){var h=k(4),i=c("useIsNearBottomOfScrollArea")(f),m;h[0]!==e||h[1]!==i?(f=function(){e!=null&&e(i)},m=[i,e],h[0]=e,h[1]=i,h[2]=f,h[3]=m):(f=h[2],m=h[3]);j(f,m);l(a,b,d,i,g)}g["default"]=a}),98);
__d("getOrCreateMapValue",[],(function(a,b,c,d,e,f){"use strict";function a(a,b,c){var d=a.get(b);d==null&&(d=c(),a.set(b,d));return d}f["default"]=a}),66);
__d("useMWPMessageListScrollVisibleMessageIntoView",["MWPVisibleMessageContext.react","getOrCreateMapValue","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.createRef,j=b.startTransition;b.useCallback;var k=b.useEffect,l=b.useRef,m=b.c;function a(){var a=m(11),b;a[0]===Symbol["for"]("react.memo_cache_sentinel")?(b=new Map(),a[0]=b):b=a[0];var e=l(b);b=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext();var f=b.setVisibleMessage,g=b.visibleMessage;a[1]!==g||a[2]!==f?(b=function(a){var b=c("getOrCreateMapValue")(e.current,a,i);g!=null&&a===g.messageId&&(g==null?void 0:g.ref)!==b&&f(babelHelpers["extends"]({},g,{ref:b}));return b},a[1]=g,a[2]=f,a[3]=b):b=a[3];b=b;var h,n;a[4]!==g||a[5]!==f?(h=function(){var a=g==null?void 0:g.messageId;if(a==null||g==null)return;var b=e.current.get(a);b!==(g==null?void 0:g.ref)&&j(function(){f(babelHelpers["extends"]({},g,{ref:b}))})},n=[g,f],a[4]=g,a[5]=f,a[6]=h,a[7]=n):(h=a[6],n=a[7]);k(h,n);a[8]!==g?(h=function(){var a,b=g==null?void 0:(a=g.ref)==null?void 0:a.current;if(b==null)return;var c=window.requestAnimationFrame(function(){b.scrollIntoView({behavior:"instant",block:"start",inline:"nearest"})});return function(){return window.cancelAnimationFrame(c)}},n=[g],a[8]=g,a[9]=h,a[10]=n):(h=a[9],n=a[10]);k(h,n);return b}g["default"]=a}),98);
__d("useMWPRelayMessageListJumpToMostRecentMessage",["MWPVisibleMessageContext.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h;h||(h=d("react"));var i=h.useCallback;function a(a){var b=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext(),c=b.setVisibleMessage;return i(function(){var b=a.current;b!=null&&(c(void 0),b.scrollTop=b.scrollHeight)},[a,c])}g["default"]=a}),98);
__d("MWPRelayBaseMessageList.react",["BaseHeadingContextWrapper.react","Box.react","CometHeroHoldTrigger.react","CometHideableComponentExperiment.react","I64","LSAuthorityLevel","LSIntEnum","LSMessagingThreadTypeUtil","MWPMessageAuthor.react","MWPMessageListJumpToMostRecentMessageButton.react","MWPVisibleMessageContext.react","MWXMessageScrollList.react","MessageForIntegrityCheck","cr:6271","emptyFunction","react","useMWPMessageListOnScrollToBottom","useMWPMessageListScrollVisibleMessageIntoView","useMWPRelayMessageListJumpToMostRecentMessage","useObserveMessagePageLoad"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react"));f=h;var l=f.useImperativeHandle,m=f.useRef,n=f.c,o={backgroundColor:{backgroundColor:"x1eb86dx",$$css:!0},list:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",overflowX:"x6ikm8r",overflowY:"x10wlt62",zIndex:"x1ja2u2z",$$css:!0}},p=k.forwardRef(a);function a(a,e){var f=n(32),g=a.checkIsThreadManuallySetAsUnread,h=a.entryPoint,j=a.onPageLoaded,p=a.onScrollToBottom,r=a.onUserScroll,s=a.renderFooter,t=a.renderHeader,u=a.renderJumpToMostRecentMessageButton,v=a.renderLoadingAnimation,w=a.renderRow,x=a.secondaryThread,y=a.shouldPausePageLoadTracking,z=a.thread;a=g===void 0?c("emptyFunction").thatReturnsFalse:g;g=j===void 0?c("emptyFunction"):j;j=y===void 0?!1:y;var A=m();y=b("cr:6271")(z,x);x=y.hasNext;var B=y.hasPrevious,C=y.isLoadingNext,D=y.isLoadingPrevious,E=y.loadNext,F=y.loadPrevious;y=y.messages;var G=c("useMWPMessageListScrollVisibleMessageIntoView")();if(f[0]!==z.threadKey||f[1]!==y){var H;f[3]!==z.threadKey?(H=function(a){return(i||(i=d("I64"))).equal(a.threadKey,z.threadKey)?d("MessageForIntegrityCheck").prepMessageForIntegrityCheck(a):null},f[3]=z.threadKey,f[4]=H):H=f[4];H=y.map(H).filter(Boolean);f[0]=z.threadKey;f[1]=y;f[2]=H}else H=f[2];d("useObserveMessagePageLoad").useObserveMessagePageLoadWithAggregation(H,10,g,j,x);c("useMWPMessageListOnScrollToBottom")(a,h,x,p,A,z);var I=c("useMWPRelayMessageListJumpToMostRecentMessage")(A);f[5]!==I?(H=function(){return{getScrollAreaElement:c("emptyFunction"),jumpToMostRecentMessage:function(){I(!0)},restoreScrollPosition:c("emptyFunction")}},g=[I],f[5]=I,f[6]=H,f[7]=g):(H=f[6],g=f[7]);l(e,H,g);var J=m(null);a=(j=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext().visibleMessage)==null?void 0:j.ref;f[8]!==G||f[9]!==w?(h=function(a,b,e){return k.jsx("div",{ref:G(a.messageId),children:k.jsx(c("CometHideableComponentExperiment.react"),{callingSurface:"thread_view",disableHiding:!0,scrollport:function(){return A.current},unmountXStyle:o.backgroundColor,children:k.jsx(d("MWPMessageAuthor.react").MWPMessageAuthor,{contactId:a.senderId,threadKey:a.threadKey,children:w({domElementRef:J,message:a,nextMessage:e,prevMessage:b})})})},a.offlineThreadingId)},f[8]=G,f[9]=w,f[10]=h):h=f[10];f[11]!==a||f[12]!==x||f[13]!==B||f[14]!==C||f[15]!==D||f[16]!==y||f[17]!==E||f[18]!==F||f[19]!==r||f[20]!==s||f[21]!==t||f[22]!==h||f[23]!==v?(p=k.jsx(c("BaseHeadingContextWrapper.react"),{children:k.jsx(c("MWXMessageScrollList.react"),{anchoredElement:a,getKeyForItem:q,hasNext:x,hasPrevious:B,isLoadingNext:C,isLoadingPrevious:D,items:y,loadNext:E,loadPrevious:F,onUserScroll:r,ref:A,renderFooter:s,renderHeader:t,renderItem:h,renderLoadingAnimation:v})}),f[11]=a,f[12]=x,f[13]=B,f[14]=C,f[15]=D,f[16]=y,f[17]=E,f[18]=F,f[19]=r,f[20]=s,f[21]=t,f[22]=h,f[23]=v,f[24]=p):p=f[24];f[25]!==x||f[26]!==I||f[27]!==u?(e=k.jsx(c("MWPMessageListJumpToMostRecentMessageButton.react"),{alwaysShow:x,jumpToMostRecentMessage:I,renderButton:u,scrollAreaRef:A}),f[25]=x,f[26]=I,f[27]=u,f[28]=e):e=f[28];f[29]!==p||f[30]!==e?(H=k.jsxs(c("Box.react"),{xstyle:o.list,children:[p,e]}),f[29]=p,f[30]=e,f[31]=H):H=f[31];return H}function q(a){return a.messageId}f=k.forwardRef(e);function e(a,b){var e=n(15);if(e[0]!==a){a.pageSize;var f=babelHelpers.objectWithoutPropertiesLoose(a,["pageSize"]);f=f;e[0]=a;e[1]=f}else f=e[1];a=f;var g=a.renderHeader,h=a.renderLoadingAnimation;a=a.thread;if((i||(i=d("I64"))).equal(a.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC))){var l;e[2]===Symbol["for"]("react.memo_cache_sentinel")?(l=k.jsx(c("CometHeroHoldTrigger.react"),{description:"MWChatWaitingForDisplayState-optimisticThread",hold:!0}),e[2]=l):l=e[2];var m;e[3]!==g?(m=g==null?void 0:g(),e[3]=g,e[4]=m):m=e[4];e[5]!==m?(g=k.jsxs(k.Fragment,{children:[l,m]}),e[5]=m,e[6]=g):g=e[6];return g}l=(i||(i=d("I64"))).equal(a.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").OPTIMISTIC))&&d("LSMessagingThreadTypeUtil").isCMSubthread(a.threadType);if(l){e[7]===Symbol["for"]("react.memo_cache_sentinel")?(m=k.jsx(c("CometHeroHoldTrigger.react"),{description:"MWChatWaitingForDisplayState-optimisticSubThread",hold:!0}),e[7]=m):m=e[7];e[8]!==h?(g=h==null?void 0:h(),e[8]=h,e[9]=g):g=e[9];e[10]!==g?(a=k.jsxs(k.Fragment,{children:[m,g]}),e[10]=g,e[11]=a):a=e[11];return a}e[12]!==f||e[13]!==b?(l=k.jsx(p,babelHelpers["extends"]({},f,{ref:b})),e[12]=f,e[13]=b,e[14]=l):l=e[14];return l}a=f;g["default"]=a}),98);
__d("MWPSendMessageLogger",["LSIntEnum","LSPendingTasksPluginType","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=c("requireDeferred")("MWLogSend").__setRef("MWPSendMessageLogger");function a(a,b,e,f,g,j,k,l,m,n,o,p){var q=n!=null&&(h||(h=d("LSIntEnum"))).unwrapIntEnum(n)===c("LSPendingTasksPluginType").IGD_INSTAMADILLO,r=q?1:0;i.onReady(function(c){return c.log(a,{actor:f,additionalTags:q?["armadillo_express"]:void 0,attachmentFbids:j,attachmentType:l,backend:r,ephemeralDurationInSec:p,hasReply:m,isInstamadilloTTLC:o,offlineThreadingId:g,sendType:0,source:k,threadKey:b,threadType:e})})}g.log=a}),98);
__d("MWPThreadThemeGradientUtils",["MWPColorUtils"],(function(a,b,c,d,e,f,g){"use strict";function h(a){var b=a.outgoingGradientColors;a=a.threadTheme;b=b[0];return(b=b==null?void 0:b.color)!=null?b:a.fallbackColor}function a(a){return d("MWPColorUtils").int64ToHex(h(a))}function i(a){var b=a.outgoingGradientColors;a=a.threadTheme;b=b[b.length-1];return(b=b==null?void 0:b.color)!=null?b:a.fallbackColor}function b(a){return d("MWPColorUtils").int64ToHex(i(a))}function c(a){return a.outgoingGradientColors.length>1}g.getTopGradientColorI64=h;g.getTopGradientColor=a;g.getBottomGradientColorI64=i;g.getBottomGradientColor=b;g.isGradient=c}),98);
__d("useMWIsBroadcastChannelViewer",["LSMessagingThreadTypeUtil","MWLSThread","MWPActor.react","ReQL","ReQLSuspense","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b,e=(h||(h=c("useReStore")))(),g=d("MWPActor.react").useActor(),i=(b=d("MWLSThread").useThread(a,function(a){return d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(a.threadType)}))!=null?b:!1;b=(b=d("ReQLSuspense").useFirst(function(){return a!=null&&i?d("ReQL").fromTableAscending(e.tables.participants).getKeyRange(a,g).map(function(a){return a.isAdmin!==!0&&a.isSuperAdmin!==!0&&a.isModerator!==!0}):d("ReQL").empty()},[e,a,g,i],f.id+":31"))!=null?b:!1;return i&&b}g["default"]=a}),98);
__d("MWPThemeCSSProvider.react",["BaseTheme.react","I64","LSIntEnum","MWLSThread","MWLSThreadDisplayContext","MWPColorUtils","MWPThreadThemeGradientUtils","MWThreadKey.react","MWV2IsTabFocusedContext.react","MessengerAppColorMode","gkx","react","useMWIsBroadcastChannelViewer","useMWPThreadTheme"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=h||(h=d("react")),l=h.useMemo,m={expand:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",maxWidth:"x193iq5w",$$css:!0}};function n(a,b){b=(b=d("MWLSThread").useThread(b,function(a){return(i||(i=d("I64"))).lt(a.lastReadWatermarkTimestampMs,a.lastActivityTimestampMs)}))!=null?b:!1;return b&&!a}function o(){var a=d("MWThreadKey.react").useMWThreadKeyMemoized(),b=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext()==="ChatTab",e=d("MWV2IsTabFocusedContext.react").useIsTabFocused(),f=n(e,a),g=c("useMWIsBroadcastChannelViewer")(a),h=c("useMWPThreadTheme")();return l(function(){var a,k=c("gkx")("24125"),l=c("gkx")("24057"),m=h.backgroundGradientColors,n=h.incomingGradientColors,o=h.outgoingGradientColors,p=h.threadTheme,q=p.appColorMode,r=p.backgroundUrl,s=p.composerBackgroundColor,t=p.composerInputBackgroundColor,u=p.composerInputBorderColor,v=p.composerInputBorderWidth,w=p.composerInputTextPlaceholderColor,x=p.composerPlaceholderTextColor,y=p.composerTintColor,z=p.deliveryReceiptColor,A=p.fallbackColor,B=p.incomingMessageBorderColor,C=p.incomingMessageBorderWidth,D=p.incomingMessageTextColor,E=p.messageBorderColor,F=p.messageBorderWidth,G=p.messageTextColor,H=p.primaryButtonBackgroundColor,I=p.quotedIncomingMessageBubbleColor,J=p.reactionPillBackgroundColor,K=p.secondaryTextColor,L=p.tertiaryTextColor,M=p.titlebarAttributionTextColor,N=p.titlebarBackgroundColor,O=p.titlebarButtonTintColor;p=p.titlebarTextColor;q=(i||(i=d("I64"))).equal(q,(j||(j=d("LSIntEnum"))).ofNumber(c("MessengerAppColorMode").DARK));r=Boolean(r==null?void 0:r.length);var P=o.length>1,Q=m.length>0;r=k&&(r||Q);Q=r&&"4px"||"0px";l=l?"96px":g?"28px":"84px";O=k&&O||d("MWPThreadThemeGradientUtils").getTopGradientColorI64(h);var R=k&&y||d("MWPThreadThemeGradientUtils").getBottomGradientColorI64(h);m=m==null?void 0:(m=m[(m==null?void 0:m.length)-1])==null?void 0:m.color;n=n==null?void 0:(n=n[0])==null?void 0:n.color;a=(a=o==null?void 0:(a=o[o.length-1])==null?void 0:a.color)!=null?a:A;o=o&&o.length>1&&d("MWPColorUtils").gradient(o,b?{footerHeight:56,headerHeight:48,totalHeight:455}:void 0);L={"chat-admin-text-color":k&&(K||L),"chat-composer-background-color":k&&s,"chat-composer-button-color":R,"chat-composer-caret-color":k&&R,"chat-composer-input-background-color":k&&t||"var(--comment-background)","chat-composer-input-border-color":k&&u,"chat-composer-input-border-width":k&&v,"chat-composer-input-text-placeholder-color":k&&w,"chat-composer-placeholder-text-color":k&&x,"chat-delivery-receipt-color":k&&z,"chat-edit-message-overlay-color":(K=m)!=null?K:"var(--surface-background)","chat-incoming-message-border-color":k&&B,"chat-incoming-message-border-width":k&&C,"chat-incoming-message-bubble-background-color":k&&n,"chat-incoming-message-text-color":k&&D,"chat-message-border-color":k&&E,"chat-message-border-width":k&&F,"chat-message-text-color":k&&G,"chat-outgoing-message-background-gradient":!r&&o?o:"initial","chat-outgoing-message-bubble-background-color":P&&!r?"transparent":a,"chat-primary-button-background-color":k&&H,"chat-quoted-incoming-message-bubble-color":k&&I,"chat-replied-message-background-color":k&&m&&n&&d("MWPColorUtils").combineColors(m,n,.4),"chat-scrollbar-thumb-color":r&&m&&d("MWPColorUtils").int64ToRGBA(d("MWPColorUtils").combineColorsAsI64(d("MWPColorUtils").combineColorsAsI64(a,m,.6),q?(i||(i=d("I64"))).of_int32(16777215):(i||(i=d("I64"))).of_int32(0),.6),.7),"chat-scrollbar-track-color":r&&"transparent","mwp-header-background-color":k&&N,"mwp-header-button-color":O,"mwp-header-text-color":k&&p,"mwp-message-list-actions-gap":Q,"mwp-message-list-actions-width":"calc("+l+" + 3*"+Q+")","mwp-message-row-background":r?"transparent":"var(--messenger-card-background)","mwp-primary-theme-color":A,"mwp-subheader-text-color":k&&M,"reaction-pill-background-color":k?J:"var(--wash)","reaction-pill-multireact-selected-color":d("MWPColorUtils").combineColorsAsI64(A,i.of_int32(16777215),.22),"text-highlight":k&&y&&d("MWPColorUtils").int64ToRGBA(y,q?.5:.2)};e||(k?(L["chat-composer-button-color"]=d("MWPColorUtils").int64ToRGBA(R,.6),L["mwp-header-button-color"]=d("MWPColorUtils").int64ToRGBA(O,.6)):(L["chat-composer-button-color"]="var(--disabled-icon)",L["mwp-header-button-color"]="var(--disabled-icon)"));f&&(L["mwp-header-button-color"]="var(--always-white)",L["mwp-header-text-color"]="var(--always-white)",L["mwp-header-background-color"]=O);(L["mwp-subheader-text-color"]==null||typeof L["mwp-subheader-text-color"]==="boolean")&&(L["mwp-subheader-text-color"]=L["mwp-header-text-color"]);s={};for(t in L){u=L[t];if(u==null||typeof u==="boolean")continue;else typeof u==="string"?s[t]=u:s[t]=d("MWPColorUtils").int64ToHex(u)}return s},[g,b,f,e,h])}function a(a){var b=o();return k.jsx(c("BaseTheme.react"),babelHelpers["extends"]({},a,{config:{dark:b,light:b,type:"VARIABLES"},xstyle:[m.expand,a.xstyle]}))}a.displayName=a.name+" [from "+f.id+"]";g.MWPThemeCSSProvider=a}),98);
__d("MWPThreadGradientBackground.react",["BaseTheme.react","MWPColorUtils","gkx","isStringNullOrEmpty","react","useMWPThreadTheme"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState,l={container:{backgroundPosition:"x1xsqp64",backgroundSize:"x18d0r48",display:"x78zum5",flexBasis:"x1r8uery",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",maxHeight:"xmz0i5r",overflowX:"x6ikm8r",overflowY:"x10wlt62",position:"x1n2onr6",$$css:!0}},m=new Map();function n(){var a=c("useMWPThreadTheme")(),b=a.backgroundGradientColors,e=a.outgoingGradientColors;a=a.threadTheme;var f=a.backgroundUrl;a=a.fallbackColor;var g=k(f!=null&&m.has(f)?f:void 0),h=g[0],i=g[1];j(function(){if(f==null||!c("gkx")("24125"))return;if(m.has(f)){i(f);return}var a=!1,b=new Image();b.src=f;b.onload=function(){m.set(f,b);if(a)return;i(f)};return function(){a=!0}},[f]);if(c("gkx")("24125")&&(!c("isStringNullOrEmpty")(f)||b.length>0)){if(f===h&&f!=null)return{backgroundImage:"url("+f+")"};if(b.length>1)return{backgroundImage:d("MWPColorUtils").gradient(b)};else{return{backgroundColor:d("MWPColorUtils").int64ToHex((h=b==null?void 0:(g=b[0])==null?void 0:g.color)!=null?h:a)}}}if(e.length>1)return{backgroundImage:d("MWPColorUtils").gradient(e)}}function a(a){var b;a=a.children;return i.jsx(c("BaseTheme.react"),{style:(b=n())!=null?b:{},xstyle:l.container,children:a})}a.displayName=a.name+" [from "+f.id+"]";g.MWPThreadGradientBackground=a}),98);
__d("MWPThreadThemeProviderQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="7801872189881330"}),null);
__d("MWPThreadThemeProviderQuery.graphql",["MWPThreadThemeProviderQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a=function(){var a=[{defaultValue:null,kind:"LocalArgument",name:"id"}],c=[{kind:"Variable",name:"id",variableName:"id"}],d={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},e={alias:null,args:null,kind:"ScalarField",name:"accessibility_label",storageKey:null},f={alias:null,args:null,kind:"ScalarField",name:"description",storageKey:null},g={alias:null,args:null,kind:"ScalarField",name:"app_color_mode",storageKey:null},h={alias:null,args:null,kind:"ScalarField",name:"composer_background_color",storageKey:null},i={alias:null,args:null,kind:"ScalarField",name:"background_gradient_colors",storageKey:null},j={alias:null,args:null,kind:"ScalarField",name:"is_deprecated",storageKey:null},k={alias:null,args:null,kind:"ScalarField",name:"title_bar_button_tint_color",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"inbound_message_gradient_colors",storageKey:null},m={alias:null,args:null,kind:"ScalarField",name:"title_bar_text_color",storageKey:null},n={alias:null,args:null,kind:"ScalarField",name:"composer_tint_color",storageKey:null},o={alias:null,args:null,kind:"ScalarField",name:"title_bar_attribution_color",storageKey:null},p={alias:null,args:null,kind:"ScalarField",name:"composer_input_background_color",storageKey:null},q={alias:null,args:null,kind:"ScalarField",name:"hot_like_color",storageKey:null},r=[d,{alias:null,args:null,concreteType:"Image",kind:"LinkedField",name:"image",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"uri",storageKey:null}],storageKey:null}],s={alias:null,args:null,concreteType:"MessengerThreadBackgroundAsset",kind:"LinkedField",name:"background_asset",plural:!1,selections:r,storageKey:null},t={alias:null,args:null,kind:"ScalarField",name:"message_text_color",storageKey:null},u={alias:null,args:null,kind:"ScalarField",name:"message_border_color",storageKey:null},v={alias:null,args:null,kind:"ScalarField",name:"message_border_width",storageKey:null},w={alias:null,args:null,kind:"ScalarField",name:"inbound_message_text_color",storageKey:null},x={alias:null,args:null,kind:"ScalarField",name:"inbound_message_border_color",storageKey:null},y={alias:null,args:null,kind:"ScalarField",name:"inbound_message_border_width",storageKey:null},z={alias:null,args:null,kind:"ScalarField",name:"primary_button_background_color",storageKey:null},A={alias:null,args:null,kind:"ScalarField",name:"title_bar_background_color",storageKey:null},B={alias:null,args:null,kind:"ScalarField",name:"tertiary_text_color",storageKey:null},C={alias:null,args:null,kind:"ScalarField",name:"reverse_gradients_for_radial",storageKey:null},D={alias:null,args:null,kind:"ScalarField",name:"reaction_pill_background_color",storageKey:null},E={alias:null,args:null,kind:"ScalarField",name:"secondary_text_color",storageKey:null},F={alias:null,args:null,kind:"ScalarField",name:"fallback_color",storageKey:null},G={alias:null,args:null,kind:"ScalarField",name:"gradient_colors",storageKey:null},H={alias:null,args:null,kind:"ScalarField",name:"normal_theme_id",storageKey:null};r={alias:null,args:null,concreteType:"MessengerThreadThemeIconAsset",kind:"LinkedField",name:"icon_asset",plural:!1,selections:r,storageKey:null};d=[d,e,f,g,h,i,j,k,l,m,n,o,p,q,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,r,{alias:null,args:null,concreteType:"MessengerThreadTheme",kind:"LinkedField",name:"alternative_themes",plural:!0,selections:[d,e,f,g,h,i,j,k,l,m,n,o,p,q,s,t,u,v,w,x,y,H,z,A,B,C,D,E,F,G,r],storageKey:null}];return{fragment:{argumentDefinitions:a,kind:"Fragment",metadata:null,name:"MWPThreadThemeProviderQuery",selections:[{alias:null,args:c,concreteType:"MessengerThreadTheme",kind:"LinkedField",name:"messenger_thread_theme",plural:!1,selections:[{kind:"InlineDataFragmentSpread",name:"MWPThreadThemeQuery_Fragment",selections:d,args:null,argumentDefinitions:[]}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:a,kind:"Operation",name:"MWPThreadThemeProviderQuery",selections:[{alias:null,args:c,concreteType:"MessengerThreadTheme",kind:"LinkedField",name:"messenger_thread_theme",plural:!1,selections:d,storageKey:null}]},params:{id:b("MWPThreadThemeProviderQuery_facebookRelayOperation"),metadata:{},name:"MWPThreadThemeProviderQuery",operationKind:"query",text:null}}}();e.exports=a}),null);
__d("MWPThreadThemesFetchQPLLogger",["QPLUserFlow","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h=0,i=c("qpl")._(25308538,"426");function a(){c("QPLUserFlow").start(i,{instanceKey:h});return h++}function b(a,b){b!=null?c("QPLUserFlow").endFailure(i,b,{instanceKey:a}):c("QPLUserFlow").endSuccess(i,{instanceKey:a})}function d(a,b,d){c("QPLUserFlow").addPoint(i,b,{instanceKey:a}),d!=null&&c("QPLUserFlow").addAnnotations(i,d,{instanceKey:a})}g.logThemesFetchStart=a;g.logThemesFetchEnd=b;g.logPoint=d}),98);
__d("MWPThreadThemeProvider.react",["CometRelay","I64","Int64Hooks","LSIntEnum","MWPThemeCSSProvider.react","MWPThreadThemeContext","MWPThreadThemeProviderQuery.graphql","MWPThreadThemesFetchQPLLogger","MessengerThreadThemeGradientType","ReQL","ReQLSuspense","RelayHooks","cr:6797","cr:8933","defaultMWPThreadTheme","promiseDone","react","useCurrentDisplayMode","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l,m=l||(l=d("react"));e=l;var n=e.useMemo,o=e.useState;function p(a,e){var g=(i||(i=c("useReStore")))(),l=c("useCurrentDisplayMode")(),m=d("ReQLSuspense").useFirst(function(){return a==null?d("ReQL").empty():d("ReQL").fromTableAscending(g.tables.thread_themes).getKeyRange(a)},[g,a],f.id+":42"),o=b("cr:6797")==null?void 0:b("cr:6797")(g,a),p=l==="dark"&&o!=null?o:m,q=d("ReQLSuspense").useArray(function(){return(p==null?void 0:p.fbid)==null?d("ReQL").empty():d("ReQL").fromTableAscending(g.tables.gradient_colors).getKeyRange(p==null?void 0:p.fbid)},[g,p==null?void 0:p.fbid],f.id+":56"),r=d("CometRelay").useRelayEnvironment();d("Int64Hooks").useEffectInt64(function(){if(p==null&&a!=null&&b("cr:8933")!=null){var e=d("MWPThreadThemesFetchQPLLogger").logThemesFetchStart();c("promiseDone")(d("RelayHooks").fetchQuery(r,h!==void 0?h:h=b("MWPThreadThemeProviderQuery.graphql"),{id:(j||(j=d("I64"))).to_string(a)}).toPromise().then(function(a){return b("cr:8933").insertGraphQLThemeResponseIntoDatabase(a==null?void 0:a.messenger_thread_theme,e)}))}},[a,p,r,g]);return n(function(){return p!=null?{backgroundGradientColors:q.filter(function(a){return(j||(j=d("I64"))).equal(a.type_,(k||(k=d("LSIntEnum"))).ofNumber(c("MessengerThreadThemeGradientType").THREADVIEW_BACKGROUND))}),incomingGradientColors:q.filter(function(a){return(j||(j=d("I64"))).equal(a.type_,(k||(k=d("LSIntEnum"))).ofNumber(c("MessengerThreadThemeGradientType").MESSAGE_BUBBLE_INBOUND))}),outgoingGradientColors:q.filter(function(a){return(j||(j=d("I64"))).equal(a.type_,(k||(k=d("LSIntEnum"))).ofNumber(c("MessengerThreadThemeGradientType").MESSAGE_BUBBLE_OUTBOUND))}),threadTheme:p}:e},[p,q,e])}function a(a){var b=a.children,c=a.defaultTheme;c=c===void 0?d("defaultMWPThreadTheme").defaultThemeWithColors:c;var e=a.themeFbid;a=o();var f=a[0],g=a[1];a=d("Int64Hooks").useMemoInt64(function(){var a;return(a=f)!=null?a:e},[e,f]);var h=p(a,c);a=d("Int64Hooks").useMemoInt64(function(){return{backgroundGradientColors:h.backgroundGradientColors,incomingGradientColors:h.incomingGradientColors,outgoingGradientColors:h.outgoingGradientColors,previewId:f,setPreviewId:g,threadTheme:h.threadTheme}},[h,f]);return m.jsx(d("MWPThreadThemeContext").MWPThreadThemeContext.Provider,{value:a,children:m.jsx(d("MWPThemeCSSProvider.react").MWPThemeCSSProvider,{children:b})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWPreloadedText",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=(h||d("react")).createContext;b=a({text:null});g["default"]=b}),98);
__d("MWPublicChatMemberRequestsBanner.react",["fbt","ix","CometContextualMessage.react","CometErrorBoundary.react","CometPlaceholder.react","FBLogger","FDSButtonGroup.react","FDSSkittleIcon.react","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSContactGender","LSContactIdType","LSContactType","LSContactViewerRelationship","LSContactWorkForeignEntityType","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadBitOffset","LSVerifyContactRowExistsStoredProcedure","MWCMThreadTypes.react","MWInboxInfoPanelContext.react","Promise","ReQL","ReQLSuspense","cr:4923","fbicon","promiseDone","react","usePrevious","useReStore"],(function(a,b,c,d,e,f,g,h,i){"use strict";var j,k,l,m,n=m||(m=d("react"));e=m;var o=e.useEffect,p=e.useState;function q(a){if(a.length===0){c("FBLogger")("messenger_comet").mustfix("No member requests?");return void 0}else if(a.length===1){var b;return h._("__JHASH__bWQyKZ80V0d__JHASH__",[h._param("name",((b=a[0][1])==null?void 0:b.name)||"")])}else{b=a.length-1;return h._("__JHASH__ZU2Oj6CpDJW__JHASH__",[h._plural(b,"number"),h._param("name",((b=a[0][1])==null?void 0:b.name)||"")])}}function r(a){var e=a.memberRequests,f=a.setWasClosed;a=d("MWInboxInfoPanelContext.react").useMWInboxInfoPanelContext();var g=a.isOnMemberRequestsPageRef,j=a.pushMemberRequestsPage,k=a.setShouldNavToMemberRequests,l=a.setThreadInfoVisible,m=a.threadInfoVisible;return n.jsx("div",{className:"xcrg951 x7m3og9 x1vjfegm",children:n.jsx(c("CometContextualMessage.react"),{addOnPrimary:n.jsx(c("FDSButtonGroup.react"),{primary:{label:h._("__JHASH__N4aWocdoeuZ__JHASH__",[h._plural(e.length)]),onPress:function(){g.current!==!0&&(m===!0?j():(k(!0),l(!0))),f(!0)},padding:"wide",type:"secondary"}}),body:q(e),headline:h._("__JHASH__wwx2l6C4JXf__JHASH__",[h._plural(e.length,"number")]),icon:n.jsx(c("FDSSkittleIcon.react"),{color:"gray",icon:b("cr:4923")!=null?b("cr:4923"):d("fbicon")._(i("497883"),16),size:36}),level:4,onClose:function(){f(!0)}})})}r.displayName=r.name+" [from "+f.id+"]";function s(a){var e=a.threadKey;a=p(!1);var g=a[0],h=a[1],i=(l||(l=c("useReStore")))(),m=d("ReQLSuspense").useArray(function(){return d("ReQL").fromTableAscending(i.tables.group_membership_approval_requests).getKeyRange(e).map(function(a){var b=d("ReQLSuspense").first(d("ReQL").fromTableAscending(i.tables.contacts).getKeyRange(a.contactId),f.id+":175");return[a,b]})},[i,e],f.id+":170"),q=m.length,s=c("usePrevious")(q);a=d("MWInboxInfoPanelContext.react").useMWInboxInfoPanelContext();var t=a.isOnMemberRequestsPageRef;o(function(){t.current!==!0&&s!==null&&q>s&&h(!1)},[q,s,h,t]);o(function(){var a=m.map(function(a){return a[0].contactId});c("promiseDone")(i.runInTransaction(function(e){return(j||(j=b("Promise"))).all(a.map(function(a){return c("LSVerifyContactRowExistsStoredProcedure")(c("LSFactory")(e),{authorityLevel:(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").CLIENT_PARTIAL),blockedByViewerStatus:k.ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED),contactIdType:k.ofNumber(c("LSContactIdType").FBID),contactType:k.ofNumber(c("LSContactType").USER),contactViewerRelationship:k.ofNumber(c("LSContactViewerRelationship").UNKNOWN),gender:k.ofNumber(c("LSContactGender").UNKNOWN),id:a,isBlocked:!1,isMemorialized:!1,isSelf:!1,workForeignEntityType:k.ofNumber(c("LSContactWorkForeignEntityType").UNKNOWN)})}))},"readwrite",void 0,void 0,f.id+":207"))},[i,m]);return!g&&m.length>0?n.jsx(r,{memberRequests:m,setWasClosed:h}):null}s.displayName=s.name+" [from "+f.id+"]";function t(a){a=a.thread;var b=d("LSMessagingThreadTypeUtil").isJoinedSocialChannel(a.threadType),c=d("LSThreadBitOffset").has(66,a)&&!d("MWCMThreadTypes.react").isStandardCMThread(a.threadType);return c&&b?n.jsx(s,{threadKey:a.threadKey}):null}t.displayName=t.name+" [from "+f.id+"]";function a(a){a=a.thread;return n.jsx(c("CometErrorBoundary.react"),{children:n.jsx(c("CometPlaceholder.react"),{fallback:null,children:n.jsx(t,{thread:a})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWPublicChatsNUXQuickPromotionQuery_facebookRelayOperation",[],(function(a,b,c,d,e,f){e.exports="6098288313524910"}),null);
__d("MWPublicChatsNUXQuickPromotionQuery$Parameters",["MWPublicChatsNUXQuickPromotionQuery_facebookRelayOperation"],(function(a,b,c,d,e,f){"use strict";a={kind:"PreloadableConcreteRequest",params:{id:b("MWPublicChatsNUXQuickPromotionQuery_facebookRelayOperation"),metadata:{},name:"MWPublicChatsNUXQuickPromotionQuery",operationKind:"query",text:null}};e.exports=a}),null);
__d("MWPublicChatsNUXQuickPromotionContainer.entrypoint",["JSResourceForInteraction","MWPublicChatsNUXQuickPromotionQuery$Parameters"],(function(a,b,c,d,e,f,g){"use strict";a={getPreloadProps:function(){return{queries:{queryRef:{parameters:c("MWPublicChatsNUXQuickPromotionQuery$Parameters"),variables:{}}}}},root:c("JSResourceForInteraction")("MWPublicChatsNUXQuickPromotion.react").__setRef("MWPublicChatsNUXQuickPromotionContainer.entrypoint")};g["default"]=a}),98);
__d("MWPublicChatNUXDialog.react",["CometErrorBoundary.react","CometPlaceholder.react","CometRelay","LSMessagingThreadTypeUtil","MWPublicChatsNUXQuickPromotionContainer.entrypoint","react","useCometRelayEntrypointContextualEnvironmentProvider"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useEffect,k=b.useState;function a(a){a=a.thread;var b=k(),e=b[0],f=b[1],g=c("useCometRelayEntrypointContextualEnvironmentProvider")(),h=d("LSMessagingThreadTypeUtil").isJoinedSocialChannel(a.threadType);j(function(){e==null&&h&&f(function(){return d("CometRelay").loadEntryPoint(g,c("MWPublicChatsNUXQuickPromotionContainer.entrypoint"),{})});return function(){e==null?void 0:e.dispose()}},[e,g,h]);if(e!=null)return i.jsx(c("CometErrorBoundary.react"),{children:i.jsx(c("CometPlaceholder.react"),{fallback:null,children:i.jsx(d("CometRelay").EntryPointContainer,{entryPointReference:e,props:{}})})});else return null}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWV2ChatComposerGetViewContent",["Lexical","MessengerLexicalActorNode","MessengerLexicalEntityTextNode","cr:3101","cr:6138"],(function(a,b,c,d,e,f,g){"use strict";var h=b("cr:3101")||b("cr:6138");a={getRanges:function(a){var b=[],c=0;a.getEditorState().read(function(){var a=d("Lexical").$getRoot().getFirstChild();a instanceof d("Lexical").ElementNode&&a.getChildren().forEach(function(a){if(d("MessengerLexicalEntityTextNode").isMessengerLexicalEntityTextNode(a)){var e=a.getEntity();b.push({id:e.id,length:a.getTextContent().length,offset:c,type:d("MessengerLexicalActorNode").$isMessengerLexicalActorNode(a)?a.getRangeType():"p"})}if(h!=null&&a instanceof h.MessengerLexicalCommandNode){e=a.getEntity();b.push({id:e.commandId,length:a.getTextContent().length,offset:c,type:a.getRangeType()})}c+=a.getTextContent().length})});return b}};c=a;g["default"]=c}),98);
__d("MWV2ChatHotlikeButtonAnimation.react",["BaseView.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");b=150;e=2500;d=b+e;b={medium:.7,small:.35};var j={almostPoppingShakeAnimationHotlike:{animationDelay:"x1uhpyvt",animationDuration:"xtsvl71",animationFillMode:"x10e4vud",animationIterationCount:"xa4qsjk",animationName:"x1kol0s",animationTimingFunction:"x1fjjn57",transformOrigin:"xhmqdbg",$$css:!0},animationBox:{alignItems:"x6s0dn4",display:"x78zum5",height:"x1qx5ct2",justifyContent:"xl56j7k",pointerEvents:"x47corl",width:"xw4jnvo",$$css:!0},growAnimationHotlike:{animationDelay:"xmmqq2k",animationDuration:"x1h5mrz9",animationFillMode:"x10e4vud",animationIterationCount:"x1v7wizp",animationName:"x1kvv0nh",animationTimingFunction:"x1fjjn57",transformOrigin:"xhmqdbg",$$css:!0},shakeAnimationHotlike:{animationDelay:"xmmqq2k",animationDuration:"xtsvl71",animationFillMode:"x10e4vud",animationIterationCount:"xa4qsjk",animationName:"x1dogid2",animationTimingFunction:"x1fjjn57",transformOrigin:"xhmqdbg",$$css:!0}};function a(a){var b=a.animationsContainerRef,d=a.children;a=a.shouldShowGrowAnimation;return i.jsx(c("BaseView.react"),{ref:b,xstyle:a&&j.growAnimationHotlike,children:i.jsx(c("BaseView.react"),{xstyle:a&&j.shakeAnimationHotlike,children:i.jsx(c("BaseView.react"),{xstyle:[j.animationBox,a&&j.almostPoppingShakeAnimationHotlike],children:d})})})}a.displayName=a.name+" [from "+f.id+"]";g.TOTAL_GROW_ANIMATION_TIME_MS=d;g.EMOJI_SIZE_PERCENTAGE_THRESHOLDS=b;g.MWV2ChatHotlikeButtonAnimation=a}),98);
__d("MWV2ComposerActionsContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;c=b.createContext;var j=b.useContext,k=b.useMemo,l=c({});function a(a){var b=a.children,c=a.onMessageSendAttempt;a=j(l);var d=a.onMessageSendAttempt;a=k(function(){return{onMessageSendAttempt:function(a){d==null?void 0:d(a),c==null?void 0:c(a)}}},[d,c]);return i.jsx(l.Provider,{value:a,children:b})}a.displayName=a.name+" [from "+f.id+"]";g.MWV2ComposerActionsContext=l;g.MWV2ComposerActionsListener=a}),98);
__d("MWXIconDragHandle",["MWXSvgIcon","SVGIcon","cr:9123","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9123")),c("gkx")("23219"));g["default"]=a}),98);
__d("useMWV2DisabledPageComposerSendMenuItem",["LSFactory","LSIntEnum","LSMailboxType","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSOptimisticSendMessageV2StoredProcedure","LSShape","LSThreadAttributionTypeUtil","MWPActor.react","MessagePowerUp","promiseDone","react","useLSMessagingSource","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useCallback;function a(){var a=(h||(h=c("useReStore")))(),b=d("MWPActor.react").useActor(),e=c("useLSMessagingSource")();return k(function(g,h,j){c("promiseDone")(a.runInTransaction(function(a){var f=d("LSThreadAttributionTypeUtil").getSource(g,e);return c("LSOptimisticSendMessageV2StoredProcedure")(c("LSFactory")(a),{extraSendMessageParams:d("LSShape").ofRecord({calculate_denormalizations:!0,mark_read:!0,platform_token:j,power_up_style:(i||(i=d("LSIntEnum"))).ofNumber(c("MessagePowerUp").NONE),reply_source_type:i.ofNumber(c("LSMessageReplySourceType").MESSAGE),reply_source_type_v2:i.ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE),snippet_has_emoji:!1,source:f}),mailboxType:i.ofNumber(c("LSMailboxType").MESSENGER),senderId:b,snippet:h,text:h,threadKey:g,threadType:i.ofNumber(1)})},"readwrite",void 0,void 0,f.id+":41"))},[a,e,b])}g["default"]=a}),98);
__d("MWV2DisabledPageComposer.react",["fbt","JSResourceForInteraction","MWBlockedComposerLogging","MWXButton.react","MWXIconDragHandle","MWXLazyPopoverTrigger.react","react","useMWV2DisabledPageComposerSendMenuItem"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k=c("JSResourceForInteraction")("LSComposerPersistentMenu.react").__setRef("MWV2DisabledPageComposer.react");function a(a){var b=a.threadKey;d("MWBlockedComposerLogging").useLogMWBlockedComposerReason(b,d("MWBlockedComposerLogging").ComposerBlockingReason.PAGE_THREAD_DISABLED);var e=c("useMWV2DisabledPageComposerSendMenuItem")();a=function(a){var c=a.title;a=a.id;if(a!=null)return e(b,c,a)};return j.jsx(c("MWXLazyPopoverTrigger.react"),{align:"middle",popoverProps:{onClose:function(){},onSelect:a},popoverResource:k,children:function(a,b){return j.jsx("div",{className:"x78zum5 xu06os2 xvijh9v xz9dl7a xn6708d xsag5q8 x1ye3gou",ref:a,children:j.jsx(c("MWXButton.react"),{icon:c("MWXIconDragHandle"),label:h._("__JHASH__pzPWkkyVYqg__JHASH__"),onPress:b,reduceEmphasis:!0})})}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWV2ErrorComposer.react",["fbt","MDSTextPairing.react","MWXText.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react");function a(){return j.jsx("div",{className:"xcrg951 x8cjs6t x13fuv20 x178xt8z x1a8lsjc xl521sm x9mfa4r x889kno",children:j.jsx(c("MDSTextPairing.react"),{headline:h._("__JHASH__viCgEPmOyD5__JHASH__"),headlineColor:"secondary",level:4,meta:j.jsx(c("MWXText.react"),{numberOfLines:2,type:"meta3",children:h._("__JHASH__FrvKCKsD46D__JHASH__")}),reduceEmphasis:!0,textAlign:"center"})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWV2FileDropzone.react",["fbt","LSFactory","LSIssueNewErrorStoredProcedure","LSMessagingThreadTypeUtil","LSThreadBitOffset","MWCMThreadTypes.react","MWXText.react","cometIsMimeTypeForMedia","gkx","promiseDone","react","recoverableViolation","stylex","useFileDragEvents","useReStore"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k,l=k||(k=d("react"));b=k;e=b.createContext;var m=b.useCallback,n=b.useRef,o=e({current:{enabled:!0,handler:null}});function p(a){var b=a.children;a=a.fileUploadHandlerConfigRef;var c=o.Provider;return l.jsx(c,{value:a,children:b})}p.displayName=p.name+" [from "+f.id+"]";var q={root:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",maxWidth:"x193iq5w",minHeight:"x2lwn1j",position:"x1n2onr6",$$css:!0}};function r(a){if(a==null)return[];a=a.dataTransfer;return a==null?[]:a.types}function s(a){switch(a){case 0:return void 0;case 1:return h._("__JHASH__M7mGXjgzxvT__JHASH__").toString();default:return h._("__JHASH__UaK2GgtSNQH__JHASH__").toString()}}function t(a,b){var d=s(b);if(d==null)return;c("promiseDone")(a.runInTransaction(function(a){return c("LSIssueNewErrorStoredProcedure")(c("LSFactory")(a),{errorBodyText:d,errorTitleText:d})},"readwrite",void 0,void 0,f.id+":122"))}function u(a){a=a.type;return d("cometIsMimeTypeForMedia").isMimeTypeForPhoto(a)||d("cometIsMimeTypeForMedia").isMimeTypeForVideo(a)?!0:a.startsWith("audio/")}var v=new Set(["text/plain","text/html","text/uri-list"]);function a(a){var b=a.children,e=a.isDisabled,f=a.isMediaOnly,g=a.thread;a=a.xstyle;var k=n({enabled:!1,handler:null}),o=n(null),s=(i||(i=c("useReStore")))(),w=g!=null?(d("MWCMThreadTypes.react").isBroadcastThread(g.threadType)||d("LSMessagingThreadTypeUtil").isDiscoverablePublicBroadcastChannel(g.threadType)||d("LSMessagingThreadTypeUtil").isAiBot(g.threadType))&&!d("LSThreadBitOffset").has(56,g):!1;g=!c("gkx")("24132");var x=e===!0||g||w;e=function(a){var b;return((b=k.current)==null?void 0:b.handler)==null?!1:!r(a).some(function(a){return v.has(a)})};g=c("useFileDragEvents")(function(){return!1},void 0,e);e=m(function(a){var b;if(((b=k.current)==null?void 0:b.enabled)===!1)return;b=(b=k.current)==null?void 0:b.handler;if(b==null){if(!w){var d=k.current==null?"fileUploadHandlerConfigRef was not setup to handle dropped file!":"fileUploadHandlerConfigRef.current.handler was not setup to handle dropped file";c("recoverableViolation")(d,"messenger_web_media")}return}d=Array.from(a);a=f?d.filter(u):d;d.length!==a.length&&t(s,d.length);!x&&a.length!==0&&b(a)},[f,x,w,s]);c("useFileDragEvents")(e,o.current,function(a){return!0});return l.jsxs("div",{className:(j||(j=c("stylex")))(q.root,(e=a)!=null?e:!1),ref:o,children:[l.jsx(p,{fileUploadHandlerConfigRef:k,children:b}),!x&&g?l.jsx("div",{className:"x6s0dn4 x1h0vfkc x1ey2m1c x78zum5 xds687c x17qophe xl56j7k x10l6tqk x13vifvy x1vjfegm",children:l.jsx(c("MWXText.react"),{type:"body1",children:h._("__JHASH__Cpq0daihgaG__JHASH__")})}):null]})}a.displayName=a.name+" [from "+f.id+"]";g.mWV2FileDropzoneContext=o;g.MWV2FileDropzone=a}),226);
__d("MWV2SetupS2SLoggingShared",["I64","LSIntEnum","MWChatInteraction","MWLSLogSend","MWSharedMsgLogUtils","MWVersion","ReQL","ReQLSubscribe","asyncToGeneratorRuntime","err","sendToSentQPLLogger"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b){d("sendToSentQPLLogger").markSendToSentPoint(a,"received_successful_server_ack"),d("sendToSentQPLLogger").markSendToSentSuccess(a),d("MWChatInteraction").remove(d("MWChatInteraction").s2sKey(b))}function k(a,b){d("sendToSentQPLLogger").markSendToSentFail(a,"send_message_server_error",c("err")("send_message_server_error")),d("MWChatInteraction").remove(d("MWChatInteraction").s2sKey(b))}function l(a){d("sendToSentQPLLogger").markSendToSentPoint(a,"sending_message")}function a(a){var c=a.db,e=a.isCommunityEvent,f=a.isMessageRequest,g=a.s2sInstanceKey,m=a.source,n=a.threadType,o=a.traceSendMessageAPI,p={isCommunityEvent:e,isMessageRequest:f,mwVersion:d("MWVersion").v2,source:m,threadType:n};return function(a){d("MWLSLogSend").logSentHeroInteraction(o,a,p);d("MWChatInteraction").set(d("MWChatInteraction").s2sKey(a),String(g));d("sendToSentQPLLogger").addSendToSentAnnotations(g,{bool:{subscription_points_gk:!0},string:{entrypoint:d("MWSharedMsgLogUtils").getEntrypointAnnotation(m),is_community_event:e===!0?"true":"false",is_message_request:f===!0?"true":"false",thread_type:n==null?"unknown":(h||(h=d("I64"))).to_string(n)}});var q=!1,r=d("ReQL").fromTableAscending(c.tables.messages.index("optimistic")).getKeyRange(a),s=d("ReQLSubscribe").subscribeToFirst(r,function(b){b!=null&&(h||(h=d("I64"))).equal(b.sendStatusV2,(i||(i=d("LSIntEnum"))).ofNumber(2))?(q=!0,j(g,a),s()):b!=null&&(h||(h=d("I64"))).equal(b.sendStatusV2,(i||(i=d("LSIntEnum"))).ofNumber(4))?(q=!0,k(g,a),s()):b!=null&&(h||(h=d("I64"))).equal(b.sendStatusV2,(i||(i=d("LSIntEnum"))).ofNumber(1))&&l(g)});window.setTimeout(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){if(!q){var a=(yield d("ReQL").firstAsync(r));q||d("sendToSentQPLLogger").addSendToSentAnnotations(g,{string:{status_after_10s:a?""+(i||(i=d("LSIntEnum"))).toNumber(a.sendStatusV2):"none"}})}}),1e4);window.setTimeout(function(){s()},6e4)}}g["default"]=a}),98);
__d("MWXACSunsettedComposer.react",["fbt","BaseTheme.react","MWXLink.react","MWXText.react","MWXTextPairing.react","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||d("react"),k={dark:{"primary-text":"#e4e6eb","secondary-text":"#b0b3b8"},light:{"primary-text":"rgba(0, 0, 0, 0.7)","secondary-text":"rgba(0, 0, 0, 0.5)"},type:"VARIABLES"};function a(){var a=h._("__JHASH__E5yAiYeCVHB__JHASH__",[h._param("=Learn more",j.jsx(c("MWXLink.react"),{href:"https://www.facebook.com/help/messenger-app/619453488713104?ref=learn_more",children:j.jsx(c("MWXText.react"),{color:"blueLink",type:"bodyLink4",children:h._("__JHASH__W_KwwnBzw9K__JHASH__")})}))]);return j.jsx("div",{className:"x1exxf4d x13fuv20 x178xt8z xqy66fx xc73u3c xx6bls6 x5ib6vp",children:j.jsx(c("BaseTheme.react"),{config:k,children:j.jsx(c("MWXTextPairing.react"),{body:j.jsx(c("MWXText.react"),{align:"center",color:"secondary",type:"body4",children:a}),level:4,textAlign:"center"})})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),226);
__d("MWXIconPhotoPlus",["MWXSvgIcon","SVGIcon","cr:9249","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9249")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXComposerAttachmentPreview.react",["fbt","MWXCircleButton.react","MWXIconCross","MWXIconDocument","MWXIconPhotoPlus","MWXIconStrict.react","MWXImage.react","MWXPressable.react","MWXText.react","MWXTooltip.react","MWXVideoStatusListener.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i,l=k.useEffect,m=k.useRef,n={cancelButton:{end:"xoo4vsp",left:null,right:null,position:"x10l6tqk",top:"x1v4kod4",$$css:!0},card:{marginEnd:"xq8finb",position:"x1n2onr6",$$css:!0},contentWrapper:{backgroundColor:"x1qhmfi1",borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",height:"xsdox4t",minWidth:"x900493",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0},filePreview:{alignItems:"x6s0dn4",boxSizing:"x9f619",display:"x78zum5",rowGap:"xp1r0qw",columnGap:"xtqikln",height:"xsdox4t",maxWidth:"x1kbpmyu",paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",width:"xezivpi",$$css:!0},imagePreview:{alignItems:"x6s0dn4",display:"x78zum5",height:"xsdox4t",justifyContent:"xl56j7k",width:"x1useyqa",$$css:!0},playIcon:{start:"xtzzx4i",left:null,right:null,marginStart:"x16hk5td",marginTop:"x7wgvq7",position:"x10l6tqk",top:"xwa60dl",$$css:!0}};function o(a){var b=a.hasError;b=b===void 0?!1:b;a=a.progress;if(a===1||a==null)return null;var c=4;b=b?"var(--negative)":"var(--chat-composer-button-color, var(--accent))";a=Math.ceil(a*100);var d=(c/2).toString();d="M 0,"+d+" L 100,"+d;return j.jsxs("svg",{"aria-hidden":!0,className:"x168nmei x13lgxp2 x30kzoy x9jhf4c x1ey2m1c x17qophe x10l6tqk xh8yej3",preserveAspectRatio:"none",style:{height:c.toString()},viewBox:"0 0 100 "+c.toString(),children:[j.jsx("path",{d:d,stroke:"rgba(0,0,0,.5)",strokeLinecap:"round",strokeWidth:c.toString()}),j.jsx("path",{d:d,stroke:b,strokeLinecap:"round",strokeWidth:(a===0?0:c).toString(),style:{strokeDasharray:"100",strokeDashoffset:(100-a).toString(),transition:"stroke-dashoffset .5s, stroke .5s"}})]})}o.displayName=o.name+" [from "+f.id+"]";function p(a){var b=a.children,e=a.hasError;e=e===void 0?!1:e;var f=a.onCancel,g=a.progress;a=a.testid;return j.jsxs(d("react-strict-dom").html.div,{"data-testid":void 0,style:n.card,children:[j.jsxs(d("react-strict-dom").html.div,{style:n.contentWrapper,children:[b,j.jsx(o,{hasError:e,progress:g})]}),f!=null&&j.jsx(d("react-strict-dom").html.div,{style:n.cancelButton,children:j.jsx(c("MWXCircleButton.react"),{icon:c("MWXIconCross"),label:h._("__JHASH__a2BigkmhfXY__JHASH__"),onPress:f,size:24,type:"overlay"})})]})}p.displayName=p.name+" [from "+f.id+"]";function a(a){var b=a.hasError;b=b===void 0?!1:b;var d=a.onCancel,e=a.onError,f=a.onLoad,g=a.progress;a=a.src;return j.jsx(p,{hasError:b,onCancel:d,progress:g,testid:void 0,children:j.jsx(c("MWXImage.react"),{objectFit:"contain",onError:e,onLoad:f,src:a,xstyle:n.imagePreview})})}a.displayName=a.name+" [from "+f.id+"]";function b(a){var b=a.hasError;b=b===void 0?!1:b;var e=a.onCancel,f=a.onError,g=a.onLoad,h=a.progress;a=a.src;var i=m(null);return j.jsxs(p,{hasError:b,onCancel:e,progress:h,testid:void 0,children:[j.jsx(c("MWXVideoStatusListener.react"),{onError:f,onLoad:g,videoRef:i}),j.jsx("video",{className:"xl1xv1r",height:"48",ref:i,src:a,width:"48"}),j.jsx(d("react-strict-dom").html.div,{style:n.playIcon,children:j.jsx(c("MWXImage.react"),{src:"/images/video/play_24dp.png"})})]})}b.displayName=b.name+" [from "+f.id+"]";function e(a){var b=a.hasError;b=b===void 0?!1:b;var e=a.onCancel,f=a.onLoad,g=a.progress;a=a.title;l(function(){f==null?void 0:f()},[f]);return j.jsx(p,{hasError:b,onCancel:e,progress:g,testid:void 0,children:j.jsx(c("MWXTooltip.react"),{position:"above",tooltip:a,children:j.jsxs(d("react-strict-dom").html.div,{style:n.filePreview,children:[j.jsx(c("MWXIconStrict.react"),{icon:c("MWXIconDocument"),size:20}),j.jsx(c("MWXText.react"),{numberOfLines:2,type:"bodyLink3",children:a})]})})})}e.displayName=e.name+" [from "+f.id+"]";function q(a){var b=a.isDisabled;a=a.onPress;var d=h._("__JHASH__07aSX1Sv-Xl__JHASH__");return j.jsx(p,{children:j.jsx(c("MWXPressable.react"),{"aria-label":d,disabled:b,onPress:a,testid:void 0,xstyle:n.imagePreview,children:j.jsx(c("MWXIconStrict.react"),{color:b?"disabled":"primary",icon:c("MWXIconPhotoPlus"),size:24})})})}q.displayName=q.name+" [from "+f.id+"]";g.MWXComposerImageAttachmentPreview=a;g.MWXComposerVideoAttachmentPreview=b;g.MWXComposerFileAttachmentPreview=e;g.MWXComposerAddAttachmentButton=q}),226);
__d("MWXComposerButtonContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({});g["default"]=b}),98);
__d("MWXComposerRow.react",["react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={padding12:{paddingTop:"xz9dl7a",paddingEnd:"xn6708d",paddingBottom:"xsag5q8",paddingStart:"x1ye3gou",$$css:!0},padding4:{paddingTop:"x1iorvi4",paddingEnd:"x150jy0e",paddingBottom:"xjkvuk6",paddingStart:"x1e558r4",$$css:!0},padding6:{paddingTop:"x1yrsyyn",paddingEnd:"xsyo7zv",paddingBottom:"x10b6aqq",paddingStart:"x16hj40l",$$css:!0},row:{alignItems:"xpqajaz",boxSizing:"x9f619",display:"x78zum5",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",position:"x1n2onr6",width:"xh8yej3",$$css:!0},scrollable:{contain:"x41o525",overflowX:"xw2csxc",overflowY:"x1odjw0f",$$css:!0}};function a(a){var b=a.children,c=a["data-testid"];c=a.padding;c=c===void 0?0:c;var e=a.scrollable;a=a.xStyle;return i.jsx(d("react-strict-dom").html.div,{"data-testid":void 0,style:[j.row,c===12&&j.padding12,c===4&&j.padding4,c===6&&j.padding6,e===!0&&j.scrollable,a],children:b})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXComposerHeader.react",["MWXComposerButtonContext.react","MWXComposerRow.react","MWXText.react","MWXTextPairing.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={body:{alignItems:"x6s0dn4",paddingBottom:"x1120s5i",paddingStart:"xpkgp8e",paddingLeft:null,paddingRight:null,paddingEnd:"xmns6w2",paddingTop:"xz9dl7a",$$css:!0},border:{borderTopColor:"x8cjs6t",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",$$css:!0},rightAddon:{marginStart:"x1gryazu",$$css:!0}},k={color:"secondary",size:24};function a(a){var b=a.bodyText,e=a.bodyTextType,f=a["data-testid"];f=a.hasTopBorder;f=f===void 0?!1:f;var g=a.headlineText,h=a.headlineTextType,l=a.leftAddon,m=a.level;m=m===void 0?3:m;var n=a.loadingIndicator,o=a.rightAddon;a=a.subtext;return n!=null?i.jsx(c("MWXComposerRow.react"),{"data-testid":void 0,xStyle:[j.body],children:n}):i.jsxs(c("MWXComposerRow.react"),{"data-testid":void 0,xStyle:[j.body,f&&j.border],children:[l!=null&&l,(b!=null||a!=null||g!=null)&&i.jsx(c("MWXTextPairing.react"),{body:b!=null&&e!=null?i.jsx(c("MWXText.react"),{type:e,children:b}):b!=null?i.jsx(c("MWXText.react"),{type:"body4",children:b}):void 0,headline:g!=null&&h!=null?i.jsx(c("MWXText.react"),{type:h,children:g}):g!=null?i.jsx(c("MWXText.react"),{type:"headline4",children:g}):void 0,level:m,meta:a}),o!=null&&i.jsx(c("MWXComposerButtonContext.react").Provider,{value:k,children:i.jsx(d("react-strict-dom").html.div,{style:j.rightAddon,children:o})})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXComposerIconButton.react",["MWXCircleButton.react","MWXComposerButtonContext.react","MWXThreadThemeColor","MWXTooltip.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext,k={horizontalPaddingSmall:{paddingStart:"x1h0ha7o",paddingLeft:null,paddingRight:null,paddingEnd:"xg83lxy",$$css:!0},layoutWrapper:{flexGrow:"x1c4vz4f",flexShrink:"x2lah0s",$$css:!0}};b=i.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var e=a.color,f=a.size,g=a.type;g=g===void 0?"deemphasized":g;var h=a.wrapperStyle,l=a.wrapperXStyle,m=babelHelpers.objectWithoutPropertiesLoose(a,["color","size","type","wrapperStyle","wrapperXStyle"]),n=j(c("MWXComposerButtonContext.react")),o=n.color,p=n.iconRatio;p=p===void 0?"medium":p;var q=n.paddingHorizontal;q=q===void 0?"none":q;n=n.size;n=n===void 0?36:n;return i.jsx(d("react-strict-dom").html.div,{style:[q==="small"&&k.horizontalPaddingSmall,k.layoutWrapper,[l,h]],children:i.jsx(c("MWXTooltip.react"),{position:"above",tooltip:a.label,children:i.jsx(c("MWXCircleButton.react"),babelHelpers["extends"]({},m,{color:(l=(q=e)!=null?q:o)!=null?l:d("MWXThreadThemeColor").mwxThreadThemeColor("var(--chat-composer-button-color, var(--accent))"),iconRatio:p,ref:b,size:(h=f)!=null?h:n,type:g}))})})}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),98);
__d("MWXComposerInputArea.react",["MWXComposerButtonContext.react","MWXComposerRow.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={colors:{backgroundColor:"x16sw7j7",borderTopStartRadius:"x107yiy2",borderTopEndRadius:"xv8uw2v",borderBottomEndRadius:"x1tfwpuw",borderBottomStartRadius:"x2g32xy",borderTopWidth:"x178xt8z",borderEndWidth:"xm81vs4",borderBottomWidth:"xso031l",borderStartWidth:"xy80clv",marginEnd:"x1w0mnb",marginStart:"x1mnrxsn",$$css:!0},flexLayout:{display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1iyjqo2",flexShrink:"xs83m0k",minWidth:"x13qp9f6",overflowX:"x6ikm8r",overflowY:"x10wlt62",$$css:!0}},k={iconRatio:"large",paddingHorizontal:"none",size:28};function a(a){var b=a.children;a=a.header;return i.jsx(c("MWXComposerButtonContext.react").Provider,{value:k,children:i.jsxs(d("react-strict-dom").html.div,{style:[j.colors,j.flexLayout],children:[a,i.jsx(c("MWXComposerRow.react"),{padding:4,children:b})]})})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXComposerTextEditor.react",["CometLexicalContentEditable.react","CometLexicalPlaceholder.react","LexicalErrorBoundary","LexicalPlainTextPlugin","MWXRowItem.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={padding:{marginBottom:"x12nagc",marginEnd:"x1w0mnb",marginStart:"x1mnrxsn",marginTop:"x1gslohp",maxHeight:"xctk3hg",minWidth:"x900493",overflowY:"x1odjw0f",paddingTop:"xexx8yu",paddingEnd:"x4uap5",paddingBottom:"x18d9i69",paddingStart:"xkhd6sd",$$css:!0}};function a(a){var b=a.children,e=a.contentEditableProps,f=a.placeholderText;a=a.testid;f=f==null?{}:{"aria-placeholder":f,placeholder:i.jsx(c("CometLexicalPlaceholder.react"),{children:f})};a=i.jsx(c("CometLexicalContentEditable.react"),babelHelpers["extends"]({tabIndex:0,webDriverTestID:a},f,e));return i.jsxs(c("MWXRowItem.react"),{expanding:!0,verticalAlign:"center",xstyle:j.padding,children:[i.jsx(d("LexicalPlainTextPlugin").PlainTextPlugin,{ErrorBoundary:d("LexicalErrorBoundary").LexicalErrorBoundary,contentEditable:a}),b]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MWXComposer.react",["LexicalComposerContext","MWXComposerAttachmentPreview.react","MWXComposerHeader.react","MWXComposerIconButton.react","MWXComposerInputArea.react","MWXComposerRow.react","MWXComposerTextEditor.react","react","react-strict-dom"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useMemo,k={composer:{backgroundColor:"xt5xv9l",contain:"x6wvzqs",$$css:!0},flexLayout:{alignItems:"xpqajaz",display:"x78zum5",flexDirection:"xdt5ytf",flexGrow:"x1c4vz4f",flexShrink:"xs83m0k",minWidth:"x13qp9f6",$$css:!0},padding:{paddingTop:"xz9dl7a",paddingBottom:"xsag5q8",paddingStart:"x1e558r4",paddingLeft:null,paddingRight:null,paddingEnd:"x150jy0e",$$css:!0}};function a(a){var b=a.children,e=a.editor,f=a.header;a=a.testid;var g=d("LexicalComposerContext").createLexicalComposerContext();a=j(function(){return[e,g]},[e,g]);return i.jsx(d("LexicalComposerContext").LexicalComposerContext.Provider,{value:a,children:i.jsxs(d("react-strict-dom").html.div,{style:[k.composer,k.flexLayout],children:[f,i.jsx(c("MWXComposerRow.react"),{"data-testid":void 0,xStyle:k.padding,children:b})]})})}a.displayName=a.name+" [from "+f.id+"]";b={Add:d("MWXComposerAttachmentPreview.react").MWXComposerAddAttachmentButton,FilePreview:d("MWXComposerAttachmentPreview.react").MWXComposerFileAttachmentPreview,ImagePreview:d("MWXComposerAttachmentPreview.react").MWXComposerImageAttachmentPreview,VideoPreview:d("MWXComposerAttachmentPreview.react").MWXComposerVideoAttachmentPreview};g.Composer=a;g.Button=c("MWXComposerIconButton.react");g.TextEditor=c("MWXComposerTextEditor.react");g.InputArea=c("MWXComposerInputArea.react");g.Header=c("MWXComposerHeader.react");g.Row=c("MWXComposerRow.react");g.Attachments=b}),98);
__d("MWXComposerButtonGroupContext.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;a=h||d("react");b=a.createContext({isMenu:!1});g["default"]=b}),98);
__d("MWXComposerButtonGroupButton.react",["MWXComposerButtonGroupContext.react","MWXComposerIconButton.react","MWXMenuItem.react","MWXThreadThemeColor","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useContext;b=i.forwardRef(a);function a(a,b){a=babelHelpers["extends"]({},a);var e=a.color,f=a.icon,g=a.label,h=a.onPress,k=a.preventClosingMenuOnSelect,l=a.testid;l=babelHelpers.objectWithoutPropertiesLoose(a,["color","icon","label","onPress","preventClosingMenuOnSelect","testid"]);a=j(c("MWXComposerButtonGroupContext.react"));var m=a.isMenu,n=a.styleForButton;a=a.xstyleForButton;if(m){return i.jsx(c("MWXMenuItem.react"),babelHelpers["extends"]({"aria-label":g,icon:f.asMenuItemIcon_ESCAPE_HATCH(),iconColor:(m=e)!=null?m:d("MWXThreadThemeColor").mwxThreadThemeColor("var(--chat-composer-button-color, var(--accent))"),onClick:h,preventClosingMenuOnSelect:k,primaryText:g,ref:b,testid:void 0},l))}return i.jsx(c("MWXComposerIconButton.react"),babelHelpers["extends"]({icon:f,label:g,onPress:h,ref:b,testid:void 0,wrapperStyle:n,wrapperXStyle:a},e!=null?{color:e}:{},l))}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),98);
__d("withMWXPopover",["BaseMenuContext","BaseMultiPageViewContext","BasePopoverTrigger.react","MWXPopover.react","MWXPopoverLoadingState.react","lazyLoadComponent","react","tracePolicyFromResource","useCometPopoverInteractionTracing","withCometPlaceholder"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react"));b=h;var j=b.useContext,k=b.useMemo;function a(a){function b(b){var e=b.onHoverIn,f=b.onHoverOut,g=b.popover,h=b.popoverPresentationProps,l=b.popoverProps,m=b.preloadTrigger,n=babelHelpers.objectWithoutPropertiesLoose(b,["onHoverIn","onHoverOut","popover","popoverPresentationProps","popoverProps","preloadTrigger"]);b=(b=j(c("BaseMenuContext")))!=null?b:{};var o=b.onClose;b=(b=j(c("BaseMultiPageViewContext")))!=null?b:{};var p=b.pushPage,q=k(function(){return d("withCometPlaceholder").withCometPlaceholder(c("lazyLoadComponent")(g),i.jsx(c("MWXPopoverLoadingState.react"),{withArrow:!1}))},[g]);b=c("useCometPopoverInteractionTracing")(c("tracePolicyFromResource")("comet.popover",g),"lazy");h=(h=h)!=null?h:{};var r=h.align;r=r===void 0?"middle":r;var s=h.position;s=s===void 0?"above":s;h=babelHelpers.objectWithoutPropertiesLoose(h,["align","position"]);var t=k(function(){return function(a){return i.jsx(c("MWXPopover.react"),{withArrow:!0,children:i.jsx(q,babelHelpers["extends"]({},a))})}},[q]),u=k(function(){return function(a){return function(b){var c;b=b.onReturn;return i.jsx(q,babelHelpers["extends"]({},a,{onClose:(c=o)!=null?c:b}))}}},[q,o]);return i.jsx(c("BasePopoverTrigger.react"),babelHelpers["extends"]({align:r,position:s},h,{interactionTracker:b,popover:t,popoverPreloadResource:g,popoverProps:l,preloadTrigger:m,children:function(b,c,d,g,h){return i.jsx(a,babelHelpers["extends"]({onHoverIn:function(a){g(a),e==null?void 0:e(a)},onHoverOut:function(a){h(),f==null?void 0:f(a)}},n,{onPress:function(){p!=null&&o!=null?p(u(l)):c();for(var a=arguments.length,b=new Array(a),d=0;d<a;d++)b[d]=arguments[d];n.onPress==null?void 0:n.onPress.apply(n,b)},preventClosingMenuOnSelect:!0,ref:b}))}}))}b.displayName=b.name+" [from "+f.id+"]";return b}g["default"]=a}),98);
__d("MWXComposerButtonGroupPopoverButton.react",["MWXComposerButtonGroupButton.react","react","withMWXPopover"],(function(a,b,c,d,e,f,g){"use strict";var h;h||d("react");a=c("withMWXPopover")(c("MWXComposerButtonGroupButton.react"));b=a;g["default"]=b}),98);
__d("MWXIconFaceHappy",["MWXSvgIcon","SVGIcon","cr:9135","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9135")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXComposerEmojiButton.react",["fbt","JSResourceForInteraction","LexicalComposerContext","MWXComposerButtonGroupPopoverButton.react","MWXIconFaceHappy","Promise","promiseDone","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j,k=(j||(j=d("react"))).c,l=j,m=c("JSResourceForInteraction")("cometAddEmojiToComposerForLexical").__setRef("MWXComposerEmojiButton.react");function a(){var a=k(4),e=d("LexicalComposerContext").useLexicalComposerContext(),f=e[0];a[0]===Symbol["for"]("react.memo_cache_sentinel")?(e=h._("__JHASH__450DFbxuM_0__JHASH__"),a[0]=e):e=a[0];var g;a[1]===Symbol["for"]("react.memo_cache_sentinel")?(g=c("JSResourceForInteraction")("MWV2ComposerEmojiPickerForJSResource").__setRef("MWXComposerEmojiButton.react"),a[1]=g):g=a[1];a[2]!==f?(e=l.jsx(c("MWXComposerButtonGroupPopoverButton.react"),{icon:c("MWXIconFaceHappy"),label:e,onPress:n,popover:g,popoverProps:{onSelect:function(a){return c("promiseDone")(m.load(),function(c){c(a,f,16);return(i||(i=b("Promise"))).resolve()})},withArrow:!1},preloadTrigger:"button",testid:void 0}),a[2]=f,a[3]=e):e=a[3];return e}function n(){m.preload()}g["default"]=a}),226);
__d("MWXComposerGlimmer.react",["MWXColumn.react","MWXColumnItem.react","MWXGlimmer.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j={block:{paddingBottom:"x1l90r2v",$$css:!0},container:{alignSelf:"xkh2ocl",backgroundColor:"x57kliw",borderTopColor:"x1epquy7",borderTopStyle:"x13fuv20",borderTopWidth:"x178xt8z",$$css:!0},glimmer:{borderTopStartRadius:"x1lq5wgf",borderTopEndRadius:"xgqcy7u",borderBottomEndRadius:"x30kzoy",borderBottomStartRadius:"x9jhf4c",height:"xlup9mm",width:"xh8yej3",$$css:!0}};b=i.forwardRef(a);function a(a,b){return i.jsx(c("MWXColumn.react"),{paddingHorizontal:16,paddingVertical:16,ref:b,spacing:20,xstyle:[j.container,j.block],children:i.jsx(c("MWXColumnItem.react"),{children:i.jsx(c("MWXGlimmer.react"),{index:0,xstyle:j.glimmer})})})}a.displayName=a.name+" [from "+f.id+"]";e=b;g["default"]=e}),98);
__d("MWXIconLike",["MWXSvgIcon","SVGIcon","cr:9201","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9201")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXIconLink",["MWXSvgIcon","SVGIcon","cr:9202","gkx"],(function(a,b,c,d,e,f,g){"use strict";a=d("MWXSvgIcon").mwxSvgIcon(d("SVGIcon").svgIcon(b("cr:9202")),c("gkx")("23219"));g["default"]=a}),98);
__d("MWXUseLatch",["CometThrottle","Run","debounce","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useMemo;function a(a,b,e){var f=b!=null?b:!1;i(function(){if(!f)return;var b=d("Run").onUnload(function(){return a(!1)});return function(){return b.remove()}},[f,a]);return j(function(){var b={contents:!1},d=c("debounce")(function(){if(!b.contents)return a(!1)},e|0),f=c("CometThrottle")(function(){return a(!0)},3e3,{leading:!0,trailing:!1}),g=function(){a(!1),b.contents=!0},h=function(){f();return d()};return[h,g]},[a,e])}g.useLatch=a}),98);
__d("MessagingLoggingUtils",["I64","MessagingAttachmentType"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){a=(h||(h=d("I64"))).to_int32(a);switch(a){case c("MessagingAttachmentType").NONE:return 1;case c("MessagingAttachmentType").STICKER:return 4;case c("MessagingAttachmentType").IMAGE:return 8;case c("MessagingAttachmentType").ANIMATED_IMAGE:return 6;case c("MessagingAttachmentType").VIDEO:return 10;case c("MessagingAttachmentType").AUDIO:return 11;case c("MessagingAttachmentType").FILE:return 9;case c("MessagingAttachmentType").XMA:return 13;case c("MessagingAttachmentType").EPHEMERAL_IMAGE:return 8;case c("MessagingAttachmentType").EPHEMERAL_VIDEO:return 5;case c("MessagingAttachmentType").SELFIE_STICKER:return 22;case c("MessagingAttachmentType").SOUND_BITE:return 23;default:return 1}}g.convertI64ToAttachmentType=a}),98);
__d("NaviconFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsx("path",{fillRule:"nonzero",d:"M452.75 1077.5h6.5a.75.75 0 1 0 0-1.5h-6.5a.75.75 0 1 0 0 1.5zm0 3h6.5a.75.75 0 1 0 0-1.5h-6.5a.75.75 0 1 0 0 1.5zm0 3h6.5a.75.75 0 1 0 0-1.5h-6.5a.75.75 0 1 0 0 1.5z"})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("PhotoAddFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsxs("g",{children:[i.jsx("path",{d:"M107.5 923.64a.682.682 0 0 1-.07-.003l-1.567-.146-.148 1.579a.75.75 0 0 1-1.493-.14l.148-1.579-1.43-.134a.75.75 0 0 1-.677-.816.744.744 0 0 1 .816-.677l1.431.134.133-1.428a.749.749 0 1 1 1.493.14l-.133 1.428 1.567.146a.75.75 0 0 1-.07 1.497m1.126-6.13-5.797-.51a1.512 1.512 0 0 0-1.63 1.377l-.693 7.966c-.035.402.088.794.347 1.104.26.31.622.501 1.022.537l5.795.51a1.485 1.485 0 0 0 1.098-.35c.308-.26.498-.625.533-1.027l.693-7.967a1.506 1.506 0 0 0-.347-1.104 1.494 1.494 0 0 0-1.022-.537",transform:"translate(352 157)"}),i.jsx("path",{d:"M100.27 927.842a2.528 2.528 0 0 1-.565-1.83l.165-1.926-.403-4.71a.183.183 0 0 1 .042-.132.178.178 0 0 1 .12-.065l.665-.06.09-1.037c.013-.167.046-.329.09-.484l-.973.087c-.437.038-.833.25-1.116.595a1.696 1.696 0 0 0-.379 1.227l.638 7.46c.038.448.245.853.582 1.142a1.61 1.61 0 0 0 1.2.389l.574-.052a2.456 2.456 0 0 1-.73-.604",transform:"translate(352 157)"})]})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("PopupWindow",["DOMDimensions","DOMQuery","FlowMigrationUtilsForLegacyFiles","Layer","Popup","getViewportDimensions","isFalsey"],(function(a,b,c,d,e,f,g){var h={allowShrink:!0,strategy:"vector",timeout:100,widthElement:null};function b(a){Object.assign(h,a),window.setInterval(i,h.timeout)}function i(){var a=c("getViewportDimensions")(),b=j(),e=c("Layer").getTopmostLayer();if(e){e=(e=e.getRoot())==null?void 0:e.firstChild;e||d("FlowMigrationUtilsForLegacyFiles").invariantViolation("topMostLayer.getRoot().firstChild is null.");var f=d("DOMDimensions").getElementDimensions(e);f.height+=d("DOMDimensions").measureElementBox(e,"height",!0,!0,!0);f.width+=d("DOMDimensions").measureElementBox(e,"width",!0,!0,!0);b.height=Math.max(b.height,f.height);b.width=Math.max(b.width,f.width)}e=b.height-a.height;f=b.width-a.width;f<0&&c("isFalsey")(h.widthElement)&&(f=0);f=f>1?f:0;c("isFalsey")(h.allowShrink)&&e<0&&(e=0);if(e||f)try{window.console&&window.console.firebug,window.resizeBy(f,e),f&&window.moveBy(f/-2,0)}catch(a){}}function j(){var b=d("DOMDimensions").getDocumentDimensions();if(h.strategy==="offsetHeight"){var e=document.body;if(!e)d("FlowMigrationUtilsForLegacyFiles").invariantViolation("document.body is null.");else{b.height=(e=e.offsetHeight)!=null?e:0}}if(c("isFalsey")(h.widthElement)&&typeof h.widthElement==="string"){e=d("DOMQuery").scry(document.body,h.widthElement)[0];e&&(b.width=d("DOMDimensions").getElementDimensions(e).width)}e=a.Dialog;e&&e.max_bottom&&e.max_bottom>b.height&&(b.height=e.max_bottom);return b}function e(a,b,c,e){return d("Popup").open(a,c,b,e)}g._opts=h;g.init=b;g._resizeCheck=i;g._getDocumentSize=j;g.open=e}),98);
__d("Query__lightspeed_data",["LSRelayContext","Promise","emptyFunction","promiseDone","relay-runtime"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var e=new Map(),f=d("LSRelayContext").getContext(a);f instanceof(h||(h=b("Promise")))&&c("promiseDone")(f,function(a){f=a,e.forEach(function(a){return a()}),e.clear()});return{read:function(){return f instanceof(h||(h=b("Promise")))?d("relay-runtime").suspenseSentinel():{context:f,value:void 0}},subscribe:function(a){if(!(f instanceof(h||(h=b("Promise")))))return c("emptyFunction");var d={};e.set(d,a);return function(){e["delete"](d)}}}}g.lightspeed_data=a}),98);
__d("RefreshRightFilled12.svg.react",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsxs("svg",babelHelpers["extends"]({viewBox:"0 0 12 13",width:"1em",height:"1em",fill:"currentColor"},a,{children:[a.title!=null&&i.jsx("title",{children:a.title}),a.children!=null&&i.jsx("defs",{children:a.children}),i.jsx("g",{fillRule:"evenodd",transform:"translate(-450 -1073)",children:i.jsxs("g",{fillRule:"nonzero",children:[i.jsx("path",{d:"M103.5 918.5a5.5 5.5 0 1 0 3.248 1.061.75.75 0 1 0-.887 1.21A4 4 0 1 1 103.5 920a.75.75 0 1 0 0-1.5z",transform:"translate(352.5 156)"}),i.jsx("path",{d:"M102.47 919.97a.75.75 0 0 0 1.06 1.06l1.25-1.25a.75.75 0 0 0 0-1.06l-1.25-1.25a.75.75 0 0 0-1.06 1.06l.72.72-.72.72z",transform:"translate(352.5 156)"})]})})]}))}a.displayName=a.name+" [from "+f.id+"]";a._isSVG=!0;b=a;g["default"]=b}),98);
__d("canMWAddMemberToGroupThread",["I64","LSIntEnum","LSThreadBitOffset"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a,b){if(b)return!1;b=(h||(h=d("I64"))).equal(a.threadType,(i||(i=d("LSIntEnum"))).ofNumber(16));b=b&&a.needsAdminApprovalForNewParticipant===!1;return d("LSThreadBitOffset").has(27,a)||b}g["default"]=a}),98);
__d("getMWPUnavailableComposerConfiguration",["I64","LSAuthorityLevel","LSMessagingThreadTypeUtil","MWBlockedComposerLogging","MWChatUnavailableComposer.react","MWXComposerGlimmer.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function a(a,b,e){if(d("LSMessagingThreadTypeUtil").isOneToOne(b)&&e!=null){b=!e.isPage&&(!e.hasMessageCapability||!e.hasReplyMessageCapability);if(e.blockedSinceTimestampMs==null&&b)return(i||(i=d("I64"))).lt(e.authorityLevel,(i||(i=d("I64"))).of_int32(c("LSAuthorityLevel").AUTHORITATIVE))?j.jsx(c("MWXComposerGlimmer.react"),{}):j.jsx(c("MWChatUnavailableComposer.react"),{reason:e.hasMessageCapability?d("MWBlockedComposerLogging").ComposerBlockingReason.USER_BLOCKED_CANNOT_REPLY:d("MWBlockedComposerLogging").ComposerBlockingReason.USER_BLOCKED_CANNOT_MESSAGE,thread:{threadKey:a}})}}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("issueLSAudioMediaSendJob",["I64","LSDatabaseSingletonLazyWrapper","LSFactory","LSInsertNewMediaSendStoredProcedure","LSMarkSubJobCompletedV2StoredProcedure","MWPComposerMediaUploadUtil","MWPOpenComposerUtils","ReQL","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(a,b,c,e){if(a==null)return;if(!a.startsWith("blob:"))return;var f={contents:function(){}};f.contents=d("ReQL").fromTableAscending(c.tables.attachments).getKeyRange(e).subscribe(function(c,d){if(d.operation==="put"){c=d.value;if(c.attachmentFbid!==b.toString())return;d=c.playableUrl;d!=null&&!d.startsWith("blob:")&&(f.contents(),URL.revokeObjectURL(a))}})}function a(a,b,c,d,e,f,g,h,i,k,l){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,g,j,k,l,m,n,o,p,q){yield c("LSInsertNewMediaSendStoredProcedure")(c("LSFactory")(a),{attachmentType:m.attachment_type,inMessageIndex:(h||(h=d("I64"))).zero,isSecure:!1,offlineAttachmentId:k,offlineThreadingId:l,sendByServer:!1,shouldTranscode:!1,useDoublePhase:!1});a=function(a,g){if(g==null||g.length===0)return;var n=function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var a=(yield c("LSDatabaseSingletonLazyWrapper")());return a.runInTransaction(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){b=c("LSFactory")(b);yield c("LSMarkSubJobCompletedV2StoredProcedure")(b,{fbid:(h||(h=d("I64"))).of_string(g),offlineAttachmentId:k});yield d("MWPOpenComposerUtils").resumeSendJob(b,l,j);i(m.playable_url,g,a,e)});return function(a){return f.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":99")});return function(){return a.apply(this,arguments)}}();c("promiseDone")(n(),function(){p==null?void 0:p(a)})};var r=function(a,b){q==null?void 0:q((b=b.response.getErrorDescriptionString())!=null?b:"unknown_upload_failure",a)};yield d("MWPComposerMediaUploadUtil").startUpload(o,void 0,a,r,!0,[n.file],[k],void 0,void 0,n.waveformData,void 0,h.to_string(g))});return j.apply(this,arguments)}g["default"]=a}),98);
__d("issueLSMediaSendJobs",["ArmadilloDataTraceCheckPoint","I64","LSAppendDataTraceAddonStoredProcedure","LSFactory","LSGenerateTraceId","LSInsertNewMediaSendStoredProcedure","LSMarkSubJobCompletedV2StoredProcedure","MWConsole","MWMediaTraceHandler","MWPOpenComposerUtils","MessagingLoggingUtils","Promise","asyncToGeneratorRuntime","gkx","updateAndFlushLSDataTrace"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function j(a,b,c,d){return k.apply(this,arguments)}function k(){k=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){b!=null&&(yield d("MWMediaTraceHandler").logMediaSendStart(a,b,c,(i||(i=d("I64"))).of_int32(e)))});return k.apply(this,arguments)}function l(a,b,c){return m.apply(this,arguments)}function m(){m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e!=null&&c("gkx")("23995")&&(yield c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").armadilloTlcControlOpenThread,dataTraceId:e,syncChannel:(i||(i=d("I64"))).minus_one,tags:b}))});return m.apply(this,arguments)}function a(a,b,c,d,e){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f,g,k){var m=c("LSGenerateTraceId")(),n=k[0];n=d("MessagingLoggingUtils").convertI64ToAttachmentType(n.attachmentType);yield j(a,m,(i||(i=d("I64"))).of_int32(g.length),n);var o=0;n=g.map(function(){var g=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,g){yield c("LSInsertNewMediaSendStoredProcedure")(c("LSFactory")(a),{attachmentType:b.attachment_type,inMessageIndex:(i||(i=d("I64"))).of_int32(g),isSecure:!1,offlineAttachmentId:b.attachment_fbid,offlineThreadingId:f,sendByServer:!1,shouldTranscode:!1,useDoublePhase:!1});yield d("MWPOpenComposerUtils").updateMediaStaging(a,b.attachment_fbid,function(a){return babelHelpers["extends"]({},a,{isSent:!0})});g=k.find(function(a){return a.offlineAttachmentId===b.offline_attachment_id});if(g!=null){var h=g.fbid;h!=null&&(yield c("LSMarkSubJobCompletedV2StoredProcedure")(c("LSFactory")(a),{fbid:h,offlineAttachmentId:b.attachment_fbid}),yield d("MWPOpenComposerUtils").deleteMediaStaging(a,b.attachment_fbid),yield d("MWPOpenComposerUtils").updateAttachment(a,e,f,b.attachment_fbid,function(a){return babelHelpers["extends"]({},a,{attachmentFbid:(i||(i=d("I64"))).to_string(h)})}),o++)}c("gkx")("24136")&&(yield d("MWPOpenComposerUtils").updateAttachment(a,e,f,b.attachment_fbid,function(a){return babelHelpers["extends"]({},a,{previewHeight:void 0,previewWidth:void 0})}))});return function(a,b){return g.apply(this,arguments)}}());yield (h||(h=b("Promise"))).allSettled(n);yield d("MWPOpenComposerUtils").resumeSendJob(c("LSFactory")(a),f,m);yield l(a,i.to_string(e),m);yield c("updateAndFlushLSDataTrace")(a,m);return{sentWithAllFilesUploaded:o===g.length}});return n.apply(this,arguments)}g["default"]=a}),98);
__d("issueSendInstamadilloMediaMessage",["IGDBridgedAPI","MWPOpenComposerUtils","Promise","asyncToGeneratorRuntime","promiseDone"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,c){return i.apply(this,arguments)}function i(){i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,f){c("promiseDone")(c("IGDBridgedAPI").sendMediaMessage({offlineThreadingId:f}));f=e.map(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){yield d("MWPOpenComposerUtils").updateMediaStaging(a,b.attachment_fbid,function(a){return babelHelpers["extends"]({},a,{isSent:!0})})});return function(a){return c.apply(this,arguments)}}());yield (h||(h=b("Promise"))).allSettled(f)});return i.apply(this,arguments)}g["default"]=a}),98);
__d("useAttachmentsMAWNoop",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return[]}f["default"]=a}),66);
__d("useEditMessageHistoryMAWNoop",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return[]}f["default"]=a}),66);
__d("useHasNonAddressableParticipantWAI",["CurrentMessengerUser","FBLogger","I64","Int64Hooks","LSAuthorityLevel","LSIntEnum","MAWBridgeSendAndReceive","ODS","ReQL","ReQLSuspense","TemporaryLoggingUtilsForS406998Only","WAJids","WALogger","asyncToGeneratorRuntime","gkx","promiseDone","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l;function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["occam_reachable_with_no_wai_devices in "," (",")"]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["occam_not_reachable_with_wai_devices in "," (",")"]);n=function(){return a};return a}var o=(l||d("react")).useState;function a(a){var e=a.isComposerBlocked,g=a.isGroup,l=a.threadKey,p=(h||(h=c("useReStore")))();a=o(null);var q=a[0],r=a[1],s=d("ReQLSuspense").useArray(function(){return d("ReQL").mergeJoin(d("ReQL").fromTableAscending(p.tables.participants,["contactId"]).getKeyRange(l),d("ReQL").fromTableAscending(p.tables.contacts)).map(function(a){var b=a[0].contactId;a=a[1];return(i||(i=d("I64"))).ge(a.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE))?d("WAJids").toMsgrUserJid((i||(i=d("I64"))).to_string(b)):null}).filter(Boolean)},[p,l],f.id+":48");d("Int64Hooks").useEffectInt64(function(){c("gkx")("483")&&(s.forEach(function(a){var e=a.split("@")[0];d("TemporaryLoggingUtilsForS406998Only").isStanzaIdForS406998Only(e)&&c("promiseDone")(b("asyncToGeneratorRuntime").asyncToGenerator(function*(){var b=(i||(i=d("I64"))).of_string(e),f=(yield p.tables.threads.get(l)),h=(yield p.tables.contacts.get(b));b=(yield p.tables.participants.index("contactIdThreadKey").get(b,l));f=f==null?void 0:f.authorityLevel;h=h==null?void 0:h.authorityLevel;b=b==null?void 0:b.authorityLevel;c("FBLogger")("messenger_e2ee_web","invalid_participant_id").mustfix("[S406998] invalid participant %s. threadKey: %s. isGroup: %s. count: %s. threadAuthLevel: %s. contactAuthLevel: %s. participantAuthLevel: %s",a,i.to_string(l),g,s.length,f?(i||(i=d("I64"))).to_string(f):"",h?(i||(i=d("I64"))).to_string(h):"",b?(i||(i=d("I64"))).to_string(b):"")})())}),c("promiseDone")(d("MAWBridgeSendAndReceive").sendAndReceive("backend","getWAIDevices",{users:s}).then(function(a){var b=!1;for(var c of s){var f;if(!a.has(c)){b=!0;break}else if(((f=a.get(c))==null?void 0:f.length)===0){b=!0;break}}f=g?"group":"1:1";a=d("CurrentMessengerUser").isTestUser()?"test user":"prod user";e&&!b?((k||(k=d("ODS"))).bumpEntityKey(3185,"mwchat_composer","occam_not_reachable_with_wai_devices in "+f+" ("+a+")"),d("WALogger").DEV(n(),f,a)):!e&&b&&((k||(k=d("ODS"))).bumpEntityKey(3185,"mwchat_composer","occam_reachable_with_no_wai_devices in "+f+" ("+a+")"),d("WALogger").DEV(m(),f,a));r(b)})))},[p.tables.contacts,p.tables.participants,p.tables.threads,e,g,l,s]);return q}g.useHasNonAddressableParticipantWAI=a}),98);
__d("useLSMessagingInitiatingSourceNumber",["LSMessagingInitiatingSource","MWLSThreadDisplayContext"],(function(a,b,c,d,e,f,g){"use strict";function a(){var a=d("MWLSThreadDisplayContext").useMWLSThreadDisplayContext();if(a==null)return;else if(a==="Inbox")return c("LSMessagingInitiatingSource").FACEBOOK_INBOX;else if(a==="FullscreenChat")return c("LSMessagingInitiatingSource").FACEBOOK_FULLSCREEN;else if(a==="ChatTab")return c("LSMessagingInitiatingSource").FACEBOOK_CHAT;else return c("LSMessagingInitiatingSource").ROOMS_SIDE_CHAT}g["default"]=a}),98);
__d("useMAWCreateOptimisticSecureMessageNoOp",["err"],(function(a,b,c,d,e,f,g){"use strict";function a(){return function(){throw c("err")("Attempted to use separate read hooks in non-separate read mode")}}g["default"]=a}),98);
__d("useMAWCreateOptimisticSecureMessageV2",["I64","MAWCreateOptimisticSecureMessage","MAWOptimisticMessageUtils","MWPActor.react","Promise","QPLUserFlow","asyncToGeneratorRuntime","qpl","react","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useCallback;function a(){var a=c("useAsyncReStore")(),e=d("MWPActor.react").useActor();return k(function(g,j,k,l,m,n,o,p){return(h||(h=b("Promise"))).resolve(a).then(function(a){return a.runInTransaction(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"before_create_optimistic_message",{instanceKey:m});var f=d("MAWOptimisticMessageUtils").getOptimisticMessageTimestamp(),h=(i||(i=d("I64"))).of_float(f);o(p);var q=(yield d("MAWCreateOptimisticSecureMessage").buildOptimisticLsMessage(a,b,e,g,j,k,l,m,n,p,h,1,p));yield b.messages.add(q);c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"after_create_optimistic_message",{instanceKey:m});yield d("MAWOptimisticMessageUtils").optimisticBumpThread(b,{hotEmojiSize:l,mentionedJids:n,messageText:j,senderId:e,threadKey:k,ts:h});return{messageExternalId:p,offlineMsgTimestamp:f}});return function(a){return f.apply(this,arguments)}}(),"readwrite","ui",void 0,f.id+":58")})},[a,e])}g["default"]=a}),98);
__d("useMAWCreateOptimisticSecureMessageWithAttachments",["MAWCreateOptimisticSecureMessageWithAttachment","MAWGetEphemeralSettings","MWPActor.react","Promise","asyncToGeneratorRuntime","cr:2300","nullthrows","qex","useLSMessagingInitiatingSourceNumber","useMWLSDefaultThreadSource","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=b("cr:2300")||{createIdbOptimisticMessageWithAttachment:void 0};var j=e.createIdbOptimisticMessageWithAttachment;function a(){var a,e=(i||(i=c("useReStore")))(),g=d("MWPActor.react").useActor(),k=c("useLSMessagingInitiatingSourceNumber")(),l=c("useMWLSDefaultThreadSource")(),m=(a=c("qex")._("60"))!=null?a:!1;return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,i,n,o,p,q,r,s,t,u){if(s==null)return(h||(h=b("Promise"))).resolve();var v=m?yield d("MAWGetEphemeralSettings").getEphemeralSetting(n.jid,i):void 0;return e.runInTransaction(function(b){return m?c("nullthrows")(j)(b,{attachmentType:s,ephemeralSettings:v,initiatingSource:k,instanceKey:q,mawThreadResult:n,mediaGroupMetadataMap:u,messageExternalId:t,offlineAttachmentId:o,onOfflineMsgId:r,optimisticMediaAttachment:p,reply:a,senderId:g,threadKey:i,threadSource:l(i)}):d("MAWCreateOptimisticSecureMessageWithAttachment").createOptimisticMessageWithAttachment(e,b,g,a,i,o,p,q,r,s,t,u)},"readwrite","ui",void 0,f.id+":78")});return function(b,c,d,e,f,g,h,i,j,k){return a.apply(this,arguments)}}()}g["default"]=a}),98);
__d("useMAWCreateOptimisticSecureMessageWithXMAAttachment",["I64","LSAuthorityLevel","LSIntEnum","MAWAdminMsg","MAWBumpThread","MAWCreateOptimisticSecureMessage","MAWLocalizationType","MAWOptimisticMessageUtils","MAWSendFileMsgTypes","MAWVault","MWPActor.react","MessagingAttachmentType","QPLUserFlow","asyncToGeneratorRuntime","qpl","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(){var a=(j||(j=c("useReStore")))(),e=d("MWPActor.react").useActor();return function(g,j,k,l,m,n,o,p,q,r,s){return a.runInTransaction(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){var f;n(o);var t=d("MAWOptimisticMessageUtils").getOptimisticMessageTimestamp(),u=(h||(h=d("I64"))).of_float(t);f=(yield d("MAWCreateOptimisticSecureMessage").buildOptimisticLsMessage(a,b,e,g,(f=d("MAWVault").unvault(r))!=null?f:"",j,void 0,m,s,o,u,1024));yield b.messages.add(f);f={attachmentFbid:k,attachmentIndex:h.zero,attachmentType:(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").XMA),authorityLevel:i.ofNumber(c("LSAuthorityLevel").OPTIMISTIC),hasMedia:!1,hasXma:!0,isSharable:!1,messageId:o,offlineAttachmentId:k,previewUrl:l==null?void 0:l.url,subtitleText:q,threadKey:j,timestampMs:u,titleText:p,transportKey:"WhatsApp"};if((l==null?void 0:l.type)==="image"){var v;f=babelHelpers["extends"]({},f,{previewHeight:((v=l.thumbnailSpec)==null?void 0:v.height)?(h||(h=d("I64"))).of_float((v=l.thumbnailSpec)==null?void 0:v.height):void 0,previewWidth:((v=l.thumbnailSpec)==null?void 0:v.width)?(h||(h=d("I64"))).of_float((v=l.thumbnailSpec)==null?void 0:v.width):void 0})}yield b.attachments.add(f);c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"after_create_optimistic_message",{instanceKey:m});yield d("MAWBumpThread").threadMutation_DEPRECATED({description:"useMAWCreateOptimisticSecureMessageWithXMAAttachment",lastActivityTs:u,lastReadTs:u,snippet:d("MAWAdminMsg").buildLocalizedString([d("MAWVault").unvault(r)],[],d("MAWLocalizationType").CURRENT_USER_SEND_TEXT),snippetSenderContactId:e,threadKey:j,txn:b});return{messageExternalId:o,offlineAttachmentId:d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(k),offlineMsgTimestamp:t}});return function(a){return f.apply(this,arguments)}}(),"readwrite","ui",void 0,f.id+":67")}}g["default"]=a}),98);
__d("useMAWCreateOptimisticSecureMessagesWithAttachments",["MAWCreateOptimisticSecureMessageWithAttachment","MAWGetEphemeralSettings","MWPActor.react","Promise","asyncToGeneratorRuntime","cr:2300","qex","useLSMessagingInitiatingSourceNumber","useMWLSDefaultThreadSource","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;e=b("cr:2300")||{createIdbOptimisticMessageWithAttachment:void 0};var j=e.createIdbOptimisticMessageWithAttachment;function a(){var a,e=(i||(i=c("useReStore")))(),g=d("MWPActor.react").useActor(),k=c("useLSMessagingInitiatingSourceNumber")(),l=c("useMWLSDefaultThreadSource")(),m=(a=c("qex")._("60"))!=null?a:!1;return function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,c,i,n,o,p,q){var r=m?yield d("MAWGetEphemeralSettings").getEphemeralSetting(i.jid,c):void 0;return e.runInTransaction(function(f){return(h||(h=b("Promise"))).all(q.map(function(q){var s=q.attachmentType,t=q.messageExternalId,u=q.offlineAttachmentId;q=q.optimisticMediaAttachment;if(s==null)return(h||(h=b("Promise"))).resolve();return m?j==null?void 0:j(f,{attachmentType:s,ephemeralSettings:r,initiatingSource:k,instanceKey:n,mawThreadResult:i,mediaGroupMetadataMap:p,messageExternalId:t,offlineAttachmentId:u,onOfflineMsgId:o,optimisticMediaAttachment:q,reply:a,senderId:g,threadKey:c,threadSource:l(c)}):d("MAWCreateOptimisticSecureMessageWithAttachment").createOptimisticMessageWithAttachment(e,f,g,a,c,u,q,n,o,s,t,p)}))},"readwrite","ui",void 0,f.id+":73")});return function(b,c,d,e,f,g,h){return a.apply(this,arguments)}}()}g["default"]=a}),98);
__d("useMAWDeleteLinkPreviewXMATableData",["FBLogger","Int64Hooks","LSMessagingThreadTypeUtil","asyncToGeneratorRuntime","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var e=c("useAsyncReStore")(),g=a!=null&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(a);return d("Int64Hooks").useCallbackInt64(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var d=a.draftId;if(!g)return;a=(yield e);a=(yield a.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=null;yield a.e2ee_composer_draft_link_preview.get(d).then(function(a){a=JSON.parse((a=a==null?void 0:a.data)!=null?a:"{}");b=a.iframeMediaURL});yield a.e2ee_composer_draft_link_preview["delete"](d);return b});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":40"));if(a!=null)try{URL.revokeObjectURL(a)}catch(a){c("FBLogger")("messenger_web_sharing").mustfix("Failed to revoke the object URL with, failed with error: %s",a)}});return function(b){return a.apply(this,arguments)}}())}g["default"]=a}),98);
__d("useMAWFetchAndWriteLinkPreviewXMATableData",["ConstUriUtils","E2EELinkPreviewXMADataStatus","E2EELinkPreviewXMADataType","FBLogger","I64","Int64Hooks","LSMessagingThreadTypeUtil","MAWExternalLinkUtil","MAWPreProcessLinkPreviewQPL","MWPComposerDraftMessages","Promise","asyncToGeneratorRuntime","getRequestConstUri","isFacebookURI","promiseDone","useAsyncReStore","useMAWDeleteLinkPreviewXMATableData","useXMAPreviewsDisabledSetting"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function e(a){var e=a.threadKey;a=a.threadType;var f=c("useAsyncReStore")(),g=a!=null&&d("LSMessagingThreadTypeUtil").isArmadilloSecure(a),h=c("useMAWDeleteLinkPreviewXMATableData")(a),l=c("getRequestConstUri")(),n=c("useXMAPreviewsDisabledSetting")();return d("Int64Hooks").useCallbackInt64(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var o=a.draftId;a=a.urls;if(!g)return(i||(i=b("Promise"))).resolve();var p=d("ConstUriUtils").getUri(a[0].entity.url);if(p==null)return(i||(i=b("Promise"))).resolve();var q=d("MAWPreProcessLinkPreviewQPL").startMediaPreProcessLinkPreviewQpl({draftId:o,url:p.toString()}),r=c("isFacebookURI")(p),s=c("isFacebookURI")(l);s=r&&s;if(r&&n){j({dbPromise:f,deleteLinkPreviewXMATableData:h,draftId:o,qplEvent:q,qplSubspanPoint:"write_fb_disabled",status:c("E2EELinkPreviewXMADataStatus").DISABLED,threadKey:e,xmaData:null});q.endCancel({string:{cancel_reason:"fb_xmas_disabled"}},706);return}j({dbPromise:f,deleteLinkPreviewXMATableData:h,draftId:o,qplEvent:q,qplSubspanPoint:"write_loading_status",status:c("E2EELinkPreviewXMADataStatus").LOADING,threadKey:e,xmaData:{title:p.getDomain(),url:p.toString()}});q.addAnnotations({bool:{should_fetch_from_og:s},string:{link_type:r?"facebook":"external"}});r=s?yield k(p.toString(),q):yield m(a,q);s=r.dataType;p=r.xmaData;j({dataType:s,dbPromise:f,deleteLinkPreviewXMATableData:h,draftId:o,qplEvent:q,qplSubspanPoint:"write_xma_data",status:c("E2EELinkPreviewXMADataStatus").LOADED,threadKey:e,xmaData:p})});return function(b){return a.apply(this,arguments)}}())}function j(a){var b,e,g=a.dataType,i=a.dbPromise,j=a.deleteLinkPreviewXMATableData,k=a.draftId,l=a.qplEvent,m=a.qplSubspanPoint,n=a.status,o=a.threadKey,p=a.xmaData;l.addAnnotations({"int":{data_type:g}});a=d("MWPComposerDraftMessages").getDraftMessage(o);b=(b=a)==null?void 0:b.id;e=(e=a)==null?void 0:e.linkPreviewURL;if(b!==k||e!==(p==null?void 0:p.url)){l.addPoint(m+"_abort");l.endCancel({string:{cancel_reason:"draft_id_or_url_changed_abort"}},706);return}l.addPoint(m+"_start");c("promiseDone")(i,function(i){return i.runInTransaction(function(a){return a.e2ee_composer_draft_link_preview.put({data:p!=null?JSON.stringify(p):void 0,dataType:g!=null?(h||(h=d("I64"))).of_int32(g):void 0,draftId:k,status:(h||(h=d("I64"))).of_int32(n)})},"readwrite",void 0,void 0,f.id+":194").then(function(c){var f;a=d("MWPComposerDraftMessages").getDraftMessage(o);b=(f=a)==null?void 0:f.id;e=(f=a)==null?void 0:f.linkPreviewURL;(b!==c[0]||e!==(p==null?void 0:p.url))&&(l.addPoint(m+"_delete"),l.endCancel({string:{cancel_reason:"draft_id_or_url_changed_delete"}},706),void j({draftId:c[0]}));l.addPoint(m+"_success");m==="write_xma_data"&&l.endSuccess()})["catch"](function(a){l.endFail(m+"_failed",{string:{data_status:String(n),error:"Error thrown when writing Link Preview XMA data to LSDB table. Error: "+a}}),c("FBLogger")("messenger_web_sharing").catching(a).mustfix("Failed to write Link Preview XMA data to LSDB table.")})})}function k(a,b){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b){var e;b.addPoint("fetch_fb_og_data_start");e=(e=(e=d("ConstUriUtils").getUri(a))==null?void 0:e.getDomain())!=null?e:a;try{var f;b.addPoint("http_request_start");var g=(yield window.fetch(a,{credentials:"omit",referrerPolicy:"no-referrer"}));b.addPoint("http_response_end");if(!g.ok){b.addPoint("fetch_fb_og_data_end",{string:{fetch_fb_og_data_end:"http_response_error",response_status_code:String(g.status),xma_data_returned:"fallback"}});return o(e,a)}g=(yield g.text());var h=new DOMParser();h=h.parseFromString(g,"text/html");h.querySelector("parsererror")&&b.addPoint("html_parsererror");g=(g=h.querySelector('meta[property="og:image"]'))==null?void 0:g.getAttribute("content");f=(f=h.querySelector('meta[name="description"]'))==null?void 0:f.getAttribute("content");h=(h=h.querySelector('meta[property="og:title"]'))==null?void 0:h.getAttribute("content");if(g==null&&f==null&&h==null){b.addPoint("fetch_fb_og_data_end",{string:{fetch_fb_og_data_end:"og_data_is_null",xma_data_returned:"fallback"}});return o(e,a)}b.addPoint("fetch_fb_og_data_success",{string:{xma_data_returned:"rich_xma"}});return{dataType:c("E2EELinkPreviewXMADataType").FB_CLIENT_FETCH,xmaData:{author_name:(f=f)!=null?f:void 0,iframeMediaURL:g,thumbnail_url:(f=g)!=null?f:void 0,title:(g=h)!=null?g:e,url:a}}}catch(c){b.addPoint("fetch_fb_og_data_end",{string:{fetch_fb_og_data_end:"failed_to_fetch_data",xma_data_returned:"fallback"}});return o(e,a)}});return l.apply(this,arguments)}function m(a,b){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,e){e.addPoint("fetch_external_link_oembed_data_start");var f=d("MAWExternalLinkUtil").findFirstAvailableOembedUrlAndRequestPair(b);b=b[0].entity.url;var g=null;if(f!=null){b=f.oEmbedUrl;try{e.addPoint("get_oembed_response_start"),g=(yield d("MAWExternalLinkUtil").getOembedResponse({fallbackUrl:b,qplEvent:e,request:f.oEmbedRequest})),e.addPoint("get_oembed_response_success")}catch(a){e.addPoint("get_oembed_response_returned_null",{string:{get_oembed_response_returned_null:"Error thrown when fetching oEmbed data for External Link XMA. Error message: "+a}}),e.addPoint("get_oembed_response_end"),c("FBLogger")("messenger_web_sharing").catching(a).mustfix("[External link] Error thrown when fetching oEmbed data for External Link XMA.")}}f=(f=d("ConstUriUtils").getUri(b))==null?void 0:f.getDomain();if(g==null){var h;e.addPoint("fetch_external_link_oembed_data_success",{string:{xma_data_returned:"fallback"}});return o((h=f)!=null?h:b,b)}e==null?void 0:e.addPoint("get_image_blob_response_start");h=(yield d("MAWExternalLinkUtil").getImageBlobResponse({qplEvent:e,url:(h=g)==null?void 0:h.thumbnail_url}));var i=null;if(h!=null&&d("MAWExternalLinkUtil").allowedPreviewTypes.includes(h.type)){h=new File([h],"preview",{type:h.type});i=a.URL.createObjectURL(h)}e==null?void 0:e.addPoint("get_image_blob_response_end",{bool:{media_url_is_null:i==null}});e.addPoint("fetch_external_link_oembed_data_success",{string:{xma_data_returned:"rich_xma"}});return{dataType:c("E2EELinkPreviewXMADataType").OEMBED,xmaData:babelHelpers["extends"]({iframeMediaURL:i},g,{title:(h=g.title)!=null?h:f,url:(e=g.url)!=null?e:b})}});return n.apply(this,arguments)}function o(a,b){return{dataType:c("E2EELinkPreviewXMADataType").FALLBACK,xmaData:{title:a,url:b}}}g["default"]=e}),98);
__d("useMAWSendMessageV2",["I64","LSHotEmojiSize","LSIntEnum","MAWJobDefinitions","MAWTimedJob","MWPActor.react","MWPReplyContext.react","QPLUserFlow","WAJobOrchestratorTypes","asyncToGeneratorRuntime","qpl","react","requireDeferred","useLSMessagingInitiatingSourceNumber"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||d("react")).useContext,l=c("requireDeferred")("MWLogSend").__setRef("useMAWSendMessageV2");function m(a){if(a==null)return;if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").SMALL)))return 1;if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").MEDIUM)))return 2;if((i||(i=d("I64"))).equal(a,(j||(j=d("LSIntEnum"))).ofNumber(c("LSHotEmojiSize").LARGE)))return 3}function a(){var a=d("MWPActor.react").useActor(),e=k(d("MWPReplyContext.react").MWPReplyContext),f=e.reply,g=c("useLSMessagingInitiatingSourceNumber")();return function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,e,h,j,k,n,o,p,q,r,s,t,u,v,w,x,y,z){k=babelHelpers["extends"]({content:k,initiatingSource:g,isFirstMsg:s,isForwarded:!1,openMessageOtid:o,openMessageParticipantCount:t,optimisticMsg:{msgId:p,ts:q},participantCount:u,s2sInstanceKey:y,s2sUserFlowQPLEvent:c("qpl")._(25313175,"1551"),source:n,specialTextSize:m(r)},v!=null&&{quote:v});w!=null&&(k.ephemeralSetting=w);x!=null&&(k.mentionedJids=[].concat(x));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"sending_message_to_wajob_start",{instanceKey:y});s=d("MAWTimedJob").TimedUIJobStarters.waitUntilCompleted(d("MAWJobDefinitions").createStartJobInfo("sendMsg",{args:k,chatJid:j,externalId:z,scheduleConfig:{priority:d("WAJobOrchestratorTypes").JOB_PRIORITY.UI_ACTION}}));l.onReady(function(c){var g=(i||(i=d("I64"))).to_string(e),j=r!=null?3:0;return c.log(b,{_mentionedJids:x,actor:a,attachmentFbids:[],attachmentType:j,backend:1,hasReply:f!=null,messagingThreadId:g,msgTtl:w==null?void 0:w.ephemeralExpirationInSec,offlineThreadingId:z,sendType:0,source:n,threadKey:e,threadType:h})});c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"sending_message_to_wajob_end",{instanceKey:y});yield s});return function(a,b,c,d,f,g,h,i,j,k,l,m,n,o,p,q,r,s){return e.apply(this,arguments)}}()}g["default"]=a}),98);
__d("useMaybeCreateThreadForMAWSendSecurMessageV2",["I64","LSDatabaseSingleton","MAWMiActMaybeCreateActThread","MAWWaitForBackendSetup","MWPActor.react","QPLUserFlow","ReQL","asyncToGeneratorRuntime","qpl"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(){var a=d("MWPActor.react").useActor();return function(){var e=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,e){c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"db_resolved_in_maybe_create_thread_start",{instanceKey:e});var f=(yield (h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton);c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"db_resolved_in_maybe_create_thread_success",{instanceKey:e});var g=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(f.tables.participants,["contactId"]).getKeyRange(b).map(function(a){return(i||(i=d("I64"))).to_string(a.contactId)})));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"participant_ids_fetched",{instanceKey:e});return d("MAWWaitForBackendSetup").waitForBackendSetup("maybe-create-thread-for-send").then(function(){return c("MAWMiActMaybeCreateActThread")(f,b,{actorId:a,participantIds:g},e,"maybe-create-thread-for-send")})});return function(a,b){return e.apply(this,arguments)}}()}g["default"]=a}),98);
__d("useMAWSendSecureGifAttachmentMessage",["FBLogger","Int64Hooks","LSDatabaseSingleton","LSIntEnum","MAWExternalId","MAWFetchExternalAttachmentBlob","MAWGetEphemeralSettings","MAWImagePreProcess","MAWSendFileMsgIfNecessaryV2","MAWSendFileMsgTypes","MAWStateContext.react","MWPActor.react","MessagingAttachmentType","Promise","QPLUserFlow","WALoggerDeferred","asyncToGeneratorRuntime","cr:7799","qpl","useLSMessagingInitiatingSourceNumber","useMAWCreateOptimisticSecureMessageWithAttachments","useMWLSDefaultThreadSource","useMaybeCreateThreadForMAWSendSecurMessageV2"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(){var a=d("MWPActor.react").useActor(),e=c("useMWLSDefaultThreadSource")(),f=c("useMaybeCreateThreadForMAWSendSecurMessageV2")(),g=c("useLSMessagingInitiatingSourceNumber")(),k=c("useMAWCreateOptimisticSecureMessageWithAttachments")(),l=d("MAWStateContext.react").useDispatchOptimisticSendMessage(),m=b("cr:7799")();return d("Int64Hooks").useCallbackInt64(function(){var n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var o=n.externalAttachmentUrl,p=n.lssTraceApi,q=n.onGenerateOfflineMsgId,r=n.reply,s=n.s2sInstanceKey;n=n.thread;yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureGifAttachmentMessage"],["Starting GIF attachment message send"],"LOG");var t=new Map(),u;try{var v=d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromStanzaId(d("MAWExternalId").generateExternalId()),w=d("MAWExternalId").generateExternalId(),x=e(n.threadKey),y=(yield (j||(j=b("Promise"))).all([(h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton,f(n.threadKey)])),z=y[0];y=y[1];u=y;y=(yield d("MAWGetEphemeralSettings").getEphemeralSetting(u.jid,n.threadKey));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"fetch_ephemeral_settings",{instanceKey:s});p==null?void 0:p.addMarkerPoint("fetch_external_attachment_blob_start","AppTiming");o=(yield d("MAWFetchExternalAttachmentBlob").fetchExternalAttachmentBlob(o,s));o=new File([o],"gifFromPicker",{type:o.type});p==null?void 0:p.addMarkerPoint("fetch_external_attachment_blob_end","AppTiming");p==null?void 0:p.addMarkerPoint("create_optimistic_message_start","AppTiming");var A=(yield d("MAWImagePreProcess").optimisticImagePreprocess(o,!1));A=(yield k(r,n.threadKey,u,v,A,s,q,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").ANIMATED_IMAGE),w));A!=null?(t.set(v,{messageExternalId:w,offlineMsgTimestamp:A.offlineMsgTimestamp}),l(A.messageExternalId,A.offlineMsgTimestamp),p==null?void 0:p.addMarkerPoint("create_optimistic_message_success","AppTiming")):(c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to create optimistic message for GIF"),p==null?void 0:p.addMarkerPoint("create_optimistic_message_fail","AppTiming"));p==null?void 0:p.addMarkerPoint("preprocess_start","AppTiming");q=(yield d("MAWImagePreProcess").imagePreprocess(o,!1));p==null?void 0:p.addMarkerPoint("preprocess_end","AppTiming");w=[[q,v]];A={actorId:a,attachments:w,chatJid:u.jid,db:z,ephemeralSetting:y,initiatingSource:g,isFirstMsg:u.created,offlineAttachmentIdToMessageData:t,reply:r,s2sInstanceKey:s,source:x,thread:n};return yield d("MAWSendFileMsgIfNecessaryV2").sendFileMsgIfNecessaryV2(z,A)}catch(a){o=a instanceof Error?a.message:"Fail to send secure attachment message";p=Array.from(t.values()).map(function(a){a=a.messageExternalId;return a});u&&(yield m(p,o,u.jid));yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureGifAttachmentMessage"],["Send GIF attachment message failed:"+JSON.stringify(a)],"ERROR");throw a}});return function(a){return n.apply(this,arguments)}}(),[a,k,l,e,g,m,f])}g["default"]=a}),98);
__d("useMAWSendSecureTextMessage",["MAWBridgeSendAndReceive","MAWDbMsg","MAWExternalId","MAWGetEphemeralSettings","MAWStateContext.react","MAWVault","Promise","WALoggerDeferred","asyncToGeneratorRuntime","cr:4535","cr:7799","emptyFunction","promiseDone","qex","react","sendToSentQPLLogger","useMAWCreateOptimisticSecureMessageV2","useMAWSendMessageV2","useMWLSDefaultThreadSource","useMaybeCreateThreadForMAWSendSecurMessageV2"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(i||d("react")).useCallback;function a(){var a=c("useMWLSDefaultThreadSource")(),e=c("useMaybeCreateThreadForMAWSendSecurMessageV2")(),f=c("useMAWSendMessageV2")(),g=c("useMAWCreateOptimisticSecureMessageV2")(),i=b("cr:7799")(),k=d("MAWStateContext.react").useDispatchOptimisticSendMessage(),l=b("cr:4535")();return j(function(){var j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(j,m){var n=m.hotEmojiSize,o=m.lssTraceApi,p=m.mentionedJids,q=m.messageText,r=m.onGenerateOfflineMsgId,s=m.reply,t=m.s2sInstanceKey,u=m.thread;d("sendToSentQPLLogger").markSendToSentPoint(t,"send_secure_message_start");var v=d("MAWExternalId").generateExternalId(),w=null,x;try{o==null?void 0:o.addMarkerPoint("create_optimistic_message_start","AppTiming");m=c("qex")._("189")?yield b("asyncToGeneratorRuntime").asyncToGenerator(function*(){x=(yield d("sendToSentQPLLogger").measureSendToSentPerformance("maybe_create_thread",t,function(){return e(u.threadKey,t)}));w=(yield d("MAWGetEphemeralSettings").getEphemeralSetting(x.jid,u.threadKey));var a=(yield d("sendToSentQPLLogger").measureSendToSentPerformance("create_optimistic_message_v2",t,function(){var a;return l(s,d("MAWVault").vault(q),u.threadKey,x,n,t,p,(a=r)!=null?a:c("emptyFunction"),v,w)}));return[x,a]})():yield (h||(h=b("Promise"))).all([d("sendToSentQPLLogger").measureSendToSentPerformance("maybe_create_thread",t,function(){return e(u.threadKey,t)}),d("sendToSentQPLLogger").measureSendToSentPerformance("create_optimistic_message_v2",t,function(){var a;return g(s,d("MAWVault").vault(q),u.threadKey,n,t,p,(a=r)!=null?a:c("emptyFunction"),v)})]);var y=m[0];m=m[1];o==null?void 0:o.addMarkerPoint("create_optimistic_message_end","AppTiming");o=m.offlineMsgTimestamp;k(m.messageExternalId,Date.now());d("sendToSentQPLLogger").markSendToSentPoint(t,"fetch_ephemeral_settings_start");w=w===null?yield d("MAWGetEphemeralSettings").getEphemeralSetting(y.jid,u.threadKey):w;d("sendToSentQPLLogger").markSendToSentPoint(t,"fetch_ephemeral_settings_end");m=a(u.threadKey);var z=null;if(s!=null){d("sendToSentQPLLogger").markSendToSentPoint(t,"fetch_reply_message_start");var A=d("MAWDbMsg").toMsgId(s.messageId);A!=null&&(z=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getProtocolMsgIdByMsgId",{msgId:A})));d("sendToSentQPLLogger").markSendToSentPoint(t,"fetch_reply_message_end")}return yield f(j,u.threadKey,u.threadType,y.jid,q,m,void 0,v,o,n,y.created,void 0,void 0,z,w,p,t,v)}catch(a){A=a instanceof Error?a.message:"Fail to send secure text message";v!=null&&x!=null&&c("promiseDone")(i([v],A,x.jid));yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureTextMessage"],["Send text message failed:"+JSON.stringify(a)],"ERROR");throw a}});return function(a,b){return j.apply(this,arguments)}}(),[g,l,k,a,i,e,f])}g["default"]=a}),98);
__d("useMAWSendSecureLinkXMAMessage",["ConstUriUtils","E2EELinkPreviewXMADataStatus","E2EELinkPreviewXMADataType","FBLogger","I64","Int64Hooks","MAWBridgeSendAndReceive","MAWDbMsg","MAWExternalId","MAWExternalLinkUtil","MAWFetchXMABlob","MAWFindFirstUrl","MAWImagePreProcess","MAWIsLinkPreviewXMAEnabled","MAWLinkPreviewDataStatusUtils","MAWLinkPreviewDataTypeUtils","MAWParseLinkPreviewXMAData","MAWSendExternalLinkXMAV2","MAWStateContext.react","MAWVault","MWPComposerDraftMessages","WALoggerDeferred","WAMediaQplHelper","asyncToGeneratorRuntime","cr:7799","emptyFunction","sendToSentQPLLogger","useMAWCreateOptimisticSecureMessageWithXMAAttachment","useMAWSendSecureTextMessage","useMWLSDefaultThreadSource","useMaybeCreateThreadForMAWSendSecurMessageV2"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(){var a=c("useMWLSDefaultThreadSource")(),e=c("useMaybeCreateThreadForMAWSendSecurMessageV2")(),f=c("useMAWSendSecureTextMessage")(),g=d("MAWIsLinkPreviewXMAEnabled").isLinkPreviewXMAEnabled(),h=c("useMAWCreateOptimisticSecureMessageWithXMAAttachment")(),j=d("MAWStateContext.react").useDispatchOptimisticSendMessage(),l=b("cr:7799")();return d("Int64Hooks").useCallbackInt64(function(){var m=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b,m){var n=m.currentDraftId,o=m.lssTraceApi,p=m.mentionedJids,q=m.messageText,r=m.onGenerateOfflineMsgId,s=m.reply,t=m.s2sInstanceKey,u=m.thread,v=m.threadKey;yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureLinkXMAMessage"],["Starting Link Preview XMA attachment message send"],"LOG");m=d("MAWExternalId").generateExternalId();n=(n=n)!=null?n:(n=d("MWPComposerDraftMessages").getDraftMessage(v))==null?void 0:n.id;var w;try{n=g?yield i(b,n,t,o):yield k(q,t,o);var x=n==null?void 0:n.xmaData,y=d("MAWLinkPreviewDataTypeUtils").linkPreviewDataTypeIsOfType(n==null?void 0:n.dataType,c("E2EELinkPreviewXMADataType").OEMBED);d("sendToSentQPLLogger").addSendToSentAnnotations(t,{bool:{has_xma_data:x!=null,is_link_preview_enabled:g,is_link_preview_oembed_data:y}});o==null?void 0:o.addAnnotationBoolean("has_xma_data",x!=null);o==null?void 0:o.addAnnotationBoolean("is_link_preview_enabled",g);o==null?void 0:o.addAnnotationBoolean("is_link_preview_oembed_data",y);if(x==null)return f(b,{mentionedJids:p,messageText:q,onGenerateOfflineMsgId:r,reply:s,s2sInstanceKey:t,thread:u});n=null;if(s!=null){b=d("MAWDbMsg").toMsgId(s.messageId);b!=null&&(n=(yield d("MAWBridgeSendAndReceive").sendAndReceive("backend","getProtocolMsgIdByMsgId",{msgId:b})))}b=d("MAWExternalId").generateExternalId();r==null?void 0:r(b);var z=a(v);w=(yield d("sendToSentQPLLogger").measureSendToSentPerformance("maybe_create_thread",t,function(){return e(v,t)}));o==null?void 0:o.addMarkerPoint("fetch_link_preview_blob_start","AppTiming");var A=(yield d("sendToSentQPLLogger").measureSendToSentPerformance("fetch_link_preview_blob",t,function(){return y?d("MAWExternalLinkUtil").getImageBlobResponse({url:x.thumbnail_url}):d("MAWFetchXMABlob").fetchBlob({descriptionForLogging:"useMAWSendSecureLinkXMAMessage",url:x.thumbnail_url,xmaContentType:void 0})}));d("sendToSentQPLLogger").addSendToSentAnnotations(t,{bool:{has_fetched_xma_preview:A!=null},string:{fetched_xma_preview_file_size_bucket:A!=null?d("WAMediaQplHelper").convertIntegerSizeToStringBucket(A.size):void 0}});o==null?void 0:o.addMarkerPoint("fetch_link_preview_blob_end","AppTiming");o==null?void 0:o.addMarkerPoint("create_optimistic_message_start","AppTiming");var B=null;if(A!=null&&d("MAWExternalLinkUtil").allowedPreviewTypes.includes(A.type)){var C=new File([A],"preview",{type:A.type});B=(yield d("MAWImagePreProcess").optimisticImagePreprocess(C))}B=(yield h(s,u.threadKey,b,B,t,(C=r)!=null?C:c("emptyFunction"),m,(s=x.title)!=null?s:(u=d("ConstUriUtils").getUri(x.url))==null?void 0:u.getDomain(),x.author_name,d("MAWVault").vault(q),p));r=B!=null?{messageExternalId:m,offlineMsgTimestamp:B.offlineMsgTimestamp}:void 0;r!=null?(j(r.messageExternalId,r.offlineMsgTimestamp),o==null?void 0:o.addMarkerPoint("create_optimistic_message_success","AppTiming")):(c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to create optimistic message for GIF"),o==null?void 0:o.addMarkerPoint("create_optimistic_message_fail","AppTiming"));return d("MAWSendExternalLinkXMAV2").sendExternalLinkXMAV2(q,x,A,w.jid,t,z,v,b,(C=n)!=null?C:void 0,r,p)}catch(a){s=a instanceof Error?a.message:"Fail to send secure attachment message";w!=null&&(yield l([m],s,w.jid));c("FBLogger")("messenger_web_sharing").catching(a).mustfix("[External link] Failed to send external link XMA ");yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureLinkXMAMessage"],["Send Link Preview XMA attachment message failed:"+JSON.stringify(a)],"ERROR");throw a}});return function(a,b){return m.apply(this,arguments)}}(),[h,j,a,g,l,e,f])}function i(a,b,c,d){return j.apply(this,arguments)}function j(){j=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,g){if(b==null){d("sendToSentQPLLogger").markSendToSentPoint(e,"get_link_preview_xma_data_from_table_no_draft_id");g==null?void 0:g.addMarkerPoint("get_link_preview_xma_data_from_table_no_draft_id","AppTiming");return null}d("sendToSentQPLLogger").markSendToSentPoint(e,"get_link_preview_xma_data_from_table");g==null?void 0:g.addMarkerPoint("get_link_preview_xma_data_from_table","AppTiming");a=(yield a.runInTransaction(function(a){return a.e2ee_composer_draft_link_preview.get(b)},"readonly",void 0,void 0,f.id+":363"));if(d("MAWLinkPreviewDataStatusUtils").linkPreviewDataStatusIsOfType(a==null?void 0:a.status,c("E2EELinkPreviewXMADataStatus").LOADING)){d("sendToSentQPLLogger").markSendToSentPoint(e,"get_link_preview_xma_data_from_table_still_loading");g==null?void 0:g.addMarkerPoint("get_link_preview_xma_data_from_table_still_loading","AppTiming");return null}return{dataType:a==null?void 0:a.dataType,xmaData:d("MAWParseLinkPreviewXMAData").parseLinkPreviewXMAData(a)}});return j.apply(this,arguments)}function k(a,b,c){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){a=d("MAWFindFirstUrl").findFirstUrl(a);if(a==null||a.length===0)return null;var f=a[0];a=d("MAWExternalLinkUtil").findFirstAvailableOembedUrlAndRequestPair(a);f=f.entity.url;var g=null;if(a!=null){f=a.oEmbedUrl;try{d("sendToSentQPLLogger").markSendToSentPoint(b,"fetch_link_preview_xma_start"),e==null?void 0:e.addMarkerPoint("fetch_link_preview_xma_data_start","AppTiming"),g=(yield d("MAWExternalLinkUtil").getOembedResponse({fallbackUrl:f,request:a.oEmbedRequest})),d("sendToSentQPLLogger").markSendToSentPoint(b,"fetch_link_preview_xma_success"),e==null?void 0:e.addMarkerPoint("fetch_link_preview_xma_data_success","AppTiming")}catch(a){d("sendToSentQPLLogger").markSendToSentPoint(b,"fetch_link_preview_xma_fail"),d("sendToSentQPLLogger").addSendToSentAnnotations(b,{string:{fetch_link_preview_xma_data_error:a.message}}),e==null?void 0:e.addMarkerPoint("fetch_link_preview_xma_data_fail","AppTiming"),e==null?void 0:e.addAnnotation("fetch_link_preview_xma_data_error",a.message),c("FBLogger")("messenger_web_sharing").catching(a).mustfix("[External link] Failed to send External Link XMA.")}}return{dataType:(h||(h=d("I64"))).of_int32(g!=null?c("E2EELinkPreviewXMADataType").OEMBED:c("E2EELinkPreviewXMADataType").FALLBACK),xmaData:babelHelpers["extends"]({},g,{url:(b=(a=g)==null?void 0:a.url)!=null?b:f})}});return l.apply(this,arguments)}g["default"]=a}),98);
__d("useMAWSendSecureStagedMediaAttachmentMessage",["FBLogger","Int64Hooks","LSDatabaseSingleton","MAWExternalId","MAWGetEphemeralSettings","MAWMediaManagerUtils","MAWPrepareAttachmentsFromMediaManager","MAWSecureAttachmentGroupingUtils","MAWSendFileMsgIfNecessaryV2","MAWSendFileMsgTypes","MAWStateContext.react","MWPActor.react","Promise","QPLUserFlow","WALoggerDeferred","WAMediaQplHelper","asyncToGeneratorRuntime","cr:7799","err","gkx","qpl","useLSMessagingInitiatingSourceNumber","useMAWCreateOptimisticSecureMessageWithAttachments","useMAWCreateOptimisticSecureMessagesWithAttachments","useMWLSDefaultThreadSource","useMaybeCreateThreadForMAWSendSecurMessageV2"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(){var a=d("MWPActor.react").useActor(),e=c("useMWLSDefaultThreadSource")(),f=c("useMaybeCreateThreadForMAWSendSecurMessageV2")(),g=c("useLSMessagingInitiatingSourceNumber")(),j=c("useMAWCreateOptimisticSecureMessageWithAttachments")(),k=d("MAWStateContext.react").useDispatchOptimisticSendMessage(),l=b("cr:7799")(),m=c("useMAWCreateOptimisticSecureMessagesWithAttachments")();return d("Int64Hooks").useCallbackInt64(function(){var n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var o=n.lssTraceApi,p=n.mediaStagings,q=n.messageTypeParams,r=n.onGenerateOfflineMsgId,s=n.reply,t=n.s2sInstanceKey,u=n.thread;yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureStagedMediaAttachmentMessage"],["Starting staged media attachment message send"],"LOG");var v=new Map(),w;try{var x=null;c("gkx")("5318")===!0?(n=d("MAWSecureAttachmentGroupingUtils").orderMediaStagingsForGrouping(p),x=d("MAWSecureAttachmentGroupingUtils").generateMediaGroupMetadataForMediaStagings(n)):n=p;var y=new Map();o==null?void 0:o.addMarkerPoint("create_optimistic_message_start","AppTiming");w=(yield f(u.threadKey,t));if(c("gkx")("5318")===!0){var z=n.map(function(a){var b=d("MAWMediaManagerUtils").MAWMediaManagerAttachmentsV2.get(a.offlineAttachmentId);b=b==null?void 0:b.optimisticMedia;if(b==null){c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to find optimistic media attachment in useMAWSendSecureAttachmentMessage");return null}var e=d("MAWExternalId").generateExternalId();e={attachmentType:a.attachmentType,messageExternalId:e,offlineAttachmentId:a.offlineAttachmentId,optimisticMediaAttachment:b};return e}).filter(Boolean);z=(yield m(s,u.threadKey,w,t,r,x,z));z.forEach(function(a){if(a==null||a.offlineAttachmentId==null){c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to create optimistic message");return null}v.set(d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(a.offlineAttachmentId),{messageExternalId:a.messageExternalId,offlineMsgTimestamp:a.offlineMsgTimestamp});k(a.messageExternalId,a.offlineMsgTimestamp)})}else yield (i||(i=b("Promise"))).all(n.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("MAWMediaManagerUtils").MAWMediaManagerAttachmentsV2.get(a.offlineAttachmentId);b=b==null?void 0:b.optimisticMedia;if(b==null){c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to find optimistic media attachment in useMAWSendSecureAttachmentMessage");return null}var e=d("MAWExternalId").generateExternalId();b=(yield j(s,u.threadKey,w,a.offlineAttachmentId,b,t,r,a.attachmentType,e,x));if(b==null){c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to create optimistic message");return null}v.set(d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(a.offlineAttachmentId),{messageExternalId:e,offlineMsgTimestamp:b.offlineMsgTimestamp});k(b.messageExternalId,b.offlineMsgTimestamp)});return function(b){return a.apply(this,arguments)}}()));o==null?void 0:o.addMarkerPoint("create_optimistic_message_end","AppTiming");yield (i||(i=b("Promise"))).all(n.map(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){var b=d("MAWMediaManagerUtils").MAWMediaManagerAttachmentsV2.get(a.offlineAttachmentId);if(b==null){c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure media message: unable to find media attachment in useMAWSendSecureAttachmentMessage");return}yield b.processedMediaPromise.then(function(b){y.set(d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromString(a.offlineAttachmentId),b)})["catch"](function(a){throw a})["finally"](function(){var a=b.optimisticMedia;a!=null&&c("QPLUserFlow").addAnnotations(c("qpl")._(25313175,"1551"),{string:{optimistic_media_file_size:d("WAMediaQplHelper").convertIntegerSizeToStringBucket(a.file.size),optimistic_media_file_type:a.file.type,optimistic_media_type:a.type}},{instanceKey:t})})});return function(b){return a.apply(this,arguments)}}()));z=d("MAWPrepareAttachmentsFromMediaManager").prepareAttachmentsFromMediaManagerImpl(n,q,r,y);o=z.attachments;n=e(u.threadKey);c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"fetch_ls_singleton_db",{instanceKey:t});q=(yield (h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton);c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"ls_singleton_db_resolved",{instanceKey:t});c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"thread_result_fetched",{instanceKey:t});z=(yield d("MAWGetEphemeralSettings").getEphemeralSetting(w.jid,u.threadKey));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"fetch_ephemeral_settings",{instanceKey:t});o={actorId:a,attachments:o,chatJid:w.jid,db:q,ephemeralSetting:z,initiatingSource:g,isFirstMsg:w.created,mediaGroupMetadataMap:x,offlineAttachmentIdToMessageData:v,reply:s,s2sInstanceKey:t,source:n,thread:u};return yield d("MAWSendFileMsgIfNecessaryV2").sendFileMsgIfNecessaryV2(q,o)}catch(a){z=a instanceof Error?a:c("err")(typeof a==="string"?a:"Fail to send secure attachment message: "+JSON.stringify(a));n=Array.from(v.values()).map(function(a){a=a.messageExternalId;return a});w&&(yield l(n,z.message,w.jid));yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureStagedMediaAttachmentMessage"],["Send staged media attachment message failed:"+JSON.stringify(z)],"ERROR");throw z}finally{p.map(function(a){return d("MAWMediaManagerUtils").MAWMediaManagerAttachmentsV2["delete"](a.offlineAttachmentId)})}});return function(a){return n.apply(this,arguments)}}(),[a,j,m,k,e,g,l,f])}g["default"]=a}),98);
__d("useMarkOptimisticMessagesAsFailed",["LSFactory","LSMarkOptimisticMessageFailedStoredProcedure","asyncToGeneratorRuntime","react","useAsyncReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(){var a=c("useAsyncReStore")();return i(function(){var d=b("asyncToGeneratorRuntime").asyncToGenerator(function*(d,e){var g=(yield a);return g.runInTransaction(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a){for(var b of d)yield c("LSMarkOptimisticMessageFailedStoredProcedure")(c("LSFactory")(a),{errorMessage:e,optimisticMid:b})});return function(b){return a.apply(this,arguments)}}(),"readwrite",void 0,void 0,f.id+":30")});return function(a,b){return d.apply(this,arguments)}}(),[a])}g["default"]=a}),98);
__d("useMAWSendSecureStickerAttachmentMessage",["FBLogger","Int64Hooks","LSDatabaseSingleton","LSIntEnum","MAWExternalId","MAWFetchExternalAttachmentBlob","MAWGetEphemeralSettings","MAWImagePreProcess","MAWSendFileMsgIfNecessaryV2","MAWSendFileMsgTypes","MAWStateContext.react","MWPActor.react","MessagingAttachmentType","Promise","WALoggerDeferred","asyncToGeneratorRuntime","sendToSentQPLLogger","useLSMessagingInitiatingSourceNumber","useMAWCreateOptimisticSecureMessageWithAttachments","useMWLSDefaultThreadSource","useMarkOptimisticMessagesAsFailed","useMaybeCreateThreadForMAWSendSecurMessageV2"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(){var a=d("MWPActor.react").useActor(),e=c("useMWLSDefaultThreadSource")(),f=c("useMaybeCreateThreadForMAWSendSecurMessageV2")(),g=c("useLSMessagingInitiatingSourceNumber")(),k=c("useMAWCreateOptimisticSecureMessageWithAttachments")(),l=d("MAWStateContext.react").useDispatchOptimisticSendMessage(),m=c("useMarkOptimisticMessagesAsFailed")();return d("Int64Hooks").useCallbackInt64(function(){var n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var o=n.externalAttachmentUrl,p=n.lssTraceApi,q=n.onGenerateOfflineMsgId,r=n.reply,s=n.s2sInstanceKey;n=n.thread;d("sendToSentQPLLogger").markSendToSentPoint(s,"send_secure_message_start");yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureStickerAttachmentMessage"],["Starting sticker attachment message send"],"LOG");var t=new Map(),u;try{var v=d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromStanzaId(d("MAWExternalId").generateExternalId()),w=d("MAWExternalId").generateExternalId(),x=e(n.threadKey),y=(yield (j||(j=b("Promise"))).all([(h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton,f(n.threadKey,s)])),z=y[0];y=y[1];u=y;d("sendToSentQPLLogger").markSendToSentPoint(s,"fetch_ephemeral_settings_start");y=(yield d("MAWGetEphemeralSettings").getEphemeralSetting(u.jid,n.threadKey));d("sendToSentQPLLogger").markSendToSentPoint(s,"fetch_ephemeral_settings_end");d("sendToSentQPLLogger").markSendToSentPoint(s,"fetch_external_attachment_blob_start");p==null?void 0:p.addMarkerPoint("fetch_external_attachment_blob_start","AppTiming");o=(yield d("MAWFetchExternalAttachmentBlob").fetchExternalAttachmentBlob(o,s));var A=new File([o],"stickerFromPicker",{type:o.type});d("sendToSentQPLLogger").markSendToSentPoint(s,"fetch_external_attachment_blob_end");p==null?void 0:p.addMarkerPoint("fetch_external_attachment_blob_end","AppTiming");p==null?void 0:p.addMarkerPoint("create_optimistic_message_start","AppTiming");d("sendToSentQPLLogger").markSendToSentPoint(s,"optimist_image_preprocess_start");A=(yield d("MAWImagePreProcess").optimisticImagePreprocess(A,!0));d("sendToSentQPLLogger").markSendToSentPoint(s,"optimist_image_preprocess_end");d("sendToSentQPLLogger").markSendToSentPoint(s,"create_optimistic_message_start");A=(yield k(r,n.threadKey,u,v,A,s,q,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").STICKER),w));A!=null?(t.set(v,{messageExternalId:w,offlineMsgTimestamp:A.offlineMsgTimestamp}),l(A.messageExternalId,A.offlineMsgTimestamp),d("sendToSentQPLLogger").markSendToSentPoint(s,"create_optimistic_message_end"),p==null?void 0:p.addMarkerPoint("create_optimistic_message_end","AppTiming")):(c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to create optimistic message for sticker"),d("sendToSentQPLLogger").markSendToSentPoint(s,"create_optimistic_message_fail"),p==null?void 0:p.addMarkerPoint("create_optimistic_message_fail","AppTiming"));d("sendToSentQPLLogger").markSendToSentPoint(s,"image_preprocess_start");p==null?void 0:p.addMarkerPoint("image_preprocess_start","AppTiming");q=(yield d("MAWImagePreProcess").imagePreprocess(new File([o],"stickerFromPicker",{type:o.type}),!0));d("sendToSentQPLLogger").markSendToSentPoint(s,"image_preprocess_end");p==null?void 0:p.addMarkerPoint("image_preprocess_end","AppTiming");w=[[q,v]];A={actorId:a,attachments:w,chatJid:u.jid,db:z,ephemeralSetting:y,initiatingSource:g,isFirstMsg:u.created,offlineAttachmentIdToMessageData:t,reply:r,s2sInstanceKey:s,source:x,thread:n};return yield d("MAWSendFileMsgIfNecessaryV2").sendFileMsgIfNecessaryV2(z,A)}catch(a){o=a instanceof Error?a.message:"Fail to send secure attachment message";p=Array.from(t.values()).map(function(a){a=a.messageExternalId;return a});u&&(yield m(p,o,u.jid));yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureStickerAttachmentMessage"],["Send sticker attachment message failed:"+JSON.stringify(a)],"ERROR");throw a}});return function(a){return n.apply(this,arguments)}}(),[a,k,l,e,g,m,f])}g["default"]=a}),98);
__d("useMAWSendSecureVoiceClipAttachmentMessage",["FBLogger","Int64Hooks","LSDatabaseSingleton","LSIntEnum","MAWAudioPreProcess","MAWExternalId","MAWGetEphemeralSettings","MAWSendFileMsgIfNecessaryV2","MAWSendFileMsgTypes","MAWStateContext.react","MWPActor.react","MessagingAttachmentType","Promise","QPLUserFlow","WALoggerDeferred","asyncToGeneratorRuntime","qpl","useLSMessagingInitiatingSourceNumber","useMAWCreateOptimisticSecureMessageWithAttachments","useMWLSDefaultThreadSource","useMarkOptimisticMessagesAsFailed","useMaybeCreateThreadForMAWSendSecurMessageV2"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function a(){var a=d("MWPActor.react").useActor(),e=c("useMWLSDefaultThreadSource")(),f=c("useMaybeCreateThreadForMAWSendSecurMessageV2")(),g=c("useLSMessagingInitiatingSourceNumber")(),k=c("useMAWCreateOptimisticSecureMessageWithAttachments")(),l=d("MAWStateContext.react").useDispatchOptimisticSendMessage(),m=c("useMarkOptimisticMessagesAsFailed")();return d("Int64Hooks").useCallbackInt64(function(){var n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(n){var o=n.lssTraceApi,p=n.onGenerateOfflineMsgId,q=n.reply,r=n.s2sInstanceKey,s=n.thread;n=n.voiceClip;yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureVoiceClipAttachmentMessage"],["Starting voice clip attachment message send"],"LOG");var t=new Map(),u;try{var v=d("MAWSendFileMsgTypes").toOfflineAttachmentIDFromStanzaId(d("MAWExternalId").generateExternalId()),w=d("MAWExternalId").generateExternalId(),x=e(s.threadKey),y=(yield (j||(j=b("Promise"))).all([(h||(h=d("LSDatabaseSingleton"))).LSDatabaseSingleton,f(s.threadKey)])),z=y[0];y=y[1];u=y;y=(yield d("MAWGetEphemeralSettings").getEphemeralSetting(u.jid,s.threadKey));c("QPLUserFlow").addPoint(c("qpl")._(25313175,"1551"),"fetch_ephemeral_settings",{instanceKey:r});var A=(yield d("MAWAudioPreProcess").optimisticAudioPreprocess(n.file));o==null?void 0:o.addMarkerPoint("create_optimistic_message_start","AppTiming");A=(yield k(q,s.threadKey,u,v,A,r,p,(i||(i=d("LSIntEnum"))).ofNumber(c("MessagingAttachmentType").AUDIO),w));A!=null?(t.set(v,{messageExternalId:w,offlineMsgTimestamp:A.offlineMsgTimestamp}),l(A.messageExternalId,A.offlineMsgTimestamp),o==null?void 0:o.addMarkerPoint("create_optimistic_message_success","AppTiming")):(c("FBLogger")("messenger_web_media").mustfix("Failed while sending secure optimistic media message: unable to create optimistic message for GIF"),o==null?void 0:o.addMarkerPoint("create_optimistic_message_fail","AppTiming"));p={durations:n.duration||0,file:n.file,isPtt:!0,type:"audio"};w=[[p,v]];A={actorId:a,attachments:w,chatJid:u.jid,db:z,ephemeralSetting:y,initiatingSource:g,isFirstMsg:u.created,offlineAttachmentIdToMessageData:t,reply:q,s2sInstanceKey:r,source:x,thread:s};return yield d("MAWSendFileMsgIfNecessaryV2").sendFileMsgIfNecessaryV2(z,A)}catch(a){o=a instanceof Error?a.message:"Fail to send secure attachment message";n=Array.from(t.values()).map(function(a){a=a.messageExternalId;return a});u&&(yield m(n,o,u.jid));yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer","useMAWSendSecureVoiceClipAttachmentMessage"],["Send voice clip attachment message failed:"+JSON.stringify(a)],"ERROR");throw a}});return function(a){return n.apply(this,arguments)}}(),[a,k,l,e,g,m,f])}g["default"]=a}),98);
__d("useMAWUpdateThreadCapabilities",["LSMessagingThreadTypeUtil","MAWUpdateLSThreadCapabilities","Promise","react","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(j||d("react")).useCallback;function a(){var a=(i||(i=c("useReStore")))();return k(function(c){return!d("LSMessagingThreadTypeUtil").isOneToOne(c.threadType)?(h||(h=b("Promise"))).resolve():a.runInTransaction(function(a){return d("MAWUpdateLSThreadCapabilities").updateNonMessageRequestThreadTxn(a,c.threadKey)},"readwrite",void 0,void 0,f.id+":37")},[a])}g["default"]=a}),98);
__d("useMAWSendSecureMessageV2Impl",["FBLogger","I64","Int64Hooks","LSIntEnum","LSMessagingThreadTypeUtil","LSThreadAttributionTypeUtil","MAWOptimisticUpdateContactRelationship","MWLSLogSend","MWPActor.react","MWPBumpEntityKey","MWPReplyContext.react","MWPreloadableQueries","MWSharedMsgLogUtils","MWVersion","MessageRequestsLog","Promise","ReQL","WALoggerDeferred","asyncToGeneratorRuntime","err","react","sendToSentQPLLogger","sendToSentQPLUtils","useAsyncReStore","useLSMessagingSource","useMAWSendSecureGifAttachmentMessage","useMAWSendSecureLinkXMAMessage","useMAWSendSecureStagedMediaAttachmentMessage","useMAWSendSecureStickerAttachmentMessage","useMAWSendSecureTextMessage","useMAWSendSecureVoiceClipAttachmentMessage","useMAWUpdateThreadCapabilities","useMWLSUnarchiveThread"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(i||d("react")).useContext;function a(a){var e=d("MWPActor.react").useActor(),f=l(d("MWPReplyContext.react").MWPReplyContext),g=f.clearReply,i=c("useAsyncReStore")(),m=c("useLSMessagingSource")(),n=c("useMAWSendSecureTextMessage")(),o=c("useMAWSendSecureLinkXMAMessage")(),p=c("useMAWSendSecureGifAttachmentMessage")(),q=c("useMAWSendSecureStagedMediaAttachmentMessage")(),r=c("useMAWSendSecureStickerAttachmentMessage")(),s=c("useMAWSendSecureVoiceClipAttachmentMessage")(),t=c("useMWLSUnarchiveThread")(),u=c("useMAWUpdateThreadCapabilities")();return d("Int64Hooks").useCallbackInt64(function(){var f=b("asyncToGeneratorRuntime").asyncToGenerator(function*(f){var l,v=f.composerEntrypointForLogging,w=f.currentDraftId,x=f.externalAttachmentUrl,y=f.hotEmojiSize,z=f.lssTraceApi,A=f.mentionedJids,B=f.messageText,C=f.reply,D=f.s2sInstanceKey,E=f.stickerId,F=f.thread;f=f.voiceClip;yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer"],["Starting message send"],"LOG");(l=d("sendToSentQPLLogger")).markSendToSentPoint(D,"send_secure_message_start");z.addMarkerPoint("send_secure_message_started","AppTiming");var G=(yield i);l.markSendToSentPoint(D,"db_ready");var H=d("LSMessagingThreadTypeUtil").isMessageRequest(F);l=(j||(j=d("I64"))).equal(F.parentThreadKey,(k||(k=d("LSIntEnum"))).ofNumber(-10));var I=(yield d("sendToSentQPLLogger").measureSendToSentPerformance("get_media_staging_query",D,function(){return d("ReQL").toArrayAsync(d("MWPreloadableQueries").getMediaStagingQuery(G,F.threadKey))})),J=d("MWSharedMsgLogUtils").getMessageTypeParams({externalAttachmentUrl:x,hotEmojiSize:y,mediaStagings:I,messageText:B,reply:C,stickerId:E,threadType:F.threadType,voiceClip:f}),K=d("LSThreadAttributionTypeUtil").getSource(F.threadKey,m);d("sendToSentQPLLogger").addSendToSentAnnotations(D,yield d("MWSharedMsgLogUtils").getSendToSentAnnotations(F,J,k.unwrapIntEnum(K),v));d("MWSharedMsgLogUtils").addSendMessageMetadataForInteractionTrace(z,J,F,v);v=function(a){d("MWLSLogSend").logSentHeroInteraction(z,a,{isMessageRequest:H,mwVersion:d("MWVersion").v2,source:(k||(k=d("LSIntEnum"))).unwrapIntEnum(K),threadType:F.threadType}),d("sendToSentQPLLogger").markSendToSentPoint(D,"offline_msg_id_generated"),d("sendToSentQPLUtils").setS2sKeyForOfflineMessageId(a,D)};var L=[],M=J.hasAttachment,N=J.hasLinks;B!=null&&B!==""&&(N?(L.push(o(G,{currentDraftId:w,lssTraceApi:z,mentionedJids:A,messageText:B,onGenerateOfflineMsgId:M?void 0:v,reply:C,s2sInstanceKey:D,thread:F,threadKey:F.threadKey})),d("sendToSentQPLLogger").markSendToSentPoint(D,"link_xma_message_promise_pushed_to_send_promises")):(L.push(n(G,{hotEmojiSize:y,lssTraceApi:z,mentionedJids:A,messageText:B,onGenerateOfflineMsgId:M?void 0:v,reply:C,s2sInstanceKey:D,thread:F})),d("sendToSentQPLLogger").markSendToSentPoint(D,"text_message_promise_pushed_to_send_promises")));w=!0;M&&(E!=null&&x!=null?(L.push(r({externalAttachmentUrl:x,lssTraceApi:z,onGenerateOfflineMsgId:v,reply:C,s2sInstanceKey:D,thread:F})),d("sendToSentQPLLogger").markSendToSentPoint(D,"sticker_message_promise_pushed_to_send_promises"),w=!1):x!=null?(L.push(p({externalAttachmentUrl:x,lssTraceApi:z,onGenerateOfflineMsgId:v,reply:C,s2sInstanceKey:D,thread:F})),w=!1):f!=null?(L.push(s({lssTraceApi:z,onGenerateOfflineMsgId:v,reply:C,s2sInstanceKey:D,thread:F,voiceClip:f})),d("sendToSentQPLLogger").markSendToSentPoint(D,"voice_clip_message_promise_pushed_to_send_promises"),w=!1):I.length>0?(L.push(q({lssTraceApi:z,mediaStagings:I,messageTypeParams:J,onGenerateOfflineMsgId:v,reply:C,s2sInstanceKey:D,thread:F})),d("sendToSentQPLLogger").markSendToSentPoint(D,"staged_media_message_promise_pushed_to_send_promises")):(d("sendToSentQPLLogger").markSendToSentPoint(D,"no_send_promises_pushed_to_send_promises"),c("FBLogger")("messenger_web_media").mustfix("Unable to send attachment in useMAWSendSecureMessageV2Impl: incorrect params")));w&&a();g(F.threadKey,!1);d("sendToSentQPLLogger").markSendToSentPoint(D,"attachment_and_reply_data_cleared");L.length===0?(d("sendToSentQPLLogger").markSendToSentPoint(D,"create_send_promises_fail"),L.push(new(h||(h=b("Promise")))(function(a,b){b(c("err")("No send actions taken because hasAttachment="+M.toString()))}))):d("sendToSentQPLLogger").markSendToSentPoint(D,"create_send_promises_end",void 0,{"int":{send_promise_count:L.length}});d("sendToSentQPLLogger").markSendToSentPoint(D,"resolve_send_promises_start");(L.length>1||I.length>1)&&d("MWPBumpEntityKey").bumpEntityKeyWithAppId("mw_message_send","send:"+L.length+".media:"+I.length);yield (h||(h=b("Promise"))).all(L)["catch"](function(a){d("sendToSentQPLLogger").markSendToSentFail(D,"message_send_fail",a);a instanceof Error?c("FBLogger")("messenger_web_messaging").catching(a).addMetadata("MESSENGER_E2EE_WEB","ERROR_MESSAGE","hasAttachment: "+M.toString()).mustfix("Failed while sending secure message in useMAWSendSecureMessageV2Impl"):c("FBLogger")("messenger_web_messaging").addMetadata("MESSENGER_E2EE_WEB","ERROR_MESSAGE","hasAttachment: "+M.toString()).mustfix("Failed while sending secure message in useMAWSendSecureMessageV2Impl, %s",a.message);throw a});d("sendToSentQPLLogger").markSendToSentPoint(D,"resolve_send_promises_end");B!=null&&B!==""&&N&&d("sendToSentQPLLogger").markSendToSentSuccess(D);yield d("WALoggerDeferred").logWithTags(["MAWSendSecureMessageV2","Composer"],["Send message is done"],"LOG");d("MAWOptimisticUpdateContactRelationship").call(F,G,e);yield u(F);H&&d("MessageRequestsLog").logActionConfirmed(F,1);l&&t(F.threadKey)});return function(a){return f.apply(this,arguments)}}(),[i,m,g,e,u,o,n,r,p,s,q,a,t])}g["default"]=a}),98);
__d("useMAWSendSecureMessageV2",["I64","MAWJids","MWPReplyContext.react","MWV2ComposerActionsContext.react","WALoggerDeferred","getMWIsDefaultHotlikeStickerId","justknobx","promiseDone","qpl","react","sendToSentQPLLogger","unrecoverableViolation","useCometInteractionTracing","useIsSecureMessageData","useMAWSendSecureMessageV2Impl"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=(h||d("react")).useContext;function a(a,b,e){var f=j(d("MWPReplyContext.react").MWPReplyContext),g=f.reply,h=c("useIsSecureMessageData")(g==null?null:{messageId:g.messageId,messageThreadKey:g.threadKey,messageTimestamp:g.timestampMs},{fallbackThreadType:a.threadType});f=j(d("MWV2ComposerActionsContext.react").MWV2ComposerActionsContext);var k=f.onMessageSendAttempt,l=c("useMAWSendSecureMessageV2Impl")(e),m=c("useCometInteractionTracing")(c("qpl")._(30605384,"573"),"fast","INTERACTION",void 0);return function(e,f,j,n,o,p,q,r,s,t,u,v,w,x,y,z){c("promiseDone")(d("WALoggerDeferred").logWithTags(["Composer"],["Calling useMAWSendSecureMessageV2"],"LOG"));var A=f==null?void 0:f.map(function(a){return d("MAWJids").toUserJid(a.id)}),B=e;j!=null&&c("getMWIsDefaultHotlikeStickerId")((i||(i=d("I64"))).to_string(j))&&(B="\ud83d\udc4d");var C=d("sendToSentQPLLogger").markSendToSentStart();k==null?void 0:k(!0);m(function(e){c("promiseDone")(l({composerEntrypointForLogging:z,currentDraftId:y,externalAttachmentUrl:p,hotEmojiSize:n,lssTraceApi:e,mentionedJids:A,messageText:B,reply:h?g:void 0,s2sInstanceKey:C,stickerId:j,thread:a,voiceClip:r}),function(){b(),c("justknobx")._("2486")&&(t&&t())},function(a){d("sendToSentQPLLogger").markSendToSentFail(C,"message_send_fail",a);e.failTrace(a,!0);throw c("unrecoverableViolation")("Encountered failure during Armadillo Message Send (UI)","messenger_web_messaging",{error:a})})})}}g["default"]=a}),98);
__d("useMWAddParticipantDialog",["JSResourceForInteraction","LSIntEnum","LSMessagingThreadTypeUtil","MWLSDatabaseLazySync","promiseDone","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e=d("MWLSDatabaseLazySync").useSync((h||(h=d("LSIntEnum"))).ofNumber(7)),f=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWAddParticipantOpenDialog.react").__setRef("useMWAddParticipantDialog")),g=f[0];f=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MAWAddParticipantSecureDialog.react").__setRef("useMWAddParticipantDialog"));var i=f[0];return function(){c("promiseDone")(e());var f=d("LSMessagingThreadTypeUtil").isArmadilloSecure(b);f?i({threadKey:a}):g({threadKey:a})}}g["default"]=a}),98);
__d("useMWCMEditChatInfoDialogEntrypoint",["GroupsCometChatEditChatDialog.entrypoint","I64","MWXCardedDialogLoadingState.react","react","useMWXEntryPointDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function a(a,b){a=c("useMWXEntryPointDialog")(c("GroupsCometChatEditChatDialog.entrypoint"),{threadID:(i||(i=d("I64"))).to_string(a)},void 0,function(){return j.jsx(c("MWXCardedDialogLoadingState.react"),{})});var e=a[0];return function(){return e({enableEditNameOrDescription:!0,entryPoint:b})}}g["default"]=a}),98);
__d("useMWComposerEmojiTransform",["react","requireDeferred","useDeferredModuleOnReady"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.c,k=c("requireDeferred")("getUpgradedCometEmojiComposerHandler").__setRef("useMWComposerEmojiTransform");function a(a){var b=j(4),d=c("useDeferredModuleOnReady")(k),e,f;b[0]!==d||b[1]!==a?(e=function(){return d==null?void 0:d(a,16)},f=[a,d],b[0]=d,b[1]=a,b[2]=e,b[3]=f):(e=b[2],f=b[3]);i(e,f)}g["default"]=a}),98);
__d("useMWComposerPersistentMenuItemSelect",["react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a){var b=a.composerEntrypointForLogging,c=a.onSendMessage;return i(function(a){var d=a.id;a=a.title;return c(a,void 0,void 0,void 0,void 0,void 0,void 0,void 0,d,void 0,void 0,void 0,void 0,void 0,void 0,b)},[c,b])}g["default"]=a}),98);
__d("useMWCutoverComposerConfiguration",["JSResourceForInteraction","LSMessagingThreadTypeUtil","MWBlockedComposerLogging","lazyLoadComponent","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWCutoverComposer.react").__setRef("useMWCutoverComposerConfiguration")),k=c("lazyLoadComponent")(c("JSResourceForInteraction")("MWDualThreadCutoverComposer.react").__setRef("useMWCutoverComposerConfiguration"));function a(a,b,c,e,f,g){if((g||f)&&(!d("LSMessagingThreadTypeUtil").isOneToOne(b)||c!=null))return e?i.jsx(k,{otherUser:c,thread:{threadKey:a}}):i.jsx(j,{reason:c!=null?d("MWBlockedComposerLogging").ComposerBlockingReason.ARMADILLO_THREAD_ALREADY_CUTOVER:d("MWBlockedComposerLogging").ComposerBlockingReason.ARMADILLO_GROUP_THREAD_CUTOVER,thread:{threadKey:a}})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWIsOffline",["NetworkStatus","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useState;function a(){var a=j(!c("NetworkStatus").isOnline()),b=a[0],d=a[1];i(function(){var a=c("NetworkStatus").onChange(function(a){a=a.online;d(!a)});return function(){a.remove()}},[]);return b}g["default"]=a}),98);
__d("useMWLSSaveDrafts",["CometDebounce","Int64Hooks","LexicalText","MWPComposerDraftMessages","MWPNewMessageDraftContext.react","isStringNullOrEmpty","react","useMAWDeleteLinkPreviewXMATableData","useMAWFetchAndWriteLinkPreviewXMATableData"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(a){var b=a.editor,e=a.isPreviewThread,f=a.threadKey,g=a.threadType,h=c("useMAWFetchAndWriteLinkPreviewXMATableData")({threadKey:f,threadType:g}),j=c("useMAWDeleteLinkPreviewXMATableData")(g),k=d("MWPNewMessageDraftContext.react").useNewMessageDraftContext(),l=i(function(a){e&&k!=null?k.current=a:d("MWPComposerDraftMessages").updateDraftMessage({deleteLinkPreviewXMATableData:j,fetchAndWriteLinkPreviewXMA:h,message:a,threadKey:f,threadType:g})},[j,h,e,k,f,g]);d("Int64Hooks").useEffectInt64(function(){b.registerUpdateListener(c("CometDebounce")(function(a){a=a.editorState;a=a.read(function(){return d("LexicalText").$rootTextContent()});if(c("isStringNullOrEmpty")(a)){l(a);return}l(a)},{wait:250}))},[b,l]);d("Int64Hooks").useEffectInt64(function(){var a=b.getEditorState().read(function(){return d("LexicalText").$rootTextContent()});l(a)},[b,l])}g["default"]=a}),98);
__d("useMWMediaManagerUploadFailedToast",["mwPushToast","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useCallback;function a(){return i(function(a,b){d("mwPushToast").mwPushErrorToast({body:b,title:a})},[])}g["default"]=a}),98);
__d("useOnTypingStateChanged",["I64","Int64Hooks","LSAuthorityLevel","LSContactBlockedByViewerStatus","LSFactory","LSIntEnum","LSMessagingThreadTypeUtil","LSSendTypingIndicatorStoredProcedure","MWPActor.react","MessengerWebUXLogger","ReQL","asyncToGeneratorRuntime","mwCMIsAnyCMThread","promiseDone","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;function k(a,b,c,d){return l.apply(this,arguments)}function l(){l=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e,f){if((i||(i=d("I64"))).equal(e,(j||(j=d("LSIntEnum"))).ofNumber(1))&&!(i||(i=d("I64"))).equal(b,f)){var g;b=(yield (g=d("ReQL")).firstAsync(g.mergeJoin(g.fromTableAscending(a.tables.participants).getKeyRange(b),g.fromTableAscending(a.tables.contacts.index("blockedByViewerStatusId")).getKeyRange((j||(j=d("LSIntEnum"))).ofNumber(c("LSContactBlockedByViewerStatus").UNBLOCKED))).filter(function(a){var b=a[0];a[1];return!(i||(i=d("I64"))).equal(b.contactId,f)})));return b!=null}else return!c("mwCMIsAnyCMThread")(e)});return l.apply(this,arguments)}function a(a){var b=(h||(h=c("useReStore")))(),e=d("MWPActor.react").useActor(),g=c("MessengerWebUXLogger").useInteractionLogger();return d("Int64Hooks").useCallbackInt64(function(h){if(!(i||(i=d("I64"))).ge(a.authorityLevel,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)))return;c("promiseDone")(k(b,a.threadKey,a.threadType,e).then(function(e){if(e){g==null?void 0:g({eventName:"send_typing_indicators",threadKey:a.threadKey,threadType:a.threadType});return b.runInTransaction(function(b){return c("LSSendTypingIndicatorStoredProcedure")(c("LSFactory")(b),{isGroupThread:d("LSMessagingThreadTypeUtil").isGroup(a.threadType),isTyping:h,threadKey:a.threadKey})},"readwrite",void 0,void 0,f.id+":116")}}))},[a.authorityLevel,a.threadKey,a.threadType,b,e,g])}g["default"]=a}),98);
__d("useMWOnTypingStateChanged",["MWChatViewerChatVisibilityHook","react","useOnTypingStateChanged"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useMemo,j=function(a){return void 0};function a(a){var b=c("useOnTypingStateChanged")(a),e=d("MWChatViewerChatVisibilityHook").useViewerChatVisibility();return i(function(){return e?b:j},[b,e])}g["default"]=a}),98);
__d("useMWPAdultMinorRestrictionLogging",["I64","LSContactReachabilityStatusType","LSIntEnum","LSMessagingThreadTypeUtil","MwbActorExperienceEventFalcoEvent","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||d("react")).useEffect;function l(a){var b=d("LSMessagingThreadTypeUtil").isArmadilloSecure(a),c=d("LSMessagingThreadTypeUtil").isOneToOne(a);a=d("LSMessagingThreadTypeUtil").isGroup(a);if(c)return b?"messenger_encrypted_direct_thread":"messenger_direct_thread_details";return a?b?"messenger_encrypted_group_thread":"messenger_group_thread_details":"unknown"}function m(a){switch(a){case c("LSContactReachabilityStatusType").UNREACHABLE_USER_TYPE:return 12;case c("LSContactReachabilityStatusType").UNREACHABLE_ADULT_TYPE:return 21;default:return 0}}var n=function(a){return a?(i||(i=d("LSIntEnum"))).toNumber(a):c("LSContactReachabilityStatusType").REACHABLE};function a(a,b){var e=n(b),f=l(a),g=(j||(j=d("I64"))).to_string(a);k(function(){e!==c("LSContactReachabilityStatusType").REACHABLE&&e!==c("LSContactReachabilityStatusType").REACHABLE_INVITE_BANNER&&e!==c("LSContactReachabilityStatusType").REACHABLE_INVITE_MODEL_TEXT_ONLY&&c("MwbActorExperienceEventFalcoEvent").log(function(){return{action:1,restriction_type:m(e),surface:f,thread_id:g}})},[g,e,f])}g["default"]=a}),98);
__d("useMWPComposerAutoFocus",["MWChatFocusComposerContext","MWPReplyContext.react","MWV2IsTabFocusedContext.react","deepEquals","react","usePrevious"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useContext,k=b.useEffect;function l(a){var b;b=(b=document.activeElement)==null?void 0:(b=b.attributes.getNamedItem("id"))==null?void 0:b.value;if(b==null?void 0:b.includes("prevent-composer-focus-steal"))return;return a.focus(function(){})}function a(a){var b=a.editor,e=a.focusEditorDelayed,f=a.hasUnsentAttachments,g=f===void 0?!1:f;f=a.isPreviewThread;f=f===void 0?!1:f;var h=a.isQuickchat;a=d("MWChatFocusComposerContext").useMWChatFocusComposer();a=a.setFocusComposer;var m=j(d("MWPReplyContext.react").MWPReplyContext),n=m.reply,o=c("usePrevious")(n);k(function(){(o==null?n!=null:!c("deepEquals")(o,n))&&(h&&e?e(b):l(b))},[b,n,o,e,h]);m=d("MWV2IsTabFocusedContext.react").useIsTabFocused();var p=m&&!f;k(function(){p&&(h&&e?e(b):l(b))},[b,p,e,h]);k(function(){g&&(h&&e?e(b):l(b))},[b,g,e,h]);a(i(function(){h&&e?e(b):l(b)},[b,e,h]))}g["default"]=a}),98);
__d("usePrepopulateLexicalEditor",["Lexical","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useLayoutEffect;function a(a,b,c){i(function(){if(b==null)return;a.update(function(){if(b!=null){var a=d("Lexical").$getRoot(),e=a.getFirstChild();d("Lexical").$isParagraphNode(e)||(e=d("Lexical").$createParagraphNode(),a.append(e));a=d("Lexical").$createTextNode(b);e.clear();e.append(a);c===!0&&e.selectEnd()}})},[a])}g["default"]=a}),98);
__d("useMWPComposerEditorDraftText",["MWPComposerDraftMessages","MWPNewMessageDraftContext.react","MWPreloadedText","react","useMWLSSaveDrafts","usePrepopulateLexicalEditor"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useContext;function a(a){var b=a.editor,e=a.isPreviewThread;e=e===void 0?!1:e;var f=a.isQuickchat;f=f===void 0?!1:f;var g=a.threadKey;a=a.threadType;var h=d("MWPNewMessageDraftContext.react").useNewMessageDraftContext(),j=i(c("MWPreloadedText"));h=j.text!=null?j.text:h!=null?h.current:(j=d("MWPComposerDraftMessages").getDraftMessage(g))==null?void 0:j.messageText;c("useMWLSSaveDrafts")({editor:b,isPreviewThread:e,threadKey:g,threadType:a});c("usePrepopulateLexicalEditor")(b,f?void 0:h);return h}g["default"]=a}),98);
__d("useMWPComposerFileDropzoneRegisterHandler",["MWV2FileDropzone.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useEffect;function a(a){var b=i(d("MWV2FileDropzone.react").mWV2FileDropzoneContext);j(function(){if(a){b.current.enabled=!1;b.current.handler=null;return function(){b.current.enabled=!0,b.current.handler=null}}},[b,a])}g["default"]=a}),98);
__d("useMWPDisablePageComposerConfiguration",["MWV2DisabledPageComposer.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){if(a.disableComposerInput&&a.hasPersistentMenu)return i.jsx(c("MWV2DisabledPageComposer.react"),{threadKey:a.threadKey})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWPFeatureLimitsBlockedComposerConfiguration",["MWPFeatureLimitsBlockedComposer.react","isFeatureLimitEnabled","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a,b,d){b=b&&(!a||c("isFeatureLimitEnabled")());if(b)return i.jsx(c("MWPFeatureLimitsBlockedComposer.react"),{thread:d})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWPLexicalClearEditor",["Lexical","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useLayoutEffect;function a(a,b){b===void 0&&(b=!1),i(function(){return a.registerCommand(d("Lexical").CLEAR_EDITOR_COMMAND,function(){a.update(function(){var a=d("Lexical").$getRoot(),c=d("Lexical").$getSelection(),e=d("Lexical").$createParagraphNode();a.clear();a.append(e);c!==null&&(e.select(),b===!0&&d("Lexical").$isRangeSelection(c)&&(c.format=0))});return!0},d("Lexical").COMMAND_PRIORITY_EDITOR)},[b,a])}g["default"]=a}),98);
__d("useObservable",["react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useState,k=b.c;function a(a){var b=k(7),c=j(),d=c[0],e=c[1];c=j();var f=c[0],g=c[1];c=j(!1);var h=c[0],l=c[1],m;b[0]!==a?(c=function(){var b=a.subscribe({complete:function(){return l(!0)},error:g,next:e});return function(){return b.unsubscribe()}},m=[a],b[0]=a,b[1]=c,b[2]=m):(c=b[1],m=b[2]);i(c,m);b[3]!==d||b[4]!==f||b[5]!==h?(c=[d,f,h],b[3]=d,b[4]=f,b[5]=h,b[6]=c):c=b[6];return c}g["default"]=a}),98);
__d("useMWPMessageListData",["I64","Int64Hooks","MAWObservableUtils","MAWStateContext.react","MWPMessageListDataSource","MWPVisibleMessageContext.react","ReQL","ReQLSuspense","cr:558","react","useObservable","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;e=j||d("react");var k=e.useCallback,l=e.useContext,m=e.useEffect,n=e.useMemo,o=e.useRef,p=e.useState,q=15;function a(a,e){var g,j=a.threadKey,r=a.threadType,s=(h||(h=c("useReStore")))(),t=o(d("MAWObservableUtils").getUniqueRef()),u=b("cr:558")();a=l(d("MAWStateContext.react").MAWStateContext);var v=a.dispatch;a=d("MWPVisibleMessageContext.react").useMWPVisibleMessageContext();a=a.visibleMessage;var w=a==null?void 0:a.messageId,x=(a=a==null?void 0:a.timestamp)!=null?a:(i||(i=d("I64"))).max_int,y=e==null?void 0:e.threadKey,z=e==null?void 0:e.threadType;a=p(q);var A=a[0],B=a[1];e=p(q);var C=e[0],D=e[1];a=p(w);var E=a[0],F=a[1];e=p(x);var G=e[0],H=e[1];a=p(!1);e=a[0];var I=a[1];a=p(!1);var J=a[0],K=a[1],L=d("ReQLSuspense").useFirst(function(){return d("ReQL").fromTableAscending(s.tables.mi_act_mapping_table,["jid"]).getKeyRange(j).map(function(a){return a.jid})},[s,j],f.id+":83");a=d("Int64Hooks").useMemoInt64(function(){return new(c("MWPMessageListDataSource"))(s,u,{after:C,before:A,cursor:{messageId:E,secureThreadJid:L,threadKey:j,timestampMs:G},secondaryThreadKey:y,secondaryThreadType:z,threadType:r},v,t.current)},[C,A,s,u,L,v,E,y,z,j,r,G]);a=c("useObservable")(a);var M=a[0];a=a[1];m(function(){I(!1),K(!1)},[M]);if(a!=null)throw a;a=n(function(){var a;return(a=M==null?void 0:M.data.map(function(a){a[0];a=a[1];return a}))!=null?a:[]},[M]);var N=a.some(function(a){return a.messageId===w});d("Int64Hooks").useEffectInt64(function(){N||(H(x),F(w),B(q),D(q))},[N,w,x]);var O=(g=M==null?void 0:M.hasNext)!=null?g:!1,P=((g=M==null?void 0:M.isLoadingNext)!=null?g:!1)||J;g=k(function(){!P&&O&&(D(C+q),K(!0))},[O,P,C]);var Q=(J=M==null?void 0:M.hasPrevious)!=null?J:!1,R=((J=M==null?void 0:M.isLoadingPrevious)!=null?J:!1)||e;J=k(function(){!R&&Q&&(B(A+q),I(!0))},[Q,R,A]);return{hasNext:O,hasPrevious:Q,isLoadingNext:P,isLoadingPrevious:R,loadNext:g,loadPrevious:J,messages:a}}g["default"]=a}),98);
__d("useMWPNullComposerConfiguration",["I64","LSNullstateCTAType","MWBlockedComposerLogging","MWPreloadedText","justknobx","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||(h=d("react")),k=h.useContext;function l(a){var b=a.reason;a=a.threadKey;d("MWBlockedComposerLogging").useLogMWBlockedComposerReason(a,b);return null}l.displayName=l.name+" [from "+f.id+"]";function a(a,b,e,f){var g=k(c("MWPreloadedText"));f=f!=null&&(i||(i=d("I64"))).equal(f,(i||(i=d("I64"))).of_float(c("LSNullstateCTAType").GET_STARTED))&&!g.text;g=!(i||(i=d("I64"))).equal(b,i.zero);b=c("justknobx")._("926");if(f&&!g||!b&&e)return j.jsx(l,{reason:e?d("MWBlockedComposerLogging").ComposerBlockingReason.GAMING_GAME_BOT:d("MWBlockedComposerLogging").ComposerBlockingReason.GAMING_GET_STARTED_CTA,threadKey:a})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("useMWPShouldShowRestrictedComposer",["LSMessagingThreadTypeUtil","gkx"],(function(a,b,c,d,e,f,g){"use strict";function a(a,b){return d("LSMessagingThreadTypeUtil").isOneToOne(a)&&c("gkx")("24036")&&b}g["default"]=a}),98);
__d("useMWProactiveWarningPayloadMemo",["I64","Int64Hooks"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.banner,c=a.ignoreDismissTime,e=a.isPWDismissTimeSet,f=a.pwSettings,g=a.threadKey;return d("Int64Hooks").useMemoInt64(function(){if(f==null||b==null)return;var a=f.context,i=f.entryPoint,j=f.storyLocation,k=f.suspectId,l=f.tag,m=b.bannerId,n=b.cta1Title,o=b.cta2Title,p=b.heading,q=b.titleSectionOne;if(!((Boolean(c)||e)&&(h||(h=d("I64"))).equal(m,(h||(h=d("I64"))).of_string("7"))))return;if(k!=null&&a!=null&&j!=null&&i!=null&&l!=null&&p!=null&&o!=null&&n!=null&&q!=null)return{context:a,cta1Title:n,cta2Title:o,description:q,falco_event_data:{data:{entry_point:(h||(h=d("I64"))).to_int32(i),feedback_tags:[l],surface:h.to_int32(j)},impersonatedUser:{id:"0"},otherUser:{id:h.to_string(k)},reportedUser:{id:"0"},thread:{id:h.to_string(g),type:1}},header:p,threadKey:g}},[g,b,f,e,c])}g["default"]=a}),98);
__d("useMWV2ChatHotlikeButton",["I64","LSHotEmojiSize","LSIntEnum","MWV2ChatHotlikeButtonAnimation.react","MessengerWebUXLogger","QPLUserFlow","StickerConstants","clearTimeout","gkx","isStringNullOrEmpty","qex","qpl","react","requireDeferred","setTimeout","useDebouncedComet"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j;b=h||d("react");var k=b.useCallback,l=b.useEffect,m=b.useRef,n=b.useState,o=c("requireDeferred")("MWV2ChatHotlikeSounds").__setRef("useMWV2ChatHotlikeButton"),p=500,q=(e={},e[c("LSHotEmojiSize").NONE]=(i||(i=d("I64"))).of_string(c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID),e[c("LSHotEmojiSize").SMALL]=i.of_string(c("StickerConstants").HOT_LIKE_SMALL_STICKER_ID),e[c("LSHotEmojiSize").MEDIUM]=i.of_string(c("StickerConstants").HOT_LIKE_MEDIUM_STICKER_ID),e[c("LSHotEmojiSize").LARGE]=i.of_string(c("StickerConstants").HOT_LIKE_LARGE_STICKER_ID),e);function r(a){if(a<=d("MWV2ChatHotlikeButtonAnimation.react").EMOJI_SIZE_PERCENTAGE_THRESHOLDS.small)return c("LSHotEmojiSize").SMALL;else if(a<=d("MWV2ChatHotlikeButtonAnimation.react").EMOJI_SIZE_PERCENTAGE_THRESHOLDS.medium)return c("LSHotEmojiSize").MEDIUM;else return c("LSHotEmojiSize").LARGE}function s(){o.onReadyImmediately(function(a){return a.start()})}function t(){o.onReadyImmediately(function(a){return a.pop()})}function u(a){o.onReadyImmediately(function(b){return b.snap(a)})}function a(a,b,e,f){var g=c("isStringNullOrEmpty")(a),h=n(!1),i=h[0],o=h[1],v=m(null),w=m(null),x=m(!1),y=c("MessengerWebUXLogger").useInteractionLogger(),z=k(function(a){y==null?void 0:y({eventName:g?"send_hot_like":"send_hot_emoji",extraData:{size:a.toString()},threadType:e})},[g,y,e]),A=k(function(c){!g?b(a,void 0,void 0,(j||(j=d("LSIntEnum"))).ofNumber(c),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,f):b(void 0,void 0,q[c],(j||(j=d("LSIntEnum"))).ofNumber(c),void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,f),z(c)},[a,g,z,b,f]),B=c("qex")._("1271"),C=c("useDebouncedComet")(A,{leading:!0,wait:(h=B)!=null?h:0}),D=function(){c("clearTimeout")(v.current),v.current=null};l(function(){return function(){D()}},[]);var E=function(){return x.current===!0&&(!i||v.current==null)};h=function(){x.current===!0&&(c("QPLUserFlow").endCancel(c("qpl")._(25311430,"2261"),{annotations:{string:{reason:"hover-out"}}}),t()),x.current=!1,o(!1),D()};var F=function(){if(c("gkx")("23249")||c("qex")._("256")!==!0)return;c("QPLUserFlow").start(c("qpl")._(25311430,"2261"));x.current=!0;o(!0);s();v.current=c("setTimeout")(function(){t(),o(!1),v.current=null,c("QPLUserFlow").endCancel(c("qpl")._(25311430,"2261"),{annotations:{string:{reason:"long-press-pop"}}})},d("MWV2ChatHotlikeButtonAnimation.react").TOTAL_GROW_ANIMATION_TIME_MS+p)},G=k(function(){var a;a=(a=w.current)==null?void 0:a.getAnimations()[0];a=a==null?void 0:a.currentTime;return a!=null?a/d("MWV2ChatHotlikeButtonAnimation.react").TOTAL_GROW_ANIMATION_TIME_MS:0},[]),H=function(){if(c("gkx")("23249")||c("qex")._("256")!==!0){B!=null?C(c("LSHotEmojiSize").SMALL):A(c("LSHotEmojiSize").SMALL);return}if(E()){x.current=!1;return}D();o(!1);x.current=!1;var a=G();a=r(a);u(a);B!=null?C(a):A(a);c("QPLUserFlow").endSuccess(c("qpl")._(25311430,"2261"),{annotations:{bool:{isDefaultLike:g},"int":{size:a}}})};return{animationsContainerRef:w,handleHoverOut:h,handleOnPress:H,handlePressIn:F,shouldShowGrowAnimation:i}}g["default"]=a}),98);
__d("useMWV2ComposerOnPressVoiceClip",["$InternalEnum","JSResourceForInteraction","WAGetMediaDevicesSupportedConstraints","emptyFunction","react","requireDeferred","useMWXLazyDialog"],(function(a,b,c,d,e,f,g){"use strict";var h,i=(h||d("react")).useState,j=c("requireDeferred")("MWChatAudioLog").__setRef("useMWV2ComposerOnPressVoiceClip"),k=b("$InternalEnum").Mirrored(["AWAITING","GRANTED","DENIED","FAILED"]);function a(a){var b=i(k.AWAITING),e=b[0],f=b[1];b=c("useMWXLazyDialog")(c("JSResourceForInteraction")("MWChatAudioRecorderPermissionsDialog.react").__setRef("useMWV2ComposerOnPressVoiceClip"));var g=b[0],h={channelCount:1};b=((b=d("WAGetMediaDevicesSupportedConstraints").getMediaDevicesSupportedConstraints())==null?void 0:b.sampleRate)===!0;b&&(h.sampleRate=44100);var l=function(){return g({contentType:"accessDenied",onAllow:c("emptyFunction")},c("emptyFunction"))},m=function(){var b;(b=navigator)==null?void 0:(b=b.mediaDevices)==null?void 0:b.getUserMedia({audio:h,video:!1}).then(function(b){f(k.GRANTED),a.start(b)})["catch"](function(a){a.name==="NotAllowedError"?(f(k.DENIED),l()):f(k.FAILED),j.onReady(function(a){return a.logBrowserDenyAccess()})})},n=function(){return g({contentType:"askForAccess",onAllow:function(){return m()}},c("emptyFunction"))};return function(){var a;switch(e){case k.AWAITING:a=(a=navigator.permissions)==null?void 0:a.query({name:"microphone"});a!=null?a.then(function(a){a=a.state;switch(a){case"denied":f(k.DENIED);l();break;case"granted":m();break;case"prompt":n();break;default:n()}})["catch"](function(){n()}):(m(),j.onReady(function(a){return a.logMicAccessCheckFailed()}));return;case k.DENIED:return l();case k.GRANTED:case k.FAILED:return m()}}}g["default"]=a}),98);
__d("useMWV2FileDropzoneRegisterHandler",["MWV2FileDropzone.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useContext,j=b.useEffect;function a(a){var b=i(d("MWV2FileDropzone.react").mWV2FileDropzoneContext);j(function(){var c={enabled:!0,handler:a};b.current=c;return function(){c.enabled=!1,c.handler=null}},[b,a])}g["default"]=a}),98);
__d("useMWV2SendOpenMessageImplShared",["ArmadilloDataTraceCheckPoint","I64","IGDGetMessagePluginInfo","IGDThreadTTLCUtils","Int64Hooks","LSAppendDataTraceAddonStoredProcedure","LSAuthorityLevel","LSFactory","LSIntEnum","LSMailboxType","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSOptimisticSendMessageV2StoredProcedure","LSPendingTasksPluginType","LSShape","MWPActor.react","MWPReplyContext.react","MWPSendMessageLogger","MessagePowerUp","MessagingAttachmentType","Promise","asyncToGeneratorRuntime","gkx","react","sendToSentQPLLogger","useLSMessagingInitiatingSource"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(i||d("react")).useContext;function m(a,b,c){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,e){e!=null&&c("gkx")("23995")&&(yield c("LSAppendDataTraceAddonStoredProcedure")(c("LSFactory")(a),{checkPointId:d("ArmadilloDataTraceCheckPoint").armadilloTlcControlOpenThread,dataTraceId:e,syncChannel:(k||(k=d("I64"))).minus_one,tags:b}))});return n.apply(this,arguments)}function a(a){var e=a.authorityLevel,f=a.disableMarkRead,g=a.ephemeralDurationInSec,i=a.onOptimisticMessageCreation,n=a.skipUrlPreviewGen,o=a.threadKey,p=a.threadType,q=d("MWPActor.react").useActor();a=l(d("MWPReplyContext.react").MWPReplyContext);var r=a.reply,s=c("useLSMessagingInitiatingSource")();return d("Int64Hooks").useCallbackInt64(function(a,l){var t=l.afterSend,u=l.attributionAppId,v=l.dataclassParams,w=l.dataTraceId,x=l.externalAttachmentUrl,y=l.hotEmojiSize,z=l.logSendPoint,A=l.mentionData,B=l.messageText,C=l.messageTypeParams,D=l.multitabEnv,E=l.optimisticAttachmentPreview,F=l.platformToken,G=l.pluginType,H=l.profileRanges,I=l.richTextFormatType,J=l.s2sInstanceKey,K=l.setupS2SLogging,L=l.source,M=l.stickerID,N=l.traceSendMessageAPI,O=l.transaction;return P(O);function P(a){return Q.apply(this,arguments)}function Q(){Q=b("asyncToGeneratorRuntime").asyncToGenerator(function*(l){var P=c("LSFactory")(l),Q=c("gkx")("24135");yield m(l,(k||(k=d("I64"))).to_string(o),w);var R=C.hasAttachment,S=C.hasGif,T=C.hasLinks,U=C.hasSticker,V=C.hasText,W=(yield l.threads.get(o)),X=T?d("IGDThreadTTLCUtils").isInstamadilloTTLCLinkEnabled(W):d("IGDThreadTTLCUtils").isInstamadilloTTLCTextEnabled(W);W=(yield d("IGDGetMessagePluginInfo").IGDGetMessagePluginInfo(l,r,function(){return(h||(h=b("Promise"))).resolve({openEb:X,pluginType:X?(j||(j=d("LSIntEnum"))).ofNumber(c("LSPendingTasksPluginType").IGD_INSTAMADILLO):G})}));l=W.openEb;W=W.pluginType;P=(yield c("LSOptimisticSendMessageV2StoredProcedure")(P,{dataclassParams:v!=null?JSON.stringify(v):void 0,extraSendMessageParams:d("LSShape").ofRecord({attribution_app_id:u,calculate_denormalizations:!1,data_trace_id:(P=w)!=null?P:void 0,ephemeral_duration_in_sec:g,external_attachment_url:x,hot_emoji_size:y,initiating_source:s,mark_read:f===!0?!1:(k||(k=d("I64"))).ge(e,(j||(j=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)),mention_data:A,multitab_env:D,openEb:l,optimistic_attachment_preview:E,platform_token:F,plugin_type:W,power_up_style:(j||(j=d("LSIntEnum"))).ofNumber(c("MessagePowerUp").NONE),qpl_instance_key:J.toString(),reply_source_id:r==null?void 0:r.messageId,reply_source_type:r!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceType").MESSAGE):void 0,reply_source_type_v2:r!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE):void 0,rich_text_format_type:I,skip_url_preview_gen:n,source:L,sticker_id:M,text_has_links:T&&Q}),mailboxType:j.ofNumber(c("LSMailboxType").MESSENGER),senderId:q,text:B,threadKey:o,threadType:p}));z("create_optimistic_message_end");d("MWPSendMessageLogger").log(a,o,p,q,void 0,[],L,c("MessagingAttachmentType").NONE,r!=null,W,X,g);if(!R){Q=P[0];K(Q);N.addAnnotationBoolean("is_instamadillo_ttlc",X&&l===!0);d("sendToSentQPLLogger").addSendToSentAnnotations(J,{bool:{is_instamadillo_ttlc:X&&l===!0}})}i!=null&&i({TAG:0,hasLink:T,hasMention:H!=null&&H.length>0,isGIF:S,isReply:!!(r&&r.messageId!==""),isSticker:U,isText:V,offlineThreadingId:P[0]});t!=null&&(yield t(O));return P});return Q.apply(this,arguments)}},[o,r,g,s,f,e,n,q,p,i])}g["default"]=a}),98);
__d("useMWV2SendOpenMessageImpl",["useMWV2SendOpenMessageImplShared"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.disableMarkRead,d=a.ephemeralDurationInSec,e=a.onOptimisticMessageCreation,f=a.skipUrlPreviewGen;a=a.thread;return c("useMWV2SendOpenMessageImplShared")({authorityLevel:a.authorityLevel,disableMarkRead:b,ephemeralDurationInSec:d,onOptimisticMessageCreation:e,skipUrlPreviewGen:f,threadKey:a.threadKey,threadType:a.threadType})}g["default"]=a}),98);
__d("useMWV2SendOpenStagedMedia",["I64","IGDGetMessagePluginInfo","IGDThreadTTLCUtils","Int64Hooks","LSFactory","LSIntEnum","LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSMessagingThreadTypeUtil","LSPendingTasksPluginType","LSShape","LSThreadBitOffset","LSVec","MWConsole","MWPActor.react","MWPComposerMediaUploadUtil","MWPReplyContext.react","MWPSendMessageLogger","MessagingAttachmentType","MessagingLoggingUtils","MessengerWebEventsFalcoEvent","Promise","asyncToGeneratorRuntime","issueLSMediaSendJobs","issueSendInstamadilloMediaMessage","react","sendToSentQPLLogger","useLSMessagingInitiatingSource"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(i||d("react")).useContext;function a(a,e,f){var g=d("MWPActor.react").useActor(),i=l(d("MWPReplyContext.react").MWPReplyContext),m=i.reply,n=c("useLSMessagingInitiatingSource")(),o=d("LSThreadBitOffset").has(40,f);return d("Int64Hooks").useCallbackInt64(function(){var i=b("asyncToGeneratorRuntime").asyncToGenerator(function*(i,l){var p=l.isFirstMessage;p=p===void 0?!1:p;var q=l.isFirstMessageText,r=l.mediaStagings,s=l.pluginType,t=l.s2sInstanceKey,u=l.sendFirstMessageSeparately;u=u===void 0?!1:u;var v=l.setupS2SLogging,w=l.source,x=l.traceSendMessageAPI;l=l.transaction;if(r.length===0)return;var y=!1;if(r.length===1){var z=r[0];(k||(k=d("I64"))).to_int32(z.attachmentType)===c("MessagingAttachmentType").IMAGE?y=d("IGDThreadTTLCUtils").isInstamadilloTTLCImageEnabled(f):(k||(k=d("I64"))).to_int32(z.attachmentType)===c("MessagingAttachmentType").VIDEO&&(y=d("IGDThreadTTLCUtils").isInstamadilloTTLCVideoEnabled(f))}z=(yield d("IGDGetMessagePluginInfo").IGDGetMessagePluginInfo(l,m,function(){return(h||(h=b("Promise"))).resolve({openEb:y,pluginType:y?(j||(j=d("LSIntEnum"))).ofNumber(c("LSPendingTasksPluginType").IGD_INSTAMADILLO):s})}));var A=z.openEb;z=z.pluginType;var B=r[0];B=d("MessagingLoggingUtils").convertI64ToAttachmentType(B.attachmentType);var C=d("MWPComposerMediaUploadUtil").createPartitionedAttachments(r,o),D=!0;for(var E=0;E<C.length;E++)if(!p||!u||E===0&&p&&!q){var F=C[E],G=(yield c("LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure")(c("LSFactory")(l),{extraSendMessageParams:d("LSShape").ofRecord({attachments:c("LSVec").ofArray(F.map(d("LSShape").ofRecord)),ephemeral_duration_in_sec:a,external_attachment_url:void 0,initiating_source:n,mark_read:!1,platform_ref:void 0,platform_token:void 0,plugin_type:z,reply_source_id:m==null?void 0:m.messageId,reply_source_type:m!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceType").MESSAGE):void 0,reply_source_type_v2:m!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE):void 0,source:w}),senderId:g,threadKey:f.threadKey,threadType:f.threadType}));G=G[0];E===0&&(v(G),x.addAnnotationBoolean("is_instamadillo_ttlc",y&&A===!0),d("sendToSentQPLLogger").addSendToSentAnnotations(t,{bool:{is_instamadillo_ttlc:y&&A===!0}}));yield l.messages_optimistic_context.add({externalAttachmentUrl:void 0,initiatingSource:n,markThreadRead:!1,messageId:void 0,offlineThreadingId:G,openEb:A,platformRef:void 0,platformToken:void 0,replySourceId:void 0,replySourceType:void 0,sendType:void 0,skipUrlPreviewGen:void 0,taskId:(k||(k=d("I64"))).of_string(G),threadAttributionSource:w,threadKey:f.threadKey});e==null?void 0:e({TAG:2,numberOfAttachments:F.length,offlineThreadingId:G});if(z!=null&&(j||(j=d("LSIntEnum"))).unwrapIntEnum(z)===c("LSPendingTasksPluginType").IGD_INSTAMADILLO)yield c("issueSendInstamadilloMediaMessage")(l,F,G);else{var H=(yield c("issueLSMediaSendJobs")(l,f.threadKey,G,F,r));D=D&&H.sentWithAllFilesUploaded}d("MWPSendMessageLogger").log(i,f.threadKey,f.threadType,g,G,F.map(function(a){return a.attachment_fbid}),w,B,m!=null,z,y,a)}H=(k||(k=d("I64"))).to_string(f.threadKey);G=d("LSMessagingThreadTypeUtil").isGroup(f.threadType)?[H,null]:[null,H];var I=G[0],J=G[1];c("MessengerWebEventsFalcoEvent").log(function(){return{event_name:D?"hit_send_message_with_all_files_uploaded":"hit_send_message_with_files_pending",extra_data:null,other_user_fbid:J,thread_fbid:I}})});return function(a,b){return i.apply(this,arguments)}}(),[m,o,f,a,n,g,e])}g["default"]=a}),98);
__d("useMWV2SendOpenVoiceClipImplShared",["I64","IGDGetMessagePluginInfo","IGDThreadTTLCUtils","Int64Hooks","LSFactory","LSIntEnum","LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure","LSMessageReplySourceType","LSMessageReplySourceTypeV2","LSPendingTasksPluginType","LSShape","LSVec","MWMediaTraceHandler","MWPActor.react","MWPComposerMediaUploadUtil","MWPReplyContext.react","MessagingLoggingUtils","OfflineThreadingId","Promise","asyncToGeneratorRuntime","issueLSAudioMediaSendJob","issueSendInstamadilloMediaMessage","react","sendToSentQPLLogger","useLSMessagingInitiatingSource"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k,l=(i||d("react")).useContext;function m(a,b,c,d){return n.apply(this,arguments)}function n(){n=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,b,c,e){b!=null&&(yield d("MWMediaTraceHandler").logMediaSendStart(a,b,c,(k||(k=d("I64"))).of_int32(e)))});return n.apply(this,arguments)}function a(a){var e=a.ephemeralDurationInSec,f=a.onOptimisticMessageCreation,g=a.onUploadFailure,i=a.onUploadStart,n=a.onUploadSuccess,o=a.sendMessageLogger,p=a.skipUrlPreviewGen,q=a.threadKey,r=a.threadType,s=d("MWPActor.react").useActor();a=l(d("MWPReplyContext.react").MWPReplyContext);var t=a.reply,u=c("useLSMessagingInitiatingSource")();return d("Int64Hooks").useCallbackInt64(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,l){var v=l.dataTraceId,w=l.pluginType,x=l.s2sInstanceKey,y=l.setupS2SLogging,z=l.source,A=l.traceSendMessageAPI,B=l.transaction;l=l.voiceClip;var C=c("LSFactory")(B),D=d("OfflineThreadingId").createOfflineThreadingID(),E=d("MWPComposerMediaUploadUtil").getAudioAttachment(D,l.file,l.duration,l.waveformData);yield m(B,v,(k||(k=d("I64"))).one,2);var F=(yield B.threads.get(q)),G=d("IGDThreadTTLCUtils").isInstamadilloTTLCAudioEnabled(F);F=(yield d("IGDGetMessagePluginInfo").IGDGetMessagePluginInfo(B,t,function(){return(h||(h=b("Promise"))).resolve({openEb:G,pluginType:G?(j||(j=d("LSIntEnum"))).ofNumber(c("LSPendingTasksPluginType").IGD_INSTAMADILLO):w})}));var H=F.openEb;F=F.pluginType;C=(yield c("LSLocalApplyOptimisticMessageWithAttachmentsV2StoredProcedure")(C,{extraSendMessageParams:d("LSShape").ofRecord({attachments:c("LSVec").ofArray([d("LSShape").ofRecord(E)]),ephemeral_duration_in_sec:e,external_attachment_url:void 0,initiating_source:u,mark_read:!1,platform_ref:void 0,platform_token:void 0,plugin_type:F,reply_source_id:t==null?void 0:t.messageId,reply_source_type:t!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceType").MESSAGE):void 0,reply_source_type_v2:t!=null?(j||(j=d("LSIntEnum"))).ofNumber(c("LSMessageReplySourceTypeV2").MESSAGE):void 0,source:z}),senderId:s,threadKey:q,threadType:r}));C=C[0];y(C);A.addAnnotationBoolean("is_instamadillo_ttlc",G&&H===!0);d("sendToSentQPLLogger").addSendToSentAnnotations(x,{bool:{is_instamadillo_ttlc:G&&H===!0}});yield B.messages_optimistic_context.add({externalAttachmentUrl:void 0,initiatingSource:u,markThreadRead:!1,messageId:void 0,offlineThreadingId:C,openEb:H,platformRef:void 0,platformToken:void 0,replySourceId:void 0,replySourceType:void 0,sendType:void 0,skipUrlPreviewGen:p,taskId:k.of_string(C),threadAttributionSource:z,threadKey:q});f!=null&&f({TAG:1,offlineThreadingId:C});F!=null&&(j||(j=d("LSIntEnum"))).unwrapIntEnum(F)===c("LSPendingTasksPluginType").IGD_INSTAMADILLO?yield c("issueSendInstamadilloMediaMessage")(B,[E],C):yield c("issueLSAudioMediaSendJob")(B,q,s,v,D,C,E,l,i,n,g);o(a,{actor:s,attachmentFbids:[E.attachment_fbid],attachmentType:d("MessagingLoggingUtils").convertI64ToAttachmentType(E.attachment_type),hasReply:t!=null,isInstamadilloTTLC:H,key:q,offlineThreadingId:C,pluginType:F,source:z,type:r})});return function(b,c){return a.apply(this,arguments)}}(),[q,e,u,t,s,r,p,f,o,i,n,g])}g["default"]=a}),98);
__d("useMWV2SendOpenVoiceClip",["Int64Hooks","MWPSendMessageLogger","useMWV2SendOpenVoiceClipImplShared"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.ephemeralDurationInSec,e=a.onOptimisticMessageCreation,f=a.onUploadFailure,g=a.onUploadStart,h=a.onUploadSuccess,i=a.skipUrlPreviewGen;a=a.thread;var j=d("Int64Hooks").useCallbackInt64(function(a,c){var e=c.actor,f=c.attachmentFbids,g=c.attachmentType,h=c.hasReply,i=c.isInstamadilloTTLC,j=c.key,k=c.offlineThreadingId,l=c.pluginType,m=c.source;c=c.type;e!=null&&d("MWPSendMessageLogger").log(a,j,c,e,k,f,m,g,h,l,i,b)},[b]);return c("useMWV2SendOpenVoiceClipImplShared")({ephemeralDurationInSec:b,onOptimisticMessageCreation:e,onUploadFailure:f,onUploadStart:g,onUploadSuccess:h,sendMessageLogger:j,skipUrlPreviewGen:i,threadKey:a.threadKey,threadType:a.threadType})}g["default"]=a}),98);
__d("useMWV2SendOpenMessage",["I64","Int64Hooks","LSGenerateTraceId","LSIntEnum","LSMessagingThreadTypeUtil","LSShape","MWPReplyContext.react","MWSharedMsgLogUtils","MWV2ComposerActionsContext.react","MWV2SetupS2SLoggingShared","MultipleTabsLogger","ReQL","asyncToGeneratorRuntime","gkx","hasDefaultThreadOneToOneCapability","react","sendToSentQPLLogger","useAsyncReStore","useLSMessagingInitiatingSource","useMWLSDefaultThreadSource","useMWV2SendOpenMessageImpl","useMWV2SendOpenStagedMedia","useMWV2SendOpenVoiceClip"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k=(h||d("react")).useContext;function a(a){var e=a.disableMarkRead,g=a.ephemeralDurationInSec,h=a.onOptimisticMessageCreation,l=a.onUploadFailure,m=a.onUploadStart,n=a.onUploadSuccess,o=a.pluginType,p=a.skipUrlPreviewGen,q=a.thread,r=c("useAsyncReStore")();a=k(d("MWPReplyContext.react").MWPReplyContext);var s=a.reply;a=c("useLSMessagingInitiatingSource")();var t=c("useMWLSDefaultThreadSource")(),u=c("useMWV2SendOpenVoiceClip")({ephemeralDurationInSec:g,onOptimisticMessageCreation:h,onUploadFailure:l,onUploadStart:m,onUploadSuccess:n,skipUrlPreviewGen:p,thread:q}),v=c("useMWV2SendOpenStagedMedia")(g,h,q),w=c("useMWV2SendOpenMessageImpl")({disableMarkRead:(l=e)!=null?l:!1,ephemeralDurationInSec:g,onOptimisticMessageCreation:h,skipUrlPreviewGen:p,thread:q}),x=d("LSMessagingThreadTypeUtil").isMessageRequest(q);m=k(d("MWV2ComposerActionsContext.react").MWV2ComposerActionsContext);var y=m.onMessageSendAttempt;return d("Int64Hooks").useCallbackInt64(function(){var a=b("asyncToGeneratorRuntime").asyncToGenerator(function*(a,e,g,h,k,l,m,n,p,z,A,B,C,D,E,F,G,H,I){A===void 0&&(A=!1);B===void 0&&(B=!1);var J=!1;y==null?void 0:y(!0);function K(a){C.addMarkerPoint(a,"AppTiming"),d("sendToSentQPLLogger").markSendToSentPoint(D,a)}var L=t(q.threadKey),M=c("LSGenerateTraceId")(),N={contents:1};E=q.eventStartTimestampMs!=null;G=q.threadType;var O=(yield r),P=c("MWV2SetupS2SLoggingShared")({db:O,isCommunityEvent:E,isMessageRequest:x,s2sInstanceKey:D,source:(i||(i=d("LSIntEnum"))).unwrapIntEnum(L),threadType:G,traceSendMessageAPI:C});if(c("gkx")("24121")){H=(yield c("hasDefaultThreadOneToOneCapability")(q.threadKey,O));H&&(K("invalid_send_to_default_e2ee"),d("sendToSentQPLLogger").addSendToSentAnnotations(D,{string:{invalid_send_to_default_e2ee_attribution:(j||(j=d("I64"))).to_string(L)}}))}E=(yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(O.tables.media_staging).filter(function(a){return!a.isSent&&(j||(j=d("I64"))).equal(a.threadKey,q.threadKey)})));var Q=d("MWSharedMsgLogUtils").getMessageTypeParams({externalAttachmentUrl:l,hotEmojiSize:h,mediaStagings:E,messageText:a,reply:s,stickerId:g,threadType:q.threadType,voiceClip:n}),R=(yield d("MWSharedMsgLogUtils").getSendToSentAnnotations(q,Q,i.unwrapIntEnum(L))),S=(yield d("MultipleTabsLogger").hasMultipleTabs());return O.runInTransaction(function(){var c=b("asyncToGeneratorRuntime").asyncToGenerator(function*(b){d("MWSharedMsgLogUtils").addSendMessageMetadataForInteractionTrace(C,Q,q);d("sendToSentQPLLogger").addSendToSentAnnotations(D,R);if(n!=null){(A===!1||B===!0)&&(yield u(O,{dataTraceId:M,pluginType:o,s2sInstanceKey:D,setupS2SLogging:P,source:L,traceSendMessageAPI:C,transaction:b,voiceClip:n}));return}var c=Q.hasGif,f=Q.hasHotEmoji,i=Q.hasSticker,r=Q.hasText;i||f?N.contents=4:c&&(N.contents=6);var s=e!=null?d("LSShape").ofRecord({mention_ids:e.map(function(a){return a.id}).join(","),mention_lengths:e.map(function(a){return String(a.length)}).join(","),mention_offsets:e.map(function(a){return String(a.offset)}).join(","),mention_types:e.length!==0?e.map(function(a){return a.type}).join(","):void 0}):void 0;K("create_optimistic_message_start");if(r||i||f||c){J=!0;if(A===!1||B===!0){yield w(O,{afterSend:z,attributionAppId:k,dataclassParams:I,dataTraceId:M,externalAttachmentUrl:l,hotEmojiSize:h,logSendPoint:K,mentionData:s,messageText:a,messageTypeParams:Q,multitabEnv:S,optimisticAttachmentPreview:m,platformToken:p,pluginType:o,profileRanges:e,richTextFormatType:F,s2sInstanceKey:D,setupS2SLogging:P,source:L,stickerID:g,traceSendMessageAPI:C,transaction:b});if(A===!0)return}}else z!=null&&(yield z(b));!i&&!c&&!f&&(yield v(O,{isFirstMessage:B,isFirstMessageText:J,mediaStagings:yield d("ReQL").toArrayAsync(d("ReQL").fromTableAscending(b.media_staging).filter(function(a){return!a.isSent&&(j||(j=d("I64"))).equal(a.threadKey,q.threadKey)})),pluginType:o,s2sInstanceKey:D,sendFirstMessageSeparately:A,setupS2SLogging:P,source:L,traceSendMessageAPI:C,transaction:b}))});return function(a){return c.apply(this,arguments)}}(),"readwrite","ui",void 0,f.id+":250")});return function(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){return a.apply(this,arguments)}}(),[y,t,q,r,a,x,s,u,w,v,o])}g["default"]=a}),98);
__d("useMWXComposerClearAndSendOnEnter",["Lexical","MLCKeyBindingUtil","gkx","justknobx","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useCallback,j=b.useInsertionEffect,k=b.useLayoutEffect,l=b.useRef;function a(a,b){var e=a.clearReplyState,f=a.editor,g=a.onSend,h=l(b);j(function(){h.current=b},[b]);var m=i(function(){var a=g(h.current);e==null?void 0:e();(a||!c("justknobx")._("2597"))&&f.dispatchCommand(d("Lexical").CLEAR_EDITOR_COMMAND)},[g,e,f]);k(function(){return f.registerCommand(d("Lexical").KEY_ENTER_COMMAND,function(a){if(a!=null&&!a.shiftKey&&!a.altKey&&(!c("gkx")("23402")||d("MLCKeyBindingUtil").hasCommandModifier(a))){a.preventDefault();m();return!0}return!1},d("Lexical").COMMAND_PRIORITY_LOW)},[f,m]);return{onSend:m}}g["default"]=a}),98);
__d("useMWXLexicalEditor",["CometLexicalEmojiNode","Lexical","MessengerLexicalActorNode","cometLexicalBaseTheme","cr:3101","cr:6138","useLexicalInitializeEditor__DEPRECATED","useMWPLexicalClearEditor","useStable"],(function(a,b,c,d,e,f,g){"use strict";e=b("cr:3101")||b("cr:6138");var h=[d("MessengerLexicalActorNode").MessengerLexicalActorNode,e==null?void 0:e.MessengerLexicalCommandNode,d("CometLexicalEmojiNode").EmojiNode];function a(){var a=c("useStable")(function(){return d("Lexical").createEditor({namespace:"MWPEditor",nodes:h.filter(Boolean),onError:function(){},theme:babelHelpers["extends"]({},c("cometLexicalBaseTheme"),{paragraph:"xat24cr xdj266r"})})});c("useMWPLexicalClearEditor")(a);c("useLexicalInitializeEditor__DEPRECATED")(a);return{editor:a}}g.useMWXLexicalEditor=a}),98);
__d("useMWXLexicalHasText",["LexicalText","react"],(function(a,b,c,d,e,f,g){"use strict";var h;c=h||d("react");var i=c.useCallback,j=c.useEffect,k=c.useRef,l=c.useState;function m(a){return a.getEditorState().read(d("LexicalText").$isRootTextContentEmptyCurry(a.isComposing()))}function n(a){var b=l(function(){return!m(a)}),c=b[0],d=b[1];j(function(){return a.registerUpdateListener(function(){d(!m(a))})},[a]);return c}function a(a){var b=a.editor;a=a.initialValue;var c=k(a);return{useHasText:i(function(){var a,d=k((a=c.current)!=null?a:!1);j(function(){d.current=!1},[]);return n(b)||d.current},[b])}}function b(a){var b=a.editor;a=a.initialValue;a=k(a);var c=k((a=a.current)!=null?a:!1);j(function(){c.current=!1},[]);return n(b)||c.current}g.useMWXLexicalHasText_DEPRECATED=a;g.useMWXLexicalHasText=b}),98);
__d("useMWXLexicalOnTypingChanged",["LexicalText","MWXUseLatch","react"],(function(a,b,c,d,e,f,g){"use strict";var h;b=h||d("react");var i=b.useEffect,j=b.useRef;function a(a){var b=a.editor;a=a.onTypingStateChanged;a=d("MWXUseLatch").useLatch(a,!0,5e3);var c=a[0],e=a[1],f=j("");i(function(){var a=function(a){a=a.editorState.read(function(){return d("LexicalText").$rootTextContent()});if(a!==f.current){f.current=a;if(a==="")return e();else return c()}};return b.registerUpdateListener(a)},[c,e,b]);return{}}g["default"]=a}),98);
__d("useMessageRequestDeleteConversation",["Int64Hooks","LSFactory","LSIntEnum","LSOptimisticRemoveThreadStoredProcedure","LSThreadRemoveType","MWChatStateActions","MWChatStateV2.react","MessageRequestsLog","promiseDone","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i;function a(a){var b=(i||(i=c("useReStore")))(),e=d("MWChatStateV2.react").useDispatch();return d("Int64Hooks").useCallbackInt64(function(){d("MessageRequestsLog").logActionConfirmed(a,8),c("promiseDone")(b.runInTransaction(function(b){return c("LSOptimisticRemoveThreadStoredProcedure")(c("LSFactory")(b),{removeType:(h||(h=d("LSIntEnum"))).ofNumber(c("LSThreadRemoveType").DELETE_THREAD),threadKey:a.threadKey})},"readwrite",void 0,void 0,f.id+":42"),function(){return e(d("MWChatStateActions").closeTabByThreadKey(Date.now(),a.threadKey))})},[b,a,e])}g["default"]=a}),98);
__d("useMessageRequestLeaveGroup",["Int64Hooks","LSFactory","LSOptimisticRemoveParticipantsFromGroupThreadStoredProcedure","LSVec","MWPActor.react","promiseDone","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=(h||(h=c("useReStore")))(),e=d("MWPActor.react").useActor();return d("Int64Hooks").useCallbackInt64(function(){c("promiseDone")(b.runInTransaction(function(b){return c("LSOptimisticRemoveParticipantsFromGroupThreadStoredProcedure")(c("LSFactory")(b),{contactIds:c("LSVec").ofArray([e]),threadKey:a})},"readwrite",void 0,void 0,f.id+":28"))},[e,b,a])}g["default"]=a}),98);
__d("useMessengerWebThreadSeenLogging",["CometDebounce","I64","Int64Hooks","MessengerWebUXLogger","logMessengerWebFalcoEvent"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a){var b=a.consistentThreadFbid,e=a.entryPoint,f=a.threadKey,g=a.threadType,i=c("MessengerWebUXLogger").useInteractionLogger(),j=c("CometDebounce")(function(){var a;e!=null&&c("logMessengerWebFalcoEvent")({threadKey:f,threadType:g},"seen_receipt",e);i==null?void 0:i({entryPoint:e,eventName:"read_receipt",extraData:{consistent_thread_fbid:(h||(h=d("I64"))).to_string((a=b)!=null?a:(h||(h=d("I64"))).zero)},threadKey:f,threadType:g})});return d("Int64Hooks").useCallbackInt64(function(){return j()},[j])}g["default"]=a}),98);
__d("useReactionsMAWNoop",[],(function(a,b,c,d,e,f){"use strict";function a(a,b){return[]}f["default"]=a}),66);
__d("useRegisterMAWThreadEvent",["I64","Int64Hooks","LSAuthorityLevel","LSIntEnum","LSMessagingThreadTypeUtil","MAWMiActOnActThreadReady","MAWThreadEvent","Promise","promiseDone","useMWGetOtherUserContact","useMWIsReadReceiptsDisabledForThread","useReStore"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j,k;function a(a){var e=a.authorityLevel,f=a.threadKey,g=a.threadType,l=(j||(j=d("I64"))).ge(e,(k||(k=d("LSIntEnum"))).ofNumber(c("LSAuthorityLevel").AUTHORITATIVE)),m=(i||(i=c("useReStore")))(),n=c("useMWIsReadReceiptsDisabledForThread")(a.threadKey),o=c("useMWGetOtherUserContact")(a.threadKey,a.threadType,["capabilities","capabilities2","contactViewerRelationship","blockedByViewerStatus"]);d("Int64Hooks").useEffectInt64(function(){d("LSMessagingThreadTypeUtil").isArmadilloSecure(g)&&l&&c("promiseDone")(d("MAWMiActOnActThreadReady").onActThreadReady(m.tables,f,"useRegisterMAWThreadEvent",function(a,c){d("MAWThreadEvent").setThreadEventHandler(c,o,n);return(h||(h=b("Promise"))).resolve()}))},[f,g,l,m,n,o])}g["default"]=a}),98);