;/*FB_PKG_DELIM*/

__d("LSCollapseAttachments",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(d){return b.islc(b.sortBy(b.db.table(16).fetch([[[a[0],a[1]]],"idx_attachments_collapsible_id"]),[["timestampMs","DESC"]]),0,b.i64.to_float(b.i64.cast([0,1]))).next().then(function(d,e){var f=d.done;d=d.value;return f?0:(e=d.item,b.sequence([function(d){return c[0]=e.messageId,b.forEach(b.db.table(16).fetch([[[a[0],a[1],{lt:c[0]}],[a[0],a[1],{gt:c[0]}]],"idx_attachments_collapsible_id"]),function(a){var c=a.item;return b.forEach(b.filter(b.db.table(12).fetch([[[c.threadKey,c.timestampMs,c.messageId]]]),function(a){return b.i64.eq(a.threadKey,c.threadKey)&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(a.timestampMs,c.timestampMs)&&a.messageId===c.messageId}),function(a){var b=a.update;a.item;return b({isCollapsed:!0})})})},function(a){return b.forEach(b.filter(b.db.table(12).fetch([[[e.threadKey,e.timestampMs,c[0]]]]),function(a){return b.i64.eq(a.threadKey,e.threadKey)&&b.i64.eq(b.i64.cast([0,0]),b.i64.cast([0,0]))&&b.i64.eq(a.timestampMs,e.timestampMs)&&a.messageId===c[0]}),function(a){var b=a.update;a.item;return b({isCollapsed:!1})})}]))})},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxCollapseAttachmentsStoredProcedure";e.exports=a}),null);
__d("LSFetchBanners",["LSIssueNewTask"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return d[0]=new c.Map(),d[0].set("thread_key",a[0]),d[1]=c.toJSON(d[0]),c.storedProcedure(b("LSIssueNewTask"),"in_thread_banner_fetch_activity_banners_queue",c.i64.cast([0,72]),d[1],void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]),void 0,void 0,c.i64.cast([0,0]),c.i64.cast([0,0]))},function(a){return c.resolve(e)}])}a.__sproc_name__="LSInThreadBannerFetchBannersStoredProcedure";e.exports=a}),null);
__d("LSGetFirstAvailableAttachmentCTAID",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[],d=[];return b.sequence([function(a){return b.sequence([function(a){return b.db.table(19).fetchDesc().next().then(function(a,d){var e=a.done;a=a.value;return e?c[0]=b.i64.cast([0,1]):(d=a.item,c[0]=b.i64.add(d.ctaId,b.i64.cast([0,1])))})},function(a){return d[0]=c[0]}])},function(a){return b.resolve(d)}])}a.__sproc_name__="LSMailboxGetFirstAvailableAttachmentCTAIDStoredProcedure";e.exports=a}),null);
__d("LSInsertAttachmentItem",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.db.table(18).add({attachmentFbid:a[0],attachmentIndex:a[1],threadKey:a[2],messageId:a[4],defaultActionEnableExtensions:a[31],originalPageSenderId:a[7],titleText:a[8],subtitleText:a[9],bodyText:a[12],playableUrl:a[13],playableUrlFallback:a[14],playableUrlExpirationTimestampMs:a[15],playableUrlMimeType:a[16],dashManifest:a[17],previewUrl:a[18],previewUrlFallback:a[19],previewUrlExpirationTimestampMs:a[20],previewUrlMimeType:a[21],previewWidth:a[22],previewHeight:a[23],imageUrl:a[24],defaultCtaId:a[25],defaultCtaTitle:a[26],defaultCtaType:a[27],defaultButtonType:a[29],defaultActionUrl:a[30],defaultWebviewHeightRatio:a[33],attachmentCta1Id:a[35],cta1Title:a[36],cta1IconType:a[37],cta1Type:a[38],attachmentCta2Id:a[40],cta2Title:a[41],cta2IconType:a[42],cta2Type:a[43],attachmentCta3Id:a[45],cta3Title:a[46],cta3IconType:a[47],cta3Type:a[48],faviconUrl:a[49],faviconUrlFallback:a[50],faviconUrlExpirationTimestampMs:a[51],previewUrlLarge:a[52]})},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxInsertAttachmentItemStoredProcedure";e.exports=a}),null);
__d("LSInsertRollCallContribution",[],(function(a,b,c,d,e,f){function a(){var a=arguments,b=a[a.length-1],c=[];return b.sequence([function(c){return b.sequence([function(c){return b.forEach(b.filter(b.db.table(255).fetch([[[a[0],a[1],a[2],a[3]]],"optimistic"]),function(c){return b.i64.eq(c.rollCallContributionId,a[0])&&b.i64.eq(c.rollCallId,a[1])&&c.messageId===a[2]&&b.i64.eq(c.messageTimestampMs,a[3])&&b.i64.lt(c.authorityLevel,a[23])}),function(a){return a["delete"]()})},function(c){return b.db.table(255).add({rollCallContributionId:a[0],rollCallId:a[1],messageId:a[2],messageTimestampMs:a[3],threadKey:a[4],primaryMediaUrl:a[5],primaryMediaUrlFallback:a[6],primaryMediaExpiryMs:a[7],primaryMediaWidth:a[8],primaryMediaHeight:a[9],primaryMediaMimeType:a[10],previewMediaUrl:a[11],previewMediaUrlFallback:a[12],previewMediaExpiryMs:a[13],previewMediaWidth:a[14],previewMediaHeight:a[15],previewMediaMimeType:a[16],authorityLevel:a[23],contributorId:a[17],offlineThreadingId:a[18],blurOverride:a[19],contributionSource:a[20],contributionType:a[21],content:a[22]})}])},function(a){return b.resolve(c)}])}a.__sproc_name__="LSMailboxInsertRollCallContributionStoredProcedure";e.exports=a}),null);
__d("LSWriteCTAIdToThreadsTable",["LSGetFirstAvailableAttachmentCTAID"],(function(a,b,c,d,e,f){function a(){var a=arguments,c=a[a.length-1],d=[],e=[];return c.sequence([function(e){return a[1]===void 0?c.forEach(c.filter(c.db.table(9).fetch([[[a[0]]]]),function(b){return c.i64.eq(b.threadKey,a[0])&&(c.i64.neq(b.lastMessageCtaId,void 0)||b.lastMessageCtaType!==void 0)}),function(b){var c=b.update;b.item;return c({lastMessageCtaId:void 0,lastMessageCtaType:void 0,lastMessageCtaTimestampMs:a[2]})}):c.i64.neq(a[2],void 0)?c.sequence([function(b){return c.db.table(9).fetch([[[a[0]]]]).next().then(function(a,b){var e=a.done;a=a.value;return e?d[0]=c.i64.cast([0,0]):(b=a.item,d[0]=b.lastActivityTimestampMs)})},function(e){return c.i64.ge(a[2],d[0])?c.sequence([function(a){return c.storedProcedure(b("LSGetFirstAvailableAttachmentCTAID")).then(function(a){return a=a,d[2]=a[0],a})},function(b){return c.forEach(c.db.table(9).fetch([[[a[0]]]]),function(b){var c=b.update;b.item;return c({lastMessageCtaId:d[2],lastMessageCtaType:a[1],lastMessageCtaTimestampMs:a[2]})})}]):c.resolve(0)}]):c.resolve()},function(a){return c.resolve(e)}])}a.__sproc_name__="LSMailboxWriteCTAIdToThreadsTableStoredProcedure";e.exports=a}),null);
__d("LsThreadType",[],(function(a,b,c,d,e,f){a=Object.freeze({COMMUNITY_FOLDER:17,COMMUNITY_GROUP:18,COMMUNITY_GROUP_UNJOINED:19,COMMUNITY_CHANNEL_CATEGORY:20,COMMUNITY_PRIVATE_HIDDEN_JOINED_THREAD:21,COMMUNITY_PRIVATE_HIDDEN_UNJOINED_THREAD:22,COMMUNITY_BROADCAST_JOINED_THREAD:23,COMMUNITY_BROADCAST_UNJOINED_THREAD:24,COMMUNITY_GROUP_INVITED_UNJOINED:25,COMMUNITY_SUB_THREAD:26,DISCOVERABLE_PUBLIC_CHAT:150,DISCOVERABLE_PUBLIC_CHAT_UNJOINED:151,DISCOVERABLE_PUBLIC_BROADCAST_CHAT:152,DISCOVERABLE_PUBLIC_BROADCAST_CHAT_UNJOINED:153,DISCOVERABLE_PUBLIC_CHAT_V2:154,DISCOVERABLE_PUBLIC_CHAT_V2_UNJOINED:155,ONE_TO_ONE:1,GROUP:2,ROOM:3,MONTAGE:4,MARKETPLACE:5,FOLDER:6,TINCAN_ONE_TO_ONE:7,TINCAN_GROUP_DISAPPEARING:8,CARRIER_MESSAGING_ONE_TO_ONE:10,CARRIER_MESSAGING_GROUP:11,TINCAN_ONE_TO_ONE_DISAPPEARING:13,PAGE_FOLLOW_UP:14,SECURE_MESSAGE_OVER_WA_ONE_TO_ONE:15,SECURE_MESSAGE_OVER_WA_GROUP:16,PINNED:101,LWG:102,XAC_GROUP:200,AI_BOT:201,UNKNOWN:0,SELF_THREAD:12,ARMADILLO_ONE_TO_ONE:-1,ARMADILLO_GROUP:-2});f["default"]=a}),66);
__d("MAWSecureComposerText",["Lexical","LexicalText","MAWJids","MessengerLexicalEntityTextNode"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return a.read(function(){var a=d("Lexical").$getRoot().getFirstChild();return a instanceof d("Lexical").ElementNode?a.getChildren().reduce(function(a,b){if(d("MessengerLexicalEntityTextNode").isMessengerLexicalEntityTextNode(b)){var c=b.getEntity();return a+("@"+d("MAWJids").toUserJid(c.id))}return a+b.getTextContent()},""):d("LexicalText").$rootTextContent()})}g.getTextFromEditorState=a}),98);
__d("MDSLockSvgIcon.react",["MDSSvgIcon.react","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react");function a(a){return i.jsx(c("MDSSvgIcon.react"),babelHelpers["extends"]({},a,{children:i.jsx("path",{clipRule:"evenodd",d:"M12.25 15.5a.25.25 0 00.25-.25V12a5.5 5.5 0 1111 0v3.25c0 .138.112.25.25.25h.75a2 2 0 012 2v9a2 2 0 01-2 2h-13a2 2 0 01-2-2v-9a2 2 0 012-2h.75zm3 0h5.5a.25.25 0 00.25-.25V12a3 3 0 10-6 0v3.25c0 .138.112.25.25.25z",fillRule:"evenodd"})}))}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("MessengerIntent",["WebStorage","justknobx"],(function(a,b,c,d,e,f,g){"use strict";var h,i="mw_sent_message";function j(){return c("justknobx")._("1630")}function a(){(h||(h=c("WebStorage"))).setItemGuarded(h.getLocalStorage(),i,String(Date.now()))}function b(){var a=(h||(h=c("WebStorage"))).getLocalStorage();return Date.now()-Number(a==null?void 0:a.getItem(i))<j()}g.sentMessage=a;g.hasSentMessagesRecently=b}),98);
__d("MWLSLogSend",["CometHeroLogging","I64","MWChatInteraction","MWSharedMsgLogUtils","MessengerIntent"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b,e){var f=e.isCommunityEvent,g=e.isMessageRequest,i=e.source;e=e.threadType;var j=c("CometHeroLogging").genHeroInteractionUUIDAndMarkStart(a.getTraceId());d("MWChatInteraction").set(b,j);j={entrypoint:d("MWSharedMsgLogUtils").getEntrypointAnnotation(i),is_community_event:f===!0?"true":"false",is_message_request:g===!0?"true":"false",thread_type:e==null?"unknown":(h||(h=d("I64"))).to_string(e)};Object.entries(j).forEach(function(b){var c=b[0];b=b[1];a.addMetadata(c,String(b))});d("MessengerIntent").sentMessage();return a.onComplete(function(){delete d("MWChatInteraction").interactions[b]})}g.logSentHeroInteraction=a}),98);
__d("Popup",["isTruthy"],(function(a,b,c,d,e,f,g){function a(a,b,d,e){var f=[];c("isTruthy")(b)&&f.push("width="+b);c("isTruthy")(d)&&f.push("height="+d);var g=document.body;if(g!=null&&b!=null&&b!==0&&d!=null&&d!==0){var h="screenX"in window?window.screenX:window.screenLeft,i="screenY"in window?window.screenY:window.screenTop,j="outerWidth"in window?window.outerWidth:g.clientWidth;g="outerHeight"in window?window.outerHeight:g.clientHeight-22;h=Math.floor(h+(j-b)/2);j=Math.floor(i+(g-d)/2.5);f.push("left="+h);f.push("top="+j)}f.push("scrollbars");return window.open(a,e!=null&&e!==""?e:"_blank",f.join(","))}g.open=a}),98);
__d("WebGraphQLLegacyHelper",["invariant"],(function(a,b,c,d,e,f,g,h){"use strict";function a(a){var b=a.controller,c=a.docID,d=a.queryID,e=a.variables;a=a.legacyResponseFormat;c!=d&&(c||d)!=null||h(0,5819,c,d);b=b.getURIBuilder();d?b.setFBID("query_id",d):b.setFBID("doc_id",c);a&&b.setBool("legacy_response_format",!0);e&&b.setString("variables",JSON.stringify(e));return b.getURI()}g.getURI=a}),98);
__d("flattenArray",[],(function(a,b,c,d,e,f){function a(a){var b=[];g(a,b);return b}function g(a,b){var c=a.length,d=0;while(c--){var e=a[d++];Array.isArray(e)?g(e,b):b.push(e)}}f["default"]=a}),66);